var CC=Object.defineProperty;var fx=e=>{throw TypeError(e)};var SC=(e,t,n)=>t in e?CC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ui=(e,t,n)=>SC(e,typeof t!="symbol"?t+"":t,n),em=(e,t,n)=>t.has(e)||fx("Cannot "+n);var xe=(e,t,n)=>(em(e,t,"read from private field"),n?n.call(e):t.get(e)),yt=(e,t,n)=>t.has(e)?fx("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),rt=(e,t,n,s)=>(em(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),Sn=(e,t,n)=>(em(e,t,"access private method"),n);var jc=(e,t,n,s)=>({set _(i){rt(e,t,i,n)},get _(){return xe(e,t,s)}});import{r as h,a as Rw,R as Fe,u as St,L as Ve,b as kf,c as kc,d as or,e as lr,f as Rd,g as wu,h as Lw,i as Ut,j as EC,N as $o,B as TC}from"./vendor-D9m8tvnb.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Mw={exports:{}},ju={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IC=h,PC=Symbol.for("react.element"),AC=Symbol.for("react.fragment"),RC=Object.prototype.hasOwnProperty,LC=IC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MC={key:!0,ref:!0,__self:!0,__source:!0};function Dw(e,t,n){var s,i={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)RC.call(t,s)&&!MC.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)i[s]===void 0&&(i[s]=t[s]);return{$$typeof:PC,type:e,key:a,ref:o,props:i,_owner:LC.current}}ju.Fragment=AC;ju.jsx=Dw;ju.jsxs=Dw;Mw.exports=ju;var r=Mw.exports,$w={},ku={};ku.byteLength=OC;ku.toByteArray=_C;ku.fromByteArray=UC;var Wr=[],hr=[],DC=typeof Uint8Array<"u"?Uint8Array:Array,tm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var fa=0,$C=tm.length;fa<$C;++fa)Wr[fa]=tm[fa],hr[tm.charCodeAt(fa)]=fa;hr[45]=62;hr[95]=63;function Ow(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var s=n===t?0:4-n%4;return[n,s]}function OC(e){var t=Ow(e),n=t[0],s=t[1];return(n+s)*3/4-s}function BC(e,t,n){return(t+n)*3/4-n}function _C(e){var t,n=Ow(e),s=n[0],i=n[1],a=new DC(BC(e,s,i)),o=0,l=i>0?s-4:s,c;for(c=0;c<l;c+=4)t=hr[e.charCodeAt(c)]<<18|hr[e.charCodeAt(c+1)]<<12|hr[e.charCodeAt(c+2)]<<6|hr[e.charCodeAt(c+3)],a[o++]=t>>16&255,a[o++]=t>>8&255,a[o++]=t&255;return i===2&&(t=hr[e.charCodeAt(c)]<<2|hr[e.charCodeAt(c+1)]>>4,a[o++]=t&255),i===1&&(t=hr[e.charCodeAt(c)]<<10|hr[e.charCodeAt(c+1)]<<4|hr[e.charCodeAt(c+2)]>>2,a[o++]=t>>8&255,a[o++]=t&255),a}function FC(e){return Wr[e>>18&63]+Wr[e>>12&63]+Wr[e>>6&63]+Wr[e&63]}function zC(e,t,n){for(var s,i=[],a=t;a<n;a+=3)s=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),i.push(FC(s));return i.join("")}function UC(e){for(var t,n=e.length,s=n%3,i=[],a=16383,o=0,l=n-s;o<l;o+=a)i.push(zC(e,o,o+a>l?l:o+a));return s===1?(t=e[n-1],i.push(Wr[t>>2]+Wr[t<<4&63]+"==")):s===2&&(t=(e[n-2]<<8)+e[n-1],i.push(Wr[t>>10]+Wr[t>>4&63]+Wr[t<<2&63]+"=")),i.join("")}var mg={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */mg.read=function(e,t,n,s,i){var a,o,l=i*8-s-1,c=(1<<l)-1,d=c>>1,u=-7,m=n?i-1:0,f=n?-1:1,p=e[t+m];for(m+=f,a=p&(1<<-u)-1,p>>=-u,u+=l;u>0;a=a*256+e[t+m],m+=f,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=s;u>0;o=o*256+e[t+m],m+=f,u-=8);if(a===0)a=1-d;else{if(a===c)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,s),a=a-d}return(p?-1:1)*o*Math.pow(2,a-s)};mg.write=function(e,t,n,s,i,a){var o,l,c,d=a*8-i-1,u=(1<<d)-1,m=u>>1,f=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=s?0:a-1,x=s?1:-1,g=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+m>=1?t+=f/c:t+=f*Math.pow(2,1-m),t*c>=2&&(o++,c/=2),o+m>=u?(l=0,o=u):o+m>=1?(l=(t*c-1)*Math.pow(2,i),o=o+m):(l=t*Math.pow(2,m-1)*Math.pow(2,i),o=0));i>=8;e[n+p]=l&255,p+=x,l/=256,i-=8);for(o=o<<i|l,d+=i;d>0;e[n+p]=o&255,p+=x,o/=256,d-=8);e[n+p-x]|=g*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=ku,n=mg,s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=k,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,l.TYPED_ARRAY_SUPPORT=a(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const I=new Uint8Array(1),j={foo:function(){return 42}};return Object.setPrototypeOf(j,Uint8Array.prototype),Object.setPrototypeOf(I,j),I.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function o(I){if(I>i)throw new RangeError('The value "'+I+'" is invalid for option "size"');const j=new Uint8Array(I);return Object.setPrototypeOf(j,l.prototype),j}function l(I,j,S){if(typeof I=="number"){if(typeof j=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(I)}return c(I,j,S)}l.poolSize=8192;function c(I,j,S){if(typeof I=="string")return f(I,j);if(ArrayBuffer.isView(I))return x(I);if(I==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I);if(Pe(I,ArrayBuffer)||I&&Pe(I.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Pe(I,SharedArrayBuffer)||I&&Pe(I.buffer,SharedArrayBuffer)))return g(I,j,S);if(typeof I=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const F=I.valueOf&&I.valueOf();if(F!=null&&F!==I)return l.from(F,j,S);const U=b(I);if(U)return U;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof I[Symbol.toPrimitive]=="function")return l.from(I[Symbol.toPrimitive]("string"),j,S);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I)}l.from=function(I,j,S){return c(I,j,S)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function d(I){if(typeof I!="number")throw new TypeError('"size" argument must be of type number');if(I<0)throw new RangeError('The value "'+I+'" is invalid for option "size"')}function u(I,j,S){return d(I),I<=0?o(I):j!==void 0?typeof S=="string"?o(I).fill(j,S):o(I).fill(j):o(I)}l.alloc=function(I,j,S){return u(I,j,S)};function m(I){return d(I),o(I<0?0:w(I)|0)}l.allocUnsafe=function(I){return m(I)},l.allocUnsafeSlow=function(I){return m(I)};function f(I,j){if((typeof j!="string"||j==="")&&(j="utf8"),!l.isEncoding(j))throw new TypeError("Unknown encoding: "+j);const S=v(I,j)|0;let F=o(S);const U=F.write(I,j);return U!==S&&(F=F.slice(0,U)),F}function p(I){const j=I.length<0?0:w(I.length)|0,S=o(j);for(let F=0;F<j;F+=1)S[F]=I[F]&255;return S}function x(I){if(Pe(I,Uint8Array)){const j=new Uint8Array(I);return g(j.buffer,j.byteOffset,j.byteLength)}return p(I)}function g(I,j,S){if(j<0||I.byteLength<j)throw new RangeError('"offset" is outside of buffer bounds');if(I.byteLength<j+(S||0))throw new RangeError('"length" is outside of buffer bounds');let F;return j===void 0&&S===void 0?F=new Uint8Array(I):S===void 0?F=new Uint8Array(I,j):F=new Uint8Array(I,j,S),Object.setPrototypeOf(F,l.prototype),F}function b(I){if(l.isBuffer(I)){const j=w(I.length)|0,S=o(j);return S.length===0||I.copy(S,0,0,j),S}if(I.length!==void 0)return typeof I.length!="number"||vt(I.length)?o(0):p(I);if(I.type==="Buffer"&&Array.isArray(I.data))return p(I.data)}function w(I){if(I>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return I|0}function k(I){return+I!=I&&(I=0),l.alloc(+I)}l.isBuffer=function(j){return j!=null&&j._isBuffer===!0&&j!==l.prototype},l.compare=function(j,S){if(Pe(j,Uint8Array)&&(j=l.from(j,j.offset,j.byteLength)),Pe(S,Uint8Array)&&(S=l.from(S,S.offset,S.byteLength)),!l.isBuffer(j)||!l.isBuffer(S))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(j===S)return 0;let F=j.length,U=S.length;for(let q=0,Q=Math.min(F,U);q<Q;++q)if(j[q]!==S[q]){F=j[q],U=S[q];break}return F<U?-1:U<F?1:0},l.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(j,S){if(!Array.isArray(j))throw new TypeError('"list" argument must be an Array of Buffers');if(j.length===0)return l.alloc(0);let F;if(S===void 0)for(S=0,F=0;F<j.length;++F)S+=j[F].length;const U=l.allocUnsafe(S);let q=0;for(F=0;F<j.length;++F){let Q=j[F];if(Pe(Q,Uint8Array))q+Q.length>U.length?(l.isBuffer(Q)||(Q=l.from(Q)),Q.copy(U,q)):Uint8Array.prototype.set.call(U,Q,q);else if(l.isBuffer(Q))Q.copy(U,q);else throw new TypeError('"list" argument must be an Array of Buffers');q+=Q.length}return U};function v(I,j){if(l.isBuffer(I))return I.length;if(ArrayBuffer.isView(I)||Pe(I,ArrayBuffer))return I.byteLength;if(typeof I!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof I);const S=I.length,F=arguments.length>2&&arguments[2]===!0;if(!F&&S===0)return 0;let U=!1;for(;;)switch(j){case"ascii":case"latin1":case"binary":return S;case"utf8":case"utf-8":return Ge(I).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S*2;case"hex":return S>>>1;case"base64":return Xe(I).length;default:if(U)return F?-1:Ge(I).length;j=(""+j).toLowerCase(),U=!0}}l.byteLength=v;function N(I,j,S){let F=!1;if((j===void 0||j<0)&&(j=0),j>this.length||((S===void 0||S>this.length)&&(S=this.length),S<=0)||(S>>>=0,j>>>=0,S<=j))return"";for(I||(I="utf8");;)switch(I){case"hex":return te(this,j,S);case"utf8":case"utf-8":return A(this,j,S);case"ascii":return ie(this,j,S);case"latin1":case"binary":return X(this,j,S);case"base64":return L(this,j,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,j,S);default:if(F)throw new TypeError("Unknown encoding: "+I);I=(I+"").toLowerCase(),F=!0}}l.prototype._isBuffer=!0;function C(I,j,S){const F=I[j];I[j]=I[S],I[S]=F}l.prototype.swap16=function(){const j=this.length;if(j%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let S=0;S<j;S+=2)C(this,S,S+1);return this},l.prototype.swap32=function(){const j=this.length;if(j%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let S=0;S<j;S+=4)C(this,S,S+3),C(this,S+1,S+2);return this},l.prototype.swap64=function(){const j=this.length;if(j%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let S=0;S<j;S+=8)C(this,S,S+7),C(this,S+1,S+6),C(this,S+2,S+5),C(this,S+3,S+4);return this},l.prototype.toString=function(){const j=this.length;return j===0?"":arguments.length===0?A(this,0,j):N.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(j){if(!l.isBuffer(j))throw new TypeError("Argument must be a Buffer");return this===j?!0:l.compare(this,j)===0},l.prototype.inspect=function(){let j="";const S=e.INSPECT_MAX_BYTES;return j=this.toString("hex",0,S).replace(/(.{2})/g,"$1 ").trim(),this.length>S&&(j+=" ... "),"<Buffer "+j+">"},s&&(l.prototype[s]=l.prototype.inspect),l.prototype.compare=function(j,S,F,U,q){if(Pe(j,Uint8Array)&&(j=l.from(j,j.offset,j.byteLength)),!l.isBuffer(j))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof j);if(S===void 0&&(S=0),F===void 0&&(F=j?j.length:0),U===void 0&&(U=0),q===void 0&&(q=this.length),S<0||F>j.length||U<0||q>this.length)throw new RangeError("out of range index");if(U>=q&&S>=F)return 0;if(U>=q)return-1;if(S>=F)return 1;if(S>>>=0,F>>>=0,U>>>=0,q>>>=0,this===j)return 0;let Q=q-U,be=F-S;const ge=Math.min(Q,be),oe=this.slice(U,q),he=j.slice(S,F);for(let fe=0;fe<ge;++fe)if(oe[fe]!==he[fe]){Q=oe[fe],be=he[fe];break}return Q<be?-1:be<Q?1:0};function T(I,j,S,F,U){if(I.length===0)return-1;if(typeof S=="string"?(F=S,S=0):S>2147483647?S=2147483647:S<-2147483648&&(S=-2147483648),S=+S,vt(S)&&(S=U?0:I.length-1),S<0&&(S=I.length+S),S>=I.length){if(U)return-1;S=I.length-1}else if(S<0)if(U)S=0;else return-1;if(typeof j=="string"&&(j=l.from(j,F)),l.isBuffer(j))return j.length===0?-1:E(I,j,S,F,U);if(typeof j=="number")return j=j&255,typeof Uint8Array.prototype.indexOf=="function"?U?Uint8Array.prototype.indexOf.call(I,j,S):Uint8Array.prototype.lastIndexOf.call(I,j,S):E(I,[j],S,F,U);throw new TypeError("val must be string, number or Buffer")}function E(I,j,S,F,U){let q=1,Q=I.length,be=j.length;if(F!==void 0&&(F=String(F).toLowerCase(),F==="ucs2"||F==="ucs-2"||F==="utf16le"||F==="utf-16le")){if(I.length<2||j.length<2)return-1;q=2,Q/=2,be/=2,S/=2}function ge(he,fe){return q===1?he[fe]:he.readUInt16BE(fe*q)}let oe;if(U){let he=-1;for(oe=S;oe<Q;oe++)if(ge(I,oe)===ge(j,he===-1?0:oe-he)){if(he===-1&&(he=oe),oe-he+1===be)return he*q}else he!==-1&&(oe-=oe-he),he=-1}else for(S+be>Q&&(S=Q-be),oe=S;oe>=0;oe--){let he=!0;for(let fe=0;fe<be;fe++)if(ge(I,oe+fe)!==ge(j,fe)){he=!1;break}if(he)return oe}return-1}l.prototype.includes=function(j,S,F){return this.indexOf(j,S,F)!==-1},l.prototype.indexOf=function(j,S,F){return T(this,j,S,F,!0)},l.prototype.lastIndexOf=function(j,S,F){return T(this,j,S,F,!1)};function P(I,j,S,F){S=Number(S)||0;const U=I.length-S;F?(F=Number(F),F>U&&(F=U)):F=U;const q=j.length;F>q/2&&(F=q/2);let Q;for(Q=0;Q<F;++Q){const be=parseInt(j.substr(Q*2,2),16);if(vt(be))return Q;I[S+Q]=be}return Q}function R(I,j,S,F){return He(Ge(j,I.length-S),I,S,F)}function y(I,j,S,F){return He(et(j),I,S,F)}function O(I,j,S,F){return He(Xe(j),I,S,F)}function _(I,j,S,F){return He(lt(j,I.length-S),I,S,F)}l.prototype.write=function(j,S,F,U){if(S===void 0)U="utf8",F=this.length,S=0;else if(F===void 0&&typeof S=="string")U=S,F=this.length,S=0;else if(isFinite(S))S=S>>>0,isFinite(F)?(F=F>>>0,U===void 0&&(U="utf8")):(U=F,F=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const q=this.length-S;if((F===void 0||F>q)&&(F=q),j.length>0&&(F<0||S<0)||S>this.length)throw new RangeError("Attempt to write outside buffer bounds");U||(U="utf8");let Q=!1;for(;;)switch(U){case"hex":return P(this,j,S,F);case"utf8":case"utf-8":return R(this,j,S,F);case"ascii":case"latin1":case"binary":return y(this,j,S,F);case"base64":return O(this,j,S,F);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,j,S,F);default:if(Q)throw new TypeError("Unknown encoding: "+U);U=(""+U).toLowerCase(),Q=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(I,j,S){return j===0&&S===I.length?t.fromByteArray(I):t.fromByteArray(I.slice(j,S))}function A(I,j,S){S=Math.min(I.length,S);const F=[];let U=j;for(;U<S;){const q=I[U];let Q=null,be=q>239?4:q>223?3:q>191?2:1;if(U+be<=S){let ge,oe,he,fe;switch(be){case 1:q<128&&(Q=q);break;case 2:ge=I[U+1],(ge&192)===128&&(fe=(q&31)<<6|ge&63,fe>127&&(Q=fe));break;case 3:ge=I[U+1],oe=I[U+2],(ge&192)===128&&(oe&192)===128&&(fe=(q&15)<<12|(ge&63)<<6|oe&63,fe>2047&&(fe<55296||fe>57343)&&(Q=fe));break;case 4:ge=I[U+1],oe=I[U+2],he=I[U+3],(ge&192)===128&&(oe&192)===128&&(he&192)===128&&(fe=(q&15)<<18|(ge&63)<<12|(oe&63)<<6|he&63,fe>65535&&fe<1114112&&(Q=fe))}}Q===null?(Q=65533,be=1):Q>65535&&(Q-=65536,F.push(Q>>>10&1023|55296),Q=56320|Q&1023),F.push(Q),U+=be}return z(F)}const M=4096;function z(I){const j=I.length;if(j<=M)return String.fromCharCode.apply(String,I);let S="",F=0;for(;F<j;)S+=String.fromCharCode.apply(String,I.slice(F,F+=M));return S}function ie(I,j,S){let F="";S=Math.min(I.length,S);for(let U=j;U<S;++U)F+=String.fromCharCode(I[U]&127);return F}function X(I,j,S){let F="";S=Math.min(I.length,S);for(let U=j;U<S;++U)F+=String.fromCharCode(I[U]);return F}function te(I,j,S){const F=I.length;(!j||j<0)&&(j=0),(!S||S<0||S>F)&&(S=F);let U="";for(let q=j;q<S;++q)U+=Ye[I[q]];return U}function B(I,j,S){const F=I.slice(j,S);let U="";for(let q=0;q<F.length-1;q+=2)U+=String.fromCharCode(F[q]+F[q+1]*256);return U}l.prototype.slice=function(j,S){const F=this.length;j=~~j,S=S===void 0?F:~~S,j<0?(j+=F,j<0&&(j=0)):j>F&&(j=F),S<0?(S+=F,S<0&&(S=0)):S>F&&(S=F),S<j&&(S=j);const U=this.subarray(j,S);return Object.setPrototypeOf(U,l.prototype),U};function H(I,j,S){if(I%1!==0||I<0)throw new RangeError("offset is not uint");if(I+j>S)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(j,S,F){j=j>>>0,S=S>>>0,F||H(j,S,this.length);let U=this[j],q=1,Q=0;for(;++Q<S&&(q*=256);)U+=this[j+Q]*q;return U},l.prototype.readUintBE=l.prototype.readUIntBE=function(j,S,F){j=j>>>0,S=S>>>0,F||H(j,S,this.length);let U=this[j+--S],q=1;for(;S>0&&(q*=256);)U+=this[j+--S]*q;return U},l.prototype.readUint8=l.prototype.readUInt8=function(j,S){return j=j>>>0,S||H(j,1,this.length),this[j]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(j,S){return j=j>>>0,S||H(j,2,this.length),this[j]|this[j+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(j,S){return j=j>>>0,S||H(j,2,this.length),this[j]<<8|this[j+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(j,S){return j=j>>>0,S||H(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+this[j+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(j,S){return j=j>>>0,S||H(j,4,this.length),this[j]*16777216+(this[j+1]<<16|this[j+2]<<8|this[j+3])},l.prototype.readBigUInt64LE=ce(function(j){j=j>>>0,ae(j,"offset");const S=this[j],F=this[j+7];(S===void 0||F===void 0)&&de(j,this.length-8);const U=S+this[++j]*2**8+this[++j]*2**16+this[++j]*2**24,q=this[++j]+this[++j]*2**8+this[++j]*2**16+F*2**24;return BigInt(U)+(BigInt(q)<<BigInt(32))}),l.prototype.readBigUInt64BE=ce(function(j){j=j>>>0,ae(j,"offset");const S=this[j],F=this[j+7];(S===void 0||F===void 0)&&de(j,this.length-8);const U=S*2**24+this[++j]*2**16+this[++j]*2**8+this[++j],q=this[++j]*2**24+this[++j]*2**16+this[++j]*2**8+F;return(BigInt(U)<<BigInt(32))+BigInt(q)}),l.prototype.readIntLE=function(j,S,F){j=j>>>0,S=S>>>0,F||H(j,S,this.length);let U=this[j],q=1,Q=0;for(;++Q<S&&(q*=256);)U+=this[j+Q]*q;return q*=128,U>=q&&(U-=Math.pow(2,8*S)),U},l.prototype.readIntBE=function(j,S,F){j=j>>>0,S=S>>>0,F||H(j,S,this.length);let U=S,q=1,Q=this[j+--U];for(;U>0&&(q*=256);)Q+=this[j+--U]*q;return q*=128,Q>=q&&(Q-=Math.pow(2,8*S)),Q},l.prototype.readInt8=function(j,S){return j=j>>>0,S||H(j,1,this.length),this[j]&128?(255-this[j]+1)*-1:this[j]},l.prototype.readInt16LE=function(j,S){j=j>>>0,S||H(j,2,this.length);const F=this[j]|this[j+1]<<8;return F&32768?F|4294901760:F},l.prototype.readInt16BE=function(j,S){j=j>>>0,S||H(j,2,this.length);const F=this[j+1]|this[j]<<8;return F&32768?F|4294901760:F},l.prototype.readInt32LE=function(j,S){return j=j>>>0,S||H(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},l.prototype.readInt32BE=function(j,S){return j=j>>>0,S||H(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},l.prototype.readBigInt64LE=ce(function(j){j=j>>>0,ae(j,"offset");const S=this[j],F=this[j+7];(S===void 0||F===void 0)&&de(j,this.length-8);const U=this[j+4]+this[j+5]*2**8+this[j+6]*2**16+(F<<24);return(BigInt(U)<<BigInt(32))+BigInt(S+this[++j]*2**8+this[++j]*2**16+this[++j]*2**24)}),l.prototype.readBigInt64BE=ce(function(j){j=j>>>0,ae(j,"offset");const S=this[j],F=this[j+7];(S===void 0||F===void 0)&&de(j,this.length-8);const U=(S<<24)+this[++j]*2**16+this[++j]*2**8+this[++j];return(BigInt(U)<<BigInt(32))+BigInt(this[++j]*2**24+this[++j]*2**16+this[++j]*2**8+F)}),l.prototype.readFloatLE=function(j,S){return j=j>>>0,S||H(j,4,this.length),n.read(this,j,!0,23,4)},l.prototype.readFloatBE=function(j,S){return j=j>>>0,S||H(j,4,this.length),n.read(this,j,!1,23,4)},l.prototype.readDoubleLE=function(j,S){return j=j>>>0,S||H(j,8,this.length),n.read(this,j,!0,52,8)},l.prototype.readDoubleBE=function(j,S){return j=j>>>0,S||H(j,8,this.length),n.read(this,j,!1,52,8)};function K(I,j,S,F,U,q){if(!l.isBuffer(I))throw new TypeError('"buffer" argument must be a Buffer instance');if(j>U||j<q)throw new RangeError('"value" argument is out of bounds');if(S+F>I.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(j,S,F,U){if(j=+j,S=S>>>0,F=F>>>0,!U){const be=Math.pow(2,8*F)-1;K(this,j,S,F,be,0)}let q=1,Q=0;for(this[S]=j&255;++Q<F&&(q*=256);)this[S+Q]=j/q&255;return S+F},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(j,S,F,U){if(j=+j,S=S>>>0,F=F>>>0,!U){const be=Math.pow(2,8*F)-1;K(this,j,S,F,be,0)}let q=F-1,Q=1;for(this[S+q]=j&255;--q>=0&&(Q*=256);)this[S+q]=j/Q&255;return S+F},l.prototype.writeUint8=l.prototype.writeUInt8=function(j,S,F){return j=+j,S=S>>>0,F||K(this,j,S,1,255,0),this[S]=j&255,S+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(j,S,F){return j=+j,S=S>>>0,F||K(this,j,S,2,65535,0),this[S]=j&255,this[S+1]=j>>>8,S+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(j,S,F){return j=+j,S=S>>>0,F||K(this,j,S,2,65535,0),this[S]=j>>>8,this[S+1]=j&255,S+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(j,S,F){return j=+j,S=S>>>0,F||K(this,j,S,4,4294967295,0),this[S+3]=j>>>24,this[S+2]=j>>>16,this[S+1]=j>>>8,this[S]=j&255,S+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(j,S,F){return j=+j,S=S>>>0,F||K(this,j,S,4,4294967295,0),this[S]=j>>>24,this[S+1]=j>>>16,this[S+2]=j>>>8,this[S+3]=j&255,S+4};function $(I,j,S,F,U){ee(j,F,U,I,S,7);let q=Number(j&BigInt(4294967295));I[S++]=q,q=q>>8,I[S++]=q,q=q>>8,I[S++]=q,q=q>>8,I[S++]=q;let Q=Number(j>>BigInt(32)&BigInt(4294967295));return I[S++]=Q,Q=Q>>8,I[S++]=Q,Q=Q>>8,I[S++]=Q,Q=Q>>8,I[S++]=Q,S}function me(I,j,S,F,U){ee(j,F,U,I,S,7);let q=Number(j&BigInt(4294967295));I[S+7]=q,q=q>>8,I[S+6]=q,q=q>>8,I[S+5]=q,q=q>>8,I[S+4]=q;let Q=Number(j>>BigInt(32)&BigInt(4294967295));return I[S+3]=Q,Q=Q>>8,I[S+2]=Q,Q=Q>>8,I[S+1]=Q,Q=Q>>8,I[S]=Q,S+8}l.prototype.writeBigUInt64LE=ce(function(j,S=0){return $(this,j,S,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=ce(function(j,S=0){return me(this,j,S,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(j,S,F,U){if(j=+j,S=S>>>0,!U){const ge=Math.pow(2,8*F-1);K(this,j,S,F,ge-1,-ge)}let q=0,Q=1,be=0;for(this[S]=j&255;++q<F&&(Q*=256);)j<0&&be===0&&this[S+q-1]!==0&&(be=1),this[S+q]=(j/Q>>0)-be&255;return S+F},l.prototype.writeIntBE=function(j,S,F,U){if(j=+j,S=S>>>0,!U){const ge=Math.pow(2,8*F-1);K(this,j,S,F,ge-1,-ge)}let q=F-1,Q=1,be=0;for(this[S+q]=j&255;--q>=0&&(Q*=256);)j<0&&be===0&&this[S+q+1]!==0&&(be=1),this[S+q]=(j/Q>>0)-be&255;return S+F},l.prototype.writeInt8=function(j,S,F){return j=+j,S=S>>>0,F||K(this,j,S,1,127,-128),j<0&&(j=255+j+1),this[S]=j&255,S+1},l.prototype.writeInt16LE=function(j,S,F){return j=+j,S=S>>>0,F||K(this,j,S,2,32767,-32768),this[S]=j&255,this[S+1]=j>>>8,S+2},l.prototype.writeInt16BE=function(j,S,F){return j=+j,S=S>>>0,F||K(this,j,S,2,32767,-32768),this[S]=j>>>8,this[S+1]=j&255,S+2},l.prototype.writeInt32LE=function(j,S,F){return j=+j,S=S>>>0,F||K(this,j,S,4,2147483647,-2147483648),this[S]=j&255,this[S+1]=j>>>8,this[S+2]=j>>>16,this[S+3]=j>>>24,S+4},l.prototype.writeInt32BE=function(j,S,F){return j=+j,S=S>>>0,F||K(this,j,S,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),this[S]=j>>>24,this[S+1]=j>>>16,this[S+2]=j>>>8,this[S+3]=j&255,S+4},l.prototype.writeBigInt64LE=ce(function(j,S=0){return $(this,j,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=ce(function(j,S=0){return me(this,j,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ke(I,j,S,F,U,q){if(S+F>I.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("Index out of range")}function ye(I,j,S,F,U){return j=+j,S=S>>>0,U||ke(I,j,S,4),n.write(I,j,S,F,23,4),S+4}l.prototype.writeFloatLE=function(j,S,F){return ye(this,j,S,!0,F)},l.prototype.writeFloatBE=function(j,S,F){return ye(this,j,S,!1,F)};function se(I,j,S,F,U){return j=+j,S=S>>>0,U||ke(I,j,S,8),n.write(I,j,S,F,52,8),S+8}l.prototype.writeDoubleLE=function(j,S,F){return se(this,j,S,!0,F)},l.prototype.writeDoubleBE=function(j,S,F){return se(this,j,S,!1,F)},l.prototype.copy=function(j,S,F,U){if(!l.isBuffer(j))throw new TypeError("argument should be a Buffer");if(F||(F=0),!U&&U!==0&&(U=this.length),S>=j.length&&(S=j.length),S||(S=0),U>0&&U<F&&(U=F),U===F||j.length===0||this.length===0)return 0;if(S<0)throw new RangeError("targetStart out of bounds");if(F<0||F>=this.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("sourceEnd out of bounds");U>this.length&&(U=this.length),j.length-S<U-F&&(U=j.length-S+F);const q=U-F;return this===j&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(S,F,U):Uint8Array.prototype.set.call(j,this.subarray(F,U),S),q},l.prototype.fill=function(j,S,F,U){if(typeof j=="string"){if(typeof S=="string"?(U=S,S=0,F=this.length):typeof F=="string"&&(U=F,F=this.length),U!==void 0&&typeof U!="string")throw new TypeError("encoding must be a string");if(typeof U=="string"&&!l.isEncoding(U))throw new TypeError("Unknown encoding: "+U);if(j.length===1){const Q=j.charCodeAt(0);(U==="utf8"&&Q<128||U==="latin1")&&(j=Q)}}else typeof j=="number"?j=j&255:typeof j=="boolean"&&(j=Number(j));if(S<0||this.length<S||this.length<F)throw new RangeError("Out of range index");if(F<=S)return this;S=S>>>0,F=F===void 0?this.length:F>>>0,j||(j=0);let q;if(typeof j=="number")for(q=S;q<F;++q)this[q]=j;else{const Q=l.isBuffer(j)?j:l.from(j,U),be=Q.length;if(be===0)throw new TypeError('The value "'+j+'" is invalid for argument "value"');for(q=0;q<F-S;++q)this[q+S]=Q[q%be]}return this};const G={};function W(I,j,S){G[I]=class extends S{constructor(){super(),Object.defineProperty(this,"message",{value:j.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${I}]`,this.stack,delete this.name}get code(){return I}set code(U){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:U,writable:!0})}toString(){return`${this.name} [${I}]: ${this.message}`}}}W("ERR_BUFFER_OUT_OF_BOUNDS",function(I){return I?`${I} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),W("ERR_INVALID_ARG_TYPE",function(I,j){return`The "${I}" argument must be of type number. Received type ${typeof j}`},TypeError),W("ERR_OUT_OF_RANGE",function(I,j,S){let F=`The value of "${I}" is out of range.`,U=S;return Number.isInteger(S)&&Math.abs(S)>2**32?U=Z(String(S)):typeof S=="bigint"&&(U=String(S),(S>BigInt(2)**BigInt(32)||S<-(BigInt(2)**BigInt(32)))&&(U=Z(U)),U+="n"),F+=` It must be ${j}. Received ${U}`,F},RangeError);function Z(I){let j="",S=I.length;const F=I[0]==="-"?1:0;for(;S>=F+4;S-=3)j=`_${I.slice(S-3,S)}${j}`;return`${I.slice(0,S)}${j}`}function Y(I,j,S){ae(j,"offset"),(I[j]===void 0||I[j+S]===void 0)&&de(j,I.length-(S+1))}function ee(I,j,S,F,U,q){if(I>S||I<j){const Q=typeof j=="bigint"?"n":"";let be;throw j===0||j===BigInt(0)?be=`>= 0${Q} and < 2${Q} ** ${(q+1)*8}${Q}`:be=`>= -(2${Q} ** ${(q+1)*8-1}${Q}) and < 2 ** ${(q+1)*8-1}${Q}`,new G.ERR_OUT_OF_RANGE("value",be,I)}Y(F,U,q)}function ae(I,j){if(typeof I!="number")throw new G.ERR_INVALID_ARG_TYPE(j,"number",I)}function de(I,j,S){throw Math.floor(I)!==I?(ae(I,S),new G.ERR_OUT_OF_RANGE("offset","an integer",I)):j<0?new G.ERR_BUFFER_OUT_OF_BOUNDS:new G.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${j}`,I)}const Re=/[^+/0-9A-Za-z-_]/g;function Be(I){if(I=I.split("=")[0],I=I.trim().replace(Re,""),I.length<2)return"";for(;I.length%4!==0;)I=I+"=";return I}function Ge(I,j){j=j||1/0;let S;const F=I.length;let U=null;const q=[];for(let Q=0;Q<F;++Q){if(S=I.charCodeAt(Q),S>55295&&S<57344){if(!U){if(S>56319){(j-=3)>-1&&q.push(239,191,189);continue}else if(Q+1===F){(j-=3)>-1&&q.push(239,191,189);continue}U=S;continue}if(S<56320){(j-=3)>-1&&q.push(239,191,189),U=S;continue}S=(U-55296<<10|S-56320)+65536}else U&&(j-=3)>-1&&q.push(239,191,189);if(U=null,S<128){if((j-=1)<0)break;q.push(S)}else if(S<2048){if((j-=2)<0)break;q.push(S>>6|192,S&63|128)}else if(S<65536){if((j-=3)<0)break;q.push(S>>12|224,S>>6&63|128,S&63|128)}else if(S<1114112){if((j-=4)<0)break;q.push(S>>18|240,S>>12&63|128,S>>6&63|128,S&63|128)}else throw new Error("Invalid code point")}return q}function et(I){const j=[];for(let S=0;S<I.length;++S)j.push(I.charCodeAt(S)&255);return j}function lt(I,j){let S,F,U;const q=[];for(let Q=0;Q<I.length&&!((j-=2)<0);++Q)S=I.charCodeAt(Q),F=S>>8,U=S%256,q.push(U),q.push(F);return q}function Xe(I){return t.toByteArray(Be(I))}function He(I,j,S,F){let U;for(U=0;U<F&&!(U+S>=j.length||U>=I.length);++U)j[U+S]=I[U];return U}function Pe(I,j){return I instanceof j||I!=null&&I.constructor!=null&&I.constructor.name!=null&&I.constructor.name===j.name}function vt(I){return I!==I}const Ye=function(){const I="0123456789abcdef",j=new Array(256);for(let S=0;S<16;++S){const F=S*16;for(let U=0;U<16;++U)j[F+U]=I[S]+I[U]}return j}();function ce(I){return typeof BigInt>"u"?V:I}function V(){throw new Error("BigInt not supported")}})($w);var Nf={},px=Rw;Nf.createRoot=px.createRoot,Nf.hydrateRoot=px.hydrateRoot;var Bw={exports:{}},_w={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xl=h;function VC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var HC=typeof Object.is=="function"?Object.is:VC,WC=Xl.useSyncExternalStore,qC=Xl.useRef,KC=Xl.useEffect,GC=Xl.useMemo,XC=Xl.useDebugValue;_w.useSyncExternalStoreWithSelector=function(e,t,n,s,i){var a=qC(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=GC(function(){function c(p){if(!d){if(d=!0,u=p,p=s(p),i!==void 0&&o.hasValue){var x=o.value;if(i(x,p))return m=x}return m=p}if(x=m,HC(u,p))return x;var g=s(p);return i!==void 0&&i(x,g)?(u=p,x):(u=p,m=g)}var d=!1,u,m,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,s,i]);var l=WC(e,a[0],a[1]);return KC(function(){o.hasValue=!0,o.value=l},[l]),XC(l),l};Bw.exports=_w;var YC=Bw.exports;function QC(e){e()}function JC(){let e=null,t=null;return{clear(){e=null,t=null},notify(){QC(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let s=e;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!s||e===null||(s=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var gx={notify(){},get:()=>[]};function ZC(e,t){let n,s=gx,i=0,a=!1;function o(g){u();const b=s.subscribe(g);let w=!1;return()=>{w||(w=!0,b(),m())}}function l(){s.notify()}function c(){x.onStateChange&&x.onStateChange()}function d(){return a}function u(){i++,n||(n=e.subscribe(c),s=JC())}function m(){i--,n&&i===0&&(n(),n=void 0,s.clear(),s=gx)}function f(){a||(a=!0,u())}function p(){a&&(a=!1,m())}const x={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:f,tryUnsubscribe:p,getListeners:()=>s};return x}var e3=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",t3=e3(),n3=()=>typeof navigator<"u"&&navigator.product==="ReactNative",r3=n3(),s3=()=>t3||r3?h.useLayoutEffect:h.useEffect,i3=s3(),nm=Symbol.for("react-redux-context"),rm=typeof globalThis<"u"?globalThis:{};function a3(){if(!h.createContext)return{};const e=rm[nm]??(rm[nm]=new Map);let t=e.get(h.createContext);return t||(t=h.createContext(null),e.set(h.createContext,t)),t}var Js=a3();function o3(e){const{children:t,context:n,serverState:s,store:i}=e,a=h.useMemo(()=>{const c=ZC(i);return{store:i,subscription:c,getServerState:s?()=>s:void 0}},[i,s]),o=h.useMemo(()=>i.getState(),[i]);i3(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,o]);const l=n||Js;return h.createElement(l.Provider,{value:a},t)}var l3=o3;function fg(e=Js){return function(){return h.useContext(e)}}var Fw=fg();function zw(e=Js){const t=e===Js?Fw:fg(e),n=()=>{const{store:s}=t();return s};return Object.assign(n,{withTypes:()=>n}),n}var c3=zw();function d3(e=Js){const t=e===Js?c3:zw(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Ht=d3(),u3=(e,t)=>e===t;function h3(e=Js){const t=e===Js?Fw:fg(e),n=(s,i={})=>{const{equalityFn:a=u3}=typeof i=="function"?{equalityFn:i}:i,o=t(),{store:l,subscription:c,getServerState:d}=o;h.useRef(!0);const u=h.useCallback({[s.name](f){return s(f)}}[s.name],[s]),m=YC.useSyncExternalStoreWithSelector(c.addNestedSub,l.getState,d||l.getState,u,a);return h.useDebugValue(m),m};return Object.assign(n,{withTypes:()=>n}),n}var gn=h3();function Uw(e,t){return function(){return e.apply(t,arguments)}}const{toString:m3}=Object.prototype,{getPrototypeOf:pg}=Object,{iterator:Nu,toStringTag:Vw}=Symbol,Cu=(e=>t=>{const n=m3.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Lr=e=>(e=e.toLowerCase(),t=>Cu(t)===e),Su=e=>t=>typeof t===e,{isArray:oo}=Array,gl=Su("undefined");function f3(e){return e!==null&&!gl(e)&&e.constructor!==null&&!gl(e.constructor)&&Vn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Hw=Lr("ArrayBuffer");function p3(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Hw(e.buffer),t}const g3=Su("string"),Vn=Su("function"),Ww=Su("number"),Eu=e=>e!==null&&typeof e=="object",x3=e=>e===!0||e===!1,Jc=e=>{if(Cu(e)!=="object")return!1;const t=pg(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Vw in e)&&!(Nu in e)},y3=Lr("Date"),b3=Lr("File"),v3=Lr("Blob"),w3=Lr("FileList"),j3=e=>Eu(e)&&Vn(e.pipe),k3=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Vn(e.append)&&((t=Cu(e))==="formdata"||t==="object"&&Vn(e.toString)&&e.toString()==="[object FormData]"))},N3=Lr("URLSearchParams"),[C3,S3,E3,T3]=["ReadableStream","Request","Response","Headers"].map(Lr),I3=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Yl(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,i;if(typeof e!="object"&&(e=[e]),oo(e))for(s=0,i=e.length;s<i;s++)t.call(null,e[s],s,e);else{const a=n?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length;let l;for(s=0;s<o;s++)l=a[s],t.call(null,e[l],l,e)}}function qw(e,t){t=t.toLowerCase();const n=Object.keys(e);let s=n.length,i;for(;s-- >0;)if(i=n[s],t===i.toLowerCase())return i;return null}const Pi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:window,Kw=e=>!gl(e)&&e!==Pi;function Cf(){const{caseless:e}=Kw(this)&&this||{},t={},n=(s,i)=>{const a=e&&qw(t,i)||i;Jc(t[a])&&Jc(s)?t[a]=Cf(t[a],s):Jc(s)?t[a]=Cf({},s):oo(s)?t[a]=s.slice():t[a]=s};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Yl(arguments[s],n);return t}const P3=(e,t,n,{allOwnKeys:s}={})=>(Yl(t,(i,a)=>{n&&Vn(i)?e[a]=Uw(i,n):e[a]=i},{allOwnKeys:s}),e),A3=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),R3=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},L3=(e,t,n,s)=>{let i,a,o;const l={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)o=i[a],(!s||s(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=n!==!1&&pg(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},M3=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},D3=e=>{if(!e)return null;if(oo(e))return e;let t=e.length;if(!Ww(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},$3=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&pg(Uint8Array)),O3=(e,t)=>{const s=(e&&e[Nu]).call(e);let i;for(;(i=s.next())&&!i.done;){const a=i.value;t.call(e,a[0],a[1])}},B3=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},_3=Lr("HTMLFormElement"),F3=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,i){return s.toUpperCase()+i}),xx=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),z3=Lr("RegExp"),Gw=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};Yl(n,(i,a)=>{let o;(o=t(i,a,e))!==!1&&(s[a]=o||i)}),Object.defineProperties(e,s)},U3=e=>{Gw(e,(t,n)=>{if(Vn(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(Vn(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},V3=(e,t)=>{const n={},s=i=>{i.forEach(a=>{n[a]=!0})};return oo(e)?s(e):s(String(e).split(t)),n},H3=()=>{},W3=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function q3(e){return!!(e&&Vn(e.append)&&e[Vw]==="FormData"&&e[Nu])}const K3=e=>{const t=new Array(10),n=(s,i)=>{if(Eu(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[i]=s;const a=oo(s)?[]:{};return Yl(s,(o,l)=>{const c=n(o,i+1);!gl(c)&&(a[l]=c)}),t[i]=void 0,a}}return s};return n(e,0)},G3=Lr("AsyncFunction"),X3=e=>e&&(Eu(e)||Vn(e))&&Vn(e.then)&&Vn(e.catch),Xw=((e,t)=>e?setImmediate:t?((n,s)=>(Pi.addEventListener("message",({source:i,data:a})=>{i===Pi&&a===n&&s.length&&s.shift()()},!1),i=>{s.push(i),Pi.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Vn(Pi.postMessage)),Y3=typeof queueMicrotask<"u"?queueMicrotask.bind(Pi):typeof process<"u"&&process.nextTick||Xw,Q3=e=>e!=null&&Vn(e[Nu]),ue={isArray:oo,isArrayBuffer:Hw,isBuffer:f3,isFormData:k3,isArrayBufferView:p3,isString:g3,isNumber:Ww,isBoolean:x3,isObject:Eu,isPlainObject:Jc,isReadableStream:C3,isRequest:S3,isResponse:E3,isHeaders:T3,isUndefined:gl,isDate:y3,isFile:b3,isBlob:v3,isRegExp:z3,isFunction:Vn,isStream:j3,isURLSearchParams:N3,isTypedArray:$3,isFileList:w3,forEach:Yl,merge:Cf,extend:P3,trim:I3,stripBOM:A3,inherits:R3,toFlatObject:L3,kindOf:Cu,kindOfTest:Lr,endsWith:M3,toArray:D3,forEachEntry:O3,matchAll:B3,isHTMLForm:_3,hasOwnProperty:xx,hasOwnProp:xx,reduceDescriptors:Gw,freezeMethods:U3,toObjectSet:V3,toCamelCase:F3,noop:H3,toFiniteNumber:W3,findKey:qw,global:Pi,isContextDefined:Kw,isSpecCompliantForm:q3,toJSONObject:K3,isAsyncFn:G3,isThenable:X3,setImmediate:Xw,asap:Y3,isIterable:Q3};function at(e,t,n,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}ue.inherits(at,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ue.toJSONObject(this.config),code:this.code,status:this.status}}});const Yw=at.prototype,Qw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Qw[e]={value:e}});Object.defineProperties(at,Qw);Object.defineProperty(Yw,"isAxiosError",{value:!0});at.from=(e,t,n,s,i,a)=>{const o=Object.create(Yw);return ue.toFlatObject(e,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),at.call(o,e.message,t,n,s,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};const J3=null;function Sf(e){return ue.isPlainObject(e)||ue.isArray(e)}function Jw(e){return ue.endsWith(e,"[]")?e.slice(0,-2):e}function yx(e,t,n){return e?e.concat(t).map(function(i,a){return i=Jw(i),!n&&a?"["+i+"]":i}).join(n?".":""):t}function Z3(e){return ue.isArray(e)&&!e.some(Sf)}const eS=ue.toFlatObject(ue,{},null,function(t){return/^is[A-Z]/.test(t)});function Tu(e,t,n){if(!ue.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=ue.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,b){return!ue.isUndefined(b[g])});const s=n.metaTokens,i=n.visitor||u,a=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&ue.isSpecCompliantForm(t);if(!ue.isFunction(i))throw new TypeError("visitor must be a function");function d(x){if(x===null)return"";if(ue.isDate(x))return x.toISOString();if(ue.isBoolean(x))return x.toString();if(!c&&ue.isBlob(x))throw new at("Blob is not supported. Use a Buffer instead.");return ue.isArrayBuffer(x)||ue.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function u(x,g,b){let w=x;if(x&&!b&&typeof x=="object"){if(ue.endsWith(g,"{}"))g=s?g:g.slice(0,-2),x=JSON.stringify(x);else if(ue.isArray(x)&&Z3(x)||(ue.isFileList(x)||ue.endsWith(g,"[]"))&&(w=ue.toArray(x)))return g=Jw(g),w.forEach(function(v,N){!(ue.isUndefined(v)||v===null)&&t.append(o===!0?yx([g],N,a):o===null?g:g+"[]",d(v))}),!1}return Sf(x)?!0:(t.append(yx(b,g,a),d(x)),!1)}const m=[],f=Object.assign(eS,{defaultVisitor:u,convertValue:d,isVisitable:Sf});function p(x,g){if(!ue.isUndefined(x)){if(m.indexOf(x)!==-1)throw Error("Circular reference detected in "+g.join("."));m.push(x),ue.forEach(x,function(w,k){(!(ue.isUndefined(w)||w===null)&&i.call(t,w,ue.isString(k)?k.trim():k,g,f))===!0&&p(w,g?g.concat(k):[k])}),m.pop()}}if(!ue.isObject(e))throw new TypeError("data must be an object");return p(e),t}function bx(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function gg(e,t){this._pairs=[],e&&Tu(e,this,t)}const Zw=gg.prototype;Zw.append=function(t,n){this._pairs.push([t,n])};Zw.toString=function(t){const n=t?function(s){return t.call(this,s,bx)}:bx;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function tS(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function e2(e,t,n){if(!t)return e;const s=n&&n.encode||tS;ue.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let a;if(i?a=i(t,n):a=ue.isURLSearchParams(t)?t.toString():new gg(t,n).toString(s),a){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class vx{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ue.forEach(this.handlers,function(s){s!==null&&t(s)})}}const t2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nS=typeof URLSearchParams<"u"?URLSearchParams:gg,rS=typeof FormData<"u"?FormData:null,sS=typeof Blob<"u"?Blob:null,iS={isBrowser:!0,classes:{URLSearchParams:nS,FormData:rS,Blob:sS},protocols:["http","https","file","blob","url","data"]},xg=typeof window<"u"&&typeof document<"u",Ef=typeof navigator=="object"&&navigator||void 0,aS=xg&&(!Ef||["ReactNative","NativeScript","NS"].indexOf(Ef.product)<0),oS=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",lS=xg&&window.location.href||"http://localhost",cS=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:xg,hasStandardBrowserEnv:aS,hasStandardBrowserWebWorkerEnv:oS,navigator:Ef,origin:lS},Symbol.toStringTag,{value:"Module"})),In={...cS,...iS};function dS(e,t){return Tu(e,new In.classes.URLSearchParams,Object.assign({visitor:function(n,s,i,a){return In.isNode&&ue.isBuffer(n)?(this.append(s,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function uS(e){return ue.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function hS(e){const t={},n=Object.keys(e);let s;const i=n.length;let a;for(s=0;s<i;s++)a=n[s],t[a]=e[a];return t}function n2(e){function t(n,s,i,a){let o=n[a++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=a>=n.length;return o=!o&&ue.isArray(i)?i.length:o,c?(ue.hasOwnProp(i,o)?i[o]=[i[o],s]:i[o]=s,!l):((!i[o]||!ue.isObject(i[o]))&&(i[o]=[]),t(n,s,i[o],a)&&ue.isArray(i[o])&&(i[o]=hS(i[o])),!l)}if(ue.isFormData(e)&&ue.isFunction(e.entries)){const n={};return ue.forEachEntry(e,(s,i)=>{t(uS(s),i,n,0)}),n}return null}function mS(e,t,n){if(ue.isString(e))try{return(t||JSON.parse)(e),ue.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const Ql={transitional:t2,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const s=n.getContentType()||"",i=s.indexOf("application/json")>-1,a=ue.isObject(t);if(a&&ue.isHTMLForm(t)&&(t=new FormData(t)),ue.isFormData(t))return i?JSON.stringify(n2(t)):t;if(ue.isArrayBuffer(t)||ue.isBuffer(t)||ue.isStream(t)||ue.isFile(t)||ue.isBlob(t)||ue.isReadableStream(t))return t;if(ue.isArrayBufferView(t))return t.buffer;if(ue.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(a){if(s.indexOf("application/x-www-form-urlencoded")>-1)return dS(t,this.formSerializer).toString();if((l=ue.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Tu(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return a||i?(n.setContentType("application/json",!1),mS(t)):t}],transformResponse:[function(t){const n=this.transitional||Ql.transitional,s=n&&n.forcedJSONParsing,i=this.responseType==="json";if(ue.isResponse(t)||ue.isReadableStream(t))return t;if(t&&ue.isString(t)&&(s&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?at.from(l,at.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:In.classes.FormData,Blob:In.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ue.forEach(["delete","get","head","post","put","patch"],e=>{Ql.headers[e]={}});const fS=ue.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),pS=e=>{const t={};let n,s,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),s=o.substring(i+1).trim(),!(!n||t[n]&&fS[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},wx=Symbol("internals");function ko(e){return e&&String(e).trim().toLowerCase()}function Zc(e){return e===!1||e==null?e:ue.isArray(e)?e.map(Zc):String(e)}function gS(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const xS=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function sm(e,t,n,s,i){if(ue.isFunction(s))return s.call(this,t,n);if(i&&(t=n),!!ue.isString(t)){if(ue.isString(s))return t.indexOf(s)!==-1;if(ue.isRegExp(s))return s.test(t)}}function yS(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function bS(e,t){const n=ue.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(i,a,o){return this[s].call(this,t,i,a,o)},configurable:!0})})}let Hn=class{constructor(t){t&&this.set(t)}set(t,n,s){const i=this;function a(l,c,d){const u=ko(c);if(!u)throw new Error("header name must be a non-empty string");const m=ue.findKey(i,u);(!m||i[m]===void 0||d===!0||d===void 0&&i[m]!==!1)&&(i[m||c]=Zc(l))}const o=(l,c)=>ue.forEach(l,(d,u)=>a(d,u,c));if(ue.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(ue.isString(t)&&(t=t.trim())&&!xS(t))o(pS(t),n);else if(ue.isObject(t)&&ue.isIterable(t)){let l={},c,d;for(const u of t){if(!ue.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?ue.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(l,n)}else t!=null&&a(n,t,s);return this}get(t,n){if(t=ko(t),t){const s=ue.findKey(this,t);if(s){const i=this[s];if(!n)return i;if(n===!0)return gS(i);if(ue.isFunction(n))return n.call(this,i,s);if(ue.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ko(t),t){const s=ue.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||sm(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let i=!1;function a(o){if(o=ko(o),o){const l=ue.findKey(s,o);l&&(!n||sm(s,s[l],l,n))&&(delete s[l],i=!0)}}return ue.isArray(t)?t.forEach(a):a(t),i}clear(t){const n=Object.keys(this);let s=n.length,i=!1;for(;s--;){const a=n[s];(!t||sm(this,this[a],a,t,!0))&&(delete this[a],i=!0)}return i}normalize(t){const n=this,s={};return ue.forEach(this,(i,a)=>{const o=ue.findKey(s,a);if(o){n[o]=Zc(i),delete n[a];return}const l=t?yS(a):String(a).trim();l!==a&&delete n[a],n[l]=Zc(i),s[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return ue.forEach(this,(s,i)=>{s!=null&&s!==!1&&(n[i]=t&&ue.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(i=>s.set(i)),s}static accessor(t){const s=(this[wx]=this[wx]={accessors:{}}).accessors,i=this.prototype;function a(o){const l=ko(o);s[l]||(bS(i,o),s[l]=!0)}return ue.isArray(t)?t.forEach(a):a(t),this}};Hn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ue.reduceDescriptors(Hn.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});ue.freezeMethods(Hn);function im(e,t){const n=this||Ql,s=t||n,i=Hn.from(s.headers);let a=s.data;return ue.forEach(e,function(l){a=l.call(n,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function r2(e){return!!(e&&e.__CANCEL__)}function lo(e,t,n){at.call(this,e??"canceled",at.ERR_CANCELED,t,n),this.name="CanceledError"}ue.inherits(lo,at,{__CANCEL__:!0});function s2(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new at("Request failed with status code "+n.status,[at.ERR_BAD_REQUEST,at.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function vS(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function wS(e,t){e=e||10;const n=new Array(e),s=new Array(e);let i=0,a=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=s[a];o||(o=d),n[i]=c,s[i]=d;let m=a,f=0;for(;m!==i;)f+=n[m++],m=m%e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),d-o<t)return;const p=u&&d-u;return p?Math.round(f*1e3/p):void 0}}function jS(e,t){let n=0,s=1e3/t,i,a;const o=(d,u=Date.now())=>{n=u,i=null,a&&(clearTimeout(a),a=null),e.apply(null,d)};return[(...d)=>{const u=Date.now(),m=u-n;m>=s?o(d,u):(i=d,a||(a=setTimeout(()=>{a=null,o(i)},s-m)))},()=>i&&o(i)]}const Ld=(e,t,n=3)=>{let s=0;const i=wS(50,250);return jS(a=>{const o=a.loaded,l=a.lengthComputable?a.total:void 0,c=o-s,d=i(c),u=o<=l;s=o;const m={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-o)/d:void 0,event:a,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(m)},n)},jx=(e,t)=>{const n=e!=null;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},kx=e=>(...t)=>ue.asap(()=>e(...t)),kS=In.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,In.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(In.origin),In.navigator&&/(msie|trident)/i.test(In.navigator.userAgent)):()=>!0,NS=In.hasStandardBrowserEnv?{write(e,t,n,s,i,a){const o=[e+"="+encodeURIComponent(t)];ue.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),ue.isString(s)&&o.push("path="+s),ue.isString(i)&&o.push("domain="+i),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function CS(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function SS(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function i2(e,t,n){let s=!CS(t);return e&&(s||n==!1)?SS(e,t):t}const Nx=e=>e instanceof Hn?{...e}:e;function Ki(e,t){t=t||{};const n={};function s(d,u,m,f){return ue.isPlainObject(d)&&ue.isPlainObject(u)?ue.merge.call({caseless:f},d,u):ue.isPlainObject(u)?ue.merge({},u):ue.isArray(u)?u.slice():u}function i(d,u,m,f){if(ue.isUndefined(u)){if(!ue.isUndefined(d))return s(void 0,d,m,f)}else return s(d,u,m,f)}function a(d,u){if(!ue.isUndefined(u))return s(void 0,u)}function o(d,u){if(ue.isUndefined(u)){if(!ue.isUndefined(d))return s(void 0,d)}else return s(void 0,u)}function l(d,u,m){if(m in t)return s(d,u);if(m in e)return s(void 0,d)}const c={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,u,m)=>i(Nx(d),Nx(u),m,!0)};return ue.forEach(Object.keys(Object.assign({},e,t)),function(u){const m=c[u]||i,f=m(e[u],t[u],u);ue.isUndefined(f)&&m!==l||(n[u]=f)}),n}const a2=e=>{const t=Ki({},e);let{data:n,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:l}=t;t.headers=o=Hn.from(o),t.url=e2(i2(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(ue.isFormData(n)){if(In.hasStandardBrowserEnv||In.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[d,...u]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...u].join("; "))}}if(In.hasStandardBrowserEnv&&(s&&ue.isFunction(s)&&(s=s(t)),s||s!==!1&&kS(t.url))){const d=i&&a&&NS.read(a);d&&o.set(i,d)}return t},ES=typeof XMLHttpRequest<"u",TS=ES&&function(e){return new Promise(function(n,s){const i=a2(e);let a=i.data;const o=Hn.from(i.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=i,u,m,f,p,x;function g(){p&&p(),x&&x(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function w(){if(!b)return;const v=Hn.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),C={data:!l||l==="text"||l==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:v,config:e,request:b};s2(function(E){n(E),g()},function(E){s(E),g()},C),b=null}"onloadend"in b?b.onloadend=w:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(w)},b.onabort=function(){b&&(s(new at("Request aborted",at.ECONNABORTED,e,b)),b=null)},b.onerror=function(){s(new at("Network Error",at.ERR_NETWORK,e,b)),b=null},b.ontimeout=function(){let N=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const C=i.transitional||t2;i.timeoutErrorMessage&&(N=i.timeoutErrorMessage),s(new at(N,C.clarifyTimeoutError?at.ETIMEDOUT:at.ECONNABORTED,e,b)),b=null},a===void 0&&o.setContentType(null),"setRequestHeader"in b&&ue.forEach(o.toJSON(),function(N,C){b.setRequestHeader(C,N)}),ue.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),l&&l!=="json"&&(b.responseType=i.responseType),d&&([f,x]=Ld(d,!0),b.addEventListener("progress",f)),c&&b.upload&&([m,p]=Ld(c),b.upload.addEventListener("progress",m),b.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(u=v=>{b&&(s(!v||v.type?new lo(null,e,b):v),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const k=vS(i.url);if(k&&In.protocols.indexOf(k)===-1){s(new at("Unsupported protocol "+k+":",at.ERR_BAD_REQUEST,e));return}b.send(a||null)})},IS=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let s=new AbortController,i;const a=function(d){if(!i){i=!0,l();const u=d instanceof Error?d:this.reason;s.abort(u instanceof at?u:new lo(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,a(new at(`timeout ${t} of ms exceeded`,at.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(a):d.removeEventListener("abort",a)}),e=null)};e.forEach(d=>d.addEventListener("abort",a));const{signal:c}=s;return c.unsubscribe=()=>ue.asap(l),c}},PS=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let s=0,i;for(;s<n;)i=s+t,yield e.slice(s,i),s=i},AS=async function*(e,t){for await(const n of RS(e))yield*PS(n,t)},RS=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:s}=await t.read();if(n)break;yield s}}finally{await t.cancel()}},Cx=(e,t,n,s)=>{const i=AS(e,t);let a=0,o,l=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await i.next();if(d){l(),c.close();return}let m=u.byteLength;if(n){let f=a+=m;n(f)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),i.return()}},{highWaterMark:2})},Iu=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",o2=Iu&&typeof ReadableStream=="function",LS=Iu&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),l2=(e,...t)=>{try{return!!e(...t)}catch{return!1}},MS=o2&&l2(()=>{let e=!1;const t=new Request(In.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Sx=64*1024,Tf=o2&&l2(()=>ue.isReadableStream(new Response("").body)),Md={stream:Tf&&(e=>e.body)};Iu&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Md[t]&&(Md[t]=ue.isFunction(e[t])?n=>n[t]():(n,s)=>{throw new at(`Response type '${t}' is not supported`,at.ERR_NOT_SUPPORT,s)})})})(new Response);const DS=async e=>{if(e==null)return 0;if(ue.isBlob(e))return e.size;if(ue.isSpecCompliantForm(e))return(await new Request(In.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(ue.isArrayBufferView(e)||ue.isArrayBuffer(e))return e.byteLength;if(ue.isURLSearchParams(e)&&(e=e+""),ue.isString(e))return(await LS(e)).byteLength},$S=async(e,t)=>{const n=ue.toFiniteNumber(e.getContentLength());return n??DS(t)},OS=Iu&&(async e=>{let{url:t,method:n,data:s,signal:i,cancelToken:a,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:m="same-origin",fetchOptions:f}=a2(e);d=d?(d+"").toLowerCase():"text";let p=IS([i,a&&a.toAbortSignal()],o),x;const g=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let b;try{if(c&&MS&&n!=="get"&&n!=="head"&&(b=await $S(u,s))!==0){let C=new Request(t,{method:"POST",body:s,duplex:"half"}),T;if(ue.isFormData(s)&&(T=C.headers.get("content-type"))&&u.setContentType(T),C.body){const[E,P]=jx(b,Ld(kx(c)));s=Cx(C.body,Sx,E,P)}}ue.isString(m)||(m=m?"include":"omit");const w="credentials"in Request.prototype;x=new Request(t,{...f,signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:s,duplex:"half",credentials:w?m:void 0});let k=await fetch(x,f);const v=Tf&&(d==="stream"||d==="response");if(Tf&&(l||v&&g)){const C={};["status","statusText","headers"].forEach(R=>{C[R]=k[R]});const T=ue.toFiniteNumber(k.headers.get("content-length")),[E,P]=l&&jx(T,Ld(kx(l),!0))||[];k=new Response(Cx(k.body,Sx,E,()=>{P&&P(),g&&g()}),C)}d=d||"text";let N=await Md[ue.findKey(Md,d)||"text"](k,e);return!v&&g&&g(),await new Promise((C,T)=>{s2(C,T,{data:N,headers:Hn.from(k.headers),status:k.status,statusText:k.statusText,config:e,request:x})})}catch(w){throw g&&g(),w&&w.name==="TypeError"&&/Load failed|fetch/i.test(w.message)?Object.assign(new at("Network Error",at.ERR_NETWORK,e,x),{cause:w.cause||w}):at.from(w,w&&w.code,e,x)}}),If={http:J3,xhr:TS,fetch:OS};ue.forEach(If,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Ex=e=>`- ${e}`,BS=e=>ue.isFunction(e)||e===null||e===!1,c2={getAdapter:e=>{e=ue.isArray(e)?e:[e];const{length:t}=e;let n,s;const i={};for(let a=0;a<t;a++){n=e[a];let o;if(s=n,!BS(n)&&(s=If[(o=String(n)).toLowerCase()],s===void 0))throw new at(`Unknown adapter '${o}'`);if(s)break;i[o||"#"+a]=s}if(!s){const a=Object.entries(i).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?a.length>1?`since :
`+a.map(Ex).join(`
`):" "+Ex(a[0]):"as no adapter specified";throw new at("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:If};function am(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new lo(null,e)}function Tx(e){return am(e),e.headers=Hn.from(e.headers),e.data=im.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),c2.getAdapter(e.adapter||Ql.adapter)(e).then(function(s){return am(e),s.data=im.call(e,e.transformResponse,s),s.headers=Hn.from(s.headers),s},function(s){return r2(s)||(am(e),s&&s.response&&(s.response.data=im.call(e,e.transformResponse,s.response),s.response.headers=Hn.from(s.response.headers))),Promise.reject(s)})}const d2="1.10.0",Pu={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Pu[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const Ix={};Pu.transitional=function(t,n,s){function i(a,o){return"[Axios v"+d2+"] Transitional option '"+a+"'"+o+(s?". "+s:"")}return(a,o,l)=>{if(t===!1)throw new at(i(o," has been removed"+(n?" in "+n:"")),at.ERR_DEPRECATED);return n&&!Ix[o]&&(Ix[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,o,l):!0}};Pu.spelling=function(t){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function _S(e,t,n){if(typeof e!="object")throw new at("options must be an object",at.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let i=s.length;for(;i-- >0;){const a=s[i],o=t[a];if(o){const l=e[a],c=l===void 0||o(l,a,e);if(c!==!0)throw new at("option "+a+" must be "+c,at.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new at("Unknown option "+a,at.ERR_BAD_OPTION)}}const ed={assertOptions:_S,validators:Pu},$r=ed.validators;let Fi=class{constructor(t){this.defaults=t||{},this.interceptors={request:new vx,response:new vx}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?a&&!String(s.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+a):s.stack=a}catch{}}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Ki(this.defaults,n);const{transitional:s,paramsSerializer:i,headers:a}=n;s!==void 0&&ed.assertOptions(s,{silentJSONParsing:$r.transitional($r.boolean),forcedJSONParsing:$r.transitional($r.boolean),clarifyTimeoutError:$r.transitional($r.boolean)},!1),i!=null&&(ue.isFunction(i)?n.paramsSerializer={serialize:i}:ed.assertOptions(i,{encode:$r.function,serialize:$r.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ed.assertOptions(n,{baseUrl:$r.spelling("baseURL"),withXsrfToken:$r.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=a&&ue.merge(a.common,a[n.method]);a&&ue.forEach(["delete","get","head","post","put","patch","common"],x=>{delete a[x]}),n.headers=Hn.concat(o,a);const l=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(c=c&&g.synchronous,l.unshift(g.fulfilled,g.rejected))});const d=[];this.interceptors.response.forEach(function(g){d.push(g.fulfilled,g.rejected)});let u,m=0,f;if(!c){const x=[Tx.bind(this),void 0];for(x.unshift.apply(x,l),x.push.apply(x,d),f=x.length,u=Promise.resolve(n);m<f;)u=u.then(x[m++],x[m++]);return u}f=l.length;let p=n;for(m=0;m<f;){const x=l[m++],g=l[m++];try{p=x(p)}catch(b){g.call(this,b);break}}try{u=Tx.call(this,p)}catch(x){return Promise.reject(x)}for(m=0,f=d.length;m<f;)u=u.then(d[m++],d[m++]);return u}getUri(t){t=Ki(this.defaults,t);const n=i2(t.baseURL,t.url,t.allowAbsoluteUrls);return e2(n,t.params,t.paramsSerializer)}};ue.forEach(["delete","get","head","options"],function(t){Fi.prototype[t]=function(n,s){return this.request(Ki(s||{},{method:t,url:n,data:(s||{}).data}))}});ue.forEach(["post","put","patch"],function(t){function n(s){return function(a,o,l){return this.request(Ki(l||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}Fi.prototype[t]=n(),Fi.prototype[t+"Form"]=n(!0)});let FS=class u2{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const s=this;this.promise.then(i=>{if(!s._listeners)return;let a=s._listeners.length;for(;a-- >0;)s._listeners[a](i);s._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(l=>{s.subscribe(l),a=l}).then(i);return o.cancel=function(){s.unsubscribe(a)},o},t(function(a,o,l){s.reason||(s.reason=new lo(a,o,l),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=s=>{t.abort(s)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new u2(function(i){t=i}),cancel:t}}};function zS(e){return function(n){return e.apply(null,n)}}function US(e){return ue.isObject(e)&&e.isAxiosError===!0}const Pf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Pf).forEach(([e,t])=>{Pf[t]=e});function h2(e){const t=new Fi(e),n=Uw(Fi.prototype.request,t);return ue.extend(n,Fi.prototype,t,{allOwnKeys:!0}),ue.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return h2(Ki(e,i))},n}const De=h2(Ql);De.Axios=Fi;De.CanceledError=lo;De.CancelToken=FS;De.isCancel=r2;De.VERSION=d2;De.toFormData=Tu;De.AxiosError=at;De.Cancel=De.CanceledError;De.all=function(t){return Promise.all(t)};De.spread=zS;De.isAxiosError=US;De.mergeConfig=Ki;De.AxiosHeaders=Hn;De.formToJSON=e=>n2(ue.isHTMLForm(e)?new FormData(e):e);De.getAdapter=c2.getAdapter;De.HttpStatusCode=Pf;De.default=De;const{Axios:rre,AxiosError:sre,CanceledError:ire,isCancel:are,CancelToken:ore,VERSION:lre,all:cre,Cancel:dre,isAxiosError:ure,spread:hre,toFormData:mre,AxiosHeaders:fre,HttpStatusCode:pre,formToJSON:gre,getAdapter:xre,mergeConfig:yre}=De,m2=h.createContext();function VS({children:e}){const t=(()=>{try{const v=localStorage.getItem("user"),N=localStorage.getItem("token");if(v&&N&&N.length>10){const C=JSON.parse(v);return{...C,token:N,id:C.id||C.UserID||C.userId}}}catch{}return null})(),[n,s]=h.useState(t),[i,a]=h.useState(!!t),[o,l]=h.useState(!1),[c,d]=h.useState(null),[u,m]=h.useState(!1);h.useEffect(()=>{if(u||t)return;const v=localStorage.getItem("user"),N=localStorage.getItem("token");if(v&&N)try{if(N.length<10){console.error("Invalid token format found in localStorage"),f(),l(!1),m(!0);return}const C=JSON.parse(v),T={...C,token:N,id:C.id||C.UserID||C.userId};if(!T.id){console.error("User object does not contain ID information"),f(),l(!1),m(!0);return}s(T),a(!0),De.defaults.headers.common.Authorization=`Bearer ${N}`,b().catch(E=>console.error("Background auth check failed:",E))}catch(C){console.error("Error parsing saved user:",C),f()}l(!1),m(!0)},[u,t]);const f=h.useCallback(()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),delete De.defaults.headers.common.Authorization,s(null),a(!1)},[]),p=async(v,N)=>{var C,T;try{d(null),l(!0);const E=await De.post("http://localhost:5001/api/auth/login",{email:v,password:N});if(E.data&&E.data.token){const P=E.data.token;if(P.length<10)throw new Error("Invalid token received from server");localStorage.setItem("token",P),E.data.refreshToken&&localStorage.setItem("refreshToken",E.data.refreshToken);const R=E.data.user||{};if(!R.id&&!R.UserID&&!R.userId)throw new Error("User data does not contain an ID field");const y={...R,token:P,id:R.id||R.UserID||R.userId,UserID:R.id||R.UserID||R.userId,userId:R.id||R.UserID||R.userId};return localStorage.setItem("user",JSON.stringify(y)),s(y),De.defaults.headers.common.Authorization=`Bearer ${P}`,a(!0),{success:!0,user:y}}else throw new Error("Login response did not contain token")}catch(E){console.error("Login error:",E);const P=((T=(C=E.response)==null?void 0:C.data)==null?void 0:T.message)||E.message||"Login failed";return d(P),{success:!1,error:P}}finally{l(!1)}},x=async v=>{var N,C,T;try{d(null),l(!0);const E=await De.post("http://localhost:5001/api/auth/register",v);if(E.data&&E.data.success)return{success:!0,message:E.data.message};throw new Error(((N=E.data)==null?void 0:N.message)||"Registration failed")}catch(E){console.error("Registration error:",E);const P=((T=(C=E.response)==null?void 0:C.data)==null?void 0:T.message)||E.message||"Registration failed";return d(P),{success:!1,error:P}}finally{l(!1)}},g=async()=>{try{const v=localStorage.getItem("token");v&&await De.post("http://localhost:5001/api/auth/logout",{},{headers:{Authorization:`Bearer ${v}`}}).catch(N=>console.log("Logout API error:",N))}finally{f()}},b=h.useCallback(async()=>{try{const v=localStorage.getItem("token");if(!v)return a(!1),!1;if(v.length<10)return console.error("Invalid token format in checkAuth"),f(),!1;const N=await De.get("http://localhost:5001/api/auth/check",{headers:{Authorization:`Bearer ${v}`}});if(N.data&&N.data.success){if(N.data.user){const C=N.data.user.id||N.data.user.UserID||N.data.user.userId;if(!C)return console.error("User data from auth check does not contain ID"),!1;const T={...N.data.user,token:v,id:C,UserID:C,userId:C};s(T),localStorage.setItem("user",JSON.stringify(T)),De.defaults.headers.common.Authorization=`Bearer ${v}`}return a(!0),!0}return a(!1),!1}catch(v){return console.warn("Auth check failed:",v),v.response?((v.response.status===401||v.response.status===403)&&f(),!1):!0}},[f]),k={currentUser:n,isAuthenticated:i,loading:o,authError:c,login:p,register:x,logout:g,checkAuth:b,refreshUserToken:async()=>{try{const v=localStorage.getItem("refreshToken");if(localStorage.getItem("token")&&!v)return console.log("No refresh token available but valid token exists"),!0;if(!v)return console.log("No refresh token available for refresh"),!1;const C=await De.post("http://localhost:5001/api/auth/refresh-token",{refreshToken:v});return C.data&&C.data.token?(localStorage.setItem("token",C.data.token),C.data.refreshToken&&localStorage.setItem("refreshToken",C.data.refreshToken),!0):!1}catch(v){return console.log("Token refresh failed:",v.message),v.response&&(v.response.status===400||v.response.status===401)&&(localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),delete De.defaults.headers.common.Authorization,a(!1),s(null)),!1}}};return r.jsx(m2.Provider,{value:k,children:e})}function Kn(){const e=h.useContext(m2);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}const es=Object.create(null);es.open="0";es.close="1";es.ping="2";es.pong="3";es.message="4";es.upgrade="5";es.noop="6";const td=Object.create(null);Object.keys(es).forEach(e=>{td[es[e]]=e});const Af={type:"error",data:"parser error"},f2=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",p2=typeof ArrayBuffer=="function",g2=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,yg=({type:e,data:t},n,s)=>f2&&t instanceof Blob?n?s(t):Px(t,s):p2&&(t instanceof ArrayBuffer||g2(t))?n?s(t):Px(new Blob([t]),s):s(es[e]+(t||"")),Px=(e,t)=>{const n=new FileReader;return n.onload=function(){const s=n.result.split(",")[1];t("b"+(s||""))},n.readAsDataURL(e)};function Ax(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let om;function HS(e,t){if(f2&&e.data instanceof Blob)return e.data.arrayBuffer().then(Ax).then(t);if(p2&&(e.data instanceof ArrayBuffer||g2(e.data)))return t(Ax(e.data));yg(e,!1,n=>{om||(om=new TextEncoder),t(om.encode(n))})}const Rx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Oo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Rx.length;e++)Oo[Rx.charCodeAt(e)]=e;const WS=e=>{let t=e.length*.75,n=e.length,s,i=0,a,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const d=new ArrayBuffer(t),u=new Uint8Array(d);for(s=0;s<n;s+=4)a=Oo[e.charCodeAt(s)],o=Oo[e.charCodeAt(s+1)],l=Oo[e.charCodeAt(s+2)],c=Oo[e.charCodeAt(s+3)],u[i++]=a<<2|o>>4,u[i++]=(o&15)<<4|l>>2,u[i++]=(l&3)<<6|c&63;return d},qS=typeof ArrayBuffer=="function",bg=(e,t)=>{if(typeof e!="string")return{type:"message",data:x2(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:KS(e.substring(1),t)}:td[n]?e.length>1?{type:td[n],data:e.substring(1)}:{type:td[n]}:Af},KS=(e,t)=>{if(qS){const n=WS(e);return x2(n,t)}else return{base64:!0,data:e}},x2=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},y2="",GS=(e,t)=>{const n=e.length,s=new Array(n);let i=0;e.forEach((a,o)=>{yg(a,!1,l=>{s[o]=l,++i===n&&t(s.join(y2))})})},XS=(e,t)=>{const n=e.split(y2),s=[];for(let i=0;i<n.length;i++){const a=bg(n[i],t);if(s.push(a),a.type==="error")break}return s};function YS(){return new TransformStream({transform(e,t){HS(e,n=>{const s=n.length;let i;if(s<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,s);else if(s<65536){i=new Uint8Array(3);const a=new DataView(i.buffer);a.setUint8(0,126),a.setUint16(1,s)}else{i=new Uint8Array(9);const a=new DataView(i.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(s))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let lm;function Nc(e){return e.reduce((t,n)=>t+n.length,0)}function Cc(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let s=0;for(let i=0;i<t;i++)n[i]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),n}function QS(e,t){lm||(lm=new TextDecoder);const n=[];let s=0,i=-1,a=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(s===0){if(Nc(n)<1)break;const c=Cc(n,1);a=(c[0]&128)===128,i=c[0]&127,i<126?s=3:i===126?s=1:s=2}else if(s===1){if(Nc(n)<2)break;const c=Cc(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),s=3}else if(s===2){if(Nc(n)<8)break;const c=Cc(n,8),d=new DataView(c.buffer,c.byteOffset,c.length),u=d.getUint32(0);if(u>Math.pow(2,21)-1){l.enqueue(Af);break}i=u*Math.pow(2,32)+d.getUint32(4),s=3}else{if(Nc(n)<i)break;const c=Cc(n,i);l.enqueue(bg(a?c:lm.decode(c),t)),s=0}if(i===0||i>e){l.enqueue(Af);break}}}})}const b2=4;function pn(e){if(e)return JS(e)}function JS(e){for(var t in pn.prototype)e[t]=pn.prototype[t];return e}pn.prototype.on=pn.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};pn.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};pn.prototype.off=pn.prototype.removeListener=pn.prototype.removeAllListeners=pn.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var s,i=0;i<n.length;i++)if(s=n[i],s===t||s.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};pn.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(n){n=n.slice(0);for(var s=0,i=n.length;s<i;++s)n[s].apply(this,t)}return this};pn.prototype.emitReserved=pn.prototype.emit;pn.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};pn.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Au=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),pr=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),ZS="arraybuffer";function v2(e,...t){return t.reduce((n,s)=>(e.hasOwnProperty(s)&&(n[s]=e[s]),n),{})}const eE=pr.setTimeout,tE=pr.clearTimeout;function Ru(e,t){t.useNativeTimers?(e.setTimeoutFn=eE.bind(pr),e.clearTimeoutFn=tE.bind(pr)):(e.setTimeoutFn=pr.setTimeout.bind(pr),e.clearTimeoutFn=pr.clearTimeout.bind(pr))}const nE=1.33;function rE(e){return typeof e=="string"?sE(e):Math.ceil((e.byteLength||e.size)*nE)}function sE(e){let t=0,n=0;for(let s=0,i=e.length;s<i;s++)t=e.charCodeAt(s),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(s++,n+=4);return n}function w2(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function iE(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function aE(e){let t={},n=e.split("&");for(let s=0,i=n.length;s<i;s++){let a=n[s].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}class oE extends Error{constructor(t,n,s){super(t),this.description=n,this.context=s,this.type="TransportError"}}class vg extends pn{constructor(t){super(),this.writable=!1,Ru(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,s){return super.emitReserved("error",new oE(t,n,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=bg(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=iE(t);return n.length?"?"+n:""}}class lE extends vg{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||n()})),this.writable||(s++,this.once("drain",function(){--s||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};XS(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,GS(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=w2()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let j2=!1;try{j2=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const cE=j2;function dE(){}class uE extends lE{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let s=location.port;s||(s=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,n){const s=this.request({method:"POST",data:t});s.on("success",n),s.on("error",(i,a)=>{this.onError("xhr post error",i,a)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,s)=>{this.onError("xhr poll error",n,s)}),this.pollXhr=t}}let Da=class nd extends pn{constructor(t,n,s){super(),this.createRequest=t,Ru(this,s),this._opts=s,this._method=s.method||"GET",this._uri=n,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const n=v2(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(n);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&s.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var i;s.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=nd.requestsCount++,nd.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=dE,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete nd.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Da.requestsCount=0;Da.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Lx);else if(typeof addEventListener=="function"){const e="onpagehide"in pr?"pagehide":"unload";addEventListener(e,Lx,!1)}}function Lx(){for(let e in Da.requests)Da.requests.hasOwnProperty(e)&&Da.requests[e].abort()}const hE=function(){const e=k2({xdomain:!1});return e&&e.responseType!==null}();class mE extends uE{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=hE&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Da(k2,this.uri(),t)}}function k2(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||cE))return new XMLHttpRequest}catch{}if(!t)try{return new pr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const N2=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class fE extends vg{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,s=N2?{}:v2(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,s)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const s=t[n],i=n===t.length-1;yg(s,this.supportsBinary,a=>{try{this.doWrite(s,a)}catch{}i&&Au(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=w2()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const cm=pr.WebSocket||pr.MozWebSocket;class pE extends fE{createSocket(t,n,s){return N2?new cm(t,n,s):n?new cm(t,n):new cm(t)}doWrite(t,n){this.ws.send(n)}}class gE extends vg{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=QS(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(n).getReader(),i=YS();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const a=()=>{s.read().then(({done:l,value:c})=>{l||(this.onPacket(c),a())}).catch(l=>{})};a();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const s=t[n],i=n===t.length-1;this._writer.write(s).then(()=>{i&&Au(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const xE={websocket:pE,webtransport:gE,polling:mE},yE=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,bE=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Rf(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),s=e.indexOf("]");n!=-1&&s!=-1&&(e=e.substring(0,n)+e.substring(n,s).replace(/:/g,";")+e.substring(s,e.length));let i=yE.exec(e||""),a={},o=14;for(;o--;)a[bE[o]]=i[o]||"";return n!=-1&&s!=-1&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=vE(a,a.path),a.queryKey=wE(a,a.query),a}function vE(e,t){const n=/\/{2,9}/g,s=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function wE(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,i,a){i&&(n[i]=a)}),n}const Lf=typeof addEventListener=="function"&&typeof removeEventListener=="function",rd=[];Lf&&addEventListener("offline",()=>{rd.forEach(e=>e())},!1);class qs extends pn{constructor(t,n){if(super(),this.binaryType=ZS,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const s=Rf(t);n.hostname=s.host,n.secure=s.protocol==="https"||s.protocol==="wss",n.port=s.port,s.query&&(n.query=s.query)}else n.host&&(n.hostname=Rf(n.host).host);Ru(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(s=>{const i=s.prototype.name;this.transports.push(i),this._transportsByName[i]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=aE(this.opts.query)),Lf&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},rd.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=b2,n.transport=t,this.id&&(n.sid=this.id);const s=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&qs.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",qs.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let s=0;s<this.writeBuffer.length;s++){const i=this.writeBuffer[s].data;if(i&&(n+=rE(i)),s>0&&n>this._maxPayload)return this.writeBuffer.slice(0,s);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Au(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,s){return this._sendPacket("message",t,n,s),this}send(t,n,s){return this._sendPacket("message",t,n,s),this}_sendPacket(t,n,s,i){if(typeof n=="function"&&(i=n,n=void 0),typeof s=="function"&&(i=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const a={type:t,data:n,options:s};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},s=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(qs.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Lf&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=rd.indexOf(this._offlineEventListener);s!==-1&&rd.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}qs.protocol=b2;class jE extends qs{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),s=!1;qs.priorWebsocketSuccess=!1;const i=()=>{s||(n.send([{type:"ping",data:"probe"}]),n.once("packet",m=>{if(!s)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;qs.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=n.name,this.emitReserved("upgradeError",f)}}))};function a(){s||(s=!0,u(),n.close(),n=null)}const o=m=>{const f=new Error("probe error: "+m);f.transport=n.name,a(),this.emitReserved("upgradeError",f)};function l(){o("transport closed")}function c(){o("socket closed")}function d(m){n&&m.name!==n.name&&a()}const u=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",l),this.off("close",c),this.off("upgrading",d)};n.once("open",i),n.once("error",o),n.once("close",l),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&n.push(t[s]);return n}}let kE=class extends jE{constructor(t,n={}){const s=typeof t=="object"?t:n;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(i=>xE[i]).filter(i=>!!i)),super(t,s)}};function NE(e,t="",n){let s=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),s=Rf(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const a=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+a+":"+s.port+t,s.href=s.protocol+"://"+a+(n&&n.port===s.port?"":":"+s.port),s}const CE=typeof ArrayBuffer=="function",SE=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,C2=Object.prototype.toString,EE=typeof Blob=="function"||typeof Blob<"u"&&C2.call(Blob)==="[object BlobConstructor]",TE=typeof File=="function"||typeof File<"u"&&C2.call(File)==="[object FileConstructor]";function wg(e){return CE&&(e instanceof ArrayBuffer||SE(e))||EE&&e instanceof Blob||TE&&e instanceof File}function sd(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,s=e.length;n<s;n++)if(sd(e[n]))return!0;return!1}if(wg(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return sd(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&sd(e[n]))return!0;return!1}function IE(e){const t=[],n=e.data,s=e;return s.data=Mf(n,t),s.attachments=t.length,{packet:s,buffers:t}}function Mf(e,t){if(!e)return e;if(wg(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let s=0;s<e.length;s++)n[s]=Mf(e[s],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=Mf(e[s],t));return n}return e}function PE(e,t){return e.data=Df(e.data,t),delete e.attachments,e}function Df(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Df(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Df(e[n],t));return e}const AE=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],RE=5;var mt;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(mt||(mt={}));class LE{constructor(t){this.replacer=t}encode(t){return(t.type===mt.EVENT||t.type===mt.ACK)&&sd(t)?this.encodeAsBinary({type:t.type===mt.EVENT?mt.BINARY_EVENT:mt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===mt.BINARY_EVENT||t.type===mt.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=IE(t),s=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(s),i}}function Mx(e){return Object.prototype.toString.call(e)==="[object Object]"}class jg extends pn{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const s=n.type===mt.BINARY_EVENT;s||n.type===mt.BINARY_ACK?(n.type=s?mt.EVENT:mt.ACK,this.reconstructor=new ME(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(wg(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const s={type:Number(t.charAt(0))};if(mt[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===mt.BINARY_EVENT||s.type===mt.BINARY_ACK){const a=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const o=t.substring(a,n);if(o!=Number(o)||t.charAt(n)!=="-")throw new Error("Illegal attachments");s.attachments=Number(o)}if(t.charAt(n+1)==="/"){const a=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););s.nsp=t.substring(a,n)}else s.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const a=n+1;for(;++n;){const o=t.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===t.length)break}s.id=Number(t.substring(a,n+1))}if(t.charAt(++n)){const a=this.tryParse(t.substr(n));if(jg.isPayloadValid(s.type,a))s.data=a;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case mt.CONNECT:return Mx(n);case mt.DISCONNECT:return n===void 0;case mt.CONNECT_ERROR:return typeof n=="string"||Mx(n);case mt.EVENT:case mt.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&AE.indexOf(n[0])===-1);case mt.ACK:case mt.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ME{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=PE(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const DE=Object.freeze(Object.defineProperty({__proto__:null,Decoder:jg,Encoder:LE,get PacketType(){return mt},protocol:RE},Symbol.toStringTag,{value:"Module"}));function Cr(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const $E=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class S2 extends pn{constructor(t,n,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Cr(t,"open",this.onopen.bind(this)),Cr(t,"packet",this.onpacket.bind(this)),Cr(t,"error",this.onerror.bind(this)),Cr(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var s,i,a;if($E.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:mt.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const u=this.ids++,m=n.pop();this._registerAckCallback(u,m),o.id=u}const l=(i=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((a=this.io.engine)===null||a===void 0)&&a._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,n){var s;const i=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(i===void 0){this.acks[t]=n;return}const a=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),o=(...l)=>{this.io.clearTimeoutFn(a),n.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...n){return new Promise((s,i)=>{const a=(o,l)=>o?i(o):s(l);a.withError=!0,n.push(a),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...a)=>s!==this._queue[0]?void 0:(i!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...a)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:mt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case mt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case mt.EVENT:case mt.BINARY_EVENT:this.onevent(t);break;case mt.ACK:case mt.BINARY_ACK:this.onack(t);break;case mt.DISCONNECT:this.ondisconnect();break;case mt.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const s of n)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let s=!1;return function(...i){s||(s=!0,n.packet({type:mt.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:mt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let s=0;s<n.length;s++)if(t===n[s])return n.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let s=0;s<n.length;s++)if(t===n[s])return n.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const s of n)s.apply(this,t.data)}}}function co(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}co.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};co.prototype.reset=function(){this.attempts=0};co.prototype.setMin=function(e){this.ms=e};co.prototype.setMax=function(e){this.max=e};co.prototype.setJitter=function(e){this.jitter=e};class $f extends pn{constructor(t,n){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Ru(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((s=n.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new co({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||DE;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new kE(this.uri,this.opts);const n=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const i=Cr(n,"open",function(){s.onopen(),t&&t()}),a=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=Cr(n,"error",a);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{i(),a(new Error("timeout")),n.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Cr(t,"ping",this.onping.bind(this)),Cr(t,"data",this.ondata.bind(this)),Cr(t,"error",this.onerror.bind(this)),Cr(t,"close",this.onclose.bind(this)),Cr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){Au(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new S2(this,t,n),this.nsps[t]=s),s}_destroy(t){const n=Object.keys(this.nsps);for(const s of n)if(this.nsps[s].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let s=0;s<n.length;s++)this.engine.write(n[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const No={};function Wo(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=NE(e,t.path||"/socket.io"),s=n.source,i=n.id,a=n.path,o=No[i]&&a in No[i].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let c;return l?c=new $f(s,t):(No[i]||(No[i]=new $f(s,t)),c=No[i]),n.query&&!t.query&&(t.query=n.queryKey),c.socket(n.path,t)}Object.assign(Wo,{Manager:$f,Socket:S2,io:Wo,connect:Wo});const Qn="http://localhost:5001",OE=(e=!0)=>{if(!e||typeof window>"u")return;const t=console.error,n=console.warn,s=["WebSocket connection to","Socket connected","failed: WebSocket is closed","404 (Not Found)","/calls/active","Removing unpermitted intrinsics","Chrome is moving towards","third-party cookies","paypalobjects.com","datadoghq.com","Access to XMLHttpRequest","preload but not used","blocked by CORS policy","Content Security Policy","'unsafe-eval' is not an allowed source","unsafe-eval","CSP","Datadog Browser SDK","datadog-rum.js","preload for","is found, but is not used because the request credentials mode does not match","Refused to create a worker","checkoutnow?token"];return console.error=function(...i){i.some(o=>typeof o=="string"?s.some(l=>o.includes(l)):o instanceof Error?s.some(l=>o.message.includes(l)):!1)||t.apply(console,i)},console.warn=function(...i){i.some(o=>typeof o=="string"?s.some(l=>o.includes(l)):o instanceof Error?s.some(l=>o.message.includes(l)):!1)||n.apply(console,i)},()=>{console.error=t,console.warn=n}},BE=async(e,t={})=>{try{return await fetch(e,t)}catch(n){return{ok:!1,status:0,statusText:"Network Error",json:async()=>({error:"Network Error",message:n.message}),text:async()=>"Network Error"}}},_E=(e,t=null)=>{if(!e)return;const n=e.connect;return e.connect=function(){try{return n.apply(e,arguments)}catch(s){return t&&typeof t=="function"&&t(s),e}},e.on("connect_error",s=>{t&&typeof t=="function"&&t(s)}),e},E2=h.createContext(),FE=({children:e})=>{const[t,n]=h.useState(null),[s,i]=h.useState([]),[a,o]=h.useState(null),[l,c]=h.useState(!1),[d,u]=h.useState(0),m=3;return h.useEffect(()=>{const f=localStorage.getItem("user"),p=localStorage.getItem("token");if(f&&p)try{const x=JSON.parse(f);o(x);const g=Wo(Qn.replace("/api",""),{auth:{token:p},transports:["websocket","polling"],withCredentials:!0,reconnection:!0,reconnectionAttempts:m,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:2e4,autoConnect:!0});return _E(g,b=>{console.warn("Socket error handled silently",b.message),!b.message.includes("ECONNREFUSED")&&!b.message.includes("xhr poll error")&&u(w=>w+1)}),g.on("connect",()=>{console.log("Socket connected"),c(!0),u(0)}),g.on("disconnect",()=>{console.log("Socket disconnected"),c(!1)}),g.on("getUsers",b=>{i(b)}),g.on("connect_error",b=>{c(!1),!b.message.includes("ECONNREFUSED")&&!b.message.includes("xhr poll error")&&!b.message.includes("WebSocket is closed")&&u(w=>w+1),b.message.includes("WebSocket is closed")&&g.io.opts.transports.includes("polling")&&(console.log("WebSocket connection failed, falling back to polling"),g.io.opts.transports=["polling"],g.connect())}),n(g),()=>{if(g)try{g.disconnect()}catch{}}}catch{}},[]),h.useEffect(()=>{if(t){if(l||d>=m)return;const f=localStorage.getItem("token");if(f)try{t.auth={token:f},t.connect()}catch{}}},[t,l,d]),r.jsx(E2.Provider,{value:{socket:t,user:a,onlineUsers:s,isConnected:l},children:e})},zE=()=>h.useContext(E2),dm={blue:{primary:"#3b82f6",secondary:"#60a5fa",accent:"#dbeafe",hover:"#2563eb",active:"#1d4ed8"},red:{primary:"#ef4444",secondary:"#f87171",accent:"#fee2e2",hover:"#dc2626",active:"#b91c1c"},green:{primary:"#10b981",secondary:"#34d399",accent:"#d1fae5",hover:"#059669",active:"#047857"},purple:{primary:"#8b5cf6",secondary:"#a78bfa",accent:"#ede9fe",hover:"#7c3aed",active:"#6d28d9"},orange:{primary:"#f97316",secondary:"#fb923c",accent:"#ffedd5",hover:"#ea580c",active:"#c2410c"},custom:{primary:"#3b82f6",secondary:"#60a5fa",accent:"#dbeafe",hover:"#2563eb",active:"#1d4ed8"}},UE=e=>({"--color-primary":e.primary,"--color-secondary":e.secondary,"--color-accent":e.accent,"--color-hover":e.hover,"--color-active":e.active}),T2=h.createContext(),I2=()=>h.useContext(T2),P2=({children:e})=>{const[t,n]=h.useState(()=>{const l=localStorage.getItem("theme"),c=localStorage.getItem("themeColor");return{mode:l||"light",color:c||"blue",customColors:JSON.parse(localStorage.getItem("customColors"))||null}});h.useEffect(()=>{localStorage.setItem("theme",t.mode),localStorage.setItem("themeColor",t.color),t.mode==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");let l;t.color==="custom"&&t.customColors?l=t.customColors:l=dm[t.color];const c=UE(l);Object.entries(c).forEach(([d,u])=>{document.documentElement.style.setProperty(d,u)}),t.customColors&&localStorage.setItem("customColors",JSON.stringify(t.customColors))},[t]);const s=l=>{n(c=>({...c,mode:l}))},i=l=>{n(c=>({...c,color:l}))},a=l=>{n(c=>({...c,color:"custom",customColors:l}))},o={theme:t.mode,themeColor:t.color,colors:t.color==="custom"&&t.customColors?t.customColors:dm[t.color],setThemeMode:s,setThemeColor:i,setCustomColors:a,availableColors:Object.keys(dm)};return r.jsx(T2.Provider,{value:o,children:e})};function bn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var VE=typeof Symbol=="function"&&Symbol.observable||"@@observable",Dx=VE,um=()=>Math.random().toString(36).substring(7).split("").join("."),HE={INIT:`@@redux/INIT${um()}`,REPLACE:`@@redux/REPLACE${um()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${um()}`},Dd=HE;function kg(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function A2(e,t,n){if(typeof e!="function")throw new Error(bn(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(bn(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(bn(1));return n(A2)(e,t)}let s=e,i=t,a=new Map,o=a,l=0,c=!1;function d(){o===a&&(o=new Map,a.forEach((b,w)=>{o.set(w,b)}))}function u(){if(c)throw new Error(bn(3));return i}function m(b){if(typeof b!="function")throw new Error(bn(4));if(c)throw new Error(bn(5));let w=!0;d();const k=l++;return o.set(k,b),function(){if(w){if(c)throw new Error(bn(6));w=!1,d(),o.delete(k),a=null}}}function f(b){if(!kg(b))throw new Error(bn(7));if(typeof b.type>"u")throw new Error(bn(8));if(typeof b.type!="string")throw new Error(bn(17));if(c)throw new Error(bn(9));try{c=!0,i=s(i,b)}finally{c=!1}return(a=o).forEach(k=>{k()}),b}function p(b){if(typeof b!="function")throw new Error(bn(10));s=b,f({type:Dd.REPLACE})}function x(){const b=m;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(bn(11));function k(){const N=w;N.next&&N.next(u())}return k(),{unsubscribe:b(k)}},[Dx](){return this}}}return f({type:Dd.INIT}),{dispatch:f,subscribe:m,getState:u,replaceReducer:p,[Dx]:x}}function WE(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Dd.INIT})>"u")throw new Error(bn(12));if(typeof n(void 0,{type:Dd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(bn(13))})}function qE(e){const t=Object.keys(e),n={};for(let a=0;a<t.length;a++){const o=t[a];typeof e[o]=="function"&&(n[o]=e[o])}const s=Object.keys(n);let i;try{WE(n)}catch(a){i=a}return function(o={},l){if(i)throw i;let c=!1;const d={};for(let u=0;u<s.length;u++){const m=s[u],f=n[m],p=o[m],x=f(p,l);if(typeof x>"u")throw l&&l.type,new Error(bn(14));d[m]=x,c=c||x!==p}return c=c||s.length!==Object.keys(o).length,c?d:o}}function $d(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...s)=>t(n(...s)))}function KE(...e){return t=>(n,s)=>{const i=t(n,s);let a=()=>{throw new Error(bn(15))};const o={getState:i.getState,dispatch:(c,...d)=>a(c,...d)},l=e.map(c=>c(o));return a=$d(...l)(i.dispatch),{...i,dispatch:a}}}function GE(e){return kg(e)&&"type"in e&&typeof e.type=="string"}var R2=Symbol.for("immer-nothing"),$x=Symbol.for("immer-draftable"),rr=Symbol.for("immer-state");function Sr(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Za=Object.getPrototypeOf;function Gi(e){return!!e&&!!e[rr]}function gs(e){var t;return e?L2(e)||Array.isArray(e)||!!e[$x]||!!((t=e.constructor)!=null&&t[$x])||Mu(e)||Du(e):!1}var XE=Object.prototype.constructor.toString();function L2(e){if(!e||typeof e!="object")return!1;const t=Za(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===XE}function Od(e,t){Lu(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,s)=>t(s,n,e))}function Lu(e){const t=e[rr];return t?t.type_:Array.isArray(e)?1:Mu(e)?2:Du(e)?3:0}function Of(e,t){return Lu(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function M2(e,t,n){const s=Lu(e);s===2?e.set(t,n):s===3?e.add(n):e[t]=n}function YE(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Mu(e){return e instanceof Map}function Du(e){return e instanceof Set}function bi(e){return e.copy_||e.base_}function Bf(e,t){if(Mu(e))return new Map(e);if(Du(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=L2(e);if(t===!0||t==="class_only"&&!n){const s=Object.getOwnPropertyDescriptors(e);delete s[rr];let i=Reflect.ownKeys(s);for(let a=0;a<i.length;a++){const o=i[a],l=s[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(s[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(Za(e),s)}else{const s=Za(e);if(s!==null&&n)return{...e};const i=Object.create(s);return Object.assign(i,e)}}function Ng(e,t=!1){return $u(e)||Gi(e)||!gs(e)||(Lu(e)>1&&(e.set=e.add=e.clear=e.delete=QE),Object.freeze(e),t&&Object.entries(e).forEach(([n,s])=>Ng(s,!0))),e}function QE(){Sr(2)}function $u(e){return Object.isFrozen(e)}var JE={};function Xi(e){const t=JE[e];return t||Sr(0,e),t}var xl;function D2(){return xl}function ZE(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Ox(e,t){t&&(Xi("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function _f(e){Ff(e),e.drafts_.forEach(e6),e.drafts_=null}function Ff(e){e===xl&&(xl=e.parent_)}function Bx(e){return xl=ZE(xl,e)}function e6(e){const t=e[rr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function _x(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[rr].modified_&&(_f(t),Sr(4)),gs(e)&&(e=Bd(t,e),t.parent_||_d(t,e)),t.patches_&&Xi("Patches").generateReplacementPatches_(n[rr].base_,e,t.patches_,t.inversePatches_)):e=Bd(t,n,[]),_f(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==R2?e:void 0}function Bd(e,t,n){if($u(t))return t;const s=t[rr];if(!s)return Od(t,(i,a)=>Fx(e,s,t,i,a,n)),t;if(s.scope_!==e)return t;if(!s.modified_)return _d(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const i=s.copy_;let a=i,o=!1;s.type_===3&&(a=new Set(i),i.clear(),o=!0),Od(a,(l,c)=>Fx(e,s,i,l,c,n,o)),_d(e,i,!1),n&&e.patches_&&Xi("Patches").generatePatches_(s,n,e.patches_,e.inversePatches_)}return s.copy_}function Fx(e,t,n,s,i,a,o){if(Gi(i)){const l=a&&t&&t.type_!==3&&!Of(t.assigned_,s)?a.concat(s):void 0,c=Bd(e,i,l);if(M2(n,s,c),Gi(c))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(gs(i)&&!$u(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Bd(e,i),(!t||!t.scope_.parent_)&&typeof s!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,s)&&_d(e,i)}}function _d(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ng(t,n)}function t6(e,t){const n=Array.isArray(e),s={type_:n?1:0,scope_:t?t.scope_:D2(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=s,a=Cg;n&&(i=[s],a=yl);const{revoke:o,proxy:l}=Proxy.revocable(i,a);return s.draft_=l,s.revoke_=o,l}var Cg={get(e,t){if(t===rr)return e;const n=bi(e);if(!Of(n,t))return n6(e,n,t);const s=n[t];return e.finalized_||!gs(s)?s:s===hm(e.base_,t)?(mm(e),e.copy_[t]=Uf(s,e)):s},has(e,t){return t in bi(e)},ownKeys(e){return Reflect.ownKeys(bi(e))},set(e,t,n){const s=$2(bi(e),t);if(s!=null&&s.set)return s.set.call(e.draft_,n),!0;if(!e.modified_){const i=hm(bi(e),t),a=i==null?void 0:i[rr];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(YE(n,i)&&(n!==void 0||Of(e.base_,t)))return!0;mm(e),zf(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return hm(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,mm(e),zf(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=bi(e),s=Reflect.getOwnPropertyDescriptor(n,t);return s&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:s.enumerable,value:n[t]}},defineProperty(){Sr(11)},getPrototypeOf(e){return Za(e.base_)},setPrototypeOf(){Sr(12)}},yl={};Od(Cg,(e,t)=>{yl[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});yl.deleteProperty=function(e,t){return yl.set.call(this,e,t,void 0)};yl.set=function(e,t,n){return Cg.set.call(this,e[0],t,n,e[0])};function hm(e,t){const n=e[rr];return(n?bi(n):e)[t]}function n6(e,t,n){var i;const s=$2(t,n);return s?"value"in s?s.value:(i=s.get)==null?void 0:i.call(e.draft_):void 0}function $2(e,t){if(!(t in e))return;let n=Za(e);for(;n;){const s=Object.getOwnPropertyDescriptor(n,t);if(s)return s;n=Za(n)}}function zf(e){e.modified_||(e.modified_=!0,e.parent_&&zf(e.parent_))}function mm(e){e.copy_||(e.copy_=Bf(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var r6=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,s)=>{if(typeof t=="function"&&typeof n!="function"){const a=n;n=t;const o=this;return function(c=a,...d){return o.produce(c,u=>n.call(this,u,...d))}}typeof n!="function"&&Sr(6),s!==void 0&&typeof s!="function"&&Sr(7);let i;if(gs(t)){const a=Bx(this),o=Uf(t,void 0);let l=!0;try{i=n(o),l=!1}finally{l?_f(a):Ff(a)}return Ox(a,s),_x(i,a)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===R2&&(i=void 0),this.autoFreeze_&&Ng(i,!0),s){const a=[],o=[];Xi("Patches").generateReplacementPatches_(t,i,a,o),s(a,o)}return i}else Sr(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let s,i;return[this.produce(t,n,(o,l)=>{s=o,i=l}),s,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){gs(e)||Sr(8),Gi(e)&&(e=s6(e));const t=Bx(this),n=Uf(e,void 0);return n[rr].isManual_=!0,Ff(t),n}finishDraft(e,t){const n=e&&e[rr];(!n||!n.isManual_)&&Sr(9);const{scope_:s}=n;return Ox(s,t),_x(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const s=Xi("Patches").applyPatches_;return Gi(e)?s(e,t):this.produce(e,i=>s(i,t))}};function Uf(e,t){const n=Mu(e)?Xi("MapSet").proxyMap_(e,t):Du(e)?Xi("MapSet").proxySet_(e,t):t6(e,t);return(t?t.scope_:D2()).drafts_.push(n),n}function s6(e){return Gi(e)||Sr(10,e),O2(e)}function O2(e){if(!gs(e)||$u(e))return e;const t=e[rr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Bf(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Bf(e,!0);return Od(n,(s,i)=>{M2(n,s,O2(i))}),t&&(t.finalized_=!1),n}var sr=new r6,B2=sr.produce;sr.produceWithPatches.bind(sr);sr.setAutoFreeze.bind(sr);sr.setUseStrictShallowCopy.bind(sr);sr.applyPatches.bind(sr);sr.createDraft.bind(sr);sr.finishDraft.bind(sr);function _2(e){return({dispatch:n,getState:s})=>i=>a=>typeof a=="function"?a(n,s,e):i(a)}var i6=_2(),a6=_2,o6=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?$d:$d.apply(null,arguments)},l6=e=>e&&typeof e.match=="function";function qo(e,t){function n(...s){if(t){let i=t(...s);if(!i)throw new Error(ds(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:s[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=s=>GE(s)&&s.type===e,n}var F2=class Bo extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Bo.prototype)}static get[Symbol.species](){return Bo}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Bo(...t[0].concat(this)):new Bo(...t.concat(this))}};function zx(e){return gs(e)?B2(e,()=>{}):e}function Sc(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function c6(e){return typeof e=="boolean"}var d6=()=>function(t){const{thunk:n=!0,immutableCheck:s=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=t??{};let o=new F2;return n&&(c6(n)?o.push(i6):o.push(a6(n.extraArgument))),o},u6="RTK_autoBatch",Ux=e=>t=>{setTimeout(t,e)},h6=(e={type:"raf"})=>t=>(...n)=>{const s=t(...n);let i=!0,a=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Ux(10):e.type==="callback"?e.queueNotification:Ux(e.timeout),d=()=>{o=!1,a&&(a=!1,l.forEach(u=>u()))};return Object.assign({},s,{subscribe(u){const m=()=>i&&u(),f=s.subscribe(m);return l.add(u),()=>{f(),l.delete(u)}},dispatch(u){var m;try{return i=!((m=u==null?void 0:u.meta)!=null&&m[u6]),a=!i,a&&(o||(o=!0,c(d))),s.dispatch(u)}finally{i=!0}}})},m6=e=>function(n){const{autoBatch:s=!0}=n??{};let i=new F2(e);return s&&i.push(h6(typeof s=="object"?s:void 0)),i};function f6(e){const t=d6(),{reducer:n=void 0,middleware:s,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(kg(n))l=qE(n);else throw new Error(ds(1));let c;typeof s=="function"?c=s(t):c=t();let d=$d;i&&(d=o6({trace:!1,...typeof i=="object"&&i}));const u=KE(...c),m=m6(u);let f=typeof o=="function"?o(m):m();const p=d(...f);return A2(l,a,p)}function z2(e){const t={},n=[];let s;const i={addCase(a,o){const l=typeof a=="string"?a:a.type;if(!l)throw new Error(ds(28));if(l in t)throw new Error(ds(29));return t[l]=o,i},addMatcher(a,o){return n.push({matcher:a,reducer:o}),i},addDefaultCase(a){return s=a,i}};return e(i),[t,n,s]}function p6(e){return typeof e=="function"}function g6(e,t){let[n,s,i]=z2(t),a;if(p6(e))a=()=>zx(e());else{const l=zx(e);a=()=>l}function o(l=a(),c){let d=[n[c.type],...s.filter(({matcher:u})=>u(c)).map(({reducer:u})=>u)];return d.filter(u=>!!u).length===0&&(d=[i]),d.reduce((u,m)=>{if(m)if(Gi(u)){const p=m(u,c);return p===void 0?u:p}else{if(gs(u))return B2(u,f=>m(f,c));{const f=m(u,c);if(f===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return u},l)}return o.getInitialState=a,o}var x6=(e,t)=>l6(e)?e.match(t):e(t);function y6(...e){return t=>e.some(n=>x6(n,t))}var b6="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",v6=(e=21)=>{let t="",n=e;for(;n--;)t+=b6[Math.random()*64|0];return t},w6=["name","message","stack","code"],fm=class{constructor(e,t){ui(this,"_type");this.payload=e,this.meta=t}},Vx=class{constructor(e,t){ui(this,"_type");this.payload=e,this.meta=t}},j6=e=>{if(typeof e=="object"&&e!==null){const t={};for(const n of w6)typeof e[n]=="string"&&(t[n]=e[n]);return t}return{message:String(e)}},Hx="External signal was aborted",xt=(()=>{function e(t,n,s){const i=qo(t+"/fulfilled",(c,d,u,m)=>({payload:c,meta:{...m||{},arg:u,requestId:d,requestStatus:"fulfilled"}})),a=qo(t+"/pending",(c,d,u)=>({payload:void 0,meta:{...u||{},arg:d,requestId:c,requestStatus:"pending"}})),o=qo(t+"/rejected",(c,d,u,m,f)=>({payload:m,error:(s&&s.serializeError||j6)(c||"Rejected"),meta:{...f||{},arg:u,requestId:d,rejectedWithValue:!!m,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"}}));function l(c,{signal:d}={}){return(u,m,f)=>{const p=s!=null&&s.idGenerator?s.idGenerator(c):v6(),x=new AbortController;let g,b;function w(v){b=v,x.abort()}d&&(d.aborted?w(Hx):d.addEventListener("abort",()=>w(Hx),{once:!0}));const k=async function(){var C,T;let v;try{let E=(C=s==null?void 0:s.condition)==null?void 0:C.call(s,c,{getState:m,extra:f});if(N6(E)&&(E=await E),E===!1||x.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const P=new Promise((R,y)=>{g=()=>{y({name:"AbortError",message:b||"Aborted"})},x.signal.addEventListener("abort",g)});u(a(p,c,(T=s==null?void 0:s.getPendingMeta)==null?void 0:T.call(s,{requestId:p,arg:c},{getState:m,extra:f}))),v=await Promise.race([P,Promise.resolve(n(c,{dispatch:u,getState:m,extra:f,requestId:p,signal:x.signal,abort:w,rejectWithValue:(R,y)=>new fm(R,y),fulfillWithValue:(R,y)=>new Vx(R,y)})).then(R=>{if(R instanceof fm)throw R;return R instanceof Vx?i(R.payload,p,c,R.meta):i(R,p,c)})])}catch(E){v=E instanceof fm?o(null,p,c,E.payload,E.meta):o(E,p,c)}finally{g&&x.signal.removeEventListener("abort",g)}return s&&!s.dispatchConditionRejection&&o.match(v)&&v.meta.condition||u(v),v}();return Object.assign(k,{abort:w,requestId:p,arg:c,unwrap(){return k.then(k6)}})}}return Object.assign(l,{pending:a,rejected:o,fulfilled:i,settled:y6(o,i),typePrefix:t})}return e.withTypes=()=>e,e})();function k6(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function N6(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var C6=Symbol.for("rtk-slice-createasyncthunk");function S6(e,t){return`${e}/${t}`}function E6({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[C6];return function(i){const{name:a,reducerPath:o=a}=i;if(!a)throw new Error(ds(11));const l=(typeof i.reducers=="function"?i.reducers(I6()):i.reducers)||{},c=Object.keys(l),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(N,C){const T=typeof N=="string"?N:N.type;if(!T)throw new Error(ds(12));if(T in d.sliceCaseReducersByType)throw new Error(ds(13));return d.sliceCaseReducersByType[T]=C,u},addMatcher(N,C){return d.sliceMatchers.push({matcher:N,reducer:C}),u},exposeAction(N,C){return d.actionCreators[N]=C,u},exposeCaseReducer(N,C){return d.sliceCaseReducersByName[N]=C,u}};c.forEach(N=>{const C=l[N],T={reducerName:N,type:S6(a,N),createNotation:typeof i.reducers=="function"};A6(C)?L6(T,C,u,t):P6(T,C,u)});function m(){const[N={},C=[],T=void 0]=typeof i.extraReducers=="function"?z2(i.extraReducers):[i.extraReducers],E={...N,...d.sliceCaseReducersByType};return g6(i.initialState,P=>{for(let R in E)P.addCase(R,E[R]);for(let R of d.sliceMatchers)P.addMatcher(R.matcher,R.reducer);for(let R of C)P.addMatcher(R.matcher,R.reducer);T&&P.addDefaultCase(T)})}const f=N=>N,p=new Map,x=new WeakMap;let g;function b(N,C){return g||(g=m()),g(N,C)}function w(){return g||(g=m()),g.getInitialState()}function k(N,C=!1){function T(P){let R=P[N];return typeof R>"u"&&C&&(R=Sc(x,T,w)),R}function E(P=f){const R=Sc(p,C,()=>new WeakMap);return Sc(R,P,()=>{const y={};for(const[O,_]of Object.entries(i.selectors??{}))y[O]=T6(_,P,()=>Sc(x,P,w),C);return y})}return{reducerPath:N,getSelectors:E,get selectors(){return E(T)},selectSlice:T}}const v={name:a,reducer:b,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:w,...k(o),injectInto(N,{reducerPath:C,...T}={}){const E=C??o;return N.inject({reducerPath:E,reducer:b},T),{...v,...k(E,!0)}}};return v}}function T6(e,t,n,s){function i(a,...o){let l=t(a);return typeof l>"u"&&s&&(l=n()),e(l,...o)}return i.unwrapped=e,i}var Mr=E6();function I6(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function P6({type:e,reducerName:t,createNotation:n},s,i){let a,o;if("reducer"in s){if(n&&!R6(s))throw new Error(ds(17));a=s.reducer,o=s.prepare}else a=s;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,o?qo(e,o):qo(e))}function A6(e){return e._reducerDefinitionType==="asyncThunk"}function R6(e){return e._reducerDefinitionType==="reducerWithPrepare"}function L6({type:e,reducerName:t},n,s,i){if(!i)throw new Error(ds(18));const{payloadCreator:a,fulfilled:o,pending:l,rejected:c,settled:d,options:u}=n,m=i(e,a,u);s.exposeAction(t,m),o&&s.addCase(m.fulfilled,o),l&&s.addCase(m.pending,l),c&&s.addCase(m.rejected,c),d&&s.addMatcher(m.settled,d),s.exposeCaseReducer(t,{fulfilled:o||Ec,pending:l||Ec,rejected:c||Ec,settled:d||Ec})}function Ec(){}function ds(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const Se=De.create({baseURL:Qn,timeout:3e4,headers:{"Content-Type":"application/json"}});Se.interceptors.request.use(e=>{const t=localStorage.getItem("token")||localStorage.getItem("authToken");return t?(e.headers.Authorization=`Bearer ${t}`,console.log("Token added to request:",t.substring(0,20)+"...")):console.log("No token available for request"),e},e=>(console.error("Request error:",e),Promise.reject(e)));Se.interceptors.response.use(e=>e,e=>(console.error("API Error:",e.response||e),e.response&&e.response.status===401&&!e.config.url.includes("/login")&&!e.config.url.includes("/register")&&(console.log("Session expired, redirecting to login"),localStorage.removeItem("token"),localStorage.removeItem("authToken"),localStorage.removeItem("user"),window.dispatchEvent(new CustomEvent("auth_error",{detail:e}))),Promise.reject(e)));const Sg={login:(e,t)=>Se.post("/auth/login",{username:e,password:t}),register:e=>Se.post("/auth/register",e),logout:()=>Se.post("/auth/logout"),refreshToken:()=>Se.post("/auth/refresh-token"),forgotPassword:e=>Se.post("/auth/forgot-password",{email:e}),resetPassword:(e,t)=>Se.post("/auth/reset-password",{token:e,newPassword:t}),verifyEmail:e=>Se.get(`/auth/verify-email/${e}`),getCurrentUser:()=>Se.get("/auth/me"),updateProfile:e=>Se.put("/auth/profile",e),changePassword:(e,t)=>Se.post("/auth/change-password",{oldPassword:e,newPassword:t})},rn={getProfile:e=>Se.get(e?`/api/users/${e}/profile`:"/api/users/profile"),getUserProfile:()=>Se.get("/api/users/profile"),updateProfile:e=>Se.put("/api/users/profile",e),getProfileSettings:()=>Se.get("/api/settings"),updateProfileSettings:e=>Se.put("/api/settings",e),getUserRanking:e=>Se.get(`/api/users/${e}/ranking`),getAllUsers:e=>Se.get("/api/users",{params:e}),getUserAchievements:e=>Se.get(`/api/users/${e}/achievements`),uploadProfileImage:e=>Se.post("/api/users/profile/image",e,{headers:{"Content-Type":"multipart/form-data"}}),updateEducation:e=>Se.put("/api/users/profile",{education:e}),updateWorkExperience:e=>Se.put("/api/users/profile",{workExperience:e}),updateSkills:e=>Se.put("/api/users/profile",{skills:e}),updateInterests:e=>Se.put("/api/users/profile",{interests:e}),updateSocialLinks:e=>Se.put("/api/users/profile",{socialLinks:e}),updateAchievements:e=>Se.put("/api/users/profile",{achievements:e}),getEmails:()=>Se.get("/api/users/emails"),addEmail:e=>Se.post("/api/verification/email/add",{email:e}),setPrimaryEmail:e=>Se.put(`/api/users/emails/${e}/primary`),deleteEmail:e=>Se.delete(`/api/users/emails/${e}`),resendVerificationEmail:e=>Se.post("/api/verification/email/resend-additional-verification",{emailId:e}),verifyAdditionalEmail:(e,t)=>Se.post("/api/verification/email/verify-additional",{email:e,otp:t}),getSessions:()=>Se.get("/api/users/sessions"),deleteSession:e=>Se.delete(`/api/users/sessions/${e}`),terminateOtherSessions:()=>Se.post("/api/users/sessions/terminate-others")},Jl={getAllEvents:e=>Se.get("/api/events",{params:e}),getEventById:e=>Se.get(`/api/events/${e}`),registerForEvent:(e,t={})=>Se.post(`/api/events/${e}/register`,t),cancelEventRegistration:e=>Se.delete(`/api/events/${e}/register`),getRegisteredEvents:()=>Se.get("/api/events/registered"),getUpcomingEvents:()=>Se.get("/api/events/upcoming"),getOngoingEvents:()=>Se.get("/api/events/ongoing"),getPastEvents:()=>Se.get("/api/events/past"),getEventSchedule:e=>Se.get(`/api/events/${e}/schedule`),getEventParticipants:e=>Se.get(`/api/events/${e}/participants`),getEventRounds:e=>Se.get(`/api/events/${e}/rounds`),getEventPrizes:e=>Se.get(`/api/events/${e}/prizes`),getEventTechnologies:e=>Se.get(`/api/events/${e}/technologies`),getEventProgrammingLanguages:e=>Se.get(`/api/events/${e}/languages`),getEventAchievements:e=>Se.get(`/api/events/${e}/achievements`),getUserEventAchievements:()=>Se.get("/api/events/achievements"),checkEventRegistration:e=>Se.get(`/api/events/${e}/registration-status`)},U2={getAllPosts:e=>Se.get("/posts",{params:e}),getPostById:e=>Se.get(`/posts/${e}`),createPost:e=>Se.post("/posts",e),updatePost:(e,t)=>Se.put(`/posts/${e}`,t),deletePost:e=>Se.delete(`/posts/${e}`),likePost:e=>Se.post(`/posts/${e}/like`),unlikePost:e=>Se.delete(`/posts/${e}/like`),getPostLikes:e=>Se.get(`/posts/${e}/likes`),getPostComments:e=>Se.get(`/posts/${e}/comments`),createComment:(e,t)=>Se.post(`/posts/${e}/comments`,{content:t}),replyToComment:(e,t,n)=>Se.post(`/posts/${e}/comments/${t}/replies`,{content:n}),updateComment:(e,t)=>Se.put(`/comments/${e}`,{content:t}),deleteComment:e=>Se.delete(`/comments/${e}`),likeComment:e=>Se.post(`/comments/${e}/like`),unlikeComment:e=>Se.delete(`/comments/${e}/like`),getCommentLikes:e=>Se.get(`/comments/${e}/likes`),getPostsByTag:e=>Se.get(`/tags/${e}/posts`),getTags:()=>Se.get("/tags"),uploadPostMedia:(e,t)=>Se.post(`/posts/${e}/media`,t,{headers:{"Content-Type":"multipart/form-data"}}),reportPost:(e,t)=>Se.post(`/posts/${e}/report`,{reason:t})},V2={getAllNotifications:()=>Se.get("/notifications"),markNotificationAsRead:e=>Se.put(`/notifications/${e}/read`),getUnreadCount:()=>Se.get("/notifications/unread-count"),markAllNotificationsAsRead:()=>Se.put("/notifications/read-all"),deleteNotification:e=>Se.delete(`/notifications/${e}`),getNotificationPreferences:()=>Se.get("/notifications/preferences"),updateNotificationPreferences:e=>Se.put("/notifications/preferences",e),subscribeToEvents:e=>Se.post(`/events/${e}/subscribe`),unsubscribeFromEvents:e=>Se.delete(`/events/${e}/subscribe`),subscribeToCourses:e=>Se.post(`/courses/${e}/subscribe`),unsubscribeFromCourses:e=>Se.delete(`/courses/${e}/subscribe`)},Eg={getConversations:()=>Se.get("/conversations"),getConversationById:e=>Se.get(`/conversations/${e}`),sendMessage:(e,t)=>Se.post(`/conversations/${e}/messages`,{message:t}),getMessages:e=>Se.get(`/conversations/${e}/messages`),createConversation:e=>Se.post("/conversations",{participantId:e}),deleteConversation:e=>Se.delete(`/conversations/${e}`),markConversationAsRead:e=>Se.put(`/conversations/${e}/read`),getUnreadCount:()=>Se.get("/conversations/unread-count")},pm=xt("auth/login",async(e,{rejectWithValue:t})=>{var n;try{const s=await Sg.login(e.username,e.password),i=s.data.token||s.data.accessToken;return localStorage.setItem("token",i),localStorage.setItem("authToken",i),localStorage.setItem("user",JSON.stringify(s.data.user)),s.data}catch(s){return console.error("Login error:",s),t(((n=s.response)==null?void 0:n.data)||{message:"Đăng nhập thất bại. Vui lòng thử lại sau."})}}),gm=xt("auth/register",async(e,{rejectWithValue:t})=>{var n,s,i;try{console.log("Sending registration request to:","/api/auth/register"),console.log("Registration data:",{...e,role:"STUDENT",status:"ONLINE",accountStatus:"ACTIVE",provider:"local",emailVerified:!1});const a=await Sg.register({...e,role:"STUDENT",status:"ONLINE",accountStatus:"ACTIVE",provider:"local",emailVerified:!1});return console.log("Registration response:",a.data),a.data.token&&localStorage.setItem("token",a.data.token),a.data}catch(a){return console.error("Registration error:",a),console.error("Error details:",((n=a.response)==null?void 0:n.data)||a.message),((s=a.response)==null?void 0:s.status)===403?t({message:"Không có quyền đăng ký. Vui lòng liên hệ quản trị viên."}):t(((i=a.response)==null?void 0:i.data)||{message:"Đăng ký thất bại. Vui lòng thử lại sau."})}}),xm=xt("auth/getCurrentUser",async(e,{rejectWithValue:t})=>{var n;try{return(await Sg.getCurrentUser()).data}catch(s){return t(((n=s.response)==null?void 0:n.data)||{message:"Không thể lấy thông tin người dùng"})}}),M6={user:null,token:localStorage.getItem("token"),isAuthenticated:!!localStorage.getItem("token"),loading:!1,error:null},H2=Mr({name:"auth",initialState:M6,reducers:{logout:e=>{localStorage.removeItem("token"),e.user=null,e.token=null,e.isAuthenticated=!1},clearError:e=>{e.error=null},updateProfileImage:(e,t)=>{e.user&&(e.user.Image=t.payload,e.user.avatar&&(e.user.avatar=t.payload))},setUser:(e,t)=>{e.user=t.payload,e.token=t.payload.token,e.isAuthenticated=!0,e.loading=!1,e.error=null}},extraReducers:e=>{e.addCase(pm.pending,t=>{t.loading=!0,t.error=null}).addCase(pm.fulfilled,(t,n)=>{t.loading=!1,t.isAuthenticated=!0,t.user=n.payload.user,t.token=n.payload.token,t.error=null}).addCase(pm.rejected,(t,n)=>{var s;t.loading=!1,t.error=((s=n.payload)==null?void 0:s.message)||"Đăng nhập thất bại"}).addCase(gm.pending,t=>{t.loading=!0,t.error=null}).addCase(gm.fulfilled,(t,n)=>{t.loading=!1,t.isAuthenticated=!0,t.user=n.payload.user,t.token=n.payload.token}).addCase(gm.rejected,(t,n)=>{var s;t.loading=!1,t.error=((s=n.payload)==null?void 0:s.message)||"Đăng ký thất bại"}).addCase(xm.pending,t=>{t.loading=!0}).addCase(xm.fulfilled,(t,n)=>{t.loading=!1,t.user=n.payload,t.isAuthenticated=!0}).addCase(xm.rejected,t=>{t.loading=!1,t.user=null,t.isAuthenticated=!1,localStorage.removeItem("token")})}}),{logout:Tg,clearError:vre,updateProfileImage:Vf,setUser:W2}=H2.actions,D6=H2.reducer;var $6={};let Tc=!1,Hf=[];const O6=e=>{Hf.forEach(({config:t,resolve:n,reject:s})=>{t.headers.Authorization=`Bearer ${e}`,De(t).then(n).catch(s)}),Hf=[]},dn=De.create({baseURL:$6.VITE_API_URL||"http://localhost:5001/api",headers:{"Content-Type":"application/json"},timeout:1e4});dn.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),console.log(`API Request: ${e.method.toUpperCase()} ${e.baseURL}${e.url}`,{headers:e.headers,params:e.params,data:e.data}),e},e=>(console.error("API Request Error:",e),Promise.reject(e)));const B6=async()=>{try{const e=localStorage.getItem("refreshToken"),t=localStorage.getItem("token");if(t&&!e)return console.log("No refresh token available, but token exists - considering valid"),t;if(!e)throw console.log("No refresh token available for API client refresh"),new Error("No refresh token available");const n=await De.post("http://localhost:5001/api/auth/refresh-token",{refreshToken:e});if(n.data&&n.data.token)return localStorage.setItem("token",n.data.token),n.data.refreshToken&&localStorage.setItem("refreshToken",n.data.refreshToken),n.data.token;throw new Error("Failed to refresh token")}catch(e){throw console.log("Error refreshing token:",e.message),e.response&&(e.response.status===400||e.response.status===401)&&(localStorage.removeItem("token"),localStorage.removeItem("refreshToken")),e}};dn.interceptors.response.use(e=>(console.log(`API Response: ${e.status} ${e.config.method.toUpperCase()} ${e.config.url}`,{data:e.data}),e),async e=>{var n;if(e.code==="ECONNABORTED"||!e.response)return console.error("Network error or timeout:",e.message),Promise.reject({isNetworkError:!0,message:"Không thể kết nối đến máy chủ."});console.error("API Response Error:",e.message),e.response&&console.error("Error details:",{status:e.response.status,statusText:e.response.statusText,data:e.response.data,url:e.config.url});const t=e.config;if(((n=e.response)==null?void 0:n.status)===401){const s=t.url||"",i=s.includes("/courses/")&&!s.includes("/check-enrollment")&&!s.includes("/enroll")&&!s.includes("/content")&&!s.includes("/learn")||s==="/courses"||s.includes("/auth/")||s.includes("/events")||s.includes("/public/");console.log("URL checking for public endpoint:",s,"Result:",i);const a=localStorage.getItem("token"),o=localStorage.getItem("refreshToken");if(a&&o&&!t._retry&&!s.includes("/refresh-token")){if(t._retry=!0,Tc)return new Promise((l,c)=>{Hf.push({config:t,resolve:l,reject:c})});Tc=!0;try{const l=await B6();return Tc=!1,O6(l),t.headers.Authorization=`Bearer ${l}`,De(t)}catch(l){return Tc=!1,i||(console.warn("Token refresh failed, redirecting to login page"),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(l)}}else!i&&!a?(console.warn("Not authenticated, redirecting to login page"),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),window.location.href="/login"):console.log("Authentication required but allowing access without redirect for",s)}return Promise.reject(e)});function q2(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=q2(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function _e(){for(var e,t,n=0,s="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=q2(e))&&(s&&(s+=" "),s+=t);return s}function _6(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}_6(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Zl=e=>typeof e=="number"&&!isNaN(e),Yi=e=>typeof e=="string",xs=e=>typeof e=="function",F6=e=>Yi(e)||Zl(e),Wf=e=>Yi(e)||xs(e)?e:null,z6=(e,t)=>e===!1||Zl(e)&&e>0?e:t,qf=e=>h.isValidElement(e)||Yi(e)||xs(e)||Zl(e);function U6(e,t,n=300){let{scrollHeight:s,style:i}=e;requestAnimationFrame(()=>{i.minHeight="initial",i.height=s+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)})})}function V6({enter:e,exit:t,appendPosition:n=!1,collapse:s=!0,collapseDuration:i=300}){return function({children:a,position:o,preventExitTransition:l,done:c,nodeRef:d,isIn:u,playToast:m}){let f=n?`${e}--${o}`:e,p=n?`${t}--${o}`:t,x=h.useRef(0);return h.useLayoutEffect(()=>{let g=d.current,b=f.split(" "),w=k=>{k.target===d.current&&(m(),g.removeEventListener("animationend",w),g.removeEventListener("animationcancel",w),x.current===0&&k.type!=="animationcancel"&&g.classList.remove(...b))};g.classList.add(...b),g.addEventListener("animationend",w),g.addEventListener("animationcancel",w)},[]),h.useEffect(()=>{let g=d.current,b=()=>{g.removeEventListener("animationend",b),s?U6(g,c,i):c()};u||(l?b():(x.current=1,g.className+=` ${p}`,g.addEventListener("animationend",b)))},[u]),Fe.createElement(Fe.Fragment,null,a)}}function Wx(e,t){return{content:K2(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function K2(e,t,n=!1){return h.isValidElement(e)&&!Yi(e.type)?h.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):xs(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):e}function H6({closeToast:e,theme:t,ariaLabel:n="close"}){return Fe.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:s=>{s.stopPropagation(),e(!0)},"aria-label":n},Fe.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Fe.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function W6({delay:e,isRunning:t,closeToast:n,type:s="default",hide:i,className:a,controlledProgress:o,progress:l,rtl:c,isIn:d,theme:u}){let m=i||o&&l===0,f={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};o&&(f.transform=`scaleX(${l})`);let p=_e("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${u}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":c}),x=xs(a)?a({rtl:c,type:s,defaultClassName:p}):_e(p,a),g={[o&&l>=1?"onTransitionEnd":"onAnimationEnd"]:o&&l<1?null:()=>{d&&n()}};return Fe.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":m},Fe.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${u} Toastify__progress-bar--${s}`}),Fe.createElement("div",{role:"progressbar","aria-hidden":m?"true":"false","aria-label":"notification timer",className:x,style:f,...g}))}var q6=1,G2=()=>`${q6++}`;function K6(e,t,n){let s=1,i=0,a=[],o=[],l=t,c=new Map,d=new Set,u=k=>(d.add(k),()=>d.delete(k)),m=()=>{o=Array.from(c.values()),d.forEach(k=>k())},f=({containerId:k,toastId:v,updateId:N})=>{let C=k?k!==e:e!==1,T=c.has(v)&&N==null;return C||T},p=(k,v)=>{c.forEach(N=>{var C;(v==null||v===N.props.toastId)&&((C=N.toggle)==null||C.call(N,k))})},x=k=>{var v,N;(N=(v=k.props)==null?void 0:v.onClose)==null||N.call(v,k.removalReason),k.isActive=!1},g=k=>{if(k==null)c.forEach(x);else{let v=c.get(k);v&&x(v)}m()},b=()=>{i-=a.length,a=[]},w=k=>{var v,N;let{toastId:C,updateId:T}=k.props,E=T==null;k.staleId&&c.delete(k.staleId),k.isActive=!0,c.set(C,k),m(),n(Wx(k,E?"added":"updated")),E&&((N=(v=k.props).onOpen)==null||N.call(v))};return{id:e,props:l,observe:u,toggle:p,removeToast:g,toasts:c,clearQueue:b,buildToast:(k,v)=>{if(f(v))return;let{toastId:N,updateId:C,data:T,staleId:E,delay:P}=v,R=C==null;R&&i++;let y={...l,style:l.toastStyle,key:s++,...Object.fromEntries(Object.entries(v).filter(([_,L])=>L!=null)),toastId:N,updateId:C,data:T,isIn:!1,className:Wf(v.className||l.toastClassName),progressClassName:Wf(v.progressClassName||l.progressClassName),autoClose:v.isLoading?!1:z6(v.autoClose,l.autoClose),closeToast(_){c.get(N).removalReason=_,g(N)},deleteToast(){let _=c.get(N);if(_!=null){if(n(Wx(_,"removed")),c.delete(N),i--,i<0&&(i=0),a.length>0){w(a.shift());return}m()}}};y.closeButton=l.closeButton,v.closeButton===!1||qf(v.closeButton)?y.closeButton=v.closeButton:v.closeButton===!0&&(y.closeButton=qf(l.closeButton)?l.closeButton:!0);let O={content:k,props:y,staleId:E};l.limit&&l.limit>0&&i>l.limit&&R?a.push(O):Zl(P)?setTimeout(()=>{w(O)},P):w(O)},setProps(k){l=k},setToggle:(k,v)=>{let N=c.get(k);N&&(N.toggle=v)},isToastActive:k=>{var v;return(v=c.get(k))==null?void 0:v.isActive},getSnapshot:()=>o}}var zn=new Map,bl=[],Kf=new Set,G6=e=>Kf.forEach(t=>t(e)),X2=()=>zn.size>0;function X6(){bl.forEach(e=>Q2(e.content,e.options)),bl=[]}var Y6=(e,{containerId:t})=>{var n;return(n=zn.get(t||1))==null?void 0:n.toasts.get(e)};function Y2(e,t){var n;if(t)return!!((n=zn.get(t))!=null&&n.isToastActive(e));let s=!1;return zn.forEach(i=>{i.isToastActive(e)&&(s=!0)}),s}function Q6(e){if(!X2()){bl=bl.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||F6(e))zn.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=zn.get(e.containerId);t?t.removeToast(e.id):zn.forEach(n=>{n.removeToast(e.id)})}}var J6=(e={})=>{zn.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function Q2(e,t){qf(e)&&(X2()||bl.push({content:e,options:t}),zn.forEach(n=>{n.buildToast(e,t)}))}function Z6(e){var t;(t=zn.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function J2(e,t){zn.forEach(n=>{(t==null||!(t!=null&&t.containerId)||(t==null?void 0:t.containerId)===n.id)&&n.toggle(e,t==null?void 0:t.id)})}function eT(e){let t=e.containerId||1;return{subscribe(n){let s=K6(t,e,G6);zn.set(t,s);let i=s.observe(n);return X6(),()=>{i(),zn.delete(t)}},setProps(n){var s;(s=zn.get(t))==null||s.setProps(n)},getSnapshot(){var n;return(n=zn.get(t))==null?void 0:n.getSnapshot()}}}function tT(e){return Kf.add(e),()=>{Kf.delete(e)}}function nT(e){return e&&(Yi(e.toastId)||Zl(e.toastId))?e.toastId:G2()}function ec(e,t){return Q2(e,t),t.toastId}function Ou(e,t){return{...t,type:t&&t.type||e,toastId:nT(t)}}function Bu(e){return(t,n)=>ec(t,Ou(e,n))}function re(e,t){return ec(e,Ou("default",t))}re.loading=(e,t)=>ec(e,Ou("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function rT(e,{pending:t,error:n,success:s},i){let a;t&&(a=Yi(t)?re.loading(t,i):re.loading(t.render,{...i,...t}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(d,u,m)=>{if(u==null){re.dismiss(a);return}let f={type:d,...o,...i,data:m},p=Yi(u)?{render:u}:u;return a?re.update(a,{...f,...p}):re(p.render,{...f,...p}),m},c=xs(e)?e():e;return c.then(d=>l("success",s,d)).catch(d=>l("error",n,d)),c}re.promise=rT;re.success=Bu("success");re.info=Bu("info");re.error=Bu("error");re.warning=Bu("warning");re.warn=re.warning;re.dark=(e,t)=>ec(e,Ou("default",{theme:"dark",...t}));function sT(e){Q6(e)}re.dismiss=sT;re.clearWaitingQueue=J6;re.isActive=Y2;re.update=(e,t={})=>{let n=Y6(e,t);if(n){let{props:s,content:i}=n,a={delay:100,...s,...t,toastId:t.toastId||e,updateId:G2()};a.toastId!==e&&(a.staleId=e);let o=a.render||i;delete a.render,ec(o,a)}};re.done=e=>{re.update(e,{progress:1})};re.onChange=tT;re.play=e=>J2(!0,e);re.pause=e=>J2(!1,e);function iT(e){var t;let{subscribe:n,getSnapshot:s,setProps:i}=h.useRef(eT(e)).current;i(e);let a=(t=h.useSyncExternalStore(n,s,s))==null?void 0:t.slice();function o(l){if(!a)return[];let c=new Map;return e.newestOnTop&&a.reverse(),a.forEach(d=>{let{position:u}=d.props;c.has(u)||c.set(u,[]),c.get(u).push(d)}),Array.from(c,d=>l(d[0],d[1]))}return{getToastToRender:o,isToastActive:Y2,count:a==null?void 0:a.length}}function aT(e){let[t,n]=h.useState(!1),[s,i]=h.useState(!1),a=h.useRef(null),o=h.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:d,onClick:u,closeOnClick:m}=e;Z6({id:e.toastId,containerId:e.containerId,fn:n}),h.useEffect(()=>{if(e.pauseOnFocusLoss)return f(),()=>{p()}},[e.pauseOnFocusLoss]);function f(){document.hasFocus()||w(),window.addEventListener("focus",b),window.addEventListener("blur",w)}function p(){window.removeEventListener("focus",b),window.removeEventListener("blur",w)}function x(E){if(e.draggable===!0||e.draggable===E.pointerType){k();let P=a.current;o.canCloseOnClick=!0,o.canDrag=!0,P.style.transition="none",e.draggableDirection==="x"?(o.start=E.clientX,o.removalDistance=P.offsetWidth*(e.draggablePercent/100)):(o.start=E.clientY,o.removalDistance=P.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function g(E){let{top:P,bottom:R,left:y,right:O}=a.current.getBoundingClientRect();E.nativeEvent.type!=="touchend"&&e.pauseOnHover&&E.clientX>=y&&E.clientX<=O&&E.clientY>=P&&E.clientY<=R?w():b()}function b(){n(!0)}function w(){n(!1)}function k(){o.didMove=!1,document.addEventListener("pointermove",N),document.addEventListener("pointerup",C)}function v(){document.removeEventListener("pointermove",N),document.removeEventListener("pointerup",C)}function N(E){let P=a.current;if(o.canDrag&&P){o.didMove=!0,t&&w(),e.draggableDirection==="x"?o.delta=E.clientX-o.start:o.delta=E.clientY-o.start,o.start!==E.clientX&&(o.canCloseOnClick=!1);let R=e.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;P.style.transform=`translate3d(${R},0)`,P.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function C(){v();let E=a.current;if(o.canDrag&&o.didMove&&E){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){i(!0),e.closeToast(!0),e.collapseAll();return}E.style.transition="transform 0.2s, opacity 0.2s",E.style.removeProperty("transform"),E.style.removeProperty("opacity")}}let T={onPointerDown:x,onPointerUp:g};return l&&c&&(T.onMouseEnter=w,e.stacked||(T.onMouseLeave=b)),m&&(T.onClick=E=>{u&&u(E),o.canCloseOnClick&&d(!0)}),{playToast:b,pauseToast:w,isRunning:t,preventExitTransition:s,toastRef:a,eventHandlers:T}}var oT=typeof window<"u"?h.useLayoutEffect:h.useEffect,_u=({theme:e,type:t,isLoading:n,...s})=>Fe.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...s});function lT(e){return Fe.createElement(_u,{...e},Fe.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function cT(e){return Fe.createElement(_u,{...e},Fe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function dT(e){return Fe.createElement(_u,{...e},Fe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function uT(e){return Fe.createElement(_u,{...e},Fe.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function hT(){return Fe.createElement("div",{className:"Toastify__spinner"})}var Gf={info:cT,warning:lT,success:dT,error:uT,spinner:hT},mT=e=>e in Gf;function fT({theme:e,type:t,isLoading:n,icon:s}){let i=null,a={theme:e,type:t};return s===!1||(xs(s)?i=s({...a,isLoading:n}):h.isValidElement(s)?i=h.cloneElement(s,a):n?i=Gf.spinner():mT(t)&&(i=Gf[t](a))),i}var pT=e=>{let{isRunning:t,preventExitTransition:n,toastRef:s,eventHandlers:i,playToast:a}=aT(e),{closeButton:o,children:l,autoClose:c,onClick:d,type:u,hideProgressBar:m,closeToast:f,transition:p,position:x,className:g,style:b,progressClassName:w,updateId:k,role:v,progress:N,rtl:C,toastId:T,deleteToast:E,isIn:P,isLoading:R,closeOnClick:y,theme:O,ariaLabel:_}=e,L=_e("Toastify__toast",`Toastify__toast-theme--${O}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":C},{"Toastify__toast--close-on-click":y}),A=xs(g)?g({rtl:C,position:x,type:u,defaultClassName:L}):_e(L,g),M=fT(e),z=!!N||!c,ie={closeToast:f,type:u,theme:O},X=null;return o===!1||(xs(o)?X=o(ie):h.isValidElement(o)?X=h.cloneElement(o,ie):X=H6(ie)),Fe.createElement(p,{isIn:P,done:E,position:x,preventExitTransition:n,nodeRef:s,playToast:a},Fe.createElement("div",{id:T,tabIndex:0,onClick:d,"data-in":P,className:A,...i,style:b,ref:s,...P&&{role:v,"aria-label":_}},M!=null&&Fe.createElement("div",{className:_e("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!R})},M),K2(l,e,!t),X,!e.customProgressBar&&Fe.createElement(W6,{...k&&!z?{key:`p-${k}`}:{},rtl:C,theme:O,delay:c,isRunning:t,isIn:P,closeToast:f,hide:m,type:u,className:w,controlledProgress:z,progress:N||0})))},gT=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),xT=V6(gT("bounce",!0)),yT={position:"top-right",transition:xT,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function Z2(e){let t={...yT,...e},n=e.stacked,[s,i]=h.useState(!0),a=h.useRef(null),{getToastToRender:o,isToastActive:l,count:c}=iT(t),{className:d,style:u,rtl:m,containerId:f,hotKeys:p}=t;function x(b){let w=_e("Toastify__toast-container",`Toastify__toast-container--${b}`,{"Toastify__toast-container--rtl":m});return xs(d)?d({position:b,rtl:m,defaultClassName:w}):_e(w,Wf(d))}function g(){n&&(i(!0),re.play())}return oT(()=>{var b;if(n){let w=a.current.querySelectorAll('[data-in="true"]'),k=12,v=(b=t.position)==null?void 0:b.includes("top"),N=0,C=0;Array.from(w).reverse().forEach((T,E)=>{let P=T;P.classList.add("Toastify__toast--stacked"),E>0&&(P.dataset.collapsed=`${s}`),P.dataset.pos||(P.dataset.pos=v?"top":"bot");let R=N*(s?.2:1)+(s?0:k*E);P.style.setProperty("--y",`${v?R:R*-1}px`),P.style.setProperty("--g",`${k}`),P.style.setProperty("--s",`${1-(s?C:0)}`),N+=P.offsetHeight,C+=.025})}},[s,c,n]),h.useEffect(()=>{function b(w){var k;let v=a.current;p(w)&&((k=v.querySelector('[tabIndex="0"]'))==null||k.focus(),i(!1),re.pause()),w.key==="Escape"&&(document.activeElement===v||v!=null&&v.contains(document.activeElement))&&(i(!0),re.play())}return document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[p]),Fe.createElement("section",{ref:a,className:"Toastify",id:f,onMouseEnter:()=>{n&&(i(!1),re.pause())},onMouseLeave:g,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},o((b,w)=>{let k=w.length?{...u}:{...u,pointerEvents:"none"};return Fe.createElement("div",{tabIndex:-1,className:x(b),"data-stacked":n,style:k,key:`c-${b}`},w.map(({content:v,props:N})=>Fe.createElement(pT,{...N,stacked:n,collapseAll:g,isIn:l(N.toastId,N.containerId),key:`t-${N.key}`},v)))}))}var Es={};const bt={getAllCourses:()=>dn.get("/courses").catch(e=>{throw console.error("Error fetching courses:",e),e}),getCourseDetails:e=>{if(!e)return Promise.reject(new Error("Course identifier is required"));const t=String(e).trim();return new Promise((n,s)=>{const i=Es.VITE_API_URL||"http://localhost:5001",a=new XMLHttpRequest;a.open("GET",`${i}/api/courses/${t}`,!0),a.setRequestHeader("Content-Type","application/json");const o=localStorage.getItem("token");o&&a.setRequestHeader("Authorization",`Bearer ${o}`),a.onload=function(){if(a.status===200)try{const l=JSON.parse(a.responseText);l.data&&l.data.isFallbackData&&console.warn("Received fallback data from server"),n(l)}catch{s(new Error("Invalid response format"))}else s(new Error(`API returned error status: ${a.status}`))},a.onerror=function(){s(new Error("Lỗi kết nối đến máy chủ"))},a.send()})},getEnrolledCourses:()=>dn.get("/courses/enrolled"),checkEnrollment:e=>e?new Promise((t,n)=>{const s=Es.VITE_API_URL||"http://localhost:5001",i=new XMLHttpRequest;i.open("GET",`${s}/api/courses/${e}/check-enrollment`,!0),i.setRequestHeader("Content-Type","application/json");const a=localStorage.getItem("token");a&&i.setRequestHeader("Authorization",`Bearer ${a}`),i.onload=function(){if(i.status>=200&&i.status<300)try{const o=JSON.parse(i.responseText);t(o)}catch{n(new Error("Invalid response format"))}else n(new Error(`API returned error status: ${i.status}`))},i.onerror=function(){n(new Error("Lỗi kết nối đến máy chủ"))},i.send()}):Promise.reject(new Error("Course ID is required")),enrollFreeCourse:e=>e?(console.log("Enrolling in free course:",e),new Promise((t,n)=>{const s=Es.VITE_API_URL||"http://localhost:5001",i=new XMLHttpRequest;i.open("POST",`${s}/api/courses/${e}/enroll/free`,!0),i.setRequestHeader("Content-Type","application/json");const a=localStorage.getItem("token");if(a)i.setRequestHeader("Authorization",`Bearer ${a}`);else{n(new Error("Bạn cần đăng nhập để đăng ký khóa học"));return}i.onload=function(){if(console.log("Enrollment API response status:",i.status),i.status>=200&&i.status<300)try{const o=JSON.parse(i.responseText);console.log("Enrollment API response:",o),t(o)}catch(o){console.error("Error parsing enrollment response:",o),n(new Error("Invalid response format"))}else{console.error("HTTP error status:",i.status);try{const o=JSON.parse(i.responseText),l=o.message||`Lỗi đăng ký khóa học (${i.status})`;i.status===400&&l.toLowerCase().includes("already enrolled")?(console.warn("User already enrolled – treating as success"),t({...o,alreadyEnrolled:!0})):(console.error("Error details:",o),n(new Error(l)))}catch{n(new Error(`Lỗi đăng ký khóa học: Mã lỗi ${i.status}`))}}},i.onerror=function(){console.error("Network error occurred during enrollment"),n(new Error("Lỗi kết nối đến máy chủ khi đăng ký khóa học"))},i.timeout=1e4,i.ontimeout=function(){console.error("Request timeout for enrollment"),n(new Error("Yêu cầu đăng ký đã hết thời gian chờ, vui lòng thử lại"))},i.send()})):(console.error("Course ID is required for enrolling"),Promise.reject(new Error("Course ID is required"))),createPayment:(e,t)=>dn.post(`/courses/${e}/create-payment`,{bankCode:t}),createVietQRPayment:e=>dn.post(`/courses/${e}/create-vietqr`),verifyVietQRPayment:e=>dn.post("/payments/verify-vietqr",{transactionCode:e}),processVNPayTransaction:e=>e?dn.get(`/payment/vnpay/transaction/${e}`).catch(t=>{throw console.error("Error processing VNPay transaction:",t),t}):Promise.reject(new Error("Transaction ID is required")),createPayPalOrder:e=>dn.post(`/courses/${e}/create-paypal-order`),processPayPalSuccess:({transactionId:e,PayerID:t,courseId:n})=>dn.post("/payment/paypal/success",{transactionId:e,PayerID:t,courseId:n}),processPayPalCancel:e=>dn.post(`/payment/paypal/cancel?transactionId=${e}`),getPaymentHistory:()=>dn.get("/user/payment-history"),getCoursePaymentHistory:e=>e?dn.get(`/courses/${e}/payment-history`):Promise.reject(new Error("Course ID is required")),getCourseContent:e=>e?new Promise((t,n)=>{const s=Es.VITE_API_URL||"http://localhost:5001",i=new XMLHttpRequest;i.open("GET",`${s}/api/courses/${e}/content`,!0),i.setRequestHeader("Content-Type","application/json");const a=localStorage.getItem("token");a?(i.setRequestHeader("Authorization",`Bearer ${a}`),console.log("Using authentication token:",a.substring(0,10)+"...")):console.warn("No authentication token found. User might not be logged in."),i.timeout=15e3,i.onload=function(){if(i.status===200)try{const o=JSON.parse(i.responseText);console.log("Course content response:",o),o.success&&o.data.IsPreview&&console.log("User is viewing course in preview mode"),t({data:o})}catch(o){console.error("Error parsing JSON response:",o),n(new Error("Invalid response format"))}else if(i.status===401)console.warn("Authentication failed when accessing course content (401)"),localStorage.removeItem("token"),re.info("Bạn cần đăng nhập để xem đầy đủ nội dung khóa học."),n(new Error("Authentication required"));else if(i.status===403)console.warn("User not authorized to access this course (403)"),re.info("Bạn chưa đăng ký khóa học này. Không thể xem nội dung khóa học."),n(new Error("Not enrolled in this course"));else if(i.status>=500){console.error("Server error when fetching course content:",i.status,i.responseText);let o="Unknown server error";try{const l=JSON.parse(i.responseText);o=l.message||l.code||"Unknown server error",console.error("Error details:",l)}catch{o=i.responseText||"Unknown server error"}re.error(`Lỗi máy chủ: ${o}`),n(new Error(`Server error: ${o}`))}else console.error("HTTP error status:",i.status),n(new Error(`API returned error status: ${i.status}`))},i.ontimeout=function(){console.warn("Request timeout: Server is not responding"),re.warning("Máy chủ phản hồi chậm. Vui lòng thử lại sau."),n(new Error("Request timeout"))},i.onerror=function(){console.error("Network error occurred"),re.warning("Không thể kết nối đến máy chủ. Vui lòng kiểm tra kết nối mạng của bạn."),n(new Error("Network error"))},i.send()}):Promise.reject(new Error("Course ID is required")),getUserCourseProgress:e=>e?new Promise((t,n)=>{const s=Es.VITE_API_URL||"http://localhost:5001",i=new XMLHttpRequest;i.open("GET",`${s}/api/courses/${e}/progress`,!0),i.setRequestHeader("Content-Type","application/json");const a=localStorage.getItem("token");a&&i.setRequestHeader("Authorization",`Bearer ${a}`),i.onload=function(){if(i.status===200)try{const o=JSON.parse(i.responseText);t(o)}catch{n(new Error("Invalid response format"))}else i.status===404?(console.warn("No progress found for course. Using default empty progress."),t({success:!0,message:"No progress data found yet",data:{overallProgress:0,completedLessons:[]}})):n(new Error(`API returned error status: ${i.status}`))},i.onerror=function(){console.error("Connection error while fetching course progress"),t({success:!0,message:"Connection error while fetching progress. Using default empty progress.",data:{overallProgress:0,completedLessons:[]}})},i.send()}):Promise.reject(new Error("Course ID is required")),markLessonAsComplete:(e,t)=>t?dn.post(`/lessons/${t}/progress`,{status:"completed"}).then(n=>n.data).catch(n=>{throw console.error("Error marking lesson as complete:",n),n}):Promise.reject(new Error("Lesson ID is required")),getCodeExercise:(e,t)=>!e||!t?Promise.reject(new Error("Course ID and Lesson ID are required")):new Promise((n,s)=>{const i=Es.VITE_API_URL||"http://localhost:5001",a=new XMLHttpRequest;a.open("GET",`${i}/api/courses/${e}/lessons/${t}/code-exercise`,!0),a.setRequestHeader("Content-Type","application/json");const o=localStorage.getItem("token");o&&a.setRequestHeader("Authorization",`Bearer ${o}`),a.onload=function(){if(a.status===200)try{const l=JSON.parse(a.responseText);n(l)}catch{s(new Error("Invalid response format"))}else s(new Error(`API returned error status: ${a.status}`))},a.onerror=function(){s(new Error("Lỗi kết nối đến máy chủ"))},a.send()}),runCodeExercise:(e,t,n)=>!e||!t||!n?Promise.reject(new Error("Course ID, Lesson ID, and code are required")):new Promise((s,i)=>{const a=Es.VITE_API_URL||"http://localhost:5001",o=new XMLHttpRequest;o.open("POST",`${a}/api/courses/${e}/lessons/${t}/run-code`,!0),o.setRequestHeader("Content-Type","application/json");const l=localStorage.getItem("token");l&&o.setRequestHeader("Authorization",`Bearer ${l}`),o.onload=function(){if(o.status>=200&&o.status<300)try{const c=JSON.parse(o.responseText);s(c)}catch{i(new Error("Invalid response format"))}else i(new Error(`API returned error status: ${o.status}`))},o.onerror=function(){i(new Error("Lỗi kết nối đến máy chủ"))},o.send(JSON.stringify({code:n}))}),executeCode:async(e,t,n="")=>{if(!e||!t)return console.error("Code and language must be provided"),{success:!1,message:"Code và ngôn ngữ lập trình là bắt buộc"};try{console.log(`Executing code with language: ${t}`);const s=await dn.post("/code-execution/execute",{code:e,language:t,stdin:n});return console.log("Code execution response:",s),s.data}catch(s){return console.error("Error executing code:",s),s.response?{success:!1,message:s.response.data.message||"Lỗi khi thực thi code",error:s.response.data.error}:{success:!1,message:s.message||"Không thể kết nối đến dịch vụ thực thi code"}}},sendInput:async(e,t)=>{if(!e)return console.error("Execution ID must be provided"),{success:!1,message:"ID thực thi là bắt buộc"};try{console.log(`Sending input to execution ${e}: ${t}`);const n=await dn.post("/code-execution/send-input",{executionId:e,input:t});return console.log("Send input response:",n),n.data}catch(n){return console.error("Error sending input:",n),n.response?{success:!1,message:n.response.data.message||"Lỗi khi gửi dữ liệu đầu vào",error:n.response.data.error}:{success:!1,message:n.message||"Không thể kết nối đến dịch vụ thực thi code"}}},stopExecution:async e=>{if(!e)return console.error("Execution ID must be provided"),{success:!1,message:"ID thực thi là bắt buộc"};try{console.log(`Stopping execution ${e}`);const t=await dn.post("/code-execution/stop",{executionId:e});return console.log("Stop execution response:",t),t.data}catch(t){return console.error("Error stopping execution:",t),t.response?{success:!1,message:t.response.data.message||"Lỗi khi dừng thực thi",error:t.response.data.error}:{success:!1,message:t.message||"Không thể kết nối đến dịch vụ thực thi code"}}},submitCodeExercise:async(e,t,n,s)=>(console.log(`Submitting code for course ${e}, lesson ${t}`),new Promise((i,a)=>{try{const o=Es.VITE_API_URL||"http://localhost:5001",l=new XMLHttpRequest;l.open("POST",`${o}/api/courses/${e}/lessons/${t}/submit-code`,!0),l.setRequestHeader("Content-Type","application/json");const c=localStorage.getItem("token");c&&l.setRequestHeader("Authorization",`Bearer ${c}`),l.onload=function(){if(l.status>=200&&l.status<300)try{const d=JSON.parse(l.responseText);i(d)}catch{a(new Error("Invalid response format"))}else try{const d=JSON.parse(l.responseText);a(d)}catch{a(new Error(`API returned error status: ${l.status}`))}},l.onerror=function(){a({isNetworkError:!0,message:"Lỗi kết nối đến máy chủ"})},l.send(JSON.stringify({code:n,language:s,courseId:e}))}catch(o){console.error("Error in submitCodeExercise:",o),a(o)}})),initializeCodeServer:async(e,t)=>{var n,s;try{return(await dn.post(`/courses/${e}/lessons/${t}/code-server`)).data}catch(i){return console.error("Error initializing code-server:",i),{success:!1,message:((s=(n=i.response)==null?void 0:n.data)==null?void 0:s.message)||"Không thể khởi tạo môi trường code"}}}},Xf=()=>{const e=localStorage.getItem("enrolledCourses");if(e)try{const{data:t,timestamp:n}=JSON.parse(e);if(Date.now()-n<5*60*1e3)return t}catch{console.warn("Failed to parse cached courses")}return null},Yf=e=>{try{localStorage.setItem("enrolledCourses",JSON.stringify({data:e,timestamp:Date.now()}))}catch{console.warn("Failed to cache courses")}},yr=xt("course/fetchEnrolledCourses",async(e={},{dispatch:t,rejectWithValue:n,getState:s})=>{var a,o,l;const{forceRefresh:i=!1}=e;try{const c=!i&&Xf();if(c&&(t({type:"course/fetchEnrolledCourses/fulfilled",payload:c}),!i))return setTimeout(()=>{t(yr({forceRefresh:!0}))},100),c;console.log("Fetching enrolled courses...");const d=await bt.getEnrolledCourses();if(console.log("Enrolled courses response:",d),d.data&&d.data.success){let u=d.data.data.map(f=>({...f,enrolled:!0}));const m=new Map;return u.forEach(f=>{const p=f.CourseID||f.id;p&&!m.has(p)&&m.set(p,f)}),u=Array.from(m.values()),Yf(u),u}else return n(((a=d.data)==null?void 0:a.message)||"Không thể tải khóa học đã đăng ký")}catch(c){return console.error("Error fetching enrolled courses:",c),n(((l=(o=c.response)==null?void 0:o.data)==null?void 0:l.message)||"Đã xảy ra lỗi khi tải khóa học đã đăng ký")}}),id=xt("course/preloadAllCourses",async(e,{rejectWithValue:t})=>{var n,s,i;try{const a=await bt.getAllCourses();return a.data&&a.data.success?(localStorage.setItem("allCourses",JSON.stringify({data:a.data.data,timestamp:Date.now()})),a.data.data):t(((n=a.data)==null?void 0:n.message)||"Không thể tải danh sách khóa học")}catch(a){return console.error("Error preloading all courses:",a),t(((i=(s=a.response)==null?void 0:s.data)==null?void 0:i.message)||"Đã xảy ra lỗi khi tải danh sách khóa học")}}),ad=xt("courses/enrollFreeCourse",async(e,{rejectWithValue:t})=>{var n;try{return await bt.enrollFreeCourse(e)}catch(s){return t(((n=s.response)==null?void 0:n.data)||{message:"Không thể đăng ký khóa học"})}}),bT={enrolledCourses:[],allCourses:[],loading:!1,error:null,enrollmentSuccess:!1,dataLoaded:!1},ej=Mr({name:"courses",initialState:bT,reducers:{clearCourses:e=>{e.enrolledCourses=[]},resetEnrollmentStatus:e=>{e.enrollmentSuccess=!1},addEnrolledCourse:(e,t)=>{const n={...t.payload,CourseID:t.payload.CourseID||t.payload.id||null,enrolled:!0,CourseType:t.payload.CourseType||t.payload.courseType||((t.payload.Title||t.payload.title||"").toLowerCase().includes("it")?"it":"regular")};if(!e.enrolledCourses.some(i=>i.CourseID===n.CourseID||i.id===n.CourseID||n.id&&(i.CourseID===n.id||i.id===n.id))&&n.CourseID){console.log("Manually adding enrolled course to Redux store:",n),e.enrolledCourses.push(n);const i=Xf()||[];!i.some(o=>o.CourseID===n.CourseID||o.id===n.CourseID||n.id&&(o.CourseID===n.id||o.id===n.id))&&Yf([...i,n])}},loadCachedAllCourses:e=>{const t=localStorage.getItem("allCourses");if(t)try{const{data:n,timestamp:s}=JSON.parse(t);Date.now()-s<30*60*1e3&&(e.allCourses=n,e.dataLoaded=!0)}catch{console.warn("Failed to parse cached all courses")}}},extraReducers:e=>{e.addCase(yr.pending,t=>{t.loading=!0,t.error=null}).addCase(yr.fulfilled,(t,n)=>{t.loading=!1,t.enrolledCourses=n.payload}).addCase(yr.rejected,(t,n)=>{t.loading=!1,t.error=n.payload}).addCase(id.pending,t=>{}).addCase(id.fulfilled,(t,n)=>{t.allCourses=n.payload,t.dataLoaded=!0}).addCase(id.rejected,t=>{}).addCase(ad.pending,t=>{t.loading=!0,t.error=null}).addCase(ad.fulfilled,(t,n)=>{if(t.loading=!1,t.enrollmentSuccess=!0,n.payload&&n.payload.course){const s={...n.payload.course,enrolled:!0};if(!t.enrolledCourses.some(a=>a.CourseID===s.CourseID||a.CourseID===s.id||a.id===s.CourseID||a.id===s.id)){t.enrolledCourses.push(s);const a=Xf()||[];Yf([...a,s])}}}).addCase(ad.rejected,(t,n)=>{var s;t.loading=!1,t.error=((s=n.payload)==null?void 0:s.message)||"Lỗi khi đăng ký khóa học"})}}),{clearCourses:wre,resetEnrollmentStatus:jre,addEnrolledCourse:Ig,loadCachedAllCourses:vT}=ej.actions,wT=ej.reducer,jT=()=>localStorage.getItem("token"),kT=async e=>{const t=jT();return await De.get(`${Qn}/api/events/${e}`,{headers:{Authorization:`Bearer ${t}`}})},ym=xt("events/fetchUpcoming",async(e,{rejectWithValue:t})=>{var n;try{return(await Jl.getUpcomingEvents()).data}catch(s){return t(((n=s.response)==null?void 0:n.data)||{message:"Không thể tải sự kiện sắp diễn ra"})}}),Ko=xt("events/fetchAll",async(e,{rejectWithValue:t})=>{var n;try{const s=await Jl.getAllEvents(e);if(console.log("Events API Response:",s),!s.data)throw new Error("No data received from API");return(Array.isArray(s.data)?s.data:[]).map(a=>({...a,EventDate:a.EventDate||new Date().toISOString().split("T")[0],EventTime:a.EventTime||"00:00:00",Price:parseFloat(a.Price)||0,MaxAttendees:parseInt(a.MaxAttendees)||0,CurrentAttendees:parseInt(a.CurrentAttendees)||0}))}catch(s){return console.error("Fetch events error:",s),t(((n=s.response)==null?void 0:n.data)||{message:"Không thể tải sự kiện",error:s.message})}}),tj=xt("events/registerEvent",async({eventId:e,userData:t={}},{rejectWithValue:n})=>{var s,i;try{console.log("Attempting to register for event:",e);const a=await Jl.registerForEvent(e,t);return console.log("Registration successful:",a),{success:!0,message:"Đăng ký tham gia sự kiện thành công!",data:a.data}}catch(a){console.error("Registration failed:",a);const o=((i=(s=a.response)==null?void 0:s.data)==null?void 0:i.message)||a.message||"Đăng ký thất bại. Vui lòng thử lại sau.";return n({message:o,error:a.toString()})}}),$a=xt("events/fetchEventDetail",async(e,{rejectWithValue:t})=>{var n;try{const s=await kT(e);if(!s.data)throw new Error("Không tìm thấy thông tin sự kiện");return{...s.data,EventDate:s.data.EventDate||new Date().toISOString().split("T")[0],EventTime:s.data.EventTime||"00:00:00",Price:parseFloat(s.data.Price)||0,MaxAttendees:parseInt(s.data.MaxAttendees)||0,CurrentAttendees:parseInt(s.data.CurrentAttendees)||0,schedule:Array.isArray(s.data.schedule)?s.data.schedule:[],prizes:Array.isArray(s.data.prizes)?s.data.prizes:[],languages:Array.isArray(s.data.languages)?s.data.languages:[],technologies:Array.isArray(s.data.technologies)?s.data.technologies:[]}}catch(s){return((n=s.response)==null?void 0:n.status)===401?t({message:"Vui lòng đăng nhập để xem chi tiết",isAuthError:!0}):t({message:"Không thể tải thông tin sự kiện",error:s.message})}}),nj=xt("events/cancelRegistration",async(e,{rejectWithValue:t})=>{var n,s;try{console.log("Attempting to cancel registration for event:",e);const i=await Jl.cancelEventRegistration(e);return console.log("Cancel registration successful:",i),{success:!0,message:"Hủy đăng ký sự kiện thành công!",data:i.data}}catch(i){console.error("Cancel registration failed:",i);const a=i.message||((s=(n=i.response)==null?void 0:n.data)==null?void 0:s.message)||"Hủy đăng ký thất bại. Vui lòng thử lại sau.";return t({message:a,error:i.toString()})}}),od=xt("events/checkRegistrationStatus",async(e,{rejectWithValue:t})=>{try{console.log("Checking registration status for event:",e);const n=await Jl.checkEventRegistration(e);console.log("Check registration status successful:",n);const s=n.data||n;return{isRegistered:s.isRegistered||!1,registrationInfo:s.registrationInfo||null}}catch(n){return console.error("Check registration status failed:",n),{isRegistered:!1,registrationInfo:null}}}),NT={events:[],upcomingEvents:[],loading:!1,error:null,filters:{category:"all",difficulty:"all",status:"upcoming"},currentEvent:null,isRegistered:!1,registrationInfo:null,registrationLoading:!1},rj=Mr({name:"event",initialState:NT,reducers:{setFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},clearCurrentEvent:e=>{e.currentEvent=null,e.isRegistered=!1,e.registrationInfo=null},setRegistrationStatus:(e,t)=>{e.isRegistered=t.payload.isRegistered,e.registrationInfo=t.payload.registrationInfo}},extraReducers:e=>{e.addCase(Ko.pending,t=>{t.loading=!0,t.error=null}).addCase(Ko.fulfilled,(t,n)=>{t.loading=!1,t.events=n.payload||[],t.error=null}).addCase(Ko.rejected,(t,n)=>{var s;t.loading=!1,t.events=[],t.error=((s=n.payload)==null?void 0:s.message)||"Lỗi khi tải sự kiện"}).addCase(ym.pending,t=>{t.loading=!0,t.error=null}).addCase(ym.fulfilled,(t,n)=>{t.loading=!1,t.upcomingEvents=n.payload}).addCase(ym.rejected,(t,n)=>{var s;t.loading=!1,t.error=((s=n.payload)==null?void 0:s.message)||"Lỗi khi tải sự kiện sắp diễn ra"}).addCase($a.pending,t=>{t.loading=!0,t.error=null}).addCase($a.fulfilled,(t,n)=>{t.loading=!1,t.currentEvent=n.payload,t.error=null}).addCase($a.rejected,(t,n)=>{var s;t.loading=!1,t.currentEvent=null,t.error=((s=n.payload)==null?void 0:s.message)||"Lỗi khi tải thông tin sự kiện"}).addCase(od.pending,t=>{t.registrationLoading=!0}).addCase(od.fulfilled,(t,n)=>{t.registrationLoading=!1,console.log("Registration status updated:",n.payload),t.isRegistered=n.payload.isRegistered,t.registrationInfo=n.payload.registrationInfo}).addCase(od.rejected,t=>{t.registrationLoading=!1,t.isRegistered=!1,t.registrationInfo=null}).addCase(tj.fulfilled,t=>{t.isRegistered=!0}).addCase(nj.fulfilled,t=>{t.isRegistered=!1,t.registrationInfo=null})}}),{setFilters:qx,clearCurrentEvent:sj,setRegistrationStatus:bm}=rj.actions,CT=rj.reducer,Go=xt("notifications/fetchNotifications",async(e,{rejectWithValue:t})=>{var n;try{return(await V2.getAllNotifications()).data.notifications||[]}catch(s){return t(((n=s.response)==null?void 0:n.data)||"Không thể tải thông báo")}}),ST=xt("notifications/fetchUnreadCount",async(e,{rejectWithValue:t})=>{var n;try{return(await V2.getUnreadCount()).data.count}catch(s){return t(((n=s.response)==null?void 0:n.data)||"Không thể tải số thông báo chưa đọc")}}),ij=Mr({name:"notifications",initialState:{notifications:[],unreadCount:0,loading:!1,error:null},reducers:{clearNotifications:e=>{e.notifications=[],e.unreadCount=0}},extraReducers:e=>{e.addCase(Go.pending,t=>{t.loading=!0,t.error=null}).addCase(Go.fulfilled,(t,n)=>{t.loading=!1,t.notifications=Array.isArray(n.payload)?n.payload:[],t.error=null}).addCase(Go.rejected,(t,n)=>{t.loading=!1,t.error=n.payload,t.notifications=[]}).addCase(ST.fulfilled,(t,n)=>{t.unreadCount=n.payload})}}),{clearNotifications:kre}=ij.actions,ET=ij.reducer,vm=xt("posts/fetchAll",async()=>(await U2.getAllPosts()).data),wm=xt("posts/create",async e=>(await U2.createPost(e)).data),TT=Mr({name:"posts",initialState:{posts:[],loading:!1,error:null,totalItems:0,totalPages:0,currentPage:1},reducers:{},extraReducers:e=>{e.addCase(vm.pending,t=>{t.loading=!0}).addCase(vm.fulfilled,(t,n)=>{t.loading=!1,t.posts=n.payload.posts||[],t.totalItems=n.payload.totalItems||0,t.totalPages=n.payload.totalPages||0,t.currentPage=n.payload.currentPage||1}).addCase(vm.rejected,(t,n)=>{t.loading=!1,t.error=n.error.message}).addCase(wm.pending,t=>{t.loading=!0}).addCase(wm.fulfilled,(t,n)=>{t.loading=!1,t.posts.unshift(n.payload)}).addCase(wm.rejected,(t,n)=>{t.loading=!1,t.error=n.error.message})}}),IT=TT.reducer,eo="http://localhost:5001".replace(/\/$/,""),ld=xt("ranking/fetchRankings",async({timeRange:e="all",category:t="all"}={},{rejectWithValue:n})=>{var s;try{console.log(`Fetching rankings from: ${eo}/api/rankings with filters:`,{timeRange:e,category:t});const i=await De.get(`${eo}/api/rankings`,{params:{timeRange:e,category:t}});return console.log("Rankings response:",i.data),i.data}catch(i){return console.error("Failed to fetch rankings:",i),n(((s=i.response)==null?void 0:s.data)||i.message)}}),cd=xt("ranking/fetchUserRanking",async(e,{rejectWithValue:t})=>{var n;try{console.log(`Fetching user ranking from: ${eo}/api/rankings/user/${e}`);const s=await De.get(`${eo}/api/rankings/user/${e}`);return console.log("User ranking response:",s.data),s.data}catch(s){return console.error("Failed to fetch user ranking:",s),t(((n=s.response)==null?void 0:n.data)||s.message)}}),PT=xt("ranking/addPoints",async({userId:e,points:t,reason:n,type:s},{rejectWithValue:i})=>{var a;try{console.log(`Adding points to user ${e} at: ${eo}/api/rankings/user/${e}/points`);const o=await De.post(`${eo}/api/rankings/user/${e}/points`,{points:t,reason:n,type:s},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});return console.log("Add points response:",o.data),o.data}catch(o){return console.error("Failed to add points:",o),i(((a=o.response)==null?void 0:a.data)||o.message)}}),aj=Mr({name:"ranking",initialState:{rankings:[],userRanking:null,loading:!1,error:null,timeRange:"all",category:"all"},reducers:{setTimeRange:(e,t)=>{e.timeRange=t.payload},setCategory:(e,t)=>{e.category=t.payload}},extraReducers:e=>{e.addCase(ld.pending,t=>{t.loading=!0,t.error=null}).addCase(ld.fulfilled,(t,n)=>{t.loading=!1,t.rankings=n.payload||[]}).addCase(ld.rejected,(t,n)=>{t.loading=!1,t.error=n.payload||n.error.message}).addCase(cd.pending,t=>{t.loading=!0,t.error=null}).addCase(cd.fulfilled,(t,n)=>{t.loading=!1,t.userRanking=n.payload}).addCase(cd.rejected,(t,n)=>{t.loading=!1,t.error=n.payload||n.error.message}).addCase(PT.fulfilled,(t,n)=>{})}}),{setTimeRange:AT,setCategory:RT}=aj.actions,LT=aj.reducer,jm=xt("aiChat/sendMessage",async e=>(await De.post("http://localhost:5001/api/ai/chat",{message:e})).data),MT=xt("aiChat/fetchHistory",async()=>(await De.get("http://localhost:5001/api/ai/chat/history")).data),DT=Mr({name:"aiChat",initialState:{chatHistory:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(jm.pending,t=>{t.loading=!0}).addCase(jm.fulfilled,(t,n)=>{t.loading=!1,t.chatHistory.push(n.payload)}).addCase(jm.rejected,(t,n)=>{t.loading=!1,t.error=n.error.message}).addCase(MT.fulfilled,(t,n)=>{t.chatHistory=n.payload})}}),$T=DT.reducer,km=xt("chat/fetchConversations",async(e,{rejectWithValue:t})=>{try{return(await Eg.getConversations()).data}catch(n){return t(n.response.data)}}),Nm=xt("chat/fetchMessages",async(e,{rejectWithValue:t})=>{try{return(await Eg.getMessages(e)).data}catch(n){return t(n.response.data)}}),Cm=xt("chat/sendMessage",async({conversationId:e,content:t},{rejectWithValue:n})=>{try{return(await Eg.postMessage(e,{content:t})).data}catch(s){return n(s.response.data)}}),oj=Mr({name:"chat",initialState:{conversations:[],currentConversation:null,messages:[],loading:!1,error:null},reducers:{setCurrentConversation:(e,t)=>{e.currentConversation=t.payload},addMessage:(e,t)=>{e.messages.push(t.payload)},clearMessages:e=>{e.messages=[]}},extraReducers:e=>{e.addCase(km.pending,t=>{t.loading=!0,t.error=null}).addCase(km.fulfilled,(t,n)=>{t.loading=!1,t.conversations=n.payload}).addCase(km.rejected,(t,n)=>{t.loading=!1,t.error=n.payload}).addCase(Nm.pending,t=>{t.loading=!0,t.error=null}).addCase(Nm.fulfilled,(t,n)=>{t.loading=!1,t.messages=n.payload}).addCase(Nm.rejected,(t,n)=>{t.loading=!1,t.error=n.payload}).addCase(Cm.pending,t=>{t.error=null}).addCase(Cm.fulfilled,(t,n)=>{t.messages.push(n.payload)}).addCase(Cm.rejected,(t,n)=>{t.error=n.payload})}}),{setCurrentConversation:Nre,addMessage:Cre,clearMessages:Sre}=oj.actions,OT=oj.reducer,Sm=xt("reports/createReport",async(e,{rejectWithValue:t})=>{try{return(await dn.post("/reports",e)).data}catch(n){return t(n.response.data)}});xt("reports/fetchUserReports",async()=>(await dn.get("/reports/user")).data);const BT=Mr({name:"reports",initialState:{reports:[],loading:!1,error:null},reducers:{updateReportStatus:(e,t)=>{const{reportId:n,status:s}=t.payload,i=e.reports.find(a=>a.id===n);i&&(i.status=s)}},extraReducers:e=>{e.addCase(Sm.pending,t=>{t.loading=!0}).addCase(Sm.fulfilled,(t,n)=>{t.loading=!1,t.reports.push(n.payload),t.error=null}).addCase(Sm.rejected,(t,n)=>{t.loading=!1,t.error=n.payload})}}),_T=BT.reducer,vi=De.create({baseURL:`${Qn}/api/settings`,timeout:1e4,headers:{"Content-Type":"application/json"}});vi.interceptors.request.use(e=>{const t=localStorage.getItem("token")||localStorage.getItem("authToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>(console.error("Request error:",e),Promise.reject(e)));const uo={getUserSettings:()=>vi.get("/"),updateSettings:e=>vi.put("/",{settings:e}),uploadProfilePicture:e=>vi.post("/profile-picture",e,{headers:{"Content-Type":"multipart/form-data"}}),changePassword:(e,t)=>vi.post("/change-password",{currentPassword:e,newPassword:t}),deleteAccount:(e,t)=>vi.post("/delete-account",{password:e,reason:t}),exportData:()=>vi.post("/export-data",{},{responseType:"arraybuffer",headers:{Accept:"application/json, application/octet-stream"}}).then(e=>{const t=e.headers["content-type"];return t&&t.includes("application/json")||(e.data=new Blob([e.data],{type:t||"application/json"})),e})},Xo=xt("user/getSettings",async(e,{rejectWithValue:t})=>{var n;try{return(await uo.getUserSettings()).data}catch(s){return t(((n=s.response)==null?void 0:n.data)||{message:s.message})}}),dd=xt("user/getProfile",async(e,{rejectWithValue:t})=>{var n;try{return(await rn.getUserProfile()).data}catch(s){return t(((n=s.response)==null?void 0:n.data)||{message:s.message})}}),zi=xt("user/updateSettings",async(e,{rejectWithValue:t})=>{var n;try{return(await uo.updateSettings(e)).data}catch(s){return t(((n=s.response)==null?void 0:n.data)||{message:s.message})}}),ud=xt("user/updateProfile",async(e,{rejectWithValue:t})=>{var n;try{return(await rn.updateProfile(e)).data}catch(s){return t(((n=s.response)==null?void 0:n.data)||{message:s.message})}}),hd=xt("user/uploadProfilePicture",async(e,{rejectWithValue:t})=>{var n;try{return(await uo.uploadProfilePicture(e)).data}catch(s){return t(((n=s.response)==null?void 0:n.data)||{message:s.message})}}),md=xt("user/changePassword",async({currentPassword:e,newPassword:t},{rejectWithValue:n})=>{var s;try{return(await uo.changePassword(e,t)).data}catch(i){return n(((s=i.response)==null?void 0:s.data)||{message:i.message})}}),fd=xt("user/deleteAccount",async({password:e,reason:t},{rejectWithValue:n})=>{var s;try{return(await uo.deleteAccount(e,t)).data}catch(i){return n(((s=i.response)==null?void 0:s.data)||{message:i.message})}}),lj=Mr({name:"user",initialState:{settings:null,profileInfo:null,extendedProfile:null,loading:!1,error:null,success:!1,message:null},reducers:{clearUserState:e=>{e.error=null,e.success=!1,e.message=null}},extraReducers:e=>{e.addCase(Xo.pending,t=>{t.loading=!0,t.error=null}).addCase(Xo.fulfilled,(t,n)=>{t.loading=!1,t.settings=n.payload.settings,t.profileInfo=n.payload.profileInfo,t.success=!0}).addCase(Xo.rejected,(t,n)=>{var s;t.loading=!1,t.error=((s=n.payload)==null?void 0:s.message)||"Không thể lấy cài đặt người dùng"}).addCase(dd.pending,t=>{t.loading=!0,t.error=null}).addCase(dd.fulfilled,(t,n)=>{t.loading=!1,t.extendedProfile=n.payload.profile,!t.profileInfo&&n.payload.profile&&(t.profileInfo={fullName:n.payload.profile.FullName,email:n.payload.profile.Email,username:n.payload.profile.Username,image:n.payload.profile.Image}),t.success=!0}).addCase(dd.rejected,(t,n)=>{var s;t.loading=!1,t.error=((s=n.payload)==null?void 0:s.message)||"Không thể lấy thông tin hồ sơ người dùng"}).addCase(zi.pending,t=>{t.loading=!0,t.error=null,t.success=!1}).addCase(zi.fulfilled,(t,n)=>{t.loading=!1,t.settings=n.payload.settings,t.success=!0,t.message=n.payload.message}).addCase(zi.rejected,(t,n)=>{var s;t.loading=!1,t.error=((s=n.payload)==null?void 0:s.message)||"Không thể cập nhật cài đặt",t.success=!1}).addCase(ud.pending,t=>{t.loading=!0,t.error=null}).addCase(ud.fulfilled,(t,n)=>{t.loading=!1,n.payload.profile&&(t.extendedProfile=n.payload.profile,t.profileInfo&&(t.profileInfo={...t.profileInfo,fullName:n.payload.profile.FullName,username:n.payload.profile.Username,image:n.payload.profile.Image})),t.success=!0,t.message=n.payload.message||"Hồ sơ đã được cập nhật thành công"}).addCase(ud.rejected,(t,n)=>{var s;t.loading=!1,t.error=((s=n.payload)==null?void 0:s.message)||"Không thể cập nhật hồ sơ",t.success=!1}).addCase(hd.pending,t=>{t.loading=!0,t.error=null}).addCase(hd.fulfilled,(t,n)=>{t.loading=!1,t.profileInfo&&(t.profileInfo.profileImage=n.payload.profileImage),t.success=!0,t.message=n.payload.message}).addCase(hd.rejected,(t,n)=>{var s;t.loading=!1,t.error=((s=n.payload)==null?void 0:s.message)||"Không thể tải lên ảnh đại diện",t.success=!1}).addCase(md.pending,t=>{t.loading=!0,t.error=null}).addCase(md.fulfilled,(t,n)=>{t.loading=!1,t.success=!0,t.message=n.payload.message}).addCase(md.rejected,(t,n)=>{var s;t.loading=!1,t.error=((s=n.payload)==null?void 0:s.message)||"Không thể thay đổi mật khẩu",t.success=!1}).addCase(fd.pending,t=>{t.loading=!0,t.error=null}).addCase(fd.fulfilled,(t,n)=>{t.loading=!1,t.success=!0,t.message=n.payload.message}).addCase(fd.rejected,(t,n)=>{var s;t.loading=!1,t.error=((s=n.payload)==null?void 0:s.message)||"Không thể xóa tài khoản",t.success=!1})}}),{clearUserState:Kx}=lj.actions,FT=lj.reducer,zT={exams:[],currentExam:null,questions:[],currentQuestion:null,answers:{},results:null,isLoading:!1,error:null,examInProgress:!1,examStartTime:null,examEndTime:null,timeRemaining:0,userExams:[],stateVersion:0},cj=Mr({name:"exam",initialState:zT,reducers:{setLoading:(e,t)=>{e.isLoading=t.payload},setError:(e,t)=>{e.error=t.payload,e.isLoading=!1},setExams:(e,t)=>{e.exams=t.payload,e.isLoading=!1,e.stateVersion++},setCurrentExam:(e,t)=>{e.currentExam=t.payload,e.isLoading=!1,e.stateVersion++},setQuestions:(e,t)=>{e.questions=t.payload,e.isLoading=!1,e.stateVersion++},setCurrentQuestion:(e,t)=>{e.currentQuestion=t.payload,e.stateVersion++},saveAnswer:(e,t)=>{const{questionId:n,answer:s}=t.payload;e.answers={...e.answers,[n]:s},e.stateVersion++},startExam:(e,t)=>{const{exam:n,startTime:s,endTime:i,timeRemaining:a}=t.payload;e.currentExam=n,e.examInProgress=!0,e.examStartTime=s,e.examEndTime=i,a!==void 0?e.timeRemaining=a:i?e.timeRemaining=Math.floor((new Date(i)-new Date)/1e3):n.Duration&&(e.timeRemaining=n.Duration*60),e.isLoading=!1,e.stateVersion++},updateTimeRemaining:(e,t)=>{e.timeRemaining=t.payload},endExam:e=>{e.examInProgress=!1,e.examStartTime=null,e.examEndTime=null,e.timeRemaining=0,e.stateVersion++},setResults:(e,t)=>{e.results=t.payload,e.isLoading=!1,e.stateVersion++},setUserExams:(e,t)=>{console.log("setUserExams reducer called with payload:",t.payload);let n=null;Array.isArray(t.payload)?(n=t.payload,console.log("Received direct array of exams, length:",n.length)):t.payload&&t.payload.exams&&Array.isArray(t.payload.exams)?(n=t.payload.exams,console.log("Extracted exams from nested property, length:",n.length)):typeof t.payload=="object"&&t.payload!==null?(console.warn("Unexpected payload format. Converting to array:",t.payload),n=Object.values(t.payload)):(console.error("Invalid payload format for setUserExams:",t.payload),n=[]),e.userExams=[...n],e.userExams.length>0?(console.log("First exam in state:",e.userExams[0]),console.log("Total exams loaded:",e.userExams.length)):console.warn("No exams found in data"),e.isLoading=!1,e.stateVersion++},resetExamState:e=>{e.currentExam=null,e.questions=[],e.currentQuestion=null,e.answers={},e.results=null,e.examInProgress=!1,e.examStartTime=null,e.examEndTime=null,e.timeRemaining=0,e.stateVersion++}}}),{setLoading:Ere,setError:Tre,setExams:Ire,setCurrentExam:Pre,setQuestions:Are,setCurrentQuestion:Rre,saveAnswer:Lre,startExam:Mre,updateTimeRemaining:Dre,endExam:$re,setResults:Ore,setUserExams:Bre,resetExamState:_re}=cj.actions,UT=cj.reducer,dj=f6({reducer:{auth:D6,course:wT,event:CT,notification:ET,post:IT,ranking:LT,aiChat:$T,chat:OT,report:_T,user:FT,exam:UT},middleware:e=>e({serializableCheck:!1}),devTools:!1});console.log("Initial Redux State:",dj.getState());let VT={data:""},HT=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||VT,WT=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,qT=/\/\*[^]*?\*\/|  +/g,Gx=/\n+/g,_s=(e,t)=>{let n="",s="",i="";for(let a in e){let o=e[a];a[0]=="@"?a[1]=="i"?n=a+" "+o+";":s+=a[1]=="f"?_s(o,a):a+"{"+_s(o,a[1]=="k"?"":t)+"}":typeof o=="object"?s+=_s(o,t?t.replace(/([^,])+/g,l=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=_s.p?_s.p(a,o):a+":"+o+";")}return n+(t&&i?t+"{"+i+"}":i)+s},rs={},uj=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+uj(e[n]);return t}return e},KT=(e,t,n,s,i)=>{let a=uj(e),o=rs[a]||(rs[a]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(a));if(!rs[o]){let c=a!==e?e:(d=>{let u,m,f=[{}];for(;u=WT.exec(d.replace(qT,""));)u[4]?f.shift():u[3]?(m=u[3].replace(Gx," ").trim(),f.unshift(f[0][m]=f[0][m]||{})):f[0][u[1]]=u[2].replace(Gx," ").trim();return f[0]})(e);rs[o]=_s(i?{["@keyframes "+o]:c}:c,n?"":"."+o)}let l=n&&rs.g?rs.g:null;return n&&(rs.g=rs[o]),((c,d,u,m)=>{m?d.data=d.data.replace(m,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(rs[o],t,s,l),o},GT=(e,t,n)=>e.reduce((s,i,a)=>{let o=t[a];if(o&&o.call){let l=o(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":_s(l,""):l===!1?"":l}return s+i+(o??"")},"");function Fu(e){let t=this||{},n=e.call?e(t.p):e;return KT(n.unshift?n.raw?GT(n,[].slice.call(arguments,1),t.p):n.reduce((s,i)=>Object.assign(s,i&&i.call?i(t.p):i),{}):n,HT(t.target),t.g,t.o,t.k)}let hj,Qf,Jf;Fu.bind({g:1});let ys=Fu.bind({k:1});function XT(e,t,n,s){_s.p=t,hj=e,Qf=n,Jf=s}function ai(e,t){let n=this||{};return function(){let s=arguments;function i(a,o){let l=Object.assign({},a),c=l.className||i.className;n.p=Object.assign({theme:Qf&&Qf()},l),n.o=/ *go\d+/.test(c),l.className=Fu.apply(n,s)+(c?" "+c:"");let d=e;return e[0]&&(d=l.as||e,delete l.as),Jf&&d[0]&&Jf(l),hj(d,l)}return i}}var YT=e=>typeof e=="function",Fd=(e,t)=>YT(e)?e(t):e,QT=(()=>{let e=0;return()=>(++e).toString()})(),mj=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),JT=20,fj=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,JT)};case 1:return{...e,toasts:e.toasts.map(a=>a.id===t.toast.id?{...a,...t.toast}:a)};case 2:let{toast:n}=t;return fj(e,{type:e.toasts.find(a=>a.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(a=>a.id===s||s===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(a=>a.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},pd=[],Ai={toasts:[],pausedAt:void 0},ia=e=>{Ai=fj(Ai,e),pd.forEach(t=>{t(Ai)})},ZT={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},eI=(e={})=>{let[t,n]=h.useState(Ai),s=h.useRef(Ai);h.useEffect(()=>(s.current!==Ai&&n(Ai),pd.push(n),()=>{let a=pd.indexOf(n);a>-1&&pd.splice(a,1)}),[]);let i=t.toasts.map(a=>{var o,l,c;return{...e,...e[a.type],...a,removeDelay:a.removeDelay||((o=e[a.type])==null?void 0:o.removeDelay)||(e==null?void 0:e.removeDelay),duration:a.duration||((l=e[a.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||ZT[a.type],style:{...e.style,...(c=e[a.type])==null?void 0:c.style,...a.style}}});return{...t,toasts:i}},tI=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||QT()}),tc=e=>(t,n)=>{let s=tI(t,e,n);return ia({type:2,toast:s}),s.id},dt=(e,t)=>tc("blank")(e,t);dt.error=tc("error");dt.success=tc("success");dt.loading=tc("loading");dt.custom=tc("custom");dt.dismiss=e=>{ia({type:3,toastId:e})};dt.remove=e=>ia({type:4,toastId:e});dt.promise=(e,t,n)=>{let s=dt.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(i=>{let a=t.success?Fd(t.success,i):void 0;return a?dt.success(a,{id:s,...n,...n==null?void 0:n.success}):dt.dismiss(s),i}).catch(i=>{let a=t.error?Fd(t.error,i):void 0;a?dt.error(a,{id:s,...n,...n==null?void 0:n.error}):dt.dismiss(s)}),e};var nI=(e,t)=>{ia({type:1,toast:{id:e,height:t}})},rI=()=>{ia({type:5,time:Date.now()})},Yo=new Map,sI=1e3,iI=(e,t=sI)=>{if(Yo.has(e))return;let n=setTimeout(()=>{Yo.delete(e),ia({type:4,toastId:e})},t);Yo.set(e,n)},aI=e=>{let{toasts:t,pausedAt:n}=eI(e);h.useEffect(()=>{if(n)return;let a=Date.now(),o=t.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(a-l.createdAt);if(c<0){l.visible&&dt.dismiss(l.id);return}return setTimeout(()=>dt.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[t,n]);let s=h.useCallback(()=>{n&&ia({type:6,time:Date.now()})},[n]),i=h.useCallback((a,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:d}=o||{},u=t.filter(p=>(p.position||d)===(a.position||d)&&p.height),m=u.findIndex(p=>p.id===a.id),f=u.filter((p,x)=>x<m&&p.visible).length;return u.filter(p=>p.visible).slice(...l?[f+1]:[0,f]).reduce((p,x)=>p+(x.height||0)+c,0)},[t]);return h.useEffect(()=>{t.forEach(a=>{if(a.dismissed)iI(a.id,a.removeDelay);else{let o=Yo.get(a.id);o&&(clearTimeout(o),Yo.delete(a.id))}})},[t]),{toasts:t,handlers:{updateHeight:nI,startPause:rI,endPause:s,calculateOffset:i}}},oI=ys`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,lI=ys`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,cI=ys`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,dI=ai("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${oI} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${lI} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${cI} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,uI=ys`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,hI=ai("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${uI} 1s linear infinite;
`,mI=ys`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,fI=ys`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,pI=ai("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${mI} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${fI} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,gI=ai("div")`
  position: absolute;
`,xI=ai("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,yI=ys`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,bI=ai("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${yI} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,vI=({toast:e})=>{let{icon:t,type:n,iconTheme:s}=e;return t!==void 0?typeof t=="string"?h.createElement(bI,null,t):t:n==="blank"?null:h.createElement(xI,null,h.createElement(hI,{...s}),n!=="loading"&&h.createElement(gI,null,n==="error"?h.createElement(dI,{...s}):h.createElement(pI,{...s})))},wI=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,jI=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,kI="0%{opacity:0;} 100%{opacity:1;}",NI="0%{opacity:1;} 100%{opacity:0;}",CI=ai("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,SI=ai("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,EI=(e,t)=>{let n=e.includes("top")?1:-1,[s,i]=mj()?[kI,NI]:[wI(n),jI(n)];return{animation:t?`${ys(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ys(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},TI=h.memo(({toast:e,position:t,style:n,children:s})=>{let i=e.height?EI(e.position||t||"top-center",e.visible):{opacity:0},a=h.createElement(vI,{toast:e}),o=h.createElement(SI,{...e.ariaProps},Fd(e.message,e));return h.createElement(CI,{className:e.className,style:{...i,...n,...e.style}},typeof s=="function"?s({icon:a,message:o}):h.createElement(h.Fragment,null,a,o))});XT(h.createElement);var II=({id:e,className:t,style:n,onHeightUpdate:s,children:i})=>{let a=h.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;s(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return h.createElement("div",{ref:a,className:t,style:n},i)},PI=(e,t)=>{let n=e.includes("top"),s=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:mj()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...s,...i}},AI=Fu`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ic=16,RI=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:s,children:i,containerStyle:a,containerClassName:o})=>{let{toasts:l,handlers:c}=aI(n);return h.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Ic,left:Ic,right:Ic,bottom:Ic,pointerEvents:"none",...a},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(d=>{let u=d.position||t,m=c.calculateOffset(d,{reverseOrder:e,gutter:s,defaultPosition:t}),f=PI(u,m);return h.createElement(II,{id:d.id,key:d.id,onHeightUpdate:c.updateHeight,className:d.visible?AI:"",style:f},d.type==="custom"?Fd(d.message,d):i?i(d):h.createElement(TI,{toast:d,position:u}))}))};function LI({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"}))}const Ks=h.forwardRef(LI);function MI({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))}const DI=h.forwardRef(MI);function $I({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}))}const _o=h.forwardRef($I);function OI({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const pj=h.forwardRef(OI);function BI({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"}))}const _I=h.forwardRef(BI);function FI({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const zd=h.forwardRef(FI);function zI({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const kn=h.forwardRef(zI);function UI({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const Xx=h.forwardRef(UI);function VI({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const gj=h.forwardRef(VI);function HI({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 19.5 15-15m0 0H8.25m11.25 0v11.25"}))}const WI=h.forwardRef(HI);function qI({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"}))}const KI=h.forwardRef(qI);function GI({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"}))}const Em=h.forwardRef(GI);function XI({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"}))}const Zf=h.forwardRef(XI);function YI({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const QI=h.forwardRef(YI);function JI({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"}))}const Yx=h.forwardRef(JI);function ZI({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const Qo=h.forwardRef(ZI);function e8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"}))}const ho=h.forwardRef(e8);function t8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"}))}const vl=h.forwardRef(t8);function n8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0 0 12 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75Z"}))}const r8=h.forwardRef(n8);function s8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}const i8=h.forwardRef(s8);function a8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}const o8=h.forwardRef(a8);function l8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const Qi=h.forwardRef(l8);function c8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const d8=h.forwardRef(c8);function u8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 0 1 .865-.501 48.172 48.172 0 0 0 3.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))}const Fs=h.forwardRef(u8);function h8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const wl=h.forwardRef(h8);function m8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))}const xj=h.forwardRef(m8);function f8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Zn=h.forwardRef(f8);function p8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const gd=h.forwardRef(p8);function g8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const Jo=h.forwardRef(g8);function x8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const y8=h.forwardRef(x8);function b8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const xd=h.forwardRef(b8);function v8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5A3.375 3.375 0 0 0 6.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0 0 15 2.25h-1.5a2.251 2.251 0 0 0-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 0 0-9-9Z"}))}const Qx=h.forwardRef(v8);function w8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"}))}const j8=h.forwardRef(w8);function k8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ir=h.forwardRef(k8);function N8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5"}))}const to=h.forwardRef(N8);function C8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const ep=h.forwardRef(C8);function S8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m6.75 7.5 3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0 0 21 18V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v12a2.25 2.25 0 0 0 2.25 2.25Z"}))}const yj=h.forwardRef(S8);function E8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"}))}const tp=h.forwardRef(E8);function T8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 0 0 2.25-2.25V6.75a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 6.75v10.5a2.25 2.25 0 0 0 2.25 2.25Zm.75-12h9v9h-9v-9Z"}))}const Jx=h.forwardRef(T8);function I8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const P8=h.forwardRef(I8);function A8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}const R8=h.forwardRef(A8);function L8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const M8=h.forwardRef(L8);function D8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"}))}const Pg=h.forwardRef(D8);function $8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5h3m-6.75 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-15a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 4.5v15a2.25 2.25 0 0 0 2.25 2.25Z"}))}const O8=h.forwardRef($8);function B8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))}const bj=h.forwardRef(B8);function _8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Gs=h.forwardRef(_8);function F8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Zx=h.forwardRef(F8);function z8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const U8=h.forwardRef(z8);function V8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const mo=h.forwardRef(V8);function H8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))}const Ji=h.forwardRef(H8);function W8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const jl=h.forwardRef(W8);function q8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const kl=h.forwardRef(q8);function K8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Zs=h.forwardRef(K8);function G8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.864 4.243A7.5 7.5 0 0 1 19.5 10.5c0 2.92-.556 5.709-1.568 8.268M5.742 6.364A7.465 7.465 0 0 0 4.5 10.5a7.464 7.464 0 0 1-1.15 3.993m1.989 3.559A11.209 11.209 0 0 0 8.25 10.5a3.75 3.75 0 1 1 7.5 0c0 .527-.021 1.049-.064 1.565M12 10.5a14.94 14.94 0 0 1-3.6 9.75m6.633-4.596a18.666 18.666 0 0 1-2.485 5.33"}))}const vj=h.forwardRef(G8);function X8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"}),h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z"}))}const Y8=h.forwardRef(X8);function Q8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3v1.5M3 21v-6m0 0 2.77-.693a9 9 0 0 1 6.208.682l.108.054a9 9 0 0 0 6.086.71l3.114-.732a48.524 48.524 0 0 1-.005-10.499l-3.11.732a9 9 0 0 1-6.085-.711l-.108-.054a9 9 0 0 0-6.208-.682L3 4.5M3 15V4.5"}))}const ey=h.forwardRef(Q8);function J8({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const Z8=h.forwardRef(J8);function eP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const tP=h.forwardRef(eP);function nP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const Oa=h.forwardRef(nP);function rP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282m0 0h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.556.5.96a8.958 8.958 0 0 0-1.302 4.665c0 1.194.232 2.333.654 3.375Z"}))}const np=h.forwardRef(rP);function sP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const iP=h.forwardRef(sP);function aP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z"}))}const oP=h.forwardRef(aP);function lP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const wj=h.forwardRef(lP);function cP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const rp=h.forwardRef(cP);function dP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"}))}const Ag=h.forwardRef(dP);function uP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const hP=h.forwardRef(uP);function mP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const Xr=h.forwardRef(mP);function fP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Rg=h.forwardRef(fP);function pP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const Ui=h.forwardRef(pP);function gP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"}))}const xP=h.forwardRef(gP);function yP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const Ud=h.forwardRef(yP);function bP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.112 2.13"}))}const jj=h.forwardRef(bP);function vP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const Lg=h.forwardRef(vP);function wP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const sp=h.forwardRef(wP);function jP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Vd=h.forwardRef(jP);function kP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const NP=h.forwardRef(kP);function CP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const SP=h.forwardRef(CP);function EP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Tr=h.forwardRef(EP);function TP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))}const IP=h.forwardRef(TP);function PP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 0 0 6.16-12.12A14.98 14.98 0 0 0 9.631 8.41m5.96 5.96a14.926 14.926 0 0 1-5.841 2.58m-.119-8.54a6 6 0 0 0-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 0 0-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 0 1-2.448-2.448 14.9 14.9 0 0 1 .06-.312m-2.24 2.39a4.493 4.493 0 0 0-1.757 4.306 4.493 4.493 0 0 0 4.306-1.758M16.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"}))}const kj=h.forwardRef(PP);function AP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"}))}const Nj=h.forwardRef(AP);function RP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const Cj=h.forwardRef(RP);function LP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const ei=h.forwardRef(LP);function MP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const Vi=h.forwardRef(MP);function DP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"}))}const Sj=h.forwardRef(DP);function $P({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const OP=h.forwardRef($P);function BP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const bs=h.forwardRef(BP);function _P({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))}const Hd=h.forwardRef(_P);function FP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const ip=h.forwardRef(FP);function zP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const vs=h.forwardRef(zP);function UP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M22 10.5h-6m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM4 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 10.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const VP=h.forwardRef(UP);function HP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const Ej=h.forwardRef(HP);function WP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const Nl=h.forwardRef(WP);function qP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const KP=h.forwardRef(qP);function GP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z"}))}const Ba=h.forwardRef(GP);function XP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Zo=h.forwardRef(XP);function YP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const zt=h.forwardRef(YP);function QP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{fillRule:"evenodd",d:"M5.25 9a6.75 6.75 0 0 1 13.5 0v.75c0 2.123.8 4.057 2.118 5.52a.75.75 0 0 1-.297 1.206c-1.544.57-3.16.99-4.831 1.243a3.75 3.75 0 1 1-7.48 0 24.585 24.585 0 0 1-4.831-1.244.75.75 0 0 1-.298-1.205A8.217 8.217 0 0 0 5.25 9.75V9Zm4.502 8.9a2.25 2.25 0 1 0 4.496 0 25.057 25.057 0 0 1-4.496 0Z",clipRule:"evenodd"}))}const JP=h.forwardRef(QP);function ZP({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{fillRule:"evenodd",d:"M6.32 2.577a49.255 49.255 0 0 1 11.36 0c1.497.174 2.57 1.46 2.57 2.93V21a.75.75 0 0 1-1.085.67L12 18.089l-7.165 3.583A.75.75 0 0 1 3.75 21V5.507c0-1.47 1.073-2.756 2.57-2.93Z",clipRule:"evenodd"}))}const ap=h.forwardRef(ZP);function e7({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{fillRule:"evenodd",d:"M4.848 2.771A49.144 49.144 0 0 1 12 2.25c2.43 0 4.817.178 7.152.52 1.978.292 3.348 2.024 3.348 3.97v6.02c0 1.946-1.37 3.678-3.348 3.97-1.94.284-3.916.455-5.922.505a.39.39 0 0 0-.266.112L8.78 21.53A.75.75 0 0 1 7.5 21v-3.955a48.842 48.842 0 0 1-2.652-.316c-1.978-.29-3.348-2.024-3.348-3.97V6.741c0-1.946 1.37-3.68 3.348-3.97Z",clipRule:"evenodd"}))}const t7=h.forwardRef(e7);function n7({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{d:"M7.493 18.5c-.425 0-.82-.236-.975-.632A7.48 7.48 0 0 1 6 15.125c0-1.75.599-3.358 1.602-4.634.151-.192.373-.309.6-.397.473-.183.89-.514 1.212-.924a9.042 9.042 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75A.75.75 0 0 1 15 2a2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H14.23c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23h-.777ZM2.331 10.727a11.969 11.969 0 0 0-.831 4.398 12 12 0 0 0 .52 3.507C2.28 19.482 3.105 20 3.994 20H4.9c.445 0 .72-.498.523-.898a8.963 8.963 0 0 1-.924-3.977c0-1.708.476-3.305 1.302-4.666.245-.403-.028-.959-.5-.959H4.25c-.832 0-1.612.453-1.918 1.227Z"}))}const Wd=h.forwardRef(n7);function r7({title:e,titleId:t,...n},s){return h.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?h.createElement("title",{id:t},e):null,h.createElement("path",{d:"m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z"}))}const Tj=h.forwardRef(r7),Ij=({size:e="default",message:t="Đang tải..."})=>{let n,s;switch(e){case"small":n="h-6 w-6",s="text-sm";break;case"large":n="h-12 w-12",s="text-xl";break;default:n="h-8 w-8",s="text-base"}return r.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[50vh] text-gray-700",children:[r.jsx("div",{className:`animate-spin rounded-full ${n} border-t-2 border-b-2 border-blue-500`}),r.jsx("p",{className:`mt-4 ${s}`,children:t})]})},Tt=({src:e,alt:t,name:n,className:s="",size:i="medium",onClick:a})=>{const o={tiny:"h-6 w-6",small:"h-8 w-8",medium:"h-12 w-12",large:"h-16 w-16",xl:"h-24 w-24",xxl:"h-32 w-32"},l={tiny:24,small:32,medium:48,large:64,xl:96,xxl:128},c=()=>`https://ui-avatars.com/api/?name=${encodeURIComponent(n||t||"User")}&background=random&color=fff&size=${l[i]}&rounded=true`,d=()=>e&&typeof e=="string"&&e.trim()!==""?e:c(),u=f=>{f.target.onerror=null,f.target.src=c()},m=d();return r.jsx("div",{className:`overflow-hidden rounded-full ${o[i]} bg-gray-100 dark:bg-gray-700 flex-shrink-0 ${a?"cursor-pointer hover:opacity-90 transition-opacity duration-200":""}`,onClick:a,children:r.jsx("img",{src:m,alt:t||n||"User avatar",className:"w-full h-full object-cover object-center",onError:u,loading:"lazy",style:{width:"100%",height:"100%",objectFit:"cover"}})})};var s7={};const i7=s7.REACT_APP_API_URL||"http://localhost:5001/api",a7=()=>localStorage.getItem("token"),o7=async()=>{var e,t;try{return{success:!0,data:(await De.get(`${i7}/users/me`,{headers:{Authorization:`Bearer ${a7()}`}})).data}}catch(n){return console.error("Error fetching user info:",n),{success:!1,message:((t=(e=n.response)==null?void 0:e.data)==null?void 0:t.message)||"Không thể lấy thông tin người dùng",error:n}}},l7="http://localhost:5001/api/chat",cn=De.create({baseURL:l7});cn.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e.headers["cache-control"]&&delete e.headers["cache-control"],e},e=>Promise.reject(e));cn.interceptors.response.use(e=>e,async e=>e.response&&e.response.status===401?(localStorage.removeItem("token"),window.location.href="/login",Promise.reject(e)):(e.message==="Network Error"&&console.error("Connection to server failed. Please check your internet connection."),Promise.reject(e)));cn.defaults.timeout=1e4;const Dn={getAllChatUsers:async(e=20)=>{var t,n;try{const s=await De.get("http://localhost:5001/api/chat/users",{params:{limit:e},headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});console.log("User API response:",s.data);const i=((t=s.data)==null?void 0:t.data)||s.data||[];return Array.isArray(i)?i:typeof i=="object"?[i]:(console.error("User data format is unexpected:",s.data),[])}catch(s){console.error("Failed to fetch users for chat:",s);try{const i=await De.get("http://localhost:5001/api/users",{params:{limit:e},headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}}),a=((n=i.data)==null?void 0:n.data)||i.data||[];return console.log("Using fallback endpoint, got users:",a.length),Array.isArray(a)?a:[]}catch(i){return console.error("Fallback endpoint also failed:",i),[]}}},getSuggestedUsers:async(e=10,t=1)=>{try{const n=[`/api/chat/users/suggested?limit=${e}&page=${t}`,`/api/friendships/suggestions/random?limit=${e}&page=${t}`,`/api/chat/users?limit=${e}&page=${t}`,`/api/users?limit=${e}&page=${t}`];let s,i;for(const l of n)try{if(console.log(`Trying suggested users endpoint: ${l}`),s=await De.get(`http://localhost:5001${l}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}}),s.status===200){i=l,console.log(`Successfully used endpoint for suggested users: ${l}`);break}}catch(c){console.log(`Endpoint ${l} failed:`,c.message)}if(!s)return console.log("All suggested users endpoints failed, using fallback"),[];const a=s.data;console.log(`Suggested users API response from ${i}:`,a);let o=[];if(Array.isArray(a))o=a;else if(a&&Array.isArray(a.users))o=a.users;else if(a&&a.data&&Array.isArray(a.data))o=a.data;else if(a&&a.suggestions&&Array.isArray(a.suggestions))o=a.suggestions;else if(a&&typeof a=="object"){const l=Object.values(a).filter(Array.isArray);l.length>0&&(o=l[0])}return o.length===0&&console.warn("No users found in suggested users API response"),o}catch(n){return console.error("Failed to get suggested users:",n),[]}},searchUsers:async(e,t=20,n=1)=>{try{if(!e||e.trim().length<2)return[];const s=[`/api/chat/users?search=${encodeURIComponent(e)}&limit=${t}&page=${n}`,`/api/users/search?q=${encodeURIComponent(e)}&limit=${t}&page=${n}`,`/api/search?q=${encodeURIComponent(e)}&limit=${t}&page=${n}`,`/api/users?q=${encodeURIComponent(e)}&limit=${t}&page=${n}`];let i,a;for(const c of s)try{if(console.log(`Trying search endpoint: ${c}`),i=await De.get(`http://localhost:5001${c}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}}),i.status===200){a=c,console.log(`Successfully used endpoint: ${c}`);break}}catch(d){console.log(`Endpoint ${c} failed:`,d.message)}if(!i)throw new Error("All search endpoints failed");const o=i.data;console.log(`Search users API response from ${a}:`,o);let l=[];if(Array.isArray(o))l=o;else if(o&&Array.isArray(o.users))l=o.users;else if(o&&o.data&&Array.isArray(o.data))l=o.data;else if(o&&typeof o=="object"){const c=Object.values(o).filter(Array.isArray);c.length>0&&(l=c[0])}return l}catch(s){return console.error("Failed to search users:",s),e&&window.allUsers&&Array.isArray(window.allUsers)?(console.log("Falling back to local user search"),window.allUsers.filter(i=>{var a,o,l;return((a=i.FullName)==null?void 0:a.toLowerCase().includes(e.toLowerCase()))||((o=i.Username)==null?void 0:o.toLowerCase().includes(e.toLowerCase()))||((l=i.Email)==null?void 0:l.toLowerCase().includes(e.toLowerCase()))}).slice(0,t)):[]}},createConversation:async e=>{var t,n,s;try{const i={type:e.type,participants:e.participants.map(o=>parseInt(o,10)),...e.title&&{title:e.title},...e.createdBy!==void 0?{createdBy:parseInt(e.createdBy,10)}:{}};console.log("API createConversation - Sending data:",i);const a=await cn.post("/conversations",i);return console.log("API createConversation - Success response:",a.data),a.data}catch(i){throw console.error("API createConversation - Error:",i),console.error("API createConversation - Error config:",i.config),console.error("API createConversation - Error response:",(t=i.response)==null?void 0:t.data),{message:i.message||"Failed to create conversation",status:(n=i.response)==null?void 0:n.status,data:(s=i.response)==null?void 0:s.data,originalError:i}}},getUserConversations:async()=>(await cn.get("/conversations")).data,getConversationById:async e=>(await cn.get(`/conversations/${e}`)).data,updateConversation:async(e,t)=>(await cn.put(`/conversations/${e}`,t)).data,sendMessage:async(e,t)=>{try{let n;try{return n=await cn.post(`/conversations/${e}/messages`,t),n.data}catch(s){if(s.response&&s.response.status===404)return console.log("Falling back to general messages endpoint"),n=await cn.post("/messages",{conversationId:e,...t}),n.data;throw s}}catch(n){throw console.error("Failed to send message:",n),{error:!0,message:n.message||"Failed to send message",originalError:n}}},getMessages:async(e,t={})=>e?(await cn.get(`/conversations/${e}/messages`,{params:t})).data:(console.warn("Invalid conversationId provided to getMessages"),[]),updateMessage:async(e,t)=>(await cn.put(`/messages/${e}`,t)).data,deleteMessage:async e=>(await cn.delete(`/messages/${e}`)).data,markMessageAsRead:async e=>(await cn.put(`/messages/${e}/read`)).data,initiateCall:async e=>(await cn.post("/calls",e)).data,updateCallStatus:async(e,t)=>(await cn.put(`/calls/${e}`,t)).data,getCallHistory:async(e={})=>(await cn.get("/calls/history",{params:e})).data,addCallParticipant:async(e,t)=>(await cn.post(`/calls/${e}/participants`,t)).data,addGroupParticipants:async(e,t)=>{var n,s,i;try{const a=Array.isArray(t)?t.map(l=>Number(typeof l=="object"?l.UserID||l.id:l)):[];return(await cn.post(`/conversations/${e}/participants`,{participants:a})).data}catch(a){throw console.error("Failed to add participants to group:",a),{message:((s=(n=a.response)==null?void 0:n.data)==null?void 0:s.message)||"Failed to add participants to group",status:(i=a.response)==null?void 0:i.status,originalError:a}}},removeGroupParticipant:async(e,t)=>{var n,s,i;try{return(await cn.delete(`/conversations/${e}/participants/${t}`)).data}catch(a){throw console.error("Failed to remove participant from group:",a),{message:((s=(n=a.response)==null?void 0:n.data)==null?void 0:s.message)||"Failed to remove participant from group",status:(i=a.response)==null?void 0:i.status,originalError:a}}},leaveGroup:async e=>{var t,n,s;try{return(await cn.delete(`/conversations/${e}/leave`)).data}catch(i){throw console.error("Failed to leave group:",i),{message:((n=(t=i.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to leave group",status:(s=i.response)==null?void 0:s.status,originalError:i}}}};var c7={};const sn=De.create({baseURL:c7.REACT_APP_API_URL||"http://localhost:5004",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},withCredentials:!0});sn.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e.method==="get"&&e.url==="/api/reports"&&(console.log("Intercepting reports request, redirecting to /api/reports/me"),e.url="/api/reports/me"),e},e=>Promise.reject(e));sn.interceptors.response.use(e=>e,e=>{e.response&&e.response.status===401&&(localStorage.removeItem("token"),console.error("Phiên làm việc đã hết hạn. Vui lòng đăng nhập lại.")),e.response&&e.response.status===403&&console.error("Bạn không có quyền truy cập tài nguyên này."),e.response&&e.response.status===404&&console.error("Không tìm thấy tài nguyên yêu cầu."),e.message==="Network Error"&&console.error("Lỗi kết nối mạng. Vui lòng kiểm tra kết nối internet hoặc CORS.");const t=new Error(e.response&&e.response.data&&e.response.data.message||e.message||"Đã xảy ra lỗi khi giao tiếp với máy chủ.");return t.response=e.response,t.status=e.response?e.response.status:null,Promise.reject(t)});const d7=async()=>{try{return(await sn.get("/api/exams")).data}catch(e){throw console.error("Error fetching exams:",e),e}},u7=async()=>{try{return(await sn.get("/api/exams/upcoming")).data}catch(e){throw console.error("Error fetching upcoming exams:",e),e}},op=async e=>{try{return(await sn.get(`/api/exams/${e}`)).data}catch(t){throw console.error(`Error fetching exam ${e}:`,t),t}},Pj=async e=>{try{return(await sn.post(`/api/exams/${e}/register`)).data}catch(t){if(console.error(`Error registering for exam ${e}:`,t),t.response&&t.response.data){const n=new Error(t.response.data.message||"Registration failed");throw n.response=t.response,n}throw t}},ty=async e=>{try{return(await sn.post(`/api/exams/${e}/start`)).data}catch(t){if(console.error(`Error starting exam ${e}:`,t),t.response&&t.response.data){const n=new Error(t.response.data.message||"Exam start failed");throw n.response=t.response,n}throw t}},ny=async(e,t,n)=>{try{const s=await sn.post(`/api/exams/${e}/answer/${t}`,{answer:n});return s.data.warning&&console.warn(`Answer saved with warning: ${s.data.warning}`),s.data}catch(s){if(console.error(`Error submitting answer for question ${t}:`,s),s.response&&s.response.data){const i=new Error(s.response.data.message||"Answer submission failed");throw i.response=s.response,i}throw s}},h7=async e=>{try{return(await sn.post(`/api/exams/${e}/fullscreen-exit`)).data}catch(t){throw console.error("Error logging fullscreen exit:",t),t}},m7=async e=>{try{return(await sn.post(`/api/exams/${e}/fullscreen-return`)).data}catch(t){throw console.error("Error logging fullscreen return:",t),t}},ry=async(e,t,n=null)=>{try{if(console.log(`Completing exam for participant ${e} (exam ${t})`),!e)throw new Error("ParticipantID is required");const s=n?{penalties:{tabSwitches:n.tabSwitches,fullscreenExits:n.fullscreenExits,penaltyPercentage:n.penaltyPercentage},score:n.finalScore!==void 0?n.finalScore:void 0,Score:n.finalScore!==void 0?n.finalScore:void 0,originalScore:n.originalScore!==void 0?n.originalScore:void 0,feedbacks:n.feedbacks}:{};if(t)try{const i=await sn.post(`/api/exams/${t}/participants/${e}/complete`,s);return console.log("Exam completion response:",i.data),i.data}catch(i){console.log(`Error with first endpoint format: ${i.message}`),error=i}try{const i=await sn.post(`/api/exams/participants/${e}/complete`,s);return console.log("Exam completion response (alt endpoint):",i.data),i.data}catch(i){console.log(`Error with second endpoint format: ${i.message}`);try{const a=await sn.post(`/api/exams/${e}/complete`,s);return console.log("Exam completion response (fallback endpoint):",a.data),a.data}catch(a){throw console.log("Error with all endpoint formats"),error||a}}}catch(s){if(console.error("Error completing exam:",s),s.response&&s.response.data){console.error("Server error details:",s.response.data);const i=new Error(s.response.data.message||"Exam completion failed");throw i.response=s.response,i}throw s}},f7=async e=>{try{return(await sn.get(`/api/exams/${e}/results`)).data}catch(t){if(console.error("Error fetching exam results:",t),t.response&&t.response.data){const n=new Error(t.response.data.message||"Fetching results failed");throw n.response=t.response,n}throw t}},p7=new Set(["và","là","của","các","một","những","được","trong","để","với","khi","đã","có","cho","ra","như","về","sự","từ","cũng","này","đó","đây","thì","lại","mà","đến","nhưng","trên","hay","hoặc","vì","nên","do","bởi","tại","theo"]),Tm=e=>{if(!e)return[];let t=e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return t=t.replace(/[^a-z0-9\s]+/g," "),t.split(/\s+/).filter(n=>n&&!p7.has(n))},sy=(e,t,n=[])=>{if(!e||!t)return{totalSimilarity:0,keywordsMatched:0,totalKeywords:n.length,contentSimilarity:0};const s=Tm(e),i=Tm(t),a=new Set(s),o=new Set(i),l=n.length;let c=0;if(l>0)for(const p of n){if(!p)continue;const x=Tm(p).join(" ");x&&s.join(" ").includes(x)&&c++}const d=l>0?c/l*100:0;let u=0;o.forEach(p=>{a.has(p)&&u++});const m=o.size>0?u/o.size*100:0;return{totalSimilarity:d*.6+m*.4,keywordsMatched:c,totalKeywords:l,contentSimilarity:m}},g7=async(e,t,n,s)=>{try{if(!e)throw new Error("ExamID is required");if(!t)throw new Error("QuestionID is required");if(!s)throw new Error("ParticipantID is required");return(await sn.post(`/api/exams/${e}/participants/${s}/questions/${t}/grade`,{answer:n})).data}catch(i){if(console.error("Error comparing answer:",i),i.response&&i.response.data){console.error("Server error details:",i.response.data);try{return(await sn.post(`/api/exams/${e}/questions/${t}/grade`,{answer:n,participantId:s})).data}catch(a){return console.error("Alternative endpoint also failed:",a),{success:!0,data:{score:Math.round(Math.random()*5),maxPoints:10,similarity:{totalSimilarity:Math.round(Math.random()*50),keywordsMatched:0,totalKeywords:0,contentSimilarity:Math.round(Math.random()*40)},feedback:"Fallback grading due to server error"}}}}return{success:!0,data:{score:Math.round(Math.random()*5),maxPoints:10,similarity:{totalSimilarity:Math.round(Math.random()*50),keywordsMatched:0,totalKeywords:0,contentSimilarity:Math.round(Math.random()*40)},feedback:"Fallback grading due to server error"}}}};function Pt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function ti(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const Aj=6048e5,x7=864e5,y7=36e5,Pc=43200,iy=1440;let b7={};function nc(){return b7}function Cl(e,t){var l,c,d,u;const n=nc(),s=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,i=Pt(e),a=i.getDay(),o=(a<s?7:0)+a-s;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function qd(e){return Cl(e,{weekStartsOn:1})}function Rj(e){const t=Pt(e),n=t.getFullYear(),s=ti(e,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=qd(s),a=ti(e,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=qd(a);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function ay(e){const t=Pt(e);return t.setHours(0,0,0,0),t}function Kd(e){const t=Pt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Lj(e,t){const n=ay(e),s=ay(t),i=+n-Kd(n),a=+s-Kd(s);return Math.round((i-a)/x7)}function v7(e){const t=Rj(e),n=ti(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),qd(n)}function yd(e,t){const n=Pt(e),s=Pt(t),i=n.getTime()-s.getTime();return i<0?-1:i>0?1:i}function w7(e){return ti(e,Date.now())}function j7(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function k7(e){if(!j7(e)&&typeof e!="number")return!1;const t=Pt(e);return!isNaN(Number(t))}function N7(e,t){const n=Pt(e),s=Pt(t),i=n.getFullYear()-s.getFullYear(),a=n.getMonth()-s.getMonth();return i*12+a}function C7(e,t){const n=Pt(e),s=Pt(t),i=oy(n,s),a=Math.abs(Lj(n,s));n.setDate(n.getDate()-i*a);const o=+(oy(n,s)===-i),l=i*(a-o);return l===0?0:l}function oy(e,t){const n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function Mj(e){return t=>{const s=(e?Math[e]:Math.trunc)(t);return s===0?0:s}}function Dj(e,t){return+Pt(e)-+Pt(t)}function S7(e,t,n){const s=Dj(e,t)/y7;return Mj(n==null?void 0:n.roundingMethod)(s)}function E7(e){const t=Pt(e);return t.setHours(23,59,59,999),t}function T7(e){const t=Pt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function I7(e){const t=Pt(e);return+E7(t)==+T7(t)}function P7(e,t){const n=Pt(e),s=Pt(t),i=yd(n,s),a=Math.abs(N7(n,s));let o;if(a<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*a);let l=yd(n,s)===-i;I7(Pt(e))&&a===1&&yd(e,s)===1&&(l=!1),o=i*(a-Number(l))}return o===0?0:o}function A7(e,t,n){const s=Dj(e,t)/1e3;return Mj(n==null?void 0:n.roundingMethod)(s)}function R7(e){const t=Pt(e),n=ti(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const L7={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},M7=(e,t,n)=>{let s;const i=L7[e];return typeof i=="string"?s=i:t===1?s=i.one:s=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function _a(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const D7={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},$7={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},O7={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},B7={date:_a({formats:D7,defaultWidth:"full"}),time:_a({formats:$7,defaultWidth:"full"}),dateTime:_a({formats:O7,defaultWidth:"full"})},_7={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},F7=(e,t,n,s)=>_7[e];function qr(e){return(t,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let i;if(s==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;i=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[l]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(t):t;return i[a]}}const z7={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},U7={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},V7={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},H7={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},W7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},q7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},K7=(e,t)=>{const n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},G7={ordinalNumber:K7,era:qr({values:z7,defaultWidth:"wide"}),quarter:qr({values:U7,defaultWidth:"wide",argumentCallback:e=>e-1}),month:qr({values:V7,defaultWidth:"wide"}),day:qr({values:H7,defaultWidth:"wide"}),dayPeriod:qr({values:W7,defaultWidth:"wide",formattingValues:q7,defaultFormattingWidth:"wide"})};function Kr(e){return(t,n={})=>{const s=n.width,i=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;const o=a[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?Y7(l,m=>m.test(o)):X7(l,m=>m.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function X7(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Y7(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function $j(e){return(t,n={})=>{const s=t.match(e.matchPattern);if(!s)return null;const i=s[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(i.length);return{value:o,rest:l}}}const Q7=/^(\d+)(th|st|nd|rd)?/i,J7=/\d+/i,Z7={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},eA={any:[/^b/i,/^(a|c)/i]},tA={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},nA={any:[/1/i,/2/i,/3/i,/4/i]},rA={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},sA={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},iA={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},aA={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},oA={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},lA={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},cA={ordinalNumber:$j({matchPattern:Q7,parsePattern:J7,valueCallback:e=>parseInt(e,10)}),era:Kr({matchPatterns:Z7,defaultMatchWidth:"wide",parsePatterns:eA,defaultParseWidth:"any"}),quarter:Kr({matchPatterns:tA,defaultMatchWidth:"wide",parsePatterns:nA,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Kr({matchPatterns:rA,defaultMatchWidth:"wide",parsePatterns:sA,defaultParseWidth:"any"}),day:Kr({matchPatterns:iA,defaultMatchWidth:"wide",parsePatterns:aA,defaultParseWidth:"any"}),dayPeriod:Kr({matchPatterns:oA,defaultMatchWidth:"any",parsePatterns:lA,defaultParseWidth:"any"})},Oj={code:"en-US",formatDistance:M7,formatLong:B7,formatRelative:F7,localize:G7,match:cA,options:{weekStartsOn:0,firstWeekContainsDate:1}};function dA(e){const t=Pt(e);return Lj(t,R7(t))+1}function uA(e){const t=Pt(e),n=+qd(t)-+v7(t);return Math.round(n/Aj)+1}function Bj(e,t){var u,m,f,p;const n=Pt(e),s=n.getFullYear(),i=nc(),a=(t==null?void 0:t.firstWeekContainsDate)??((m=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(f=i.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=ti(e,0);o.setFullYear(s+1,0,a),o.setHours(0,0,0,0);const l=Cl(o,t),c=ti(e,0);c.setFullYear(s,0,a),c.setHours(0,0,0,0);const d=Cl(c,t);return n.getTime()>=l.getTime()?s+1:n.getTime()>=d.getTime()?s:s-1}function hA(e,t){var l,c,d,u;const n=nc(),s=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,i=Bj(e,t),a=ti(e,0);return a.setFullYear(i,0,s),a.setHours(0,0,0,0),Cl(a,t)}function mA(e,t){const n=Pt(e),s=+Cl(n,t)-+hA(n,t);return Math.round(s/Aj)+1}function Et(e,t){const n=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return n+s}const Ts={y(e,t){const n=e.getFullYear(),s=n>0?n:1-n;return Et(t==="yy"?s%100:s,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Et(n+1,2)},d(e,t){return Et(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Et(e.getHours()%12||12,t.length)},H(e,t){return Et(e.getHours(),t.length)},m(e,t){return Et(e.getMinutes(),t.length)},s(e,t){return Et(e.getSeconds(),t.length)},S(e,t){const n=t.length,s=e.getMilliseconds(),i=Math.trunc(s*Math.pow(10,n-3));return Et(i,t.length)}},pa={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ly={G:function(e,t,n){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const s=e.getFullYear(),i=s>0?s:1-s;return n.ordinalNumber(i,{unit:"year"})}return Ts.y(e,t)},Y:function(e,t,n,s){const i=Bj(e,s),a=i>0?i:1-i;if(t==="YY"){const o=a%100;return Et(o,2)}return t==="Yo"?n.ordinalNumber(a,{unit:"year"}):Et(a,t.length)},R:function(e,t){const n=Rj(e);return Et(n,t.length)},u:function(e,t){const n=e.getFullYear();return Et(n,t.length)},Q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return Et(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return Et(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,n){const s=e.getMonth();switch(t){case"M":case"MM":return Ts.M(e,t);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,n){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return Et(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,n,s){const i=mA(e,s);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):Et(i,t.length)},I:function(e,t,n){const s=uA(e);return t==="Io"?n.ordinalNumber(s,{unit:"week"}):Et(s,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Ts.d(e,t)},D:function(e,t,n){const s=dA(e);return t==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):Et(s,t.length)},E:function(e,t,n){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,n,s){const i=e.getDay(),a=(i-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Et(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,s){const i=e.getDay(),a=(i-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Et(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const s=e.getDay(),i=s===0?7:s;switch(t){case"i":return String(i);case"ii":return Et(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const s=e.getHours();let i;switch(s===12?i=pa.noon:s===0?i=pa.midnight:i=s/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const s=e.getHours();let i;switch(s>=17?i=pa.evening:s>=12?i=pa.afternoon:s>=4?i=pa.morning:i=pa.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return Ts.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Ts.H(e,t)},K:function(e,t,n){const s=e.getHours()%12;return t==="Ko"?n.ordinalNumber(s,{unit:"hour"}):Et(s,t.length)},k:function(e,t,n){let s=e.getHours();return s===0&&(s=24),t==="ko"?n.ordinalNumber(s,{unit:"hour"}):Et(s,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ts.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Ts.s(e,t)},S:function(e,t){return Ts.S(e,t)},X:function(e,t,n){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return dy(s);case"XXXX":case"XX":return wi(s);case"XXXXX":case"XXX":default:return wi(s,":")}},x:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"x":return dy(s);case"xxxx":case"xx":return wi(s);case"xxxxx":case"xxx":default:return wi(s,":")}},O:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+cy(s,":");case"OOOO":default:return"GMT"+wi(s,":")}},z:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+cy(s,":");case"zzzz":default:return"GMT"+wi(s,":")}},t:function(e,t,n){const s=Math.trunc(e.getTime()/1e3);return Et(s,t.length)},T:function(e,t,n){const s=e.getTime();return Et(s,t.length)}};function cy(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),i=Math.trunc(s/60),a=s%60;return a===0?n+String(i):n+String(i)+t+Et(a,2)}function dy(e,t){return e%60===0?(e>0?"-":"+")+Et(Math.abs(e)/60,2):wi(e,t)}function wi(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),i=Et(Math.trunc(s/60),2),a=Et(s%60,2);return n+i+t+a}const uy=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},_j=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},fA=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],s=n[1],i=n[2];if(!i)return uy(e,t);let a;switch(s){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",uy(s,t)).replace("{{time}}",_j(i,t))},pA={p:_j,P:fA},gA=/^D+$/,xA=/^Y+$/,yA=["D","DD","YY","YYYY"];function bA(e){return gA.test(e)}function vA(e){return xA.test(e)}function wA(e,t,n){const s=jA(e,t,n);if(console.warn(s),yA.includes(e))throw new RangeError(s)}function jA(e,t,n){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const kA=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,NA=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,CA=/^'([^]*?)'?$/,SA=/''/g,EA=/[a-zA-Z]/;function Yr(e,t,n){var u,m,f,p,x,g,b,w;const s=nc(),i=(n==null?void 0:n.locale)??s.locale??Oj,a=(n==null?void 0:n.firstWeekContainsDate)??((m=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(f=s.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((g=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:g.weekStartsOn)??s.weekStartsOn??((w=(b=s.locale)==null?void 0:b.options)==null?void 0:w.weekStartsOn)??0,l=Pt(e);if(!k7(l))throw new RangeError("Invalid time value");let c=t.match(NA).map(k=>{const v=k[0];if(v==="p"||v==="P"){const N=pA[v];return N(k,i.formatLong)}return k}).join("").match(kA).map(k=>{if(k==="''")return{isToken:!1,value:"'"};const v=k[0];if(v==="'")return{isToken:!1,value:TA(k)};if(ly[v])return{isToken:!0,value:k};if(v.match(EA))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:k}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const d={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return c.map(k=>{if(!k.isToken)return k.value;const v=k.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&vA(v)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&bA(v))&&wA(v,t,String(e));const N=ly[v[0]];return N(l,v,i.localize,d)}).join("")}function TA(e){const t=e.match(CA);return t?t[1].replace(SA,"'"):e}function IA(e,t,n){const s=nc(),i=(n==null?void 0:n.locale)??s.locale??Oj,a=2520,o=yd(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let c,d;o>0?(c=Pt(t),d=Pt(e)):(c=Pt(e),d=Pt(t));const u=A7(d,c),m=(Kd(d)-Kd(c))/1e3,f=Math.round((u-m)/60);let p;if(f<2)return n!=null&&n.includeSeconds?u<5?i.formatDistance("lessThanXSeconds",5,l):u<10?i.formatDistance("lessThanXSeconds",10,l):u<20?i.formatDistance("lessThanXSeconds",20,l):u<40?i.formatDistance("halfAMinute",0,l):u<60?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",1,l):f===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",f,l);if(f<45)return i.formatDistance("xMinutes",f,l);if(f<90)return i.formatDistance("aboutXHours",1,l);if(f<iy){const x=Math.round(f/60);return i.formatDistance("aboutXHours",x,l)}else{if(f<a)return i.formatDistance("xDays",1,l);if(f<Pc){const x=Math.round(f/iy);return i.formatDistance("xDays",x,l)}else if(f<Pc*2)return p=Math.round(f/Pc),i.formatDistance("aboutXMonths",p,l)}if(p=P7(d,c),p<12){const x=Math.round(f/Pc);return i.formatDistance("xMonths",x,l)}else{const x=p%12,g=Math.trunc(p/12);return x<3?i.formatDistance("aboutXYears",g,l):x<9?i.formatDistance("overXYears",g,l):i.formatDistance("almostXYears",g+1,l)}}function Fj(e,t){return IA(e,w7(e),t)}const PA={lessThanXSeconds:{one:"dưới 1 giây",other:"dưới {{count}} giây"},xSeconds:{one:"1 giây",other:"{{count}} giây"},halfAMinute:"nửa phút",lessThanXMinutes:{one:"dưới 1 phút",other:"dưới {{count}} phút"},xMinutes:{one:"1 phút",other:"{{count}} phút"},aboutXHours:{one:"khoảng 1 giờ",other:"khoảng {{count}} giờ"},xHours:{one:"1 giờ",other:"{{count}} giờ"},xDays:{one:"1 ngày",other:"{{count}} ngày"},aboutXWeeks:{one:"khoảng 1 tuần",other:"khoảng {{count}} tuần"},xWeeks:{one:"1 tuần",other:"{{count}} tuần"},aboutXMonths:{one:"khoảng 1 tháng",other:"khoảng {{count}} tháng"},xMonths:{one:"1 tháng",other:"{{count}} tháng"},aboutXYears:{one:"khoảng 1 năm",other:"khoảng {{count}} năm"},xYears:{one:"1 năm",other:"{{count}} năm"},overXYears:{one:"hơn 1 năm",other:"hơn {{count}} năm"},almostXYears:{one:"gần 1 năm",other:"gần {{count}} năm"}},AA=(e,t,n)=>{let s;const i=PA[e];return typeof i=="string"?s=i:t===1?s=i.one:s=i.other.replace("{{count}}",String(t)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?s+" nữa":s+" trước":s},RA={full:"EEEE, 'ngày' d MMMM 'năm' y",long:"'ngày' d MMMM 'năm' y",medium:"d MMM 'năm' y",short:"dd/MM/y"},LA={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},MA={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},DA={date:_a({formats:RA,defaultWidth:"full"}),time:_a({formats:LA,defaultWidth:"full"}),dateTime:_a({formats:MA,defaultWidth:"full"})},$A={lastWeek:"eeee 'tuần trước vào lúc' p",yesterday:"'hôm qua vào lúc' p",today:"'hôm nay vào lúc' p",tomorrow:"'ngày mai vào lúc' p",nextWeek:"eeee 'tới vào lúc' p",other:"P"},OA=(e,t,n,s)=>$A[e],BA={narrow:["TCN","SCN"],abbreviated:["trước CN","sau CN"],wide:["trước Công Nguyên","sau Công Nguyên"]},_A={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["Quý 1","Quý 2","Quý 3","Quý 4"]},FA={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["quý I","quý II","quý III","quý IV"]},zA={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["Thg 1","Thg 2","Thg 3","Thg 4","Thg 5","Thg 6","Thg 7","Thg 8","Thg 9","Thg 10","Thg 11","Thg 12"],wide:["Tháng Một","Tháng Hai","Tháng Ba","Tháng Tư","Tháng Năm","Tháng Sáu","Tháng Bảy","Tháng Tám","Tháng Chín","Tháng Mười","Tháng Mười Một","Tháng Mười Hai"]},UA={narrow:["01","02","03","04","05","06","07","08","09","10","11","12"],abbreviated:["thg 1","thg 2","thg 3","thg 4","thg 5","thg 6","thg 7","thg 8","thg 9","thg 10","thg 11","thg 12"],wide:["tháng 01","tháng 02","tháng 03","tháng 04","tháng 05","tháng 06","tháng 07","tháng 08","tháng 09","tháng 10","tháng 11","tháng 12"]},VA={narrow:["CN","T2","T3","T4","T5","T6","T7"],short:["CN","Th 2","Th 3","Th 4","Th 5","Th 6","Th 7"],abbreviated:["CN","Thứ 2","Thứ 3","Thứ 4","Thứ 5","Thứ 6","Thứ 7"],wide:["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ Sáu","Thứ Bảy"]},HA={narrow:{am:"am",pm:"pm",midnight:"nửa đêm",noon:"tr",morning:"sg",afternoon:"ch",evening:"tối",night:"đêm"},abbreviated:{am:"AM",pm:"PM",midnight:"nửa đêm",noon:"trưa",morning:"sáng",afternoon:"chiều",evening:"tối",night:"đêm"},wide:{am:"SA",pm:"CH",midnight:"nửa đêm",noon:"trưa",morning:"sáng",afternoon:"chiều",evening:"tối",night:"đêm"}},WA={narrow:{am:"am",pm:"pm",midnight:"nửa đêm",noon:"tr",morning:"sg",afternoon:"ch",evening:"tối",night:"đêm"},abbreviated:{am:"AM",pm:"PM",midnight:"nửa đêm",noon:"trưa",morning:"sáng",afternoon:"chiều",evening:"tối",night:"đêm"},wide:{am:"SA",pm:"CH",midnight:"nửa đêm",noon:"giữa trưa",morning:"vào buổi sáng",afternoon:"vào buổi chiều",evening:"vào buổi tối",night:"vào ban đêm"}},qA=(e,t)=>{const n=Number(e),s=t==null?void 0:t.unit;if(s==="quarter")switch(n){case 1:return"I";case 2:return"II";case 3:return"III";case 4:return"IV"}else if(s==="day")switch(n){case 1:return"thứ 2";case 2:return"thứ 3";case 3:return"thứ 4";case 4:return"thứ 5";case 5:return"thứ 6";case 6:return"thứ 7";case 7:return"chủ nhật"}else{if(s==="week")return n===1?"thứ nhất":"thứ "+n;if(s==="dayOfYear")return n===1?"đầu tiên":"thứ "+n}return String(n)},KA={ordinalNumber:qA,era:qr({values:BA,defaultWidth:"wide"}),quarter:qr({values:_A,defaultWidth:"wide",formattingValues:FA,defaultFormattingWidth:"wide",argumentCallback:e=>e-1}),month:qr({values:zA,defaultWidth:"wide",formattingValues:UA,defaultFormattingWidth:"wide"}),day:qr({values:VA,defaultWidth:"wide"}),dayPeriod:qr({values:HA,defaultWidth:"wide",formattingValues:WA,defaultFormattingWidth:"wide"})},GA=/^(\d+)/i,XA=/\d+/i,YA={narrow:/^(tcn|scn)/i,abbreviated:/^(trước CN|sau CN)/i,wide:/^(trước Công Nguyên|sau Công Nguyên)/i},QA={any:[/^t/i,/^s/i]},JA={narrow:/^([1234]|i{1,3}v?)/i,abbreviated:/^q([1234]|i{1,3}v?)/i,wide:/^quý ([1234]|i{1,3}v?)/i},ZA={any:[/(1|i)$/i,/(2|ii)$/i,/(3|iii)$/i,/(4|iv)$/i]},eR={narrow:/^(0?[2-9]|10|11|12|0?1)/i,abbreviated:/^thg[ _]?(0?[1-9](?!\d)|10|11|12)/i,wide:/^tháng ?(Một|Hai|Ba|Tư|Năm|Sáu|Bảy|Tám|Chín|Mười|Mười ?Một|Mười ?Hai|0?[1-9](?!\d)|10|11|12)/i},tR={narrow:[/0?1$/i,/0?2/i,/3/,/4/,/5/,/6/,/7/,/8/,/9/,/10/,/11/,/12/],abbreviated:[/^thg[ _]?0?1(?!\d)/i,/^thg[ _]?0?2/i,/^thg[ _]?0?3/i,/^thg[ _]?0?4/i,/^thg[ _]?0?5/i,/^thg[ _]?0?6/i,/^thg[ _]?0?7/i,/^thg[ _]?0?8/i,/^thg[ _]?0?9/i,/^thg[ _]?10/i,/^thg[ _]?11/i,/^thg[ _]?12/i],wide:[/^tháng ?(Một|0?1(?!\d))/i,/^tháng ?(Hai|0?2)/i,/^tháng ?(Ba|0?3)/i,/^tháng ?(Tư|0?4)/i,/^tháng ?(Năm|0?5)/i,/^tháng ?(Sáu|0?6)/i,/^tháng ?(Bảy|0?7)/i,/^tháng ?(Tám|0?8)/i,/^tháng ?(Chín|0?9)/i,/^tháng ?(Mười|10)/i,/^tháng ?(Mười ?Một|11)/i,/^tháng ?(Mười ?Hai|12)/i]},nR={narrow:/^(CN|T2|T3|T4|T5|T6|T7)/i,short:/^(CN|Th ?2|Th ?3|Th ?4|Th ?5|Th ?6|Th ?7)/i,abbreviated:/^(CN|Th ?2|Th ?3|Th ?4|Th ?5|Th ?6|Th ?7)/i,wide:/^(Chủ ?Nhật|Chúa ?Nhật|thứ ?Hai|thứ ?Ba|thứ ?Tư|thứ ?Năm|thứ ?Sáu|thứ ?Bảy)/i},rR={narrow:[/CN/i,/2/i,/3/i,/4/i,/5/i,/6/i,/7/i],short:[/CN/i,/2/i,/3/i,/4/i,/5/i,/6/i,/7/i],abbreviated:[/CN/i,/2/i,/3/i,/4/i,/5/i,/6/i,/7/i],wide:[/(Chủ|Chúa) ?Nhật/i,/Hai/i,/Ba/i,/Tư/i,/Năm/i,/Sáu/i,/Bảy/i]},sR={narrow:/^(a|p|nửa đêm|trưa|(giờ) (sáng|chiều|tối|đêm))/i,abbreviated:/^(am|pm|nửa đêm|trưa|(giờ) (sáng|chiều|tối|đêm))/i,wide:/^(ch[^i]*|sa|nửa đêm|trưa|(giờ) (sáng|chiều|tối|đêm))/i},iR={any:{am:/^(a|sa)/i,pm:/^(p|ch[^i]*)/i,midnight:/nửa đêm/i,noon:/trưa/i,morning:/sáng/i,afternoon:/chiều/i,evening:/tối/i,night:/^đêm/i}},aR={ordinalNumber:$j({matchPattern:GA,parsePattern:XA,valueCallback:e=>parseInt(e,10)}),era:Kr({matchPatterns:YA,defaultMatchWidth:"wide",parsePatterns:QA,defaultParseWidth:"any"}),quarter:Kr({matchPatterns:JA,defaultMatchWidth:"wide",parsePatterns:ZA,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Kr({matchPatterns:eR,defaultMatchWidth:"wide",parsePatterns:tR,defaultParseWidth:"wide"}),day:Kr({matchPatterns:nR,defaultMatchWidth:"wide",parsePatterns:rR,defaultParseWidth:"wide"}),dayPeriod:Kr({matchPatterns:sR,defaultMatchWidth:"wide",parsePatterns:iR,defaultParseWidth:"any"})},Qr={code:"vi",formatDistance:AA,formatLong:DA,formatRelative:OA,localize:KA,match:aR,options:{weekStartsOn:1,firstWeekContainsDate:1}},oR=()=>{const[e,t]=h.useState([]),[n,s]=h.useState([]),[i,a]=h.useState(!0),[o,l]=h.useState(null),[c,d]=h.useState({}),[u,m]=h.useState(""),[f,p]=h.useState("all"),x=St();h.useEffect(()=>{g()},[]),h.useEffect(()=>{if(e.length>0){let E=[...e];if(u&&(E=E.filter(P=>P.Title.toLowerCase().includes(u.toLowerCase())||P.Description&&P.Description.toLowerCase().includes(u.toLowerCase())||P.CourseName&&P.CourseName.toLowerCase().includes(u.toLowerCase()))),f==="upcoming")E=E.filter(P=>new Date(P.StartTime)>new Date);else if(f==="ongoing"){const P=new Date;E=E.filter(R=>new Date(R.StartTime)<=P&&new Date(R.EndTime)>=P)}else f==="completed"?E=E.filter(P=>new Date(P.EndTime)<new Date):f==="registered"&&(E=E.filter(P=>P.IsRegistered));s(E)}else s([])},[e,u,f]);const g=async()=>{try{a(!0);const E=await d7();t(E.data||[]),s(E.data||[]),l(null)}catch(E){l("Không thể tải danh sách kỳ thi. Vui lòng thử lại sau."),console.error("Error fetching exams:",E)}finally{a(!1)}},b=async E=>{var P,R;try{d(O=>({...O,[E]:!0}));const y=await Pj(E);t(e.map(O=>O.ExamID===E?{...O,IsRegistered:!0,attemptsUsed:y.attemptsUsed||1,maxAttempts:y.maxAttempts||1}:O)),y.attemptsUsed>1&&alert(`Đăng ký thành công! Đây là lần thử thứ ${y.attemptsUsed}/${y.maxAttempts==="unlimited"?"∞":y.maxAttempts}.`)}catch(y){console.error("Error registering for exam:",y),y.response&&y.response.status===400?y.response.data.message==="Already registered for this exam and retakes are not allowed"?(t(e.map(O=>O.ExamID===E?{...O,IsRegistered:!0,allowRetakes:!1}:O)),alert("Bạn đã đăng ký kỳ thi này trước đó và không được phép thi lại.")):y.response.data.message.includes("Maximum number of attempts")?(t(e.map(O=>O.ExamID===E?{...O,IsRegistered:!0,attemptsMaxedOut:!0}:O)),alert(y.response.data.message)):y.response.data.message.includes("ongoing attempt")?(t(e.map(O=>O.ExamID===E?{...O,IsRegistered:!0,hasOngoingAttempt:!0}:O)),alert("Bạn có một lượt thi đang diễn ra. Vui lòng hoàn thành trước khi đăng ký lượt mới.")):alert("Đăng ký không thành công: "+y.response.data.message):alert("Đăng ký không thành công: "+(((R=(P=y.response)==null?void 0:P.data)==null?void 0:R.message)||"Vui lòng thử lại sau."))}finally{d(y=>({...y,[E]:!1}))}},w=E=>{m(E.target.value)},k=(E,P)=>{const R=new Date,y=new Date(E),O=new Date(P);return R<y?"upcoming":R>=y&&R<=O?"ongoing":"completed"},v=E=>{switch(E){case"upcoming":return"Sắp diễn ra";case"ongoing":return"Đang diễn ra";case"completed":return"Đã kết thúc";default:return"Chưa xác định"}},N=E=>{switch(E){case"upcoming":return"bg-blue-100 text-blue-800";case"ongoing":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},C=E=>{try{return Fj(new Date(E),{addSuffix:!0,locale:Qr})}catch{return"Invalid date"}},T=(E,P)=>{const R=E/P;return R<.5?"Dễ":R<.7?"Trung bình":"Khó"};return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Danh Sách Kỳ Thi"}),r.jsx("p",{className:"text-gray-600",children:"Tham gia các kỳ thi để nâng cao kỹ năng và kiểm tra kiến thức của bạn"})]}),r.jsxs("div",{className:"flex justify-between items-center mb-6 border-b",children:[r.jsxs("div",{className:"flex",children:[r.jsx("button",{onClick:()=>p("all"),className:`px-4 py-2 font-medium ${f==="all"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Tất cả"}),r.jsx("button",{onClick:()=>p("upcoming"),className:`px-4 py-2 font-medium ${f==="upcoming"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Sắp diễn ra"}),r.jsx("button",{onClick:()=>p("ongoing"),className:`px-4 py-2 font-medium ${f==="ongoing"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Đang diễn ra"}),r.jsx("button",{onClick:()=>p("completed"),className:`px-4 py-2 font-medium ${f==="completed"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Đã kết thúc"}),r.jsx("button",{onClick:()=>p("registered"),className:`px-4 py-2 font-medium ${f==="registered"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Đã đăng ký"})]}),r.jsxs("div",{className:"relative pb-2",children:[r.jsx("input",{type:"text",value:u,onChange:w,placeholder:"Tìm kiếm kỳ thi...",className:"w-64 px-4 py-2 rounded-md text-sm border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx("svg",{className:"w-4 h-4 text-gray-400 absolute right-3 top-1/2 -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),i?r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):o?r.jsx("div",{className:"bg-red-100 text-red-700 p-4 rounded-md",children:o}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.length>0?n.map(E=>{const P=k(E.StartTime,E.EndTime),R=T(E.PassingScore,E.TotalPoints);return r.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow flex flex-col h-full relative cursor-pointer hover:border hover:border-blue-400 group",onClick:y=>{!y.target.closest("button")&&!y.target.closest("a")&&x(`/exams/${E.ExamID}`)},children:[r.jsx("div",{className:"absolute top-2 right-2 text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}),r.jsxs("div",{className:"p-4 flex-grow",children:[r.jsx("div",{className:`h-1 w-full -mt-4 mb-3 ${N(P)}`}),r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2 line-clamp-2",children:E.Title}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N(P)}`,children:v(P)})]}),r.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:E.Description||"Không có mô tả"}),r.jsxs("div",{className:"text-sm text-gray-500 mb-4",children:[r.jsxs("div",{className:"flex items-center mb-1",children:[r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("span",{children:[P==="upcoming"&&`Bắt đầu ${C(E.StartTime)}`,P==="ongoing"&&`Kết thúc ${C(E.EndTime)}`,P==="completed"&&`Kết thúc ${C(E.EndTime)}`]})]}),r.jsxs("div",{className:"flex items-center mb-1",children:[r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("span",{children:["Thời gian: ",E.Duration," phút"]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),r.jsx("span",{children:R})]})]})]}),r.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-100 h-16 flex items-center mt-auto",children:E.IsRegistered?r.jsxs("div",{className:"mt-2",children:[P==="completed"?r.jsxs("div",{className:"flex flex-col space-y-2",children:[r.jsx(Ve,{to:`/exams/${E.ExamID}/history`,className:"inline-block bg-indigo-100 text-indigo-700 py-2 px-4 rounded-md text-center hover:bg-indigo-200 transition-colors",onClick:y=>y.stopPropagation(),children:"Xem lịch sử thi"}),E.allowRetakes!==!1&&!E.attemptsMaxedOut&&r.jsx("button",{onClick:y=>{y.stopPropagation(),b(E.ExamID)},disabled:c[E.ExamID],className:"bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 transition-colors disabled:bg-blue-300",children:c[E.ExamID]?"Đang đăng ký...":"Đăng ký thi lại"})]}):r.jsx(Ve,{to:`/exams/${E.ExamID}/session`,className:"inline-block bg-green-500 text-white py-2 px-4 rounded-md w-full text-center hover:bg-green-600 transition-colors",onClick:y=>y.stopPropagation(),children:"Vào thi ngay"}),E.attemptsUsed&&E.maxAttempts&&r.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Lần thi: ",E.attemptsUsed,"/",E.maxAttempts==="unlimited"?"∞":E.maxAttempts]})]}):r.jsx("button",{onClick:y=>{y.stopPropagation(),b(E.ExamID)},disabled:c[E.ExamID]||P==="completed",className:`mt-2 py-2 px-4 rounded-md w-full ${P==="completed"?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"} transition-colors disabled:opacity-70`,children:c[E.ExamID]?"Đang đăng ký...":P==="completed"?"Đã kết thúc":"Đăng ký tham gia"})})]},E.ExamID)}):r.jsxs("div",{className:"col-span-full py-16 text-center",children:[r.jsx("p",{className:"text-gray-500",children:"Không tìm thấy kỳ thi nào phù hợp với bộ lọc."}),u&&r.jsx("button",{onClick:()=>m(""),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Xóa tìm kiếm"})]})})]})},Sl={black:"#000",white:"#fff"},ga={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},xa={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},ya={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},ba={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},va={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},Co={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},lR={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function ws(e,...t){const n=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(s=>n.searchParams.append("args[]",s)),`Minified MUI error #${e}; visit ${n} for the full message.`}const zu="$$material";function Gd(){return Gd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Gd.apply(null,arguments)}function cR(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function dR(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var uR=function(){function e(n){var s=this;this._insertTag=function(i){var a;s.tags.length===0?s.insertionPoint?a=s.insertionPoint.nextSibling:s.prepend?a=s.container.firstChild:a=s.before:a=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(i,a),s.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(dR(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var a=cR(i);try{a.insertRule(s,a.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){var i;return(i=s.parentNode)==null?void 0:i.removeChild(s)}),this.tags=[],this.ctr=0},e}(),En="-ms-",Xd="-moz-",wt="-webkit-",zj="comm",Mg="rule",Dg="decl",hR="@import",Uj="@keyframes",mR="@layer",fR=Math.abs,Uu=String.fromCharCode,pR=Object.assign;function gR(e,t){return wn(e,0)^45?(((t<<2^wn(e,0))<<2^wn(e,1))<<2^wn(e,2))<<2^wn(e,3):0}function Vj(e){return e.trim()}function xR(e,t){return(e=t.exec(e))?e[0]:e}function jt(e,t,n){return e.replace(t,n)}function lp(e,t){return e.indexOf(t)}function wn(e,t){return e.charCodeAt(t)|0}function El(e,t,n){return e.slice(t,n)}function Vr(e){return e.length}function $g(e){return e.length}function Ac(e,t){return t.push(e),e}function yR(e,t){return e.map(t).join("")}var Vu=1,no=1,Hj=0,Wn=0,mn=0,fo="";function Hu(e,t,n,s,i,a,o){return{value:e,root:t,parent:n,type:s,props:i,children:a,line:Vu,column:no,length:o,return:""}}function So(e,t){return pR(Hu("",null,null,"",null,null,0),e,{length:-e.length},t)}function bR(){return mn}function vR(){return mn=Wn>0?wn(fo,--Wn):0,no--,mn===10&&(no=1,Vu--),mn}function tr(){return mn=Wn<Hj?wn(fo,Wn++):0,no++,mn===10&&(no=1,Vu++),mn}function Jr(){return wn(fo,Wn)}function bd(){return Wn}function rc(e,t){return El(fo,e,t)}function Tl(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Wj(e){return Vu=no=1,Hj=Vr(fo=e),Wn=0,[]}function qj(e){return fo="",e}function vd(e){return Vj(rc(Wn-1,cp(e===91?e+2:e===40?e+1:e)))}function wR(e){for(;(mn=Jr())&&mn<33;)tr();return Tl(e)>2||Tl(mn)>3?"":" "}function jR(e,t){for(;--t&&tr()&&!(mn<48||mn>102||mn>57&&mn<65||mn>70&&mn<97););return rc(e,bd()+(t<6&&Jr()==32&&tr()==32))}function cp(e){for(;tr();)switch(mn){case e:return Wn;case 34:case 39:e!==34&&e!==39&&cp(mn);break;case 40:e===41&&cp(e);break;case 92:tr();break}return Wn}function kR(e,t){for(;tr()&&e+mn!==57;)if(e+mn===84&&Jr()===47)break;return"/*"+rc(t,Wn-1)+"*"+Uu(e===47?e:tr())}function NR(e){for(;!Tl(Jr());)tr();return rc(e,Wn)}function CR(e){return qj(wd("",null,null,null,[""],e=Wj(e),0,[0],e))}function wd(e,t,n,s,i,a,o,l,c){for(var d=0,u=0,m=o,f=0,p=0,x=0,g=1,b=1,w=1,k=0,v="",N=i,C=a,T=s,E=v;b;)switch(x=k,k=tr()){case 40:if(x!=108&&wn(E,m-1)==58){lp(E+=jt(vd(k),"&","&\f"),"&\f")!=-1&&(w=-1);break}case 34:case 39:case 91:E+=vd(k);break;case 9:case 10:case 13:case 32:E+=wR(x);break;case 92:E+=jR(bd()-1,7);continue;case 47:switch(Jr()){case 42:case 47:Ac(SR(kR(tr(),bd()),t,n),c);break;default:E+="/"}break;case 123*g:l[d++]=Vr(E)*w;case 125*g:case 59:case 0:switch(k){case 0:case 125:b=0;case 59+u:w==-1&&(E=jt(E,/\f/g,"")),p>0&&Vr(E)-m&&Ac(p>32?my(E+";",s,n,m-1):my(jt(E," ","")+";",s,n,m-2),c);break;case 59:E+=";";default:if(Ac(T=hy(E,t,n,d,u,i,l,v,N=[],C=[],m),a),k===123)if(u===0)wd(E,t,T,T,N,a,m,l,C);else switch(f===99&&wn(E,3)===110?100:f){case 100:case 108:case 109:case 115:wd(e,T,T,s&&Ac(hy(e,T,T,0,0,i,l,v,i,N=[],m),C),i,C,m,l,s?N:C);break;default:wd(E,T,T,T,[""],C,0,l,C)}}d=u=p=0,g=w=1,v=E="",m=o;break;case 58:m=1+Vr(E),p=x;default:if(g<1){if(k==123)--g;else if(k==125&&g++==0&&vR()==125)continue}switch(E+=Uu(k),k*g){case 38:w=u>0?1:(E+="\f",-1);break;case 44:l[d++]=(Vr(E)-1)*w,w=1;break;case 64:Jr()===45&&(E+=vd(tr())),f=Jr(),u=m=Vr(v=E+=NR(bd())),k++;break;case 45:x===45&&Vr(E)==2&&(g=0)}}return a}function hy(e,t,n,s,i,a,o,l,c,d,u){for(var m=i-1,f=i===0?a:[""],p=$g(f),x=0,g=0,b=0;x<s;++x)for(var w=0,k=El(e,m+1,m=fR(g=o[x])),v=e;w<p;++w)(v=Vj(g>0?f[w]+" "+k:jt(k,/&\f/g,f[w])))&&(c[b++]=v);return Hu(e,t,n,i===0?Mg:l,c,d,u)}function SR(e,t,n){return Hu(e,t,n,zj,Uu(bR()),El(e,2,-2),0)}function my(e,t,n,s){return Hu(e,t,n,Dg,El(e,0,s),El(e,s+1,-1),s)}function Fa(e,t){for(var n="",s=$g(e),i=0;i<s;i++)n+=t(e[i],i,e,t)||"";return n}function ER(e,t,n,s){switch(e.type){case mR:if(e.children.length)break;case hR:case Dg:return e.return=e.return||e.value;case zj:return"";case Uj:return e.return=e.value+"{"+Fa(e.children,s)+"}";case Mg:e.value=e.props.join(",")}return Vr(n=Fa(e.children,s))?e.return=e.value+"{"+n+"}":""}function TR(e){var t=$g(e);return function(n,s,i,a){for(var o="",l=0;l<t;l++)o+=e[l](n,s,i,a)||"";return o}}function IR(e){return function(t){t.root||(t=t.return)&&e(t)}}function Kj(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var PR=function(t,n,s){for(var i=0,a=0;i=a,a=Jr(),i===38&&a===12&&(n[s]=1),!Tl(a);)tr();return rc(t,Wn)},AR=function(t,n){var s=-1,i=44;do switch(Tl(i)){case 0:i===38&&Jr()===12&&(n[s]=1),t[s]+=PR(Wn-1,n,s);break;case 2:t[s]+=vd(i);break;case 4:if(i===44){t[++s]=Jr()===58?"&\f":"",n[s]=t[s].length;break}default:t[s]+=Uu(i)}while(i=tr());return t},RR=function(t,n){return qj(AR(Wj(t),n))},fy=new WeakMap,LR=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,s=t.parent,i=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!fy.get(s))&&!i){fy.set(t,!0);for(var a=[],o=RR(n,a),l=s.props,c=0,d=0;c<o.length;c++)for(var u=0;u<l.length;u++,d++)t.props[d]=a[c]?o[c].replace(/&\f/g,l[u]):l[u]+" "+o[c]}}},MR=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function Gj(e,t){switch(gR(e,t)){case 5103:return wt+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return wt+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return wt+e+Xd+e+En+e+e;case 6828:case 4268:return wt+e+En+e+e;case 6165:return wt+e+En+"flex-"+e+e;case 5187:return wt+e+jt(e,/(\w+).+(:[^]+)/,wt+"box-$1$2"+En+"flex-$1$2")+e;case 5443:return wt+e+En+"flex-item-"+jt(e,/flex-|-self/,"")+e;case 4675:return wt+e+En+"flex-line-pack"+jt(e,/align-content|flex-|-self/,"")+e;case 5548:return wt+e+En+jt(e,"shrink","negative")+e;case 5292:return wt+e+En+jt(e,"basis","preferred-size")+e;case 6060:return wt+"box-"+jt(e,"-grow","")+wt+e+En+jt(e,"grow","positive")+e;case 4554:return wt+jt(e,/([^-])(transform)/g,"$1"+wt+"$2")+e;case 6187:return jt(jt(jt(e,/(zoom-|grab)/,wt+"$1"),/(image-set)/,wt+"$1"),e,"")+e;case 5495:case 3959:return jt(e,/(image-set\([^]*)/,wt+"$1$`$1");case 4968:return jt(jt(e,/(.+:)(flex-)?(.*)/,wt+"box-pack:$3"+En+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+wt+e+e;case 4095:case 3583:case 4068:case 2532:return jt(e,/(.+)-inline(.+)/,wt+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Vr(e)-1-t>6)switch(wn(e,t+1)){case 109:if(wn(e,t+4)!==45)break;case 102:return jt(e,/(.+:)(.+)-([^]+)/,"$1"+wt+"$2-$3$1"+Xd+(wn(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~lp(e,"stretch")?Gj(jt(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(wn(e,t+1)!==115)break;case 6444:switch(wn(e,Vr(e)-3-(~lp(e,"!important")&&10))){case 107:return jt(e,":",":"+wt)+e;case 101:return jt(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+wt+(wn(e,14)===45?"inline-":"")+"box$3$1"+wt+"$2$3$1"+En+"$2box$3")+e}break;case 5936:switch(wn(e,t+11)){case 114:return wt+e+En+jt(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return wt+e+En+jt(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return wt+e+En+jt(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return wt+e+En+e+e}return e}var DR=function(t,n,s,i){if(t.length>-1&&!t.return)switch(t.type){case Dg:t.return=Gj(t.value,t.length);break;case Uj:return Fa([So(t,{value:jt(t.value,"@","@"+wt)})],i);case Mg:if(t.length)return yR(t.props,function(a){switch(xR(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Fa([So(t,{props:[jt(a,/:(read-\w+)/,":"+Xd+"$1")]})],i);case"::placeholder":return Fa([So(t,{props:[jt(a,/:(plac\w+)/,":"+wt+"input-$1")]}),So(t,{props:[jt(a,/:(plac\w+)/,":"+Xd+"$1")]}),So(t,{props:[jt(a,/:(plac\w+)/,En+"input-$1")]})],i)}return""})}},$R=[DR],OR=function(t){var n=t.key;if(n==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(g){var b=g.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=t.stylisPlugins||$R,a={},o,l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(g){for(var b=g.getAttribute("data-emotion").split(" "),w=1;w<b.length;w++)a[b[w]]=!0;l.push(g)});var c,d=[LR,MR];{var u,m=[ER,IR(function(g){u.insert(g)})],f=TR(d.concat(i,m)),p=function(b){return Fa(CR(b),f)};c=function(b,w,k,v){u=k,p(b?b+"{"+w.styles+"}":w.styles),v&&(x.inserted[w.name]=!0)}}var x={key:n,sheet:new uR({key:n,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:c};return x.sheet.hydrate(l),x},Xj={exports:{}},At={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yn=typeof Symbol=="function"&&Symbol.for,Og=yn?Symbol.for("react.element"):60103,Bg=yn?Symbol.for("react.portal"):60106,Wu=yn?Symbol.for("react.fragment"):60107,qu=yn?Symbol.for("react.strict_mode"):60108,Ku=yn?Symbol.for("react.profiler"):60114,Gu=yn?Symbol.for("react.provider"):60109,Xu=yn?Symbol.for("react.context"):60110,_g=yn?Symbol.for("react.async_mode"):60111,Yu=yn?Symbol.for("react.concurrent_mode"):60111,Qu=yn?Symbol.for("react.forward_ref"):60112,Ju=yn?Symbol.for("react.suspense"):60113,BR=yn?Symbol.for("react.suspense_list"):60120,Zu=yn?Symbol.for("react.memo"):60115,eh=yn?Symbol.for("react.lazy"):60116,_R=yn?Symbol.for("react.block"):60121,FR=yn?Symbol.for("react.fundamental"):60117,zR=yn?Symbol.for("react.responder"):60118,UR=yn?Symbol.for("react.scope"):60119;function cr(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Og:switch(e=e.type,e){case _g:case Yu:case Wu:case Ku:case qu:case Ju:return e;default:switch(e=e&&e.$$typeof,e){case Xu:case Qu:case eh:case Zu:case Gu:return e;default:return t}}case Bg:return t}}}function Yj(e){return cr(e)===Yu}At.AsyncMode=_g;At.ConcurrentMode=Yu;At.ContextConsumer=Xu;At.ContextProvider=Gu;At.Element=Og;At.ForwardRef=Qu;At.Fragment=Wu;At.Lazy=eh;At.Memo=Zu;At.Portal=Bg;At.Profiler=Ku;At.StrictMode=qu;At.Suspense=Ju;At.isAsyncMode=function(e){return Yj(e)||cr(e)===_g};At.isConcurrentMode=Yj;At.isContextConsumer=function(e){return cr(e)===Xu};At.isContextProvider=function(e){return cr(e)===Gu};At.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Og};At.isForwardRef=function(e){return cr(e)===Qu};At.isFragment=function(e){return cr(e)===Wu};At.isLazy=function(e){return cr(e)===eh};At.isMemo=function(e){return cr(e)===Zu};At.isPortal=function(e){return cr(e)===Bg};At.isProfiler=function(e){return cr(e)===Ku};At.isStrictMode=function(e){return cr(e)===qu};At.isSuspense=function(e){return cr(e)===Ju};At.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Wu||e===Yu||e===Ku||e===qu||e===Ju||e===BR||typeof e=="object"&&e!==null&&(e.$$typeof===eh||e.$$typeof===Zu||e.$$typeof===Gu||e.$$typeof===Xu||e.$$typeof===Qu||e.$$typeof===FR||e.$$typeof===zR||e.$$typeof===UR||e.$$typeof===_R)};At.typeOf=cr;Xj.exports=At;var VR=Xj.exports,Qj=VR,HR={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},WR={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Jj={};Jj[Qj.ForwardRef]=HR;Jj[Qj.Memo]=WR;var qR=!0;function Zj(e,t,n){var s="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(s+=i+" ")}),s}var Fg=function(t,n,s){var i=t.key+"-"+n.name;(s===!1||qR===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},zg=function(t,n,s){Fg(t,n,s);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var a=n;do t.insert(n===a?"."+i:"",a,t.sheet,!0),a=a.next;while(a!==void 0)}};function KR(e){for(var t=0,n,s=0,i=e.length;i>=4;++s,i-=4)n=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var GR={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},XR=/[A-Z]|^ms/g,YR=/_EMO_([^_]+?)_([^]*?)_EMO_/g,e5=function(t){return t.charCodeAt(1)===45},py=function(t){return t!=null&&typeof t!="boolean"},Im=Kj(function(e){return e5(e)?e:e.replace(XR,"-$&").toLowerCase()}),gy=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(YR,function(s,i,a){return Hr={name:i,styles:a,next:Hr},i})}return GR[t]!==1&&!e5(t)&&typeof n=="number"&&n!==0?n+"px":n};function Il(e,t,n){if(n==null)return"";var s=n;if(s.__emotion_styles!==void 0)return s;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Hr={name:i.name,styles:i.styles,next:Hr},i.name;var a=n;if(a.styles!==void 0){var o=a.next;if(o!==void 0)for(;o!==void 0;)Hr={name:o.name,styles:o.styles,next:Hr},o=o.next;var l=a.styles+";";return l}return QR(e,t,n)}case"function":{if(e!==void 0){var c=Hr,d=n(e);return Hr=c,Il(e,t,d)}break}}var u=n;if(t==null)return u;var m=t[u];return m!==void 0?m:u}function QR(e,t,n){var s="";if(Array.isArray(n))for(var i=0;i<n.length;i++)s+=Il(e,t,n[i])+";";else for(var a in n){var o=n[a];if(typeof o!="object"){var l=o;t!=null&&t[l]!==void 0?s+=a+"{"+t[l]+"}":py(l)&&(s+=Im(a)+":"+gy(a,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var c=0;c<o.length;c++)py(o[c])&&(s+=Im(a)+":"+gy(a,o[c])+";");else{var d=Il(e,t,o);switch(a){case"animation":case"animationName":{s+=Im(a)+":"+d+";";break}default:s+=a+"{"+d+"}"}}}return s}var xy=/label:\s*([^\s;{]+)\s*(;|$)/g,Hr;function sc(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,i="";Hr=void 0;var a=e[0];if(a==null||a.raw===void 0)s=!1,i+=Il(n,t,a);else{var o=a;i+=o[0]}for(var l=1;l<e.length;l++)if(i+=Il(n,t,e[l]),s){var c=a;i+=c[l]}xy.lastIndex=0;for(var d="",u;(u=xy.exec(i))!==null;)d+="-"+u[1];var m=KR(i)+d;return{name:m,styles:i,next:Hr}}var JR=function(t){return t()},t5=kf.useInsertionEffect?kf.useInsertionEffect:!1,n5=t5||JR,yy=t5||h.useLayoutEffect,r5=h.createContext(typeof HTMLElement<"u"?OR({key:"css"}):null);r5.Provider;var Ug=function(t){return h.forwardRef(function(n,s){var i=h.useContext(r5);return t(n,i,s)})},th=h.createContext({}),Vg={}.hasOwnProperty,dp="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",ZR=function(t,n){var s={};for(var i in n)Vg.call(n,i)&&(s[i]=n[i]);return s[dp]=t,s},eL=function(t){var n=t.cache,s=t.serialized,i=t.isStringTag;return Fg(n,s,i),n5(function(){return zg(n,s,i)}),null},tL=Ug(function(e,t,n){var s=e.css;typeof s=="string"&&t.registered[s]!==void 0&&(s=t.registered[s]);var i=e[dp],a=[s],o="";typeof e.className=="string"?o=Zj(t.registered,a,e.className):e.className!=null&&(o=e.className+" ");var l=sc(a,void 0,h.useContext(th));o+=t.key+"-"+l.name;var c={};for(var d in e)Vg.call(e,d)&&d!=="css"&&d!==dp&&(c[d]=e[d]);return c.className=o,n&&(c.ref=n),h.createElement(h.Fragment,null,h.createElement(eL,{cache:t,serialized:l,isStringTag:typeof i=="string"}),h.createElement(i,c))}),nL=tL,by=function(t,n){var s=arguments;if(n==null||!Vg.call(n,"css"))return h.createElement.apply(void 0,s);var i=s.length,a=new Array(i);a[0]=nL,a[1]=ZR(t,n);for(var o=2;o<i;o++)a[o]=s[o];return h.createElement.apply(null,a)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(by||(by={}));var rL=Ug(function(e,t){var n=e.styles,s=sc([n],void 0,h.useContext(th)),i=h.useRef();return yy(function(){var a=t.key+"-global",o=new t.sheet.constructor({key:a,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),l=!1,c=document.querySelector('style[data-emotion="'+a+" "+s.name+'"]');return t.sheet.tags.length&&(o.before=t.sheet.tags[0]),c!==null&&(l=!0,c.setAttribute("data-emotion",a),o.hydrate([c])),i.current=[o,l],function(){o.flush()}},[t]),yy(function(){var a=i.current,o=a[0],l=a[1];if(l){a[1]=!1;return}if(s.next!==void 0&&zg(t,s.next,!0),o.tags.length){var c=o.tags[o.tags.length-1].nextElementSibling;o.before=c,o.flush()}t.insert("",s,o,!1)},[t,s.name]),null});function po(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return sc(t)}function oi(){var e=po.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var sL=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,iL=Kj(function(e){return sL.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),aL=iL,oL=function(t){return t!=="theme"},vy=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?aL:oL},wy=function(t,n,s){var i;if(n){var a=n.shouldForwardProp;i=t.__emotion_forwardProp&&a?function(o){return t.__emotion_forwardProp(o)&&a(o)}:a}return typeof i!="function"&&s&&(i=t.__emotion_forwardProp),i},lL=function(t){var n=t.cache,s=t.serialized,i=t.isStringTag;return Fg(n,s,i),n5(function(){return zg(n,s,i)}),null},cL=function e(t,n){var s=t.__emotion_real===t,i=s&&t.__emotion_base||t,a,o;n!==void 0&&(a=n.label,o=n.target);var l=wy(t,n,s),c=l||vy(i),d=!c("as");return function(){var u=arguments,m=s&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(a!==void 0&&m.push("label:"+a+";"),u[0]==null||u[0].raw===void 0)m.push.apply(m,u);else{var f=u[0];m.push(f[0]);for(var p=u.length,x=1;x<p;x++)m.push(u[x],f[x])}var g=Ug(function(b,w,k){var v=d&&b.as||i,N="",C=[],T=b;if(b.theme==null){T={};for(var E in b)T[E]=b[E];T.theme=h.useContext(th)}typeof b.className=="string"?N=Zj(w.registered,C,b.className):b.className!=null&&(N=b.className+" ");var P=sc(m.concat(C),w.registered,T);N+=w.key+"-"+P.name,o!==void 0&&(N+=" "+o);var R=d&&l===void 0?vy(v):c,y={};for(var O in b)d&&O==="as"||R(O)&&(y[O]=b[O]);return y.className=N,k&&(y.ref=k),h.createElement(h.Fragment,null,h.createElement(lL,{cache:w,serialized:P,isStringTag:typeof v=="string"}),h.createElement(v,y))});return g.displayName=a!==void 0?a:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",g.defaultProps=t.defaultProps,g.__emotion_real=g,g.__emotion_base=i,g.__emotion_styles=m,g.__emotion_forwardProp=l,Object.defineProperty(g,"toString",{value:function(){return"."+o}}),g.withComponent=function(b,w){var k=e(b,Gd({},n,w,{shouldForwardProp:wy(g,w,!0)}));return k.apply(void 0,m)},g}},dL=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],up=cL.bind(null);dL.forEach(function(e){up[e]=up(e)});function uL(e){return e==null||Object.keys(e).length===0}function hL(e){const{styles:t,defaultTheme:n={}}=e,s=typeof t=="function"?i=>t(uL(i)?n:i):t;return r.jsx(rL,{styles:s})}function s5(e,t){return up(e,t)}function mL(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const jy=[];function ky(e){return jy[0]=e,sc(jy)}var i5={exports:{}},Bt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hg=Symbol.for("react.transitional.element"),Wg=Symbol.for("react.portal"),nh=Symbol.for("react.fragment"),rh=Symbol.for("react.strict_mode"),sh=Symbol.for("react.profiler"),ih=Symbol.for("react.consumer"),ah=Symbol.for("react.context"),oh=Symbol.for("react.forward_ref"),lh=Symbol.for("react.suspense"),ch=Symbol.for("react.suspense_list"),dh=Symbol.for("react.memo"),uh=Symbol.for("react.lazy"),fL=Symbol.for("react.view_transition"),pL=Symbol.for("react.client.reference");function br(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Hg:switch(e=e.type,e){case nh:case sh:case rh:case lh:case ch:case fL:return e;default:switch(e=e&&e.$$typeof,e){case ah:case oh:case uh:case dh:return e;case ih:return e;default:return t}}case Wg:return t}}}Bt.ContextConsumer=ih;Bt.ContextProvider=ah;Bt.Element=Hg;Bt.ForwardRef=oh;Bt.Fragment=nh;Bt.Lazy=uh;Bt.Memo=dh;Bt.Portal=Wg;Bt.Profiler=sh;Bt.StrictMode=rh;Bt.Suspense=lh;Bt.SuspenseList=ch;Bt.isContextConsumer=function(e){return br(e)===ih};Bt.isContextProvider=function(e){return br(e)===ah};Bt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Hg};Bt.isForwardRef=function(e){return br(e)===oh};Bt.isFragment=function(e){return br(e)===nh};Bt.isLazy=function(e){return br(e)===uh};Bt.isMemo=function(e){return br(e)===dh};Bt.isPortal=function(e){return br(e)===Wg};Bt.isProfiler=function(e){return br(e)===sh};Bt.isStrictMode=function(e){return br(e)===rh};Bt.isSuspense=function(e){return br(e)===lh};Bt.isSuspenseList=function(e){return br(e)===ch};Bt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===nh||e===sh||e===rh||e===lh||e===ch||typeof e=="object"&&e!==null&&(e.$$typeof===uh||e.$$typeof===dh||e.$$typeof===ah||e.$$typeof===ih||e.$$typeof===oh||e.$$typeof===pL||e.getModuleId!==void 0)};Bt.typeOf=br;i5.exports=Bt;var a5=i5.exports;function Gr(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function o5(e){if(h.isValidElement(e)||a5.isValidElementType(e)||!Gr(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=o5(e[n])}),t}function xn(e,t,n={clone:!0}){const s=n.clone?{...e}:e;return Gr(e)&&Gr(t)&&Object.keys(t).forEach(i=>{h.isValidElement(t[i])||a5.isValidElementType(t[i])?s[i]=t[i]:Gr(t[i])&&Object.prototype.hasOwnProperty.call(e,i)&&Gr(e[i])?s[i]=xn(e[i],t[i],n):n.clone?s[i]=Gr(t[i])?o5(t[i]):t[i]:s[i]=t[i]}),s}const gL=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,s)=>n.val-s.val),t.reduce((n,s)=>({...n,[s.key]:s.val}),{})};function xL(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:s=5,...i}=e,a=gL(t),o=Object.keys(a);function l(f){return`@media (min-width:${typeof t[f]=="number"?t[f]:f}${n})`}function c(f){return`@media (max-width:${(typeof t[f]=="number"?t[f]:f)-s/100}${n})`}function d(f,p){const x=o.indexOf(p);return`@media (min-width:${typeof t[f]=="number"?t[f]:f}${n}) and (max-width:${(x!==-1&&typeof t[o[x]]=="number"?t[o[x]]:p)-s/100}${n})`}function u(f){return o.indexOf(f)+1<o.length?d(f,o[o.indexOf(f)+1]):l(f)}function m(f){const p=o.indexOf(f);return p===0?l(o[1]):p===o.length-1?c(o[p]):d(f,o[o.indexOf(f)+1]).replace("@media","@media not all and")}return{keys:o,values:a,up:l,down:c,between:d,only:u,not:m,unit:n,...i}}function yL(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter(s=>s.startsWith("@container")).sort((s,i)=>{var o,l;const a=/min-width:\s*([0-9.]+)/;return+(((o=s.match(a))==null?void 0:o[1])||0)-+(((l=i.match(a))==null?void 0:l[1])||0)});return n.length?n.reduce((s,i)=>{const a=t[i];return delete s[i],s[i]=a,s},{...t}):t}function bL(e,t){return t==="@"||t.startsWith("@")&&(e.some(n=>t.startsWith(`@${n}`))||!!t.match(/^@\d/))}function vL(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,s,i]=n,a=Number.isNaN(+s)?s||0:+s;return e.containerQueries(i).up(a)}function wL(e){const t=(a,o)=>a.replace("@media",o?`@container ${o}`:"@container");function n(a,o){a.up=(...l)=>t(e.breakpoints.up(...l),o),a.down=(...l)=>t(e.breakpoints.down(...l),o),a.between=(...l)=>t(e.breakpoints.between(...l),o),a.only=(...l)=>t(e.breakpoints.only(...l),o),a.not=(...l)=>{const c=t(e.breakpoints.not(...l),o);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const s={},i=a=>(n(s,a),s);return n(i),{...e,containerQueries:i}}const jL={borderRadius:4};function el(e,t){return t?xn(e,t,{clone:!1}):e}const hh={xs:0,sm:600,md:900,lg:1200,xl:1536},Ny={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${hh[e]}px)`},kL={containerQueries:e=>({up:t=>{let n=typeof t=="number"?t:hh[t]||t;return typeof n=="number"&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function Pr(e,t,n){const s=e.theme||{};if(Array.isArray(t)){const a=s.breakpoints||Ny;return t.reduce((o,l,c)=>(o[a.up(a.keys[c])]=n(t[c]),o),{})}if(typeof t=="object"){const a=s.breakpoints||Ny;return Object.keys(t).reduce((o,l)=>{if(bL(a.keys,l)){const c=vL(s.containerQueries?s:kL,l);c&&(o[c]=n(t[l],l))}else if(Object.keys(a.values||hh).includes(l)){const c=a.up(l);o[c]=n(t[l],l)}else{const c=l;o[c]=t[c]}return o},{})}return n(t)}function l5(e={}){var n;return((n=e.keys)==null?void 0:n.reduce((s,i)=>{const a=e.up(i);return s[a]={},s},{}))||{}}function c5(e,t){return e.reduce((n,s)=>{const i=n[s];return(!i||Object.keys(i).length===0)&&delete n[s],n},t)}function NL(e,...t){const n=l5(e),s=[n,...t].reduce((i,a)=>xn(i,a),{});return c5(Object.keys(n),s)}function CL(e,t){if(typeof e!="object")return{};const n={},s=Object.keys(t);return Array.isArray(e)?s.forEach((i,a)=>{a<e.length&&(n[i]=!0)}):s.forEach(i=>{e[i]!=null&&(n[i]=!0)}),n}function Pm({values:e,breakpoints:t,base:n}){const s=n||CL(e,t),i=Object.keys(s);if(i.length===0)return e;let a;return i.reduce((o,l,c)=>(Array.isArray(e)?(o[l]=e[c]!=null?e[c]:e[a],a=c):typeof e=="object"?(o[l]=e[l]!=null?e[l]:e[a],a=l):o[l]=e,o),{})}function Te(e){if(typeof e!="string")throw new Error(ws(7));return e.charAt(0).toUpperCase()+e.slice(1)}function mh(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const s=`vars.${t}`.split(".").reduce((i,a)=>i&&i[a]?i[a]:null,e);if(s!=null)return s}return t.split(".").reduce((s,i)=>s&&s[i]!=null?s[i]:null,e)}function Yd(e,t,n,s=n){let i;return typeof e=="function"?i=e(n):Array.isArray(e)?i=e[n]||s:i=mh(e,n)||s,t&&(i=t(i,s,e)),i}function on(e){const{prop:t,cssProperty:n=e.prop,themeKey:s,transform:i}=e,a=o=>{if(o[t]==null)return null;const l=o[t],c=o.theme,d=mh(c,s)||{};return Pr(o,l,m=>{let f=Yd(d,i,m);return m===f&&typeof m=="string"&&(f=Yd(d,i,`${t}${m==="default"?"":Te(m)}`,m)),n===!1?f:{[n]:f}})};return a.propTypes={},a.filterProps=[t],a}function SL(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const EL={m:"margin",p:"padding"},TL={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Cy={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},IL=SL(e=>{if(e.length>2)if(Cy[e])e=Cy[e];else return[e];const[t,n]=e.split(""),s=EL[t],i=TL[n]||"";return Array.isArray(i)?i.map(a=>s+a):[s+i]}),qg=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Kg=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...qg,...Kg];function ic(e,t,n,s){const i=mh(e,t,!0)??n;return typeof i=="number"||typeof i=="string"?a=>typeof a=="string"?a:typeof i=="string"?i.startsWith("var(")&&a===0?0:i.startsWith("var(")&&a===1?i:`calc(${a} * ${i})`:i*a:Array.isArray(i)?a=>{if(typeof a=="string")return a;const o=Math.abs(a),l=i[o];return a>=0?l:typeof l=="number"?-l:typeof l=="string"&&l.startsWith("var(")?`calc(-1 * ${l})`:`-${l}`}:typeof i=="function"?i:()=>{}}function fh(e){return ic(e,"spacing",8)}function Zi(e,t){return typeof t=="string"||t==null?t:e(t)}function PL(e,t){return n=>e.reduce((s,i)=>(s[i]=Zi(t,n),s),{})}function AL(e,t,n,s){if(!t.includes(n))return null;const i=IL(n),a=PL(i,s),o=e[n];return Pr(e,o,a)}function d5(e,t){const n=fh(e.theme);return Object.keys(e).map(s=>AL(e,t,s,n)).reduce(el,{})}function Qt(e){return d5(e,qg)}Qt.propTypes={};Qt.filterProps=qg;function Jt(e){return d5(e,Kg)}Jt.propTypes={};Jt.filterProps=Kg;function u5(e=8,t=fh({spacing:e})){if(e.mui)return e;const n=(...s)=>(s.length===0?[1]:s).map(a=>{const o=t(a);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function ph(...e){const t=e.reduce((s,i)=>(i.filterProps.forEach(a=>{s[a]=i}),s),{}),n=s=>Object.keys(s).reduce((i,a)=>t[a]?el(i,t[a](s)):i,{});return n.propTypes={},n.filterProps=e.reduce((s,i)=>s.concat(i.filterProps),[]),n}function gr(e){return typeof e!="number"?e:`${e}px solid`}function vr(e,t){return on({prop:e,themeKey:"borders",transform:t})}const RL=vr("border",gr),LL=vr("borderTop",gr),ML=vr("borderRight",gr),DL=vr("borderBottom",gr),$L=vr("borderLeft",gr),OL=vr("borderColor"),BL=vr("borderTopColor"),_L=vr("borderRightColor"),FL=vr("borderBottomColor"),zL=vr("borderLeftColor"),UL=vr("outline",gr),VL=vr("outlineColor"),gh=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=ic(e.theme,"shape.borderRadius",4),n=s=>({borderRadius:Zi(t,s)});return Pr(e,e.borderRadius,n)}return null};gh.propTypes={};gh.filterProps=["borderRadius"];ph(RL,LL,ML,DL,$L,OL,BL,_L,FL,zL,gh,UL,VL);const xh=e=>{if(e.gap!==void 0&&e.gap!==null){const t=ic(e.theme,"spacing",8),n=s=>({gap:Zi(t,s)});return Pr(e,e.gap,n)}return null};xh.propTypes={};xh.filterProps=["gap"];const yh=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=ic(e.theme,"spacing",8),n=s=>({columnGap:Zi(t,s)});return Pr(e,e.columnGap,n)}return null};yh.propTypes={};yh.filterProps=["columnGap"];const bh=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=ic(e.theme,"spacing",8),n=s=>({rowGap:Zi(t,s)});return Pr(e,e.rowGap,n)}return null};bh.propTypes={};bh.filterProps=["rowGap"];const HL=on({prop:"gridColumn"}),WL=on({prop:"gridRow"}),qL=on({prop:"gridAutoFlow"}),KL=on({prop:"gridAutoColumns"}),GL=on({prop:"gridAutoRows"}),XL=on({prop:"gridTemplateColumns"}),YL=on({prop:"gridTemplateRows"}),QL=on({prop:"gridTemplateAreas"}),JL=on({prop:"gridArea"});ph(xh,yh,bh,HL,WL,qL,KL,GL,XL,YL,QL,JL);function za(e,t){return t==="grey"?t:e}const ZL=on({prop:"color",themeKey:"palette",transform:za}),eM=on({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:za}),tM=on({prop:"backgroundColor",themeKey:"palette",transform:za});ph(ZL,eM,tM);function er(e){return e<=1&&e!==0?`${e*100}%`:e}const nM=on({prop:"width",transform:er}),Gg=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var i,a,o,l,c;const s=((o=(a=(i=e.theme)==null?void 0:i.breakpoints)==null?void 0:a.values)==null?void 0:o[n])||hh[n];return s?((c=(l=e.theme)==null?void 0:l.breakpoints)==null?void 0:c.unit)!=="px"?{maxWidth:`${s}${e.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:er(n)}};return Pr(e,e.maxWidth,t)}return null};Gg.filterProps=["maxWidth"];const rM=on({prop:"minWidth",transform:er}),sM=on({prop:"height",transform:er}),iM=on({prop:"maxHeight",transform:er}),aM=on({prop:"minHeight",transform:er});on({prop:"size",cssProperty:"width",transform:er});on({prop:"size",cssProperty:"height",transform:er});const oM=on({prop:"boxSizing"});ph(nM,Gg,rM,sM,iM,aM,oM);const ac={border:{themeKey:"borders",transform:gr},borderTop:{themeKey:"borders",transform:gr},borderRight:{themeKey:"borders",transform:gr},borderBottom:{themeKey:"borders",transform:gr},borderLeft:{themeKey:"borders",transform:gr},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:gr},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:gh},color:{themeKey:"palette",transform:za},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:za},backgroundColor:{themeKey:"palette",transform:za},p:{style:Jt},pt:{style:Jt},pr:{style:Jt},pb:{style:Jt},pl:{style:Jt},px:{style:Jt},py:{style:Jt},padding:{style:Jt},paddingTop:{style:Jt},paddingRight:{style:Jt},paddingBottom:{style:Jt},paddingLeft:{style:Jt},paddingX:{style:Jt},paddingY:{style:Jt},paddingInline:{style:Jt},paddingInlineStart:{style:Jt},paddingInlineEnd:{style:Jt},paddingBlock:{style:Jt},paddingBlockStart:{style:Jt},paddingBlockEnd:{style:Jt},m:{style:Qt},mt:{style:Qt},mr:{style:Qt},mb:{style:Qt},ml:{style:Qt},mx:{style:Qt},my:{style:Qt},margin:{style:Qt},marginTop:{style:Qt},marginRight:{style:Qt},marginBottom:{style:Qt},marginLeft:{style:Qt},marginX:{style:Qt},marginY:{style:Qt},marginInline:{style:Qt},marginInlineStart:{style:Qt},marginInlineEnd:{style:Qt},marginBlock:{style:Qt},marginBlockStart:{style:Qt},marginBlockEnd:{style:Qt},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:xh},rowGap:{style:bh},columnGap:{style:yh},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:er},maxWidth:{style:Gg},minWidth:{transform:er},height:{transform:er},maxHeight:{transform:er},minHeight:{transform:er},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function lM(...e){const t=e.reduce((s,i)=>s.concat(Object.keys(i)),[]),n=new Set(t);return e.every(s=>n.size===Object.keys(s).length)}function cM(e,t){return typeof e=="function"?e(t):e}function dM(){function e(n,s,i,a){const o={[n]:s,theme:i},l=a[n];if(!l)return{[n]:s};const{cssProperty:c=n,themeKey:d,transform:u,style:m}=l;if(s==null)return null;if(d==="typography"&&s==="inherit")return{[n]:s};const f=mh(i,d)||{};return m?m(o):Pr(o,s,x=>{let g=Yd(f,u,x);return x===g&&typeof x=="string"&&(g=Yd(f,u,`${n}${x==="default"?"":Te(x)}`,x)),c===!1?g:{[c]:g}})}function t(n){const{sx:s,theme:i={}}=n||{};if(!s)return null;const a=i.unstable_sxConfig??ac;function o(l){let c=l;if(typeof l=="function")c=l(i);else if(typeof l!="object")return l;if(!c)return null;const d=l5(i.breakpoints),u=Object.keys(d);let m=d;return Object.keys(c).forEach(f=>{const p=cM(c[f],i);if(p!=null)if(typeof p=="object")if(a[f])m=el(m,e(f,p,i,a));else{const x=Pr({theme:i},p,g=>({[f]:g}));lM(x,p)?m[f]=t({sx:p,theme:i}):m=el(m,x)}else m=el(m,e(f,p,i,a))}),yL(i,c5(u,m))}return Array.isArray(s)?s.map(o):o(s)}return t}const ea=dM();ea.filterProps=["sx"];function uM(e,t){var s;const n=this;if(n.vars){if(!((s=n.colorSchemes)!=null&&s[e])||typeof n.getColorSchemeSelector!="function")return{};let i=n.getColorSchemeSelector(e);return i==="&"?t:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:t})}return n.palette.mode===e?t:{}}function oc(e={},...t){const{breakpoints:n={},palette:s={},spacing:i,shape:a={},...o}=e,l=xL(n),c=u5(i);let d=xn({breakpoints:l,direction:"ltr",components:{},palette:{mode:"light",...s},spacing:c,shape:{...jL,...a}},o);return d=wL(d),d.applyStyles=uM,d=t.reduce((u,m)=>xn(u,m),d),d.unstable_sxConfig={...ac,...o==null?void 0:o.unstable_sxConfig},d.unstable_sx=function(m){return ea({sx:m,theme:this})},d}function hM(e){return Object.keys(e).length===0}function mM(e=null){const t=h.useContext(th);return!t||hM(t)?e:t}const fM=oc();function lc(e=fM){return mM(e)}function pM({styles:e,themeId:t,defaultTheme:n={}}){const s=lc(n),i=typeof e=="function"?e(t&&s[t]||s):e;return r.jsx(hL,{styles:i})}const gM=e=>{var s;const t={systemProps:{},otherProps:{}},n=((s=e==null?void 0:e.theme)==null?void 0:s.unstable_sxConfig)??ac;return Object.keys(e).forEach(i=>{n[i]?t.systemProps[i]=e[i]:t.otherProps[i]=e[i]}),t};function vh(e){const{sx:t,...n}=e,{systemProps:s,otherProps:i}=gM(n);let a;return Array.isArray(t)?a=[s,...t]:typeof t=="function"?a=(...o)=>{const l=t(...o);return Gr(l)?{...s,...l}:s}:a={...s,...t},{...i,sx:a}}const Sy=e=>e,xM=()=>{let e=Sy;return{configure(t){e=t},generate(t){return e(t)},reset(){e=Sy}}},h5=xM();function yM(e={}){const{themeId:t,defaultTheme:n,defaultClassName:s="MuiBox-root",generateClassName:i}=e,a=s5("div",{shouldForwardProp:l=>l!=="theme"&&l!=="sx"&&l!=="as"})(ea);return h.forwardRef(function(c,d){const u=lc(n),{className:m,component:f="div",...p}=vh(c);return r.jsx(a,{as:f,ref:d,className:_e(m,i?i(s):s),theme:t&&u[t]||u,...p})})}const bM={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function tt(e,t,n="Mui"){const s=bM[t];return s?`${n}-${s}`:`${h5.generate(e)}-${t}`}function st(e,t,n="Mui"){const s={};return t.forEach(i=>{s[i]=tt(e,i,n)}),s}function m5(e){const{variants:t,...n}=e,s={variants:t,style:ky(n),isProcessed:!0};return s.style===n||t&&t.forEach(i=>{typeof i.style!="function"&&(i.style=ky(i.style))}),s}const vM=oc();function Am(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function wM(e){return e?(t,n)=>n[e]:null}function jM(e,t,n){e.theme=NM(e.theme)?n:e.theme[t]||e.theme}function jd(e,t){const n=typeof t=="function"?t(e):t;if(Array.isArray(n))return n.flatMap(s=>jd(e,s));if(Array.isArray(n==null?void 0:n.variants)){let s;if(n.isProcessed)s=n.style;else{const{variants:i,...a}=n;s=a}return f5(e,n.variants,[s])}return n!=null&&n.isProcessed?n.style:n}function f5(e,t,n=[]){var i;let s;e:for(let a=0;a<t.length;a+=1){const o=t[a];if(typeof o.props=="function"){if(s??(s={...e,...e.ownerState,ownerState:e.ownerState}),!o.props(s))continue}else for(const l in o.props)if(e[l]!==o.props[l]&&((i=e.ownerState)==null?void 0:i[l])!==o.props[l])continue e;typeof o.style=="function"?(s??(s={...e,...e.ownerState,ownerState:e.ownerState}),n.push(o.style(s))):n.push(o.style)}return n}function p5(e={}){const{themeId:t,defaultTheme:n=vM,rootShouldForwardProp:s=Am,slotShouldForwardProp:i=Am}=e;function a(l){jM(l,t,n)}return(l,c={})=>{mL(l,C=>C.filter(T=>T!==ea));const{name:d,slot:u,skipVariantsResolver:m,skipSx:f,overridesResolver:p=wM(SM(u)),...x}=c,g=m!==void 0?m:u&&u!=="Root"&&u!=="root"||!1,b=f||!1;let w=Am;u==="Root"||u==="root"?w=s:u?w=i:CM(l)&&(w=void 0);const k=s5(l,{shouldForwardProp:w,label:kM(),...x}),v=C=>{if(C.__emotion_real===C)return C;if(typeof C=="function")return function(E){return jd(E,C)};if(Gr(C)){const T=m5(C);return T.variants?function(P){return jd(P,T)}:T.style}return C},N=(...C)=>{const T=[],E=C.map(v),P=[];if(T.push(a),d&&p&&P.push(function(_){var z,ie;const A=(ie=(z=_.theme.components)==null?void 0:z[d])==null?void 0:ie.styleOverrides;if(!A)return null;const M={};for(const X in A)M[X]=jd(_,A[X]);return p(_,M)}),d&&!g&&P.push(function(_){var M,z;const L=_.theme,A=(z=(M=L==null?void 0:L.components)==null?void 0:M[d])==null?void 0:z.variants;return A?f5(_,A):null}),b||P.push(ea),Array.isArray(E[0])){const O=E.shift(),_=new Array(T.length).fill(""),L=new Array(P.length).fill("");let A;A=[..._,...O,...L],A.raw=[..._,...O.raw,...L],T.unshift(A)}const R=[...T,...E,...P],y=k(...R);return l.muiName&&(y.muiName=l.muiName),y};return k.withConfig&&(N.withConfig=k.withConfig),N}}function kM(e,t){return void 0}function NM(e){for(const t in e)return!1;return!0}function CM(e){return typeof e=="string"&&e.charCodeAt(0)>96}function SM(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const g5=p5();function Pl(e,t){const n={...t};for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){const i=s;if(i==="components"||i==="slots")n[i]={...e[i],...n[i]};else if(i==="componentsProps"||i==="slotProps"){const a=e[i],o=t[i];if(!o)n[i]=a||{};else if(!a)n[i]=o;else{n[i]={...o};for(const l in a)if(Object.prototype.hasOwnProperty.call(a,l)){const c=l;n[i][c]=Pl(a[c],o[c])}}}else n[i]===void 0&&(n[i]=e[i])}return n}function EM(e){const{theme:t,name:n,props:s}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?s:Pl(t.components[n].defaultProps,s)}function x5({props:e,name:t,defaultTheme:n,themeId:s}){let i=lc(n);return s&&(i=i[s]||i),EM({theme:i,name:t,props:e})}const ni=typeof window<"u"?h.useLayoutEffect:h.useEffect;function TM(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function Xg(e,t=0,n=1){return TM(e,t,n)}function IM(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(s=>s+s)),n?`rgb${n.length===4?"a":""}(${n.map((s,i)=>i<3?parseInt(s,16):Math.round(parseInt(s,16)/255*1e3)/1e3).join(", ")})`:""}function ri(e){if(e.type)return e;if(e.charAt(0)==="#")return ri(IM(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(ws(9,e));let s=e.substring(t+1,e.length-1),i;if(n==="color"){if(s=s.split(" "),i=s.shift(),s.length===4&&s[3].charAt(0)==="/"&&(s[3]=s[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(ws(10,i))}else s=s.split(",");return s=s.map(a=>parseFloat(a)),{type:n,values:s,colorSpace:i}}const PM=e=>{const t=ri(e);return t.values.slice(0,3).map((n,s)=>t.type.includes("hsl")&&s!==0?`${n}%`:n).join(" ")},Fo=(e,t)=>{try{return PM(e)}catch{return e}};function wh(e){const{type:t,colorSpace:n}=e;let{values:s}=e;return t.includes("rgb")?s=s.map((i,a)=>a<3?parseInt(i,10):i):t.includes("hsl")&&(s[1]=`${s[1]}%`,s[2]=`${s[2]}%`),t.includes("color")?s=`${n} ${s.join(" ")}`:s=`${s.join(", ")}`,`${t}(${s})`}function y5(e){e=ri(e);const{values:t}=e,n=t[0],s=t[1]/100,i=t[2]/100,a=s*Math.min(i,1-i),o=(d,u=(d+n/30)%12)=>i-a*Math.max(Math.min(u-3,9-u,1),-1);let l="rgb";const c=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return e.type==="hsla"&&(l+="a",c.push(t[3])),wh({type:l,values:c})}function hp(e){e=ri(e);let t=e.type==="hsl"||e.type==="hsla"?ri(y5(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function AM(e,t){const n=hp(e),s=hp(t);return(Math.max(n,s)+.05)/(Math.min(n,s)+.05)}function It(e,t){return e=ri(e),t=Xg(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,wh(e)}function Rc(e,t,n){try{return It(e,t)}catch{return e}}function ta(e,t){if(e=ri(e),t=Xg(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return wh(e)}function Mt(e,t,n){try{return ta(e,t)}catch{return e}}function na(e,t){if(e=ri(e),t=Xg(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return wh(e)}function Dt(e,t,n){try{return na(e,t)}catch{return e}}function RM(e,t=.15){return hp(e)>.5?ta(e,t):na(e,t)}function Lc(e,t,n){try{return RM(e,t)}catch{return e}}const LM=h.createContext(),b5=()=>h.useContext(LM)??!1,MM=h.createContext(void 0);function DM(e){const{theme:t,name:n,props:s}=e;if(!t||!t.components||!t.components[n])return s;const i=t.components[n];return i.defaultProps?Pl(i.defaultProps,s):!i.styleOverrides&&!i.variants?Pl(i,s):s}function $M({props:e,name:t}){const n=h.useContext(MM);return DM({props:e,name:t,theme:{components:n}})}const Ey={theme:void 0};function OM(e){let t,n;return function(i){let a=t;return(a===void 0||i.theme!==n)&&(Ey.theme=i.theme,a=m5(e(Ey)),t=a,n=i.theme),a}}function BM(e=""){function t(...s){if(!s.length)return"";const i=s[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${i}${t(...s.slice(1))})`:`, ${i}`}return(s,...i)=>`var(--${e?`${e}-`:""}${s}${t(...i)})`}const Ty=(e,t,n,s=[])=>{let i=e;t.forEach((a,o)=>{o===t.length-1?Array.isArray(i)?i[Number(a)]=n:i&&typeof i=="object"&&(i[a]=n):i&&typeof i=="object"&&(i[a]||(i[a]=s.includes(a)?[]:{}),i=i[a])})},_M=(e,t,n)=>{function s(i,a=[],o=[]){Object.entries(i).forEach(([l,c])=>{(!n||n&&!n([...a,l]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?s(c,[...a,l],Array.isArray(c)?[...o,l]:o):t([...a,l],c,o))})}s(e)},FM=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(s=>e.includes(s))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function Rm(e,t){const{prefix:n,shouldSkipGeneratingVar:s}=t||{},i={},a={},o={};return _M(e,(l,c,d)=>{if((typeof c=="string"||typeof c=="number")&&(!s||!s(l,c))){const u=`--${n?`${n}-`:""}${l.join("-")}`,m=FM(l,c);Object.assign(i,{[u]:m}),Ty(a,l,`var(${u})`,d),Ty(o,l,`var(${u}, ${m})`,d)}},l=>l[0]==="vars"),{css:i,vars:a,varsWithDefaults:o}}function zM(e,t={}){const{getSelector:n=b,disableCssColorScheme:s,colorSchemeSelector:i}=t,{colorSchemes:a={},components:o,defaultColorScheme:l="light",...c}=e,{vars:d,css:u,varsWithDefaults:m}=Rm(c,t);let f=m;const p={},{[l]:x,...g}=a;if(Object.entries(g||{}).forEach(([v,N])=>{const{vars:C,css:T,varsWithDefaults:E}=Rm(N,t);f=xn(f,E),p[v]={css:T,vars:C}}),x){const{css:v,vars:N,varsWithDefaults:C}=Rm(x,t);f=xn(f,C),p[l]={css:v,vars:N}}function b(v,N){var T,E;let C=i;if(i==="class"&&(C=".%s"),i==="data"&&(C="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(C=`[${i}="%s"]`),v){if(C==="media")return e.defaultColorScheme===v?":root":{[`@media (prefers-color-scheme: ${((E=(T=a[v])==null?void 0:T.palette)==null?void 0:E.mode)||v})`]:{":root":N}};if(C)return e.defaultColorScheme===v?`:root, ${C.replace("%s",String(v))}`:C.replace("%s",String(v))}return":root"}return{vars:f,generateThemeVars:()=>{let v={...d};return Object.entries(p).forEach(([,{vars:N}])=>{v=xn(v,N)}),v},generateStyleSheets:()=>{var P,R;const v=[],N=e.defaultColorScheme||"light";function C(y,O){Object.keys(O).length&&v.push(typeof y=="string"?{[y]:{...O}}:y)}C(n(void 0,{...u}),u);const{[N]:T,...E}=p;if(T){const{css:y}=T,O=(R=(P=a[N])==null?void 0:P.palette)==null?void 0:R.mode,_=!s&&O?{colorScheme:O,...y}:{...y};C(n(N,{..._}),_)}return Object.entries(E).forEach(([y,{css:O}])=>{var A,M;const _=(M=(A=a[y])==null?void 0:A.palette)==null?void 0:M.mode,L=!s&&_?{colorScheme:_,...O}:{...O};C(n(y,{...L}),L)}),v}}}function UM(e){return function(n){return e==="media"?`@media (prefers-color-scheme: ${n})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${n}"] &`:e==="class"?`.${n} &`:e==="data"?`[data-${n}] &`:`${e.replace("%s",n)} &`:"&"}}function nt(e,t,n=void 0){const s={};for(const i in e){const a=e[i];let o="",l=!0;for(let c=0;c<a.length;c+=1){const d=a[c];d&&(o+=(l===!0?"":" ")+t(d),l=!1,n&&n[d]&&(o+=" "+n[d]))}s[i]=o}return s}function tl(e,t){var n,s,i;return h.isValidElement(e)&&t.indexOf(e.type.muiName??((i=(s=(n=e.type)==null?void 0:n._payload)==null?void 0:s.value)==null?void 0:i.muiName))!==-1}const VM=(e,t)=>e.filter(n=>t.includes(n)),go=(e,t,n)=>{const s=e.keys[0];Array.isArray(t)?t.forEach((i,a)=>{n((o,l)=>{a<=e.keys.length-1&&(a===0?Object.assign(o,l):o[e.up(e.keys[a])]=l)},i)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:VM(e.keys,Object.keys(t))).forEach(a=>{if(e.keys.includes(a)){const o=t[a];o!==void 0&&n((l,c)=>{s===a?Object.assign(l,c):l[e.up(a)]=c},o)}}):(typeof t=="number"||typeof t=="string")&&n((i,a)=>{Object.assign(i,a)},t)};function Qd(e){return`--Grid-${e}Spacing`}function jh(e){return`--Grid-parent-${e}Spacing`}const Iy="--Grid-columns",Ua="--Grid-parent-columns",HM=({theme:e,ownerState:t})=>{const n={};return go(e.breakpoints,t.size,(s,i)=>{let a={};i==="grow"&&(a={flexBasis:0,flexGrow:1,maxWidth:"100%"}),i==="auto"&&(a={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof i=="number"&&(a={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${i} / var(${Ua}) - (var(${Ua}) - ${i}) * (var(${jh("column")}) / var(${Ua})))`}),s(n,a)}),n},WM=({theme:e,ownerState:t})=>{const n={};return go(e.breakpoints,t.offset,(s,i)=>{let a={};i==="auto"&&(a={marginLeft:"auto"}),typeof i=="number"&&(a={marginLeft:i===0?"0px":`calc(100% * ${i} / var(${Ua}) + var(${jh("column")}) * ${i} / var(${Ua}))`}),s(n,a)}),n},qM=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={[Iy]:12};return go(e.breakpoints,t.columns,(s,i)=>{const a=i??12;s(n,{[Iy]:a,"> *":{[Ua]:a}})}),n},KM=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={};return go(e.breakpoints,t.rowSpacing,(s,i)=>{var o;const a=typeof i=="string"?i:(o=e.spacing)==null?void 0:o.call(e,i);s(n,{[Qd("row")]:a,"> *":{[jh("row")]:a}})}),n},GM=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={};return go(e.breakpoints,t.columnSpacing,(s,i)=>{var o;const a=typeof i=="string"?i:(o=e.spacing)==null?void 0:o.call(e,i);s(n,{[Qd("column")]:a,"> *":{[jh("column")]:a}})}),n},XM=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={};return go(e.breakpoints,t.direction,(s,i)=>{s(n,{flexDirection:i})}),n},YM=({ownerState:e})=>({minWidth:0,boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",...e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},gap:`var(${Qd("row")}) var(${Qd("column")})`}}),QM=e=>{const t=[];return Object.entries(e).forEach(([n,s])=>{s!==!1&&s!==void 0&&t.push(`grid-${n}-${String(s)}`)}),t},JM=(e,t="xs")=>{function n(s){return s===void 0?!1:typeof s=="string"&&!Number.isNaN(Number(s))||typeof s=="number"&&s>0}if(n(e))return[`spacing-${t}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const s=[];return Object.entries(e).forEach(([i,a])=>{n(a)&&s.push(`spacing-${i}-${String(a)}`)}),s}return[]},ZM=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([t,n])=>`direction-${t}-${n}`):[`direction-xs-${String(e)}`];function e9(e,t){e.item!==void 0&&delete e.item,e.zeroMinWidth!==void 0&&delete e.zeroMinWidth,t.keys.forEach(n=>{e[n]!==void 0&&delete e[n]})}const t9=oc(),n9=g5("div",{name:"MuiGrid",slot:"Root"});function r9(e){return x5({props:e,name:"MuiGrid",defaultTheme:t9})}function s9(e={}){const{createStyledComponent:t=n9,useThemeProps:n=r9,useTheme:s=lc,componentName:i="MuiGrid"}=e,a=(d,u)=>{const{container:m,direction:f,spacing:p,wrap:x,size:g}=d,b={root:["root",m&&"container",x!=="wrap"&&`wrap-xs-${String(x)}`,...ZM(f),...QM(g),...m?JM(p,u.breakpoints.keys[0]):[]]};return nt(b,w=>tt(i,w),{})};function o(d,u,m=()=>!0){const f={};return d===null||(Array.isArray(d)?d.forEach((p,x)=>{p!==null&&m(p)&&u.keys[x]&&(f[u.keys[x]]=p)}):typeof d=="object"?Object.keys(d).forEach(p=>{const x=d[p];x!=null&&m(x)&&(f[p]=x)}):f[u.keys[0]]=d),f}const l=t(qM,GM,KM,HM,XM,YM,WM),c=h.forwardRef(function(u,m){const f=s(),p=n(u),x=vh(p);e9(x,f.breakpoints);const{className:g,children:b,columns:w=12,container:k=!1,component:v="div",direction:N="row",wrap:C="wrap",size:T={},offset:E={},spacing:P=0,rowSpacing:R=P,columnSpacing:y=P,unstable_level:O=0,..._}=x,L=o(T,f.breakpoints,H=>H!==!1),A=o(E,f.breakpoints),M=u.columns??(O?void 0:w),z=u.spacing??(O?void 0:P),ie=u.rowSpacing??u.spacing??(O?void 0:R),X=u.columnSpacing??u.spacing??(O?void 0:y),te={...x,level:O,columns:M,container:k,direction:N,wrap:C,spacing:z,rowSpacing:ie,columnSpacing:X,size:L,offset:A},B=a(te,f);return r.jsx(l,{ref:m,as:v,ownerState:te,className:_e(B.root,g),..._,children:h.Children.map(b,H=>{var K;return h.isValidElement(H)&&tl(H,["Grid"])&&k&&H.props.container?h.cloneElement(H,{unstable_level:((K=H.props)==null?void 0:K.unstable_level)??O+1}):H})})});return c.muiName="Grid",c}const i9=oc(),a9=g5("div",{name:"MuiStack",slot:"Root"});function o9(e){return x5({props:e,name:"MuiStack",defaultTheme:i9})}function l9(e,t){const n=h.Children.toArray(e).filter(Boolean);return n.reduce((s,i,a)=>(s.push(i),a<n.length-1&&s.push(h.cloneElement(t,{key:`separator-${a}`})),s),[])}const c9=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],d9=({ownerState:e,theme:t})=>{let n={display:"flex",flexDirection:"column",...Pr({theme:t},Pm({values:e.direction,breakpoints:t.breakpoints.values}),s=>({flexDirection:s}))};if(e.spacing){const s=fh(t),i=Object.keys(t.breakpoints.values).reduce((c,d)=>((typeof e.spacing=="object"&&e.spacing[d]!=null||typeof e.direction=="object"&&e.direction[d]!=null)&&(c[d]=!0),c),{}),a=Pm({values:e.direction,base:i}),o=Pm({values:e.spacing,base:i});typeof a=="object"&&Object.keys(a).forEach((c,d,u)=>{if(!a[c]){const f=d>0?a[u[d-1]]:"column";a[c]=f}}),n=xn(n,Pr({theme:t},o,(c,d)=>e.useFlexGap?{gap:Zi(s,c)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${c9(d?a[d]:e.direction)}`]:Zi(s,c)}}))}return n=NL(t.breakpoints,n),n};function u9(e={}){const{createStyledComponent:t=a9,useThemeProps:n=o9,componentName:s="MuiStack"}=e,i=()=>nt({root:["root"]},c=>tt(s,c),{}),a=t(d9);return h.forwardRef(function(c,d){const u=n(c),m=vh(u),{component:f="div",direction:p="column",spacing:x=0,divider:g,children:b,className:w,useFlexGap:k=!1,...v}=m,N={direction:p,spacing:x,useFlexGap:k},C=i();return r.jsx(a,{as:f,ownerState:N,ref:d,className:_e(C.root,w),...v,children:g?l9(b,g):b})})}function v5(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Sl.white,default:Sl.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const h9=v5();function w5(){return{text:{primary:Sl.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Sl.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const Py=w5();function Ay(e,t,n,s){const i=s.light||s,a=s.dark||s*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=na(e.main,i):t==="dark"&&(e.dark=ta(e.main,a)))}function m9(e="light"){return e==="dark"?{main:ya[200],light:ya[50],dark:ya[400]}:{main:ya[700],light:ya[400],dark:ya[800]}}function f9(e="light"){return e==="dark"?{main:xa[200],light:xa[50],dark:xa[400]}:{main:xa[500],light:xa[300],dark:xa[700]}}function p9(e="light"){return e==="dark"?{main:ga[500],light:ga[300],dark:ga[700]}:{main:ga[700],light:ga[400],dark:ga[800]}}function g9(e="light"){return e==="dark"?{main:ba[400],light:ba[300],dark:ba[700]}:{main:ba[700],light:ba[500],dark:ba[900]}}function x9(e="light"){return e==="dark"?{main:va[400],light:va[300],dark:va[700]}:{main:va[800],light:va[500],dark:va[900]}}function y9(e="light"){return e==="dark"?{main:Co[400],light:Co[300],dark:Co[700]}:{main:"#ed6c02",light:Co[500],dark:Co[900]}}function Yg(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:s=.2,...i}=e,a=e.primary||m9(t),o=e.secondary||f9(t),l=e.error||p9(t),c=e.info||g9(t),d=e.success||x9(t),u=e.warning||y9(t);function m(g){return AM(g,Py.text.primary)>=n?Py.text.primary:h9.text.primary}const f=({color:g,name:b,mainShade:w=500,lightShade:k=300,darkShade:v=700})=>{if(g={...g},!g.main&&g[w]&&(g.main=g[w]),!g.hasOwnProperty("main"))throw new Error(ws(11,b?` (${b})`:"",w));if(typeof g.main!="string")throw new Error(ws(12,b?` (${b})`:"",JSON.stringify(g.main)));return Ay(g,"light",k,s),Ay(g,"dark",v,s),g.contrastText||(g.contrastText=m(g.main)),g};let p;return t==="light"?p=v5():t==="dark"&&(p=w5()),xn({common:{...Sl},mode:t,primary:f({color:a,name:"primary"}),secondary:f({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:f({color:l,name:"error"}),warning:f({color:u,name:"warning"}),info:f({color:c,name:"info"}),success:f({color:d,name:"success"}),grey:lR,contrastThreshold:n,getContrastText:m,augmentColor:f,tonalOffset:s,...p},i)}function b9(e){const t={};return Object.entries(e).forEach(s=>{const[i,a]=s;typeof a=="object"&&(t[i]=`${a.fontStyle?`${a.fontStyle} `:""}${a.fontVariant?`${a.fontVariant} `:""}${a.fontWeight?`${a.fontWeight} `:""}${a.fontStretch?`${a.fontStretch} `:""}${a.fontSize||""}${a.lineHeight?`/${a.lineHeight} `:""}${a.fontFamily||""}`)}),t}function v9(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function w9(e){return Math.round(e*1e5)/1e5}const Ry={textTransform:"uppercase"},Ly='"Roboto", "Helvetica", "Arial", sans-serif';function j9(e,t){const{fontFamily:n=Ly,fontSize:s=14,fontWeightLight:i=300,fontWeightRegular:a=400,fontWeightMedium:o=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:d,pxToRem:u,...m}=typeof t=="function"?t(e):t,f=s/14,p=u||(b=>`${b/c*f}rem`),x=(b,w,k,v,N)=>({fontFamily:n,fontWeight:b,fontSize:p(w),lineHeight:k,...n===Ly?{letterSpacing:`${w9(v/w)}em`}:{},...N,...d}),g={h1:x(i,96,1.167,-1.5),h2:x(i,60,1.2,-.5),h3:x(a,48,1.167,0),h4:x(a,34,1.235,.25),h5:x(a,24,1.334,0),h6:x(o,20,1.6,.15),subtitle1:x(a,16,1.75,.15),subtitle2:x(o,14,1.57,.1),body1:x(a,16,1.5,.15),body2:x(a,14,1.43,.15),button:x(o,14,1.75,.4,Ry),caption:x(a,12,1.66,.4),overline:x(a,12,2.66,1,Ry),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return xn({htmlFontSize:c,pxToRem:p,fontFamily:n,fontSize:s,fontWeightLight:i,fontWeightRegular:a,fontWeightMedium:o,fontWeightBold:l,...g},m,{clone:!1})}const k9=.2,N9=.14,C9=.12;function qt(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${k9})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${N9})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${C9})`].join(",")}const S9=["none",qt(0,2,1,-1,0,1,1,0,0,1,3,0),qt(0,3,1,-2,0,2,2,0,0,1,5,0),qt(0,3,3,-2,0,3,4,0,0,1,8,0),qt(0,2,4,-1,0,4,5,0,0,1,10,0),qt(0,3,5,-1,0,5,8,0,0,1,14,0),qt(0,3,5,-1,0,6,10,0,0,1,18,0),qt(0,4,5,-2,0,7,10,1,0,2,16,1),qt(0,5,5,-3,0,8,10,1,0,3,14,2),qt(0,5,6,-3,0,9,12,1,0,3,16,2),qt(0,6,6,-3,0,10,14,1,0,4,18,3),qt(0,6,7,-4,0,11,15,1,0,4,20,3),qt(0,7,8,-4,0,12,17,2,0,5,22,4),qt(0,7,8,-4,0,13,19,2,0,5,24,4),qt(0,7,9,-4,0,14,21,2,0,5,26,4),qt(0,8,9,-5,0,15,22,2,0,6,28,5),qt(0,8,10,-5,0,16,24,2,0,6,30,5),qt(0,8,11,-5,0,17,26,2,0,6,32,5),qt(0,9,11,-5,0,18,28,2,0,7,34,6),qt(0,9,12,-6,0,19,29,2,0,7,36,6),qt(0,10,13,-6,0,20,31,3,0,8,38,7),qt(0,10,13,-6,0,21,33,3,0,8,40,7),qt(0,10,14,-6,0,22,35,3,0,8,42,7),qt(0,11,14,-7,0,23,36,3,0,9,44,8),qt(0,11,15,-7,0,24,38,3,0,9,46,8)],E9={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},T9={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function My(e){return`${Math.round(e)}ms`}function I9(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function P9(e){const t={...E9,...e.easing},n={...T9,...e.duration};return{getAutoHeightDuration:I9,create:(i=["all"],a={})=>{const{duration:o=n.standard,easing:l=t.easeInOut,delay:c=0,...d}=a;return(Array.isArray(i)?i:[i]).map(u=>`${u} ${typeof o=="string"?o:My(o)} ${l} ${typeof c=="string"?c:My(c)}`).join(",")},...e,easing:t,duration:n}}const A9={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function R9(e){return Gr(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function j5(e={}){const t={...e};function n(s){const i=Object.entries(s);for(let a=0;a<i.length;a++){const[o,l]=i[a];!R9(l)||o.startsWith("unstable_")?delete s[o]:Gr(l)&&(s[o]={...l},n(s[o]))}}return n(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function mp(e={},...t){const{breakpoints:n,mixins:s={},spacing:i,palette:a={},transitions:o={},typography:l={},shape:c,...d}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(ws(20));const u=Yg(a),m=oc(e);let f=xn(m,{mixins:v9(m.breakpoints,s),palette:u,shadows:S9.slice(),typography:j9(u,l),transitions:P9(o),zIndex:{...A9}});return f=xn(f,d),f=t.reduce((p,x)=>xn(p,x),f),f.unstable_sxConfig={...ac,...d==null?void 0:d.unstable_sxConfig},f.unstable_sx=function(x){return ea({sx:x,theme:this})},f.toRuntimeSource=j5,f}function fp(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const L9=[...Array(25)].map((e,t)=>{if(t===0)return"none";const n=fp(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function k5(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function N5(e){return e==="dark"?L9:[]}function M9(e){const{palette:t={mode:"light"},opacity:n,overlays:s,...i}=e,a=Yg(t);return{palette:a,opacity:{...k5(a.mode),...n},overlays:s||N5(a.mode),...i}}function D9(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const $9=e=>[...[...Array(25)].map((t,n)=>`--${e?`${e}-`:""}overlays-${n}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],O9=e=>(t,n)=>{const s=e.rootSelector||":root",i=e.colorSchemeSelector;let a=i;if(i==="class"&&(a=".%s"),i==="data"&&(a="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(a=`[${i}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const o={};return $9(e.cssVarPrefix).forEach(l=>{o[l]=n[l],delete n[l]}),a==="media"?{[s]:n,"@media (prefers-color-scheme: dark)":{[s]:o}}:a?{[a.replace("%s",t)]:o,[`${s}, ${a.replace("%s",t)}`]:n}:{[s]:{...n,...o}}}if(a&&a!=="media")return`${s}, ${a.replace("%s",String(t))}`}else if(t){if(a==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[s]:n}};if(a)return a.replace("%s",String(t))}return s};function B9(e,t){t.forEach(n=>{e[n]||(e[n]={})})}function pe(e,t,n){!e[t]&&n&&(e[t]=n)}function zo(e){return typeof e!="string"||!e.startsWith("hsl")?e:y5(e)}function ss(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Fo(zo(e[t])))}function _9(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const Or=e=>{try{return e()}catch{}},F9=(e="mui")=>BM(e);function Lm(e,t,n,s){if(!t)return;t=t===!0?{}:t;const i=s==="dark"?"dark":"light";if(!n){e[s]=M9({...t,palette:{mode:i,...t==null?void 0:t.palette}});return}const{palette:a,...o}=mp({...n,palette:{mode:i,...t==null?void 0:t.palette}});return e[s]={...t,palette:a,opacity:{...k5(i),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||N5(i)},o}function z9(e={},...t){const{colorSchemes:n={light:!0},defaultColorScheme:s,disableCssColorScheme:i=!1,cssVarPrefix:a="mui",shouldSkipGeneratingVar:o=D9,colorSchemeSelector:l=n.light&&n.dark?"media":void 0,rootSelector:c=":root",...d}=e,u=Object.keys(n)[0],m=s||(n.light&&u!=="light"?"light":u),f=F9(a),{[m]:p,light:x,dark:g,...b}=n,w={...b};let k=p;if((m==="dark"&&!("dark"in n)||m==="light"&&!("light"in n))&&(k=!0),!k)throw new Error(ws(21,m));const v=Lm(w,k,d,m);x&&!w.light&&Lm(w,x,void 0,"light"),g&&!w.dark&&Lm(w,g,void 0,"dark");let N={defaultColorScheme:m,...v,cssVarPrefix:a,colorSchemeSelector:l,rootSelector:c,getCssVar:f,colorSchemes:w,font:{...b9(v.typography),...v.font},spacing:_9(d.spacing)};Object.keys(N.colorSchemes).forEach(R=>{const y=N.colorSchemes[R].palette,O=_=>{const L=_.split("-"),A=L[1],M=L[2];return f(_,y[A][M])};if(y.mode==="light"&&(pe(y.common,"background","#fff"),pe(y.common,"onBackground","#000")),y.mode==="dark"&&(pe(y.common,"background","#000"),pe(y.common,"onBackground","#fff")),B9(y,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),y.mode==="light"){pe(y.Alert,"errorColor",Mt(y.error.light,.6)),pe(y.Alert,"infoColor",Mt(y.info.light,.6)),pe(y.Alert,"successColor",Mt(y.success.light,.6)),pe(y.Alert,"warningColor",Mt(y.warning.light,.6)),pe(y.Alert,"errorFilledBg",O("palette-error-main")),pe(y.Alert,"infoFilledBg",O("palette-info-main")),pe(y.Alert,"successFilledBg",O("palette-success-main")),pe(y.Alert,"warningFilledBg",O("palette-warning-main")),pe(y.Alert,"errorFilledColor",Or(()=>y.getContrastText(y.error.main))),pe(y.Alert,"infoFilledColor",Or(()=>y.getContrastText(y.info.main))),pe(y.Alert,"successFilledColor",Or(()=>y.getContrastText(y.success.main))),pe(y.Alert,"warningFilledColor",Or(()=>y.getContrastText(y.warning.main))),pe(y.Alert,"errorStandardBg",Dt(y.error.light,.9)),pe(y.Alert,"infoStandardBg",Dt(y.info.light,.9)),pe(y.Alert,"successStandardBg",Dt(y.success.light,.9)),pe(y.Alert,"warningStandardBg",Dt(y.warning.light,.9)),pe(y.Alert,"errorIconColor",O("palette-error-main")),pe(y.Alert,"infoIconColor",O("palette-info-main")),pe(y.Alert,"successIconColor",O("palette-success-main")),pe(y.Alert,"warningIconColor",O("palette-warning-main")),pe(y.AppBar,"defaultBg",O("palette-grey-100")),pe(y.Avatar,"defaultBg",O("palette-grey-400")),pe(y.Button,"inheritContainedBg",O("palette-grey-300")),pe(y.Button,"inheritContainedHoverBg",O("palette-grey-A100")),pe(y.Chip,"defaultBorder",O("palette-grey-400")),pe(y.Chip,"defaultAvatarColor",O("palette-grey-700")),pe(y.Chip,"defaultIconColor",O("palette-grey-700")),pe(y.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),pe(y.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),pe(y.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),pe(y.LinearProgress,"primaryBg",Dt(y.primary.main,.62)),pe(y.LinearProgress,"secondaryBg",Dt(y.secondary.main,.62)),pe(y.LinearProgress,"errorBg",Dt(y.error.main,.62)),pe(y.LinearProgress,"infoBg",Dt(y.info.main,.62)),pe(y.LinearProgress,"successBg",Dt(y.success.main,.62)),pe(y.LinearProgress,"warningBg",Dt(y.warning.main,.62)),pe(y.Skeleton,"bg",`rgba(${O("palette-text-primaryChannel")} / 0.11)`),pe(y.Slider,"primaryTrack",Dt(y.primary.main,.62)),pe(y.Slider,"secondaryTrack",Dt(y.secondary.main,.62)),pe(y.Slider,"errorTrack",Dt(y.error.main,.62)),pe(y.Slider,"infoTrack",Dt(y.info.main,.62)),pe(y.Slider,"successTrack",Dt(y.success.main,.62)),pe(y.Slider,"warningTrack",Dt(y.warning.main,.62));const _=Lc(y.background.default,.8);pe(y.SnackbarContent,"bg",_),pe(y.SnackbarContent,"color",Or(()=>y.getContrastText(_))),pe(y.SpeedDialAction,"fabHoverBg",Lc(y.background.paper,.15)),pe(y.StepConnector,"border",O("palette-grey-400")),pe(y.StepContent,"border",O("palette-grey-400")),pe(y.Switch,"defaultColor",O("palette-common-white")),pe(y.Switch,"defaultDisabledColor",O("palette-grey-100")),pe(y.Switch,"primaryDisabledColor",Dt(y.primary.main,.62)),pe(y.Switch,"secondaryDisabledColor",Dt(y.secondary.main,.62)),pe(y.Switch,"errorDisabledColor",Dt(y.error.main,.62)),pe(y.Switch,"infoDisabledColor",Dt(y.info.main,.62)),pe(y.Switch,"successDisabledColor",Dt(y.success.main,.62)),pe(y.Switch,"warningDisabledColor",Dt(y.warning.main,.62)),pe(y.TableCell,"border",Dt(Rc(y.divider,1),.88)),pe(y.Tooltip,"bg",Rc(y.grey[700],.92))}if(y.mode==="dark"){pe(y.Alert,"errorColor",Dt(y.error.light,.6)),pe(y.Alert,"infoColor",Dt(y.info.light,.6)),pe(y.Alert,"successColor",Dt(y.success.light,.6)),pe(y.Alert,"warningColor",Dt(y.warning.light,.6)),pe(y.Alert,"errorFilledBg",O("palette-error-dark")),pe(y.Alert,"infoFilledBg",O("palette-info-dark")),pe(y.Alert,"successFilledBg",O("palette-success-dark")),pe(y.Alert,"warningFilledBg",O("palette-warning-dark")),pe(y.Alert,"errorFilledColor",Or(()=>y.getContrastText(y.error.dark))),pe(y.Alert,"infoFilledColor",Or(()=>y.getContrastText(y.info.dark))),pe(y.Alert,"successFilledColor",Or(()=>y.getContrastText(y.success.dark))),pe(y.Alert,"warningFilledColor",Or(()=>y.getContrastText(y.warning.dark))),pe(y.Alert,"errorStandardBg",Mt(y.error.light,.9)),pe(y.Alert,"infoStandardBg",Mt(y.info.light,.9)),pe(y.Alert,"successStandardBg",Mt(y.success.light,.9)),pe(y.Alert,"warningStandardBg",Mt(y.warning.light,.9)),pe(y.Alert,"errorIconColor",O("palette-error-main")),pe(y.Alert,"infoIconColor",O("palette-info-main")),pe(y.Alert,"successIconColor",O("palette-success-main")),pe(y.Alert,"warningIconColor",O("palette-warning-main")),pe(y.AppBar,"defaultBg",O("palette-grey-900")),pe(y.AppBar,"darkBg",O("palette-background-paper")),pe(y.AppBar,"darkColor",O("palette-text-primary")),pe(y.Avatar,"defaultBg",O("palette-grey-600")),pe(y.Button,"inheritContainedBg",O("palette-grey-800")),pe(y.Button,"inheritContainedHoverBg",O("palette-grey-700")),pe(y.Chip,"defaultBorder",O("palette-grey-700")),pe(y.Chip,"defaultAvatarColor",O("palette-grey-300")),pe(y.Chip,"defaultIconColor",O("palette-grey-300")),pe(y.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),pe(y.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),pe(y.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),pe(y.LinearProgress,"primaryBg",Mt(y.primary.main,.5)),pe(y.LinearProgress,"secondaryBg",Mt(y.secondary.main,.5)),pe(y.LinearProgress,"errorBg",Mt(y.error.main,.5)),pe(y.LinearProgress,"infoBg",Mt(y.info.main,.5)),pe(y.LinearProgress,"successBg",Mt(y.success.main,.5)),pe(y.LinearProgress,"warningBg",Mt(y.warning.main,.5)),pe(y.Skeleton,"bg",`rgba(${O("palette-text-primaryChannel")} / 0.13)`),pe(y.Slider,"primaryTrack",Mt(y.primary.main,.5)),pe(y.Slider,"secondaryTrack",Mt(y.secondary.main,.5)),pe(y.Slider,"errorTrack",Mt(y.error.main,.5)),pe(y.Slider,"infoTrack",Mt(y.info.main,.5)),pe(y.Slider,"successTrack",Mt(y.success.main,.5)),pe(y.Slider,"warningTrack",Mt(y.warning.main,.5));const _=Lc(y.background.default,.98);pe(y.SnackbarContent,"bg",_),pe(y.SnackbarContent,"color",Or(()=>y.getContrastText(_))),pe(y.SpeedDialAction,"fabHoverBg",Lc(y.background.paper,.15)),pe(y.StepConnector,"border",O("palette-grey-600")),pe(y.StepContent,"border",O("palette-grey-600")),pe(y.Switch,"defaultColor",O("palette-grey-300")),pe(y.Switch,"defaultDisabledColor",O("palette-grey-600")),pe(y.Switch,"primaryDisabledColor",Mt(y.primary.main,.55)),pe(y.Switch,"secondaryDisabledColor",Mt(y.secondary.main,.55)),pe(y.Switch,"errorDisabledColor",Mt(y.error.main,.55)),pe(y.Switch,"infoDisabledColor",Mt(y.info.main,.55)),pe(y.Switch,"successDisabledColor",Mt(y.success.main,.55)),pe(y.Switch,"warningDisabledColor",Mt(y.warning.main,.55)),pe(y.TableCell,"border",Mt(Rc(y.divider,1),.68)),pe(y.Tooltip,"bg",Rc(y.grey[700],.92))}ss(y.background,"default"),ss(y.background,"paper"),ss(y.common,"background"),ss(y.common,"onBackground"),ss(y,"divider"),Object.keys(y).forEach(_=>{const L=y[_];_!=="tonalOffset"&&L&&typeof L=="object"&&(L.main&&pe(y[_],"mainChannel",Fo(zo(L.main))),L.light&&pe(y[_],"lightChannel",Fo(zo(L.light))),L.dark&&pe(y[_],"darkChannel",Fo(zo(L.dark))),L.contrastText&&pe(y[_],"contrastTextChannel",Fo(zo(L.contrastText))),_==="text"&&(ss(y[_],"primary"),ss(y[_],"secondary")),_==="action"&&(L.active&&ss(y[_],"active"),L.selected&&ss(y[_],"selected")))})}),N=t.reduce((R,y)=>xn(R,y),N);const C={prefix:a,disableCssColorScheme:i,shouldSkipGeneratingVar:o,getSelector:O9(N)},{vars:T,generateThemeVars:E,generateStyleSheets:P}=zM(N,C);return N.vars=T,Object.entries(N.colorSchemes[N.defaultColorScheme]).forEach(([R,y])=>{N[R]=y}),N.generateThemeVars=E,N.generateStyleSheets=P,N.generateSpacing=function(){return u5(d.spacing,fh(this))},N.getColorSchemeSelector=UM(l),N.spacing=N.generateSpacing(),N.shouldSkipGeneratingVar=o,N.unstable_sxConfig={...ac,...d==null?void 0:d.unstable_sxConfig},N.unstable_sx=function(y){return ea({sx:y,theme:this})},N.toRuntimeSource=j5,N}function Dy(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...n!==!0&&n,palette:Yg({...n===!0?{}:n.palette,mode:t})})}function C5(e={},...t){const{palette:n,cssVariables:s=!1,colorSchemes:i=n?void 0:{light:!0},defaultColorScheme:a=n==null?void 0:n.mode,...o}=e,l=a||"light",c=i==null?void 0:i[l],d={...i,...n?{[l]:{...typeof c!="boolean"&&c,palette:n}}:void 0};if(s===!1){if(!("colorSchemes"in e))return mp(e,...t);let u=n;"palette"in e||d[l]&&(d[l]!==!0?u=d[l].palette:l==="dark"&&(u={mode:"dark"}));const m=mp({...e,palette:u},...t);return m.defaultColorScheme=l,m.colorSchemes=d,m.palette.mode==="light"&&(m.colorSchemes.light={...d.light!==!0&&d.light,palette:m.palette},Dy(m,"dark",d.dark)),m.palette.mode==="dark"&&(m.colorSchemes.dark={...d.dark!==!0&&d.dark,palette:m.palette},Dy(m,"light",d.light)),m}return!n&&!("light"in d)&&l==="light"&&(d.light=!0),z9({...o,colorSchemes:d,defaultColorScheme:l,...typeof s!="boolean"&&s},...t)}const Qg=C5();function kh(){const e=lc(Qg);return e[zu]||e}function S5(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const wr=e=>S5(e)&&e!=="classes",Le=p5({themeId:zu,defaultTheme:Qg,rootShouldForwardProp:wr});function $y(...e){return e.reduce((t,n)=>n==null?t:function(...i){t.apply(this,i),n.apply(this,i)},()=>{})}function U9(e){return r.jsx(pM,{...e,defaultTheme:Qg,themeId:zu})}function V9(e){return function(n){return r.jsx(U9,{styles:typeof e=="function"?s=>e({theme:s,...n}):e})}}function H9(){return vh}const ht=OM;function it(e){return $M(e)}function W9(e){return tt("MuiSvgIcon",e)}st("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const q9=e=>{const{color:t,fontSize:n,classes:s}=e,i={root:["root",t!=="inherit"&&`color${Te(t)}`,`fontSize${Te(n)}`]};return nt(i,W9,s)},K9=Le("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${Te(n.color)}`],t[`fontSize${Te(n.fontSize)}`]]}})(ht(({theme:e})=>{var t,n,s,i,a,o,l,c,d,u,m,f,p,x;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(i=(t=e.transitions)==null?void 0:t.create)==null?void 0:i.call(t,"fill",{duration:(s=(n=(e.vars??e).transitions)==null?void 0:n.duration)==null?void 0:s.shorter}),variants:[{props:g=>!g.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((o=(a=e.typography)==null?void 0:a.pxToRem)==null?void 0:o.call(a,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((c=(l=e.typography)==null?void 0:l.pxToRem)==null?void 0:c.call(l,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((u=(d=e.typography)==null?void 0:d.pxToRem)==null?void 0:u.call(d,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,g])=>g&&g.main).map(([g])=>{var b,w;return{props:{color:g},style:{color:(w=(b=(e.vars??e).palette)==null?void 0:b[g])==null?void 0:w.main}}}),{props:{color:"action"},style:{color:(f=(m=(e.vars??e).palette)==null?void 0:m.action)==null?void 0:f.active}},{props:{color:"disabled"},style:{color:(x=(p=(e.vars??e).palette)==null?void 0:p.action)==null?void 0:x.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),pp=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiSvgIcon"}),{children:i,className:a,color:o="inherit",component:l="svg",fontSize:c="medium",htmlColor:d,inheritViewBox:u=!1,titleAccess:m,viewBox:f="0 0 24 24",...p}=s,x=h.isValidElement(i)&&i.type==="svg",g={...s,color:o,component:l,fontSize:c,instanceFontSize:t.fontSize,inheritViewBox:u,viewBox:f,hasSvgAsChild:x},b={};u||(b.viewBox=f);const w=q9(g);return r.jsxs(K9,{as:l,className:_e(w.root,a),focusable:"false",color:d,"aria-hidden":m?void 0:!0,role:m?"img":void 0,ref:n,...b,...p,...x&&i.props,ownerState:g,children:[x?i.props.children:i,m?r.jsx("title",{children:m}):null]})});pp.muiName="SvgIcon";function Rt(e,t){function n(s,i){return r.jsx(pp,{"data-testid":void 0,ref:i,...s,children:e})}return n.muiName=pp.muiName,h.memo(h.forwardRef(n))}function E5(e,t=166){let n;function s(...i){const a=()=>{e.apply(this,i)};clearTimeout(n),n=setTimeout(a,t)}return s.clear=()=>{clearTimeout(n)},s}function Ar(e){return e&&e.ownerDocument||document}function js(e){return Ar(e).defaultView||window}function Oy(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let By=0;function G9(e){const[t,n]=h.useState(e),s=e||t;return h.useEffect(()=>{t==null&&(By+=1,n(`mui-${By}`))},[t]),s}const X9={...kf},_y=X9.useId;function Nh(e){if(_y!==void 0){const t=_y();return e??t}return G9(e)}function Fy(e){const{controlled:t,default:n,name:s,state:i="value"}=e,{current:a}=h.useRef(t!==void 0),[o,l]=h.useState(n),c=a?t:o,d=h.useCallback(u=>{a||l(u)},[]);return[c,d]}function Hi(e){const t=h.useRef(e);return ni(()=>{t.current=e}),h.useRef((...n)=>(0,t.current)(...n)).current}function Cn(...e){const t=h.useRef(void 0),n=h.useCallback(s=>{const i=e.map(a=>{if(a==null)return null;if(typeof a=="function"){const o=a,l=o(s);return typeof l=="function"?l:()=>{o(null)}}return a.current=s,()=>{a.current=null}});return()=>{i.forEach(a=>a==null?void 0:a())}},e);return h.useMemo(()=>e.every(s=>s==null)?null:s=>{t.current&&(t.current(),t.current=void 0),s!=null&&(t.current=n(s))},e)}function Y9(e,t){const n=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&n>=65&&n<=90&&typeof t=="function"}function Q9(e,t){if(!e)return t;function n(o,l){const c={};return Object.keys(l).forEach(d=>{Y9(d,l[d])&&typeof o[d]=="function"&&(c[d]=(...u)=>{o[d](...u),l[d](...u)})}),c}if(typeof e=="function"||typeof t=="function")return o=>{const l=typeof t=="function"?t(o):t,c=typeof e=="function"?e({...o,...l}):e,d=_e(o==null?void 0:o.className,l==null?void 0:l.className,c==null?void 0:c.className),u=n(c,l);return{...l,...c,...u,...!!d&&{className:d},...(l==null?void 0:l.style)&&(c==null?void 0:c.style)&&{style:{...l.style,...c.style}},...(l==null?void 0:l.sx)&&(c==null?void 0:c.sx)&&{sx:[...Array.isArray(l.sx)?l.sx:[l.sx],...Array.isArray(c.sx)?c.sx:[c.sx]]}}};const s=t,i=n(e,s),a=_e(s==null?void 0:s.className,e==null?void 0:e.className);return{...t,...e,...i,...!!a&&{className:a},...(s==null?void 0:s.style)&&(e==null?void 0:e.style)&&{style:{...s.style,...e.style}},...(s==null?void 0:s.sx)&&(e==null?void 0:e.sx)&&{sx:[...Array.isArray(s.sx)?s.sx:[s.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}function T5(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function gp(e,t){return gp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},gp(e,t)}function I5(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,gp(e,t)}const zy={disabled:!1},Jd=Fe.createContext(null);var J9=function(t){return t.scrollTop},Uo="unmounted",ji="exited",ki="entering",Sa="entered",xp="exiting",ts=function(e){I5(t,e);function t(s,i){var a;a=e.call(this,s,i)||this;var o=i,l=o&&!o.isMounting?s.enter:s.appear,c;return a.appearStatus=null,s.in?l?(c=ji,a.appearStatus=ki):c=Sa:s.unmountOnExit||s.mountOnEnter?c=Uo:c=ji,a.state={status:c},a.nextCallback=null,a}t.getDerivedStateFromProps=function(i,a){var o=i.in;return o&&a.status===Uo?{status:ji}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var a=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==ki&&o!==Sa&&(a=ki):(o===ki||o===Sa)&&(a=xp)}this.updateStatus(!1,a)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,a,o,l;return a=o=l=i,i!=null&&typeof i!="number"&&(a=i.exit,o=i.enter,l=i.appear!==void 0?i.appear:o),{exit:a,enter:o,appear:l}},n.updateStatus=function(i,a){if(i===void 0&&(i=!1),a!==null)if(this.cancelNextCallback(),a===ki){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:kc.findDOMNode(this);o&&J9(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ji&&this.setState({status:Uo})},n.performEnter=function(i){var a=this,o=this.props.enter,l=this.context?this.context.isMounting:i,c=this.props.nodeRef?[l]:[kc.findDOMNode(this),l],d=c[0],u=c[1],m=this.getTimeouts(),f=l?m.appear:m.enter;if(!i&&!o||zy.disabled){this.safeSetState({status:Sa},function(){a.props.onEntered(d)});return}this.props.onEnter(d,u),this.safeSetState({status:ki},function(){a.props.onEntering(d,u),a.onTransitionEnd(f,function(){a.safeSetState({status:Sa},function(){a.props.onEntered(d,u)})})})},n.performExit=function(){var i=this,a=this.props.exit,o=this.getTimeouts(),l=this.props.nodeRef?void 0:kc.findDOMNode(this);if(!a||zy.disabled){this.safeSetState({status:ji},function(){i.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:xp},function(){i.props.onExiting(l),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:ji},function(){i.props.onExited(l)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,a){a=this.setNextCallback(a),this.setState(i,a)},n.setNextCallback=function(i){var a=this,o=!0;return this.nextCallback=function(l){o&&(o=!1,a.nextCallback=null,i(l))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,a){this.setNextCallback(a);var o=this.props.nodeRef?this.props.nodeRef.current:kc.findDOMNode(this),l=i==null&&!this.props.addEndListener;if(!o||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],d=c[0],u=c[1];this.props.addEndListener(d,u)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===Uo)return null;var a=this.props,o=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var l=T5(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Fe.createElement(Jd.Provider,{value:null},typeof o=="function"?o(i,l):Fe.cloneElement(Fe.Children.only(o),l))},t}(Fe.Component);ts.contextType=Jd;ts.propTypes={};function wa(){}ts.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:wa,onEntering:wa,onEntered:wa,onExit:wa,onExiting:wa,onExited:wa};ts.UNMOUNTED=Uo;ts.EXITED=ji;ts.ENTERING=ki;ts.ENTERED=Sa;ts.EXITING=xp;function Z9(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jg(e,t){var n=function(a){return t&&h.isValidElement(a)?t(a):a},s=Object.create(null);return e&&h.Children.map(e,function(i){return i}).forEach(function(i){s[i.key]=n(i)}),s}function eD(e,t){e=e||{},t=t||{};function n(u){return u in t?t[u]:e[u]}var s=Object.create(null),i=[];for(var a in e)a in t?i.length&&(s[a]=i,i=[]):i.push(a);var o,l={};for(var c in t){if(s[c])for(o=0;o<s[c].length;o++){var d=s[c][o];l[s[c][o]]=n(d)}l[c]=n(c)}for(o=0;o<i.length;o++)l[i[o]]=n(i[o]);return l}function Ri(e,t,n){return n[t]!=null?n[t]:e.props[t]}function tD(e,t){return Jg(e.children,function(n){return h.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Ri(n,"appear",e),enter:Ri(n,"enter",e),exit:Ri(n,"exit",e)})})}function nD(e,t,n){var s=Jg(e.children),i=eD(t,s);return Object.keys(i).forEach(function(a){var o=i[a];if(h.isValidElement(o)){var l=a in t,c=a in s,d=t[a],u=h.isValidElement(d)&&!d.props.in;c&&(!l||u)?i[a]=h.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:Ri(o,"exit",e),enter:Ri(o,"enter",e)}):!c&&l&&!u?i[a]=h.cloneElement(o,{in:!1}):c&&l&&h.isValidElement(d)&&(i[a]=h.cloneElement(o,{onExited:n.bind(null,o),in:d.props.in,exit:Ri(o,"exit",e),enter:Ri(o,"enter",e)}))}}),i}var rD=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},sD={component:"div",childFactory:function(t){return t}},Zg=function(e){I5(t,e);function t(s,i){var a;a=e.call(this,s,i)||this;var o=a.handleExited.bind(Z9(a));return a.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},a}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,a){var o=a.children,l=a.handleExited,c=a.firstRender;return{children:c?tD(i,l):nD(i,o,l),firstRender:!1}},n.handleExited=function(i,a){var o=Jg(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(a),this.mounted&&this.setState(function(l){var c=Gd({},l.children);return delete c[i.key],{children:c}}))},n.render=function(){var i=this.props,a=i.component,o=i.childFactory,l=T5(i,["component","childFactory"]),c=this.state.contextValue,d=rD(this.state.children).map(o);return delete l.appear,delete l.enter,delete l.exit,a===null?Fe.createElement(Jd.Provider,{value:c},d):Fe.createElement(Jd.Provider,{value:c},Fe.createElement(a,l,d))},t}(Fe.Component);Zg.propTypes={};Zg.defaultProps=sD;const Uy={};function P5(e,t){const n=h.useRef(Uy);return n.current===Uy&&(n.current=e(t)),n}const iD=[];function aD(e){h.useEffect(e,iD)}class e0{constructor(){ui(this,"currentId",null);ui(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});ui(this,"disposeEffect",()=>this.clear)}static create(){return new e0}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}}function A5(){const e=P5(e0.create).current;return aD(e.disposeEffect),e}const R5=e=>e.scrollTop;function Zd(e,t){const{timeout:n,easing:s,style:i={}}=e;return{duration:i.transitionDuration??(typeof n=="number"?n:n[t.mode]||0),easing:i.transitionTimingFunction??(typeof s=="object"?s[t.mode]:s),delay:i.transitionDelay}}function oD(e){return tt("MuiPaper",e)}st("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const lD=e=>{const{square:t,elevation:n,variant:s,classes:i}=e,a={root:["root",s,!t&&"rounded",s==="elevation"&&`elevation${n}`]};return nt(a,oD,i)},cD=Le("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(ht(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),jn=h.forwardRef(function(t,n){var p;const s=it({props:t,name:"MuiPaper"}),i=kh(),{className:a,component:o="div",elevation:l=1,square:c=!1,variant:d="elevation",...u}=s,m={...s,component:o,elevation:l,square:c,variant:d},f=lD(m);return r.jsx(cD,{as:o,ownerState:m,className:_e(f.root,a),ref:n,...u,style:{...d==="elevation"&&{"--Paper-shadow":(i.vars||i).shadows[l],...i.vars&&{"--Paper-overlay":(p=i.vars.overlays)==null?void 0:p[l]},...!i.vars&&i.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${It("#fff",fp(l))}, ${It("#fff",fp(l))})`}},...u.style}})});function dD(e){return typeof e=="string"}function L5(e,t,n){return e===void 0||dD(e)?t:{...t,ownerState:{...t.ownerState,...n}}}function M5(e,t,n){return typeof e=="function"?e(t,n):e}function D5(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(s=>s.match(/^on[A-Z]/)&&typeof e[s]=="function"&&!t.includes(s)).forEach(s=>{n[s]=e[s]}),n}function Vy(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function $5(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:s,externalForwardedProps:i,className:a}=e;if(!t){const p=_e(n==null?void 0:n.className,a,i==null?void 0:i.className,s==null?void 0:s.className),x={...n==null?void 0:n.style,...i==null?void 0:i.style,...s==null?void 0:s.style},g={...n,...i,...s};return p.length>0&&(g.className=p),Object.keys(x).length>0&&(g.style=x),{props:g,internalRef:void 0}}const o=D5({...i,...s}),l=Vy(s),c=Vy(i),d=t(o),u=_e(d==null?void 0:d.className,n==null?void 0:n.className,a,i==null?void 0:i.className,s==null?void 0:s.className),m={...d==null?void 0:d.style,...n==null?void 0:n.style,...i==null?void 0:i.style,...s==null?void 0:s.style},f={...d,...n,...c,...l};return u.length>0&&(f.className=u),Object.keys(m).length>0&&(f.style=m),{props:f,internalRef:d.ref}}function $t(e,t){const{className:n,elementType:s,ownerState:i,externalForwardedProps:a,internalForwardedProps:o,shouldForwardComponentProp:l=!1,...c}=t,{component:d,slots:u={[e]:void 0},slotProps:m={[e]:void 0},...f}=a,p=u[e]||s,x=M5(m[e],i),{props:{component:g,...b},internalRef:w}=$5({className:n,...c,externalForwardedProps:e==="root"?f:void 0,externalSlotProps:x}),k=Cn(w,x==null?void 0:x.ref,t.ref),v=e==="root"?g||d:g,N=L5(p,{...e==="root"&&!d&&!u[e]&&o,...e!=="root"&&!u[e]&&o,...b,...v&&!l&&{as:v},...v&&l&&{component:v},ref:k},i);return[p,N]}function Hy(e){try{return e.matches(":focus-visible")}catch{}return!1}class eu{constructor(){ui(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new eu}static use(){const t=P5(eu.create).current,[n,s]=h.useState(!1);return t.shouldMount=n,t.setShouldMount=s,h.useEffect(t.mountEffect,[n]),t}mount(){return this.mounted||(this.mounted=hD(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.start(...t)})}stop(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.stop(...t)})}pulsate(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.pulsate(...t)})}}function uD(){return eu.use()}function hD(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});return n.resolve=e,n.reject=t,n}function mD(e){const{className:t,classes:n,pulsate:s=!1,rippleX:i,rippleY:a,rippleSize:o,in:l,onExited:c,timeout:d}=e,[u,m]=h.useState(!1),f=_e(t,n.ripple,n.rippleVisible,s&&n.ripplePulsate),p={width:o,height:o,top:-(o/2)+a,left:-(o/2)+i},x=_e(n.child,u&&n.childLeaving,s&&n.childPulsate);return!l&&!u&&m(!0),h.useEffect(()=>{if(!l&&c!=null){const g=setTimeout(c,d);return()=>{clearTimeout(g)}}},[c,l,d]),r.jsx("span",{className:f,style:p,children:r.jsx("span",{className:x})})}const fr=st("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),yp=550,fD=80,pD=oi`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,gD=oi`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,xD=oi`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,yD=Le("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),bD=Le(mD,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${fr.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${pD};
    animation-duration: ${yp}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${fr.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${fr.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${fr.childLeaving} {
    opacity: 0;
    animation-name: ${gD};
    animation-duration: ${yp}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${fr.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${xD};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,vD=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiTouchRipple"}),{center:i=!1,classes:a={},className:o,...l}=s,[c,d]=h.useState([]),u=h.useRef(0),m=h.useRef(null);h.useEffect(()=>{m.current&&(m.current(),m.current=null)},[c]);const f=h.useRef(!1),p=A5(),x=h.useRef(null),g=h.useRef(null),b=h.useCallback(N=>{const{pulsate:C,rippleX:T,rippleY:E,rippleSize:P,cb:R}=N;d(y=>[...y,r.jsx(bD,{classes:{ripple:_e(a.ripple,fr.ripple),rippleVisible:_e(a.rippleVisible,fr.rippleVisible),ripplePulsate:_e(a.ripplePulsate,fr.ripplePulsate),child:_e(a.child,fr.child),childLeaving:_e(a.childLeaving,fr.childLeaving),childPulsate:_e(a.childPulsate,fr.childPulsate)},timeout:yp,pulsate:C,rippleX:T,rippleY:E,rippleSize:P},u.current)]),u.current+=1,m.current=R},[a]),w=h.useCallback((N={},C={},T=()=>{})=>{const{pulsate:E=!1,center:P=i||C.pulsate,fakeElement:R=!1}=C;if((N==null?void 0:N.type)==="mousedown"&&f.current){f.current=!1;return}(N==null?void 0:N.type)==="touchstart"&&(f.current=!0);const y=R?null:g.current,O=y?y.getBoundingClientRect():{width:0,height:0,left:0,top:0};let _,L,A;if(P||N===void 0||N.clientX===0&&N.clientY===0||!N.clientX&&!N.touches)_=Math.round(O.width/2),L=Math.round(O.height/2);else{const{clientX:M,clientY:z}=N.touches&&N.touches.length>0?N.touches[0]:N;_=Math.round(M-O.left),L=Math.round(z-O.top)}if(P)A=Math.sqrt((2*O.width**2+O.height**2)/3),A%2===0&&(A+=1);else{const M=Math.max(Math.abs((y?y.clientWidth:0)-_),_)*2+2,z=Math.max(Math.abs((y?y.clientHeight:0)-L),L)*2+2;A=Math.sqrt(M**2+z**2)}N!=null&&N.touches?x.current===null&&(x.current=()=>{b({pulsate:E,rippleX:_,rippleY:L,rippleSize:A,cb:T})},p.start(fD,()=>{x.current&&(x.current(),x.current=null)})):b({pulsate:E,rippleX:_,rippleY:L,rippleSize:A,cb:T})},[i,b,p]),k=h.useCallback(()=>{w({},{pulsate:!0})},[w]),v=h.useCallback((N,C)=>{if(p.clear(),(N==null?void 0:N.type)==="touchend"&&x.current){x.current(),x.current=null,p.start(0,()=>{v(N,C)});return}x.current=null,d(T=>T.length>0?T.slice(1):T),m.current=C},[p]);return h.useImperativeHandle(n,()=>({pulsate:k,start:w,stop:v}),[k,w,v]),r.jsx(yD,{className:_e(fr.root,a.root,o),ref:g,...l,children:r.jsx(Zg,{component:null,exit:!0,children:c})})});function wD(e){return tt("MuiButtonBase",e)}const jD=st("MuiButtonBase",["root","disabled","focusVisible"]),kD=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:s,classes:i}=e,o=nt({root:["root",t&&"disabled",n&&"focusVisible"]},wD,i);return n&&s&&(o.root+=` ${s}`),o},ND=Le("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${jD.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Al=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiButtonBase"}),{action:i,centerRipple:a=!1,children:o,className:l,component:c="button",disabled:d=!1,disableRipple:u=!1,disableTouchRipple:m=!1,focusRipple:f=!1,focusVisibleClassName:p,LinkComponent:x="a",onBlur:g,onClick:b,onContextMenu:w,onDragLeave:k,onFocus:v,onFocusVisible:N,onKeyDown:C,onKeyUp:T,onMouseDown:E,onMouseLeave:P,onMouseUp:R,onTouchEnd:y,onTouchMove:O,onTouchStart:_,tabIndex:L=0,TouchRippleProps:A,touchRippleRef:M,type:z,...ie}=s,X=h.useRef(null),te=uD(),B=Cn(te.ref,M),[H,K]=h.useState(!1);d&&H&&K(!1),h.useImperativeHandle(i,()=>({focusVisible:()=>{K(!0),X.current.focus()}}),[]);const $=te.shouldMount&&!u&&!d;h.useEffect(()=>{H&&f&&!u&&te.pulsate()},[u,f,H,te]);const me=is(te,"start",E,m),ke=is(te,"stop",w,m),ye=is(te,"stop",k,m),se=is(te,"stop",R,m),G=is(te,"stop",Pe=>{H&&Pe.preventDefault(),P&&P(Pe)},m),W=is(te,"start",_,m),Z=is(te,"stop",y,m),Y=is(te,"stop",O,m),ee=is(te,"stop",Pe=>{Hy(Pe.target)||K(!1),g&&g(Pe)},!1),ae=Hi(Pe=>{X.current||(X.current=Pe.currentTarget),Hy(Pe.target)&&(K(!0),N&&N(Pe)),v&&v(Pe)}),de=()=>{const Pe=X.current;return c&&c!=="button"&&!(Pe.tagName==="A"&&Pe.href)},Re=Hi(Pe=>{f&&!Pe.repeat&&H&&Pe.key===" "&&te.stop(Pe,()=>{te.start(Pe)}),Pe.target===Pe.currentTarget&&de()&&Pe.key===" "&&Pe.preventDefault(),C&&C(Pe),Pe.target===Pe.currentTarget&&de()&&Pe.key==="Enter"&&!d&&(Pe.preventDefault(),b&&b(Pe))}),Be=Hi(Pe=>{f&&Pe.key===" "&&H&&!Pe.defaultPrevented&&te.stop(Pe,()=>{te.pulsate(Pe)}),T&&T(Pe),b&&Pe.target===Pe.currentTarget&&de()&&Pe.key===" "&&!Pe.defaultPrevented&&b(Pe)});let Ge=c;Ge==="button"&&(ie.href||ie.to)&&(Ge=x);const et={};Ge==="button"?(et.type=z===void 0?"button":z,et.disabled=d):(!ie.href&&!ie.to&&(et.role="button"),d&&(et["aria-disabled"]=d));const lt=Cn(n,X),Xe={...s,centerRipple:a,component:c,disabled:d,disableRipple:u,disableTouchRipple:m,focusRipple:f,tabIndex:L,focusVisible:H},He=kD(Xe);return r.jsxs(ND,{as:Ge,className:_e(He.root,l),ownerState:Xe,onBlur:ee,onClick:b,onContextMenu:ke,onFocus:ae,onKeyDown:Re,onKeyUp:Be,onMouseDown:me,onMouseLeave:G,onMouseUp:se,onDragLeave:ye,onTouchEnd:Z,onTouchMove:Y,onTouchStart:W,ref:lt,tabIndex:d?-1:L,type:z,...et,...ie,children:[o,$?r.jsx(vD,{ref:B,center:a,...A}):null]})});function is(e,t,n,s=!1){return Hi(i=>(n&&n(i),s||e[t](i),!0))}function CD(e){return typeof e.main=="string"}function SD(e,t=[]){if(!CD(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||typeof e[n]!="string")return!1;return!0}function an(e=[]){return([,t])=>t&&SD(t,e)}function ED(e){return tt("MuiAlert",e)}const Wy=st("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function TD(e){return tt("MuiCircularProgress",e)}st("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Is=44,bp=oi`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,vp=oi`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,ID=typeof bp!="string"?po`
        animation: ${bp} 1.4s linear infinite;
      `:null,PD=typeof vp!="string"?po`
        animation: ${vp} 1.4s ease-in-out infinite;
      `:null,AD=e=>{const{classes:t,variant:n,color:s,disableShrink:i}=e,a={root:["root",n,`color${Te(s)}`],svg:["svg"],circle:["circle",`circle${Te(n)}`,i&&"circleDisableShrink"]};return nt(a,TD,t)},RD=Le("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${Te(n.color)}`]]}})(ht(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:ID||{animation:`${bp} 1.4s linear infinite`}},...Object.entries(e.palette).filter(an()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),LD=Le("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),MD=Le("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${Te(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(ht(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:PD||{animation:`${vp} 1.4s ease-in-out infinite`}}]}))),Rn=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiCircularProgress"}),{className:i,color:a="primary",disableShrink:o=!1,size:l=40,style:c,thickness:d=3.6,value:u=0,variant:m="indeterminate",...f}=s,p={...s,color:a,disableShrink:o,size:l,thickness:d,value:u,variant:m},x=AD(p),g={},b={},w={};if(m==="determinate"){const k=2*Math.PI*((Is-d)/2);g.strokeDasharray=k.toFixed(3),w["aria-valuenow"]=Math.round(u),g.strokeDashoffset=`${((100-u)/100*k).toFixed(3)}px`,b.transform="rotate(-90deg)"}return r.jsx(RD,{className:_e(x.root,i),style:{width:l,height:l,...b,...c},ownerState:p,ref:n,role:"progressbar",...w,...f,children:r.jsx(LD,{className:x.svg,ownerState:p,viewBox:`${Is/2} ${Is/2} ${Is} ${Is}`,children:r.jsx(MD,{className:x.circle,style:g,ownerState:p,cx:Is,cy:Is,r:(Is-d)/2,fill:"none",strokeWidth:d})})})});function DD(e){return tt("MuiIconButton",e)}const qy=st("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),$D=e=>{const{classes:t,disabled:n,color:s,edge:i,size:a,loading:o}=e,l={root:["root",o&&"loading",n&&"disabled",s!=="default"&&`color${Te(s)}`,i&&`edge${Te(i)}`,`size${Te(a)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return nt(l,DD,t)},OD=Le(Al,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.loading&&t.loading,n.color!=="default"&&t[`color${Te(n.color)}`],n.edge&&t[`edge${Te(n.edge)}`],t[`size${Te(n.size)}`]]}})(ht(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:It(e.palette.action.active,e.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),ht(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(an()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(an()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.vars?`rgba(${(e.vars||e).palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:It((e.vars||e).palette[t].main,e.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${qy.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${qy.loading}`]:{color:"transparent"}}))),BD=Le("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),O5=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiIconButton"}),{edge:i=!1,children:a,className:o,color:l="default",disabled:c=!1,disableFocusRipple:d=!1,size:u="medium",id:m,loading:f=null,loadingIndicator:p,...x}=s,g=Nh(m),b=p??r.jsx(Rn,{"aria-labelledby":g,color:"inherit",size:16}),w={...s,edge:i,color:l,disabled:c,disableFocusRipple:d,loading:f,loadingIndicator:b,size:u},k=$D(w);return r.jsxs(OD,{id:f?g:m,className:_e(k.root,o),centerRipple:!0,focusRipple:!d,disabled:c||f,ref:n,...x,ownerState:w,children:[typeof f=="boolean"&&r.jsx("span",{className:k.loadingWrapper,style:{display:"contents"},children:r.jsx(BD,{className:k.loadingIndicator,ownerState:w,children:f&&b})}),a]})}),_D=Rt(r.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),FD=Rt(r.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),zD=Rt(r.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),UD=Rt(r.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),VD=Rt(r.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),HD=e=>{const{variant:t,color:n,severity:s,classes:i}=e,a={root:["root",`color${Te(n||s)}`,`${t}${Te(n||s)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return nt(a,ED,i)},WD=Le(jn,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${Te(n.color||n.severity)}`]]}})(ht(({theme:e})=>{const t=e.palette.mode==="light"?ta:na,n=e.palette.mode==="light"?na:ta;return{...e.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(an(["light"])).map(([s])=>({props:{colorSeverity:s,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${s}Color`]:t(e.palette[s].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${s}StandardBg`]:n(e.palette[s].light,.9),[`& .${Wy.icon}`]:e.vars?{color:e.vars.palette.Alert[`${s}IconColor`]}:{color:e.palette[s].main}}})),...Object.entries(e.palette).filter(an(["light"])).map(([s])=>({props:{colorSeverity:s,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${s}Color`]:t(e.palette[s].light,.6),border:`1px solid ${(e.vars||e).palette[s].light}`,[`& .${Wy.icon}`]:e.vars?{color:e.vars.palette.Alert[`${s}IconColor`]}:{color:e.palette[s].main}}})),...Object.entries(e.palette).filter(an(["dark"])).map(([s])=>({props:{colorSeverity:s,variant:"filled"},style:{fontWeight:e.typography.fontWeightMedium,...e.vars?{color:e.vars.palette.Alert[`${s}FilledColor`],backgroundColor:e.vars.palette.Alert[`${s}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[s].dark:e.palette[s].main,color:e.palette.getContrastText(e.palette[s].main)}}}))]}})),qD=Le("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),KD=Le("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),GD=Le("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),Ky={success:r.jsx(_D,{fontSize:"inherit"}),warning:r.jsx(FD,{fontSize:"inherit"}),error:r.jsx(zD,{fontSize:"inherit"}),info:r.jsx(UD,{fontSize:"inherit"})},Pn=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiAlert"}),{action:i,children:a,className:o,closeText:l="Close",color:c,components:d={},componentsProps:u={},icon:m,iconMapping:f=Ky,onClose:p,role:x="alert",severity:g="success",slotProps:b={},slots:w={},variant:k="standard",...v}=s,N={...s,color:c,severity:g,variant:k,colorSeverity:c||g},C=HD(N),T={slots:{closeButton:d.CloseButton,closeIcon:d.CloseIcon,...w},slotProps:{...u,...b}},[E,P]=$t("root",{ref:n,shouldForwardComponentProp:!0,className:_e(C.root,o),elementType:WD,externalForwardedProps:{...T,...v},ownerState:N,additionalProps:{role:x,elevation:0}}),[R,y]=$t("icon",{className:C.icon,elementType:qD,externalForwardedProps:T,ownerState:N}),[O,_]=$t("message",{className:C.message,elementType:KD,externalForwardedProps:T,ownerState:N}),[L,A]=$t("action",{className:C.action,elementType:GD,externalForwardedProps:T,ownerState:N}),[M,z]=$t("closeButton",{elementType:O5,externalForwardedProps:T,ownerState:N}),[ie,X]=$t("closeIcon",{elementType:VD,externalForwardedProps:T,ownerState:N});return r.jsxs(E,{...P,children:[m!==!1?r.jsx(R,{...y,children:m||f[g]||Ky[g]}):null,r.jsx(O,{..._,children:a}),i!=null?r.jsx(L,{...A,children:i}):null,i==null&&p?r.jsx(L,{...A,children:r.jsx(M,{size:"small","aria-label":l,title:l,color:"inherit",onClick:p,...z,children:r.jsx(ie,{fontSize:"small",...X})})}):null]})});function XD(e){return tt("MuiTypography",e)}const Gy=st("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),YD={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},QD=H9(),JD=e=>{const{align:t,gutterBottom:n,noWrap:s,paragraph:i,variant:a,classes:o}=e,l={root:["root",a,e.align!=="inherit"&&`align${Te(t)}`,n&&"gutterBottom",s&&"noWrap",i&&"paragraph"]};return nt(l,XD,o)},ZD=Le("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${Te(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(ht(({theme:e})=>{var t;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([n,s])=>n!=="inherit"&&s&&typeof s=="object").map(([n,s])=>({props:{variant:n},style:s})),...Object.entries(e.palette).filter(an()).map(([n])=>({props:{color:n},style:{color:(e.vars||e).palette[n].main}})),...Object.entries(((t=e.palette)==null?void 0:t.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${Te(n)}`},style:{color:(e.vars||e).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),Xy={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},je=h.forwardRef(function(t,n){const{color:s,...i}=it({props:t,name:"MuiTypography"}),a=!YD[s],o=QD({...i,...a&&{color:s}}),{align:l="inherit",className:c,component:d,gutterBottom:u=!1,noWrap:m=!1,paragraph:f=!1,variant:p="body1",variantMapping:x=Xy,...g}=o,b={...o,align:l,color:s,className:c,component:d,gutterBottom:u,noWrap:m,paragraph:f,variant:p,variantMapping:x},w=d||(f?"p":x[p]||Xy[p])||"span",k=JD(b);return r.jsx(ZD,{as:w,ref:n,className:_e(k.root,c),...g,ownerState:b,style:{...l!=="inherit"&&{"--Typography-textAlign":l},...g.style}})});function e$(e){return tt("MuiAlertTitle",e)}st("MuiAlertTitle",["root"]);const t$=e=>{const{classes:t}=e;return nt({root:["root"]},e$,t)},n$=Le(je,{name:"MuiAlertTitle",slot:"Root"})(ht(({theme:e})=>({fontWeight:e.typography.fontWeightMedium,marginTop:-2}))),ls=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiAlertTitle"}),{className:i,...a}=s,o=s,l=t$(o);return r.jsx(n$,{gutterBottom:!0,component:"div",ownerState:o,ref:n,className:_e(l.root,i),...a})});function r$(e){var m;const{elementType:t,externalSlotProps:n,ownerState:s,skipResolvingSlotProps:i=!1,...a}=e,o=i?{}:M5(n,s),{props:l,internalRef:c}=$5({...a,externalSlotProps:o}),d=Cn(c,o==null?void 0:o.ref,(m=e.additionalProps)==null?void 0:m.ref);return L5(t,{...l,ref:d},s)}function cc(e){var t;return parseInt(h.version,10)>=19?((t=e==null?void 0:e.props)==null?void 0:t.ref)||null:(e==null?void 0:e.ref)||null}function s$(e){return typeof e=="function"?e():e}const i$=h.forwardRef(function(t,n){const{children:s,container:i,disablePortal:a=!1}=t,[o,l]=h.useState(null),c=Cn(h.isValidElement(s)?cc(s):null,n);if(ni(()=>{a||l(s$(i)||document.body)},[i,a]),ni(()=>{if(o&&!a)return Oy(n,o),()=>{Oy(n,null)}},[n,o,a]),a){if(h.isValidElement(s)){const d={ref:c};return h.cloneElement(s,d)}return s}return o&&Rw.createPortal(s,o)}),a$=Rt(r.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function o$(e){return tt("MuiChip",e)}const ct=st("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),l$=e=>{const{classes:t,disabled:n,size:s,color:i,iconColor:a,onDelete:o,clickable:l,variant:c}=e,d={root:["root",c,n&&"disabled",`size${Te(s)}`,`color${Te(i)}`,l&&"clickable",l&&`clickableColor${Te(i)}`,o&&"deletable",o&&`deletableColor${Te(i)}`,`${c}${Te(i)}`],label:["label",`label${Te(s)}`],avatar:["avatar",`avatar${Te(s)}`,`avatarColor${Te(i)}`],icon:["icon",`icon${Te(s)}`,`iconColor${Te(a)}`],deleteIcon:["deleteIcon",`deleteIcon${Te(s)}`,`deleteIconColor${Te(i)}`,`deleteIcon${Te(c)}Color${Te(i)}`]};return nt(d,o$,t)},c$=Le("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:s,iconColor:i,clickable:a,onDelete:o,size:l,variant:c}=n;return[{[`& .${ct.avatar}`]:t.avatar},{[`& .${ct.avatar}`]:t[`avatar${Te(l)}`]},{[`& .${ct.avatar}`]:t[`avatarColor${Te(s)}`]},{[`& .${ct.icon}`]:t.icon},{[`& .${ct.icon}`]:t[`icon${Te(l)}`]},{[`& .${ct.icon}`]:t[`iconColor${Te(i)}`]},{[`& .${ct.deleteIcon}`]:t.deleteIcon},{[`& .${ct.deleteIcon}`]:t[`deleteIcon${Te(l)}`]},{[`& .${ct.deleteIcon}`]:t[`deleteIconColor${Te(s)}`]},{[`& .${ct.deleteIcon}`]:t[`deleteIcon${Te(c)}Color${Te(s)}`]},t.root,t[`size${Te(l)}`],t[`color${Te(s)}`],a&&t.clickable,a&&s!=="default"&&t[`clickableColor${Te(s)})`],o&&t.deletable,o&&s!=="default"&&t[`deletableColor${Te(s)}`],t[c],t[`${c}${Te(s)}`]]}})(ht(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return{maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${ct.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${ct.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:t,fontSize:e.typography.pxToRem(12)},[`& .${ct.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${ct.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${ct.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${ct.icon}`]:{marginLeft:5,marginRight:-6},[`& .${ct.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:It(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:It(e.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${ct.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${ct.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(e.palette).filter(an(["contrastText"])).map(([n])=>({props:{color:n},style:{backgroundColor:(e.vars||e).palette[n].main,color:(e.vars||e).palette[n].contrastText,[`& .${ct.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[n].contrastTextChannel} / 0.7)`:It(e.palette[n].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[n].contrastText}}}})),{props:n=>n.iconColor===n.color,style:{[`& .${ct.icon}`]:{color:e.vars?e.vars.palette.Chip.defaultIconColor:t}}},{props:n=>n.iconColor===n.color&&n.color!=="default",style:{[`& .${ct.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${ct.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:It(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}},...Object.entries(e.palette).filter(an(["dark"])).map(([n])=>({props:{color:n,onDelete:!0},style:{[`&.${ct.focusVisible}`]:{background:(e.vars||e).palette[n].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:It(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${ct.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:It(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}}},...Object.entries(e.palette).filter(an(["dark"])).map(([n])=>({props:{color:n,clickable:!0},style:{[`&:hover, &.${ct.focusVisible}`]:{backgroundColor:(e.vars||e).palette[n].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${ct.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${ct.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${ct.avatar}`]:{marginLeft:4},[`& .${ct.avatarSmall}`]:{marginLeft:2},[`& .${ct.icon}`]:{marginLeft:4},[`& .${ct.iconSmall}`]:{marginLeft:2},[`& .${ct.deleteIcon}`]:{marginRight:5},[`& .${ct.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(e.palette).filter(an()).map(([n])=>({props:{variant:"outlined",color:n},style:{color:(e.vars||e).palette[n].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[n].mainChannel} / 0.7)`:It(e.palette[n].main,.7)}`,[`&.${ct.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[n].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:It(e.palette[n].main,e.palette.action.hoverOpacity)},[`&.${ct.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[n].mainChannel} / ${e.vars.palette.action.focusOpacity})`:It(e.palette[n].main,e.palette.action.focusOpacity)},[`& .${ct.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[n].mainChannel} / 0.7)`:It(e.palette[n].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[n].main}}}}))]}})),d$=Le("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:s}=n;return[t.label,t[`label${Te(s)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function Yy(e){return e.key==="Backspace"||e.key==="Delete"}const kd=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiChip"}),{avatar:i,className:a,clickable:o,color:l="default",component:c,deleteIcon:d,disabled:u=!1,icon:m,label:f,onClick:p,onDelete:x,onKeyDown:g,onKeyUp:b,size:w="medium",variant:k="filled",tabIndex:v,skipFocusWhenDisabled:N=!1,slots:C={},slotProps:T={},...E}=s,P=h.useRef(null),R=Cn(P,n),y=ye=>{ye.stopPropagation(),x&&x(ye)},O=ye=>{ye.currentTarget===ye.target&&Yy(ye)&&ye.preventDefault(),g&&g(ye)},_=ye=>{ye.currentTarget===ye.target&&x&&Yy(ye)&&x(ye),b&&b(ye)},L=o!==!1&&p?!0:o,A=L||x?Al:c||"div",M={...s,component:A,disabled:u,size:w,color:l,iconColor:h.isValidElement(m)&&m.props.color||l,onDelete:!!x,clickable:L,variant:k},z=l$(M),ie=A===Al?{component:c||"div",focusVisibleClassName:z.focusVisible,...x&&{disableRipple:!0}}:{};let X=null;x&&(X=d&&h.isValidElement(d)?h.cloneElement(d,{className:_e(d.props.className,z.deleteIcon),onClick:y}):r.jsx(a$,{className:z.deleteIcon,onClick:y}));let te=null;i&&h.isValidElement(i)&&(te=h.cloneElement(i,{className:_e(z.avatar,i.props.className)}));let B=null;m&&h.isValidElement(m)&&(B=h.cloneElement(m,{className:_e(z.icon,m.props.className)}));const H={slots:C,slotProps:T},[K,$]=$t("root",{elementType:c$,externalForwardedProps:{...H,...E},ownerState:M,shouldForwardComponentProp:!0,ref:R,className:_e(z.root,a),additionalProps:{disabled:L&&u?!0:void 0,tabIndex:N&&u?-1:v,...ie},getSlotProps:ye=>({...ye,onClick:se=>{var G;(G=ye.onClick)==null||G.call(ye,se),p==null||p(se)},onKeyDown:se=>{var G;(G=ye.onKeyDown)==null||G.call(ye,se),O==null||O(se)},onKeyUp:se=>{var G;(G=ye.onKeyUp)==null||G.call(ye,se),_==null||_(se)}})}),[me,ke]=$t("label",{elementType:d$,externalForwardedProps:H,ownerState:M,className:z.label});return r.jsxs(K,{as:A,...$,children:[te||B,r.jsx(me,{...ke,children:f}),X]})});function Mc(e){return parseInt(e,10)||0}const u$={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function h$(e){for(const t in e)return!1;return!0}function Qy(e){return h$(e)||e.outerHeightStyle===0&&!e.overflowing}const m$=h.forwardRef(function(t,n){const{onChange:s,maxRows:i,minRows:a=1,style:o,value:l,...c}=t,{current:d}=h.useRef(l!=null),u=h.useRef(null),m=Cn(n,u),f=h.useRef(null),p=h.useRef(null),x=h.useCallback(()=>{const v=u.current,N=p.current;if(!v||!N)return;const T=js(v).getComputedStyle(v);if(T.width==="0px")return{outerHeightStyle:0,overflowing:!1};N.style.width=T.width,N.value=v.value||t.placeholder||"x",N.value.slice(-1)===`
`&&(N.value+=" ");const E=T.boxSizing,P=Mc(T.paddingBottom)+Mc(T.paddingTop),R=Mc(T.borderBottomWidth)+Mc(T.borderTopWidth),y=N.scrollHeight;N.value="x";const O=N.scrollHeight;let _=y;a&&(_=Math.max(Number(a)*O,_)),i&&(_=Math.min(Number(i)*O,_)),_=Math.max(_,O);const L=_+(E==="border-box"?P+R:0),A=Math.abs(_-y)<=1;return{outerHeightStyle:L,overflowing:A}},[i,a,t.placeholder]),g=Hi(()=>{const v=u.current,N=x();if(!v||!N||Qy(N))return!1;const C=N.outerHeightStyle;return f.current!=null&&f.current!==C}),b=h.useCallback(()=>{const v=u.current,N=x();if(!v||!N||Qy(N))return;const C=N.outerHeightStyle;f.current!==C&&(f.current=C,v.style.height=`${C}px`),v.style.overflow=N.overflowing?"hidden":""},[x]),w=h.useRef(-1);ni(()=>{const v=E5(b),N=u==null?void 0:u.current;if(!N)return;const C=js(N);C.addEventListener("resize",v);let T;return typeof ResizeObserver<"u"&&(T=new ResizeObserver(()=>{g()&&(T.unobserve(N),cancelAnimationFrame(w.current),b(),w.current=requestAnimationFrame(()=>{T.observe(N)}))}),T.observe(N)),()=>{v.clear(),cancelAnimationFrame(w.current),C.removeEventListener("resize",v),T&&T.disconnect()}},[x,b,g]),ni(()=>{b()});const k=v=>{d||b();const N=v.target,C=N.value.length,T=N.value.endsWith(`
`),E=N.selectionStart===C;T&&E&&N.setSelectionRange(C,C),s&&s(v)};return r.jsxs(h.Fragment,{children:[r.jsx("textarea",{value:l,onChange:k,ref:m,rows:a,style:o,...c}),r.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:p,tabIndex:-1,style:{...u$.shadow,...o,paddingTop:0,paddingBottom:0}})]})});function Rl(e){return typeof e=="string"}function xo({props:e,states:t,muiFormControl:n}){return t.reduce((s,i)=>(s[i]=e[i],n&&typeof e[i]>"u"&&(s[i]=n[i]),s),{})}const t0=h.createContext(void 0);function yo(){return h.useContext(t0)}function Jy(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function tu(e,t=!1){return e&&(Jy(e.value)&&e.value!==""||t&&Jy(e.defaultValue)&&e.defaultValue!=="")}function f$(e){return e.startAdornment}function p$(e){return tt("MuiInputBase",e)}const ro=st("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var Zy;const Ch=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${Te(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},Sh=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},g$=e=>{const{classes:t,color:n,disabled:s,error:i,endAdornment:a,focused:o,formControl:l,fullWidth:c,hiddenLabel:d,multiline:u,readOnly:m,size:f,startAdornment:p,type:x}=e,g={root:["root",`color${Te(n)}`,s&&"disabled",i&&"error",c&&"fullWidth",o&&"focused",l&&"formControl",f&&f!=="medium"&&`size${Te(f)}`,u&&"multiline",p&&"adornedStart",a&&"adornedEnd",d&&"hiddenLabel",m&&"readOnly"],input:["input",s&&"disabled",x==="search"&&"inputTypeSearch",u&&"inputMultiline",f==="small"&&"inputSizeSmall",d&&"inputHiddenLabel",p&&"inputAdornedStart",a&&"inputAdornedEnd",m&&"readOnly"]};return nt(g,p$,t)},Eh=Le("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Ch})(ht(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${ro.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:n})=>t.multiline&&n==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),Th=Le("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Sh})(ht(({theme:e})=>{const t=e.palette.mode==="light",n={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},s={opacity:"0 !important"},i=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${ro.formControl} &`]:{"&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&::-ms-input-placeholder":s,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus::-ms-input-placeholder":i},[`&.${ro.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:a})=>!a.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:a})=>a.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),eb=V9({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),n0=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:a,autoFocus:o,className:l,color:c,components:d={},componentsProps:u={},defaultValue:m,disabled:f,disableInjectingGlobalStyles:p,endAdornment:x,error:g,fullWidth:b=!1,id:w,inputComponent:k="input",inputProps:v={},inputRef:N,margin:C,maxRows:T,minRows:E,multiline:P=!1,name:R,onBlur:y,onChange:O,onClick:_,onFocus:L,onKeyDown:A,onKeyUp:M,placeholder:z,readOnly:ie,renderSuffix:X,rows:te,size:B,slotProps:H={},slots:K={},startAdornment:$,type:me="text",value:ke,...ye}=s,se=v.value!=null?v.value:ke,{current:G}=h.useRef(se!=null),W=h.useRef(),Z=h.useCallback(U=>{},[]),Y=Cn(W,N,v.ref,Z),[ee,ae]=h.useState(!1),de=yo(),Re=xo({props:s,muiFormControl:de,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Re.focused=de?de.focused:ee,h.useEffect(()=>{!de&&f&&ee&&(ae(!1),y&&y())},[de,f,ee,y]);const Be=de&&de.onFilled,Ge=de&&de.onEmpty,et=h.useCallback(U=>{tu(U)?Be&&Be():Ge&&Ge()},[Be,Ge]);ni(()=>{G&&et({value:se})},[se,et,G]);const lt=U=>{L&&L(U),v.onFocus&&v.onFocus(U),de&&de.onFocus?de.onFocus(U):ae(!0)},Xe=U=>{y&&y(U),v.onBlur&&v.onBlur(U),de&&de.onBlur?de.onBlur(U):ae(!1)},He=(U,...q)=>{if(!G){const Q=U.target||W.current;if(Q==null)throw new Error(ws(1));et({value:Q.value})}v.onChange&&v.onChange(U,...q),O&&O(U,...q)};h.useEffect(()=>{et(W.current)},[]);const Pe=U=>{W.current&&U.currentTarget===U.target&&W.current.focus(),_&&_(U)};let vt=k,Ye=v;P&&vt==="input"&&(te?Ye={type:void 0,minRows:te,maxRows:te,...Ye}:Ye={type:void 0,maxRows:T,minRows:E,...Ye},vt=m$);const ce=U=>{et(U.animationName==="mui-auto-fill-cancel"?W.current:{value:"x"})};h.useEffect(()=>{de&&de.setAdornedStart(!!$)},[de,$]);const V={...s,color:Re.color||"primary",disabled:Re.disabled,endAdornment:x,error:Re.error,focused:Re.focused,formControl:de,fullWidth:b,hiddenLabel:Re.hiddenLabel,multiline:P,size:Re.size,startAdornment:$,type:me},I=g$(V),j=K.root||d.Root||Eh,S=H.root||u.root||{},F=K.input||d.Input||Th;return Ye={...Ye,...H.input??u.input},r.jsxs(h.Fragment,{children:[!p&&typeof eb=="function"&&(Zy||(Zy=r.jsx(eb,{}))),r.jsxs(j,{...S,ref:n,onClick:Pe,...ye,...!Rl(j)&&{ownerState:{...V,...S.ownerState}},className:_e(I.root,S.className,l,ie&&"MuiInputBase-readOnly"),children:[$,r.jsx(t0.Provider,{value:null,children:r.jsx(F,{"aria-invalid":Re.error,"aria-describedby":i,autoComplete:a,autoFocus:o,defaultValue:m,disabled:Re.disabled,id:w,onAnimationStart:ce,name:R,placeholder:z,readOnly:ie,required:Re.required,rows:te,value:se,onKeyDown:A,onKeyUp:M,type:me,...Ye,...!Rl(F)&&{as:vt,ownerState:{...V,...Ye.ownerState}},ref:Y,className:_e(I.input,Ye.className,ie&&"MuiInputBase-readOnly"),onBlur:Xe,onChange:He,onFocus:lt})}),x,X?X({...Re,startAdornment:$}):null]})]})});function x$(e){return tt("MuiInput",e)}const Eo={...ro,...st("MuiInput",["root","underline","input"])};function y$(e){return tt("MuiOutlinedInput",e)}const Br={...ro,...st("MuiOutlinedInput",["root","notchedOutline","input"])};function b$(e){return tt("MuiFilledInput",e)}const hi={...ro,...st("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},v$=Rt(r.jsx("path",{d:"M7 10l5 5 5-5z"})),w$={entering:{opacity:1},entered:{opacity:1}},j$=h.forwardRef(function(t,n){const s=kh(),i={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{addEndListener:a,appear:o=!0,children:l,easing:c,in:d,onEnter:u,onEntered:m,onEntering:f,onExit:p,onExited:x,onExiting:g,style:b,timeout:w=i,TransitionComponent:k=ts,...v}=t,N=h.useRef(null),C=Cn(N,cc(l),n),T=A=>M=>{if(A){const z=N.current;M===void 0?A(z):A(z,M)}},E=T(f),P=T((A,M)=>{R5(A);const z=Zd({style:b,timeout:w,easing:c},{mode:"enter"});A.style.webkitTransition=s.transitions.create("opacity",z),A.style.transition=s.transitions.create("opacity",z),u&&u(A,M)}),R=T(m),y=T(g),O=T(A=>{const M=Zd({style:b,timeout:w,easing:c},{mode:"exit"});A.style.webkitTransition=s.transitions.create("opacity",M),A.style.transition=s.transitions.create("opacity",M),p&&p(A)}),_=T(x),L=A=>{a&&a(N.current,A)};return r.jsx(k,{appear:o,in:d,nodeRef:N,onEnter:P,onEntered:R,onEntering:E,onExit:O,onExited:_,onExiting:y,addEndListener:L,timeout:w,...v,children:(A,{ownerState:M,...z})=>h.cloneElement(l,{style:{opacity:0,visibility:A==="exited"&&!d?"hidden":void 0,...w$[A],...b,...l.props.style},ref:C,...z})})});function k$(e){return tt("MuiBackdrop",e)}st("MuiBackdrop",["root","invisible"]);const N$=e=>{const{classes:t,invisible:n}=e;return nt({root:["root",n&&"invisible"]},k$,t)},C$=Le("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),S$=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiBackdrop"}),{children:i,className:a,component:o="div",invisible:l=!1,open:c,components:d={},componentsProps:u={},slotProps:m={},slots:f={},TransitionComponent:p,transitionDuration:x,...g}=s,b={...s,component:o,invisible:l},w=N$(b),k={transition:p,root:d.Root,...f},v={...u,...m},N={slots:k,slotProps:v},[C,T]=$t("root",{elementType:C$,externalForwardedProps:N,className:_e(w.root,a),ownerState:b}),[E,P]=$t("transition",{elementType:j$,externalForwardedProps:N,ownerState:b});return r.jsx(E,{in:c,timeout:x,...g,...P,children:r.jsx(C,{"aria-hidden":!0,...T,classes:w,ref:n,children:i})})}),E$=st("MuiBox",["root"]),T$=C5(),Ne=yM({themeId:zu,defaultTheme:T$,defaultClassName:E$.root,generateClassName:h5.generate});function I$(e){return tt("MuiButton",e)}const mi=st("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),P$=h.createContext({}),A$=h.createContext(void 0),R$=e=>{const{color:t,disableElevation:n,fullWidth:s,size:i,variant:a,loading:o,loadingPosition:l,classes:c}=e,d={root:["root",o&&"loading",a,`${a}${Te(t)}`,`size${Te(i)}`,`${a}Size${Te(i)}`,`color${Te(t)}`,n&&"disableElevation",s&&"fullWidth",o&&`loadingPosition${Te(l)}`],startIcon:["icon","startIcon",`iconSize${Te(i)}`],endIcon:["icon","endIcon",`iconSize${Te(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},u=nt(d,I$,c);return{...c,...u}},B5=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],L$=Le(Al,{shouldForwardProp:e=>wr(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${Te(n.color)}`],t[`size${Te(n.size)}`],t[`${n.variant}Size${Te(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth,n.loading&&t.loading]}})(ht(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],n=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${mi.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${mi.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${mi.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${mi.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(an()).map(([s])=>({props:{color:s},style:{"--variant-textColor":(e.vars||e).palette[s].main,"--variant-outlinedColor":(e.vars||e).palette[s].main,"--variant-outlinedBorder":e.vars?`rgba(${e.vars.palette[s].mainChannel} / 0.5)`:It(e.palette[s].main,.5),"--variant-containedColor":(e.vars||e).palette[s].contrastText,"--variant-containedBg":(e.vars||e).palette[s].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[s].dark,"--variant-textBg":e.vars?`rgba(${e.vars.palette[s].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:It(e.palette[s].main,e.palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[s].main,"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette[s].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:It(e.palette[s].main,e.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:It(e.palette.text.primary,e.palette.action.hoverOpacity),"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:It(e.palette.text.primary,e.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${mi.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${mi.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${mi.loading}`]:{color:"transparent"}}}]}})),M$=Le("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,n.loading&&t.startIconLoadingStart,t[`iconSize${Te(n.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...B5]})),D$=Le("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,n.loading&&t.endIconLoadingEnd,t[`iconSize${Te(n.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...B5]})),$$=Le("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),tb=Le("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),gt=h.forwardRef(function(t,n){const s=h.useContext(P$),i=h.useContext(A$),a=Pl(s,t),o=it({props:a,name:"MuiButton"}),{children:l,color:c="primary",component:d="button",className:u,disabled:m=!1,disableElevation:f=!1,disableFocusRipple:p=!1,endIcon:x,focusVisibleClassName:g,fullWidth:b=!1,id:w,loading:k=null,loadingIndicator:v,loadingPosition:N="center",size:C="medium",startIcon:T,type:E,variant:P="text",...R}=o,y=Nh(w),O=v??r.jsx(Rn,{"aria-labelledby":y,color:"inherit",size:16}),_={...o,color:c,component:d,disabled:m,disableElevation:f,disableFocusRipple:p,fullWidth:b,loading:k,loadingIndicator:O,loadingPosition:N,size:C,type:E,variant:P},L=R$(_),A=(T||k&&N==="start")&&r.jsx(M$,{className:L.startIcon,ownerState:_,children:T||r.jsx(tb,{className:L.loadingIconPlaceholder,ownerState:_})}),M=(x||k&&N==="end")&&r.jsx(D$,{className:L.endIcon,ownerState:_,children:x||r.jsx(tb,{className:L.loadingIconPlaceholder,ownerState:_})}),z=i||"",ie=typeof k=="boolean"?r.jsx("span",{className:L.loadingWrapper,style:{display:"contents"},children:k&&r.jsx($$,{className:L.loadingIndicator,ownerState:_,children:O})}):null;return r.jsxs(L$,{ownerState:_,className:_e(s.className,L.root,u,z),component:d,disabled:m||k,focusRipple:!p,focusVisibleClassName:_e(L.focusVisible,g),ref:n,type:E,id:k?y:w,...R,classes:L,children:[A,N!=="end"&&ie,l,N==="end"&&ie,M]})});function O$(e){return tt("MuiCard",e)}st("MuiCard",["root"]);const B$=e=>{const{classes:t}=e;return nt({root:["root"]},O$,t)},_$=Le(jn,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),wp=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiCard"}),{className:i,raised:a=!1,...o}=s,l={...s,raised:a},c=B$(l);return r.jsx(_$,{className:_e(c.root,i),elevation:a?8:void 0,ref:n,ownerState:l,...o})});function F$(e){return tt("MuiCardContent",e)}st("MuiCardContent",["root"]);const z$=e=>{const{classes:t}=e;return nt({root:["root"]},F$,t)},U$=Le("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),jp=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiCardContent"}),{className:i,component:a="div",...o}=s,l={...s,component:a},c=z$(l);return r.jsx(U$,{as:a,className:_e(c.root,i),ownerState:l,ref:n,...o})});function _5(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function V$(e){const t=Ar(e);return t.body===e?js(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function nl(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function nb(e){return parseInt(js(e).getComputedStyle(e).paddingRight,10)||0}function H$(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),s=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||s}function rb(e,t,n,s,i){const a=[t,n,...s];[].forEach.call(e.children,o=>{const l=!a.includes(o),c=!H$(o);l&&c&&nl(o,i)})}function Mm(e,t){let n=-1;return e.some((s,i)=>t(s)?(n=i,!0):!1),n}function W$(e,t){const n=[],s=e.container;if(!t.disableScrollLock){if(V$(s)){const o=_5(js(s));n.push({value:s.style.paddingRight,property:"padding-right",el:s}),s.style.paddingRight=`${nb(s)+o}px`;const l=Ar(s).querySelectorAll(".mui-fixed");[].forEach.call(l,c=>{n.push({value:c.style.paddingRight,property:"padding-right",el:c}),c.style.paddingRight=`${nb(c)+o}px`})}let a;if(s.parentNode instanceof DocumentFragment)a=Ar(s).body;else{const o=s.parentElement,l=js(s);a=(o==null?void 0:o.nodeName)==="HTML"&&l.getComputedStyle(o).overflowY==="scroll"?o:s}n.push({value:a.style.overflow,property:"overflow",el:a},{value:a.style.overflowX,property:"overflow-x",el:a},{value:a.style.overflowY,property:"overflow-y",el:a}),a.style.overflow="hidden"}return()=>{n.forEach(({value:a,el:o,property:l})=>{a?o.style.setProperty(l,a):o.style.removeProperty(l)})}}function q$(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class K${constructor(){this.modals=[],this.containers=[]}add(t,n){let s=this.modals.indexOf(t);if(s!==-1)return s;s=this.modals.length,this.modals.push(t),t.modalRef&&nl(t.modalRef,!1);const i=q$(n);rb(n,t.mount,t.modalRef,i,!0);const a=Mm(this.containers,o=>o.container===n);return a!==-1?(this.containers[a].modals.push(t),s):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:i}),s)}mount(t,n){const s=Mm(this.containers,a=>a.modals.includes(t)),i=this.containers[s];i.restore||(i.restore=W$(i,n))}remove(t,n=!0){const s=this.modals.indexOf(t);if(s===-1)return s;const i=Mm(this.containers,o=>o.modals.includes(t)),a=this.containers[i];if(a.modals.splice(a.modals.indexOf(t),1),this.modals.splice(s,1),a.modals.length===0)a.restore&&a.restore(),t.modalRef&&nl(t.modalRef,n),rb(a.container,t.mount,t.modalRef,a.hiddenSiblings,!1),this.containers.splice(i,1);else{const o=a.modals[a.modals.length-1];o.modalRef&&nl(o.modalRef,!1)}return s}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const G$=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function X$(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function Y$(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=s=>e.ownerDocument.querySelector(`input[type="radio"]${s}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function Q$(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||Y$(e))}function J$(e){const t=[],n=[];return Array.from(e.querySelectorAll(G$)).forEach((s,i)=>{const a=X$(s);a===-1||!Q$(s)||(a===0?t.push(s):n.push({documentOrder:i,tabIndex:a,node:s}))}),n.sort((s,i)=>s.tabIndex===i.tabIndex?s.documentOrder-i.documentOrder:s.tabIndex-i.tabIndex).map(s=>s.node).concat(t)}function Z$(){return!0}function eO(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:s=!1,disableRestoreFocus:i=!1,getTabbable:a=J$,isEnabled:o=Z$,open:l}=e,c=h.useRef(!1),d=h.useRef(null),u=h.useRef(null),m=h.useRef(null),f=h.useRef(null),p=h.useRef(!1),x=h.useRef(null),g=Cn(cc(t),x),b=h.useRef(null);h.useEffect(()=>{!l||!x.current||(p.current=!n)},[n,l]),h.useEffect(()=>{if(!l||!x.current)return;const v=Ar(x.current);return x.current.contains(v.activeElement)||(x.current.hasAttribute("tabIndex")||x.current.setAttribute("tabIndex","-1"),p.current&&x.current.focus()),()=>{i||(m.current&&m.current.focus&&(c.current=!0,m.current.focus()),m.current=null)}},[l]),h.useEffect(()=>{if(!l||!x.current)return;const v=Ar(x.current),N=E=>{b.current=E,!(s||!o()||E.key!=="Tab")&&v.activeElement===x.current&&E.shiftKey&&(c.current=!0,u.current&&u.current.focus())},C=()=>{var R,y;const E=x.current;if(E===null)return;if(!v.hasFocus()||!o()||c.current){c.current=!1;return}if(E.contains(v.activeElement)||s&&v.activeElement!==d.current&&v.activeElement!==u.current)return;if(v.activeElement!==f.current)f.current=null;else if(f.current!==null)return;if(!p.current)return;let P=[];if((v.activeElement===d.current||v.activeElement===u.current)&&(P=a(x.current)),P.length>0){const O=!!((R=b.current)!=null&&R.shiftKey&&((y=b.current)==null?void 0:y.key)==="Tab"),_=P[0],L=P[P.length-1];typeof _!="string"&&typeof L!="string"&&(O?L.focus():_.focus())}else E.focus()};v.addEventListener("focusin",C),v.addEventListener("keydown",N,!0);const T=setInterval(()=>{v.activeElement&&v.activeElement.tagName==="BODY"&&C()},50);return()=>{clearInterval(T),v.removeEventListener("focusin",C),v.removeEventListener("keydown",N,!0)}},[n,s,i,o,l,a]);const w=v=>{m.current===null&&(m.current=v.relatedTarget),p.current=!0,f.current=v.target;const N=t.props.onFocus;N&&N(v)},k=v=>{m.current===null&&(m.current=v.relatedTarget),p.current=!0};return r.jsxs(h.Fragment,{children:[r.jsx("div",{tabIndex:l?0:-1,onFocus:k,ref:d,"data-testid":"sentinelStart"}),h.cloneElement(t,{ref:g,onFocus:w}),r.jsx("div",{tabIndex:l?0:-1,onFocus:k,ref:u,"data-testid":"sentinelEnd"})]})}function tO(e){return typeof e=="function"?e():e}function nO(e){return e?e.props.hasOwnProperty("in"):!1}const sb=()=>{},Dc=new K$;function rO(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:s=!1,closeAfterTransition:i=!1,onTransitionEnter:a,onTransitionExited:o,children:l,onClose:c,open:d,rootRef:u}=e,m=h.useRef({}),f=h.useRef(null),p=h.useRef(null),x=Cn(p,u),[g,b]=h.useState(!d),w=nO(l);let k=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(k=!1);const v=()=>Ar(f.current),N=()=>(m.current.modalRef=p.current,m.current.mount=f.current,m.current),C=()=>{Dc.mount(N(),{disableScrollLock:s}),p.current&&(p.current.scrollTop=0)},T=Hi(()=>{const M=tO(t)||v().body;Dc.add(N(),M),p.current&&C()}),E=()=>Dc.isTopModal(N()),P=Hi(M=>{f.current=M,M&&(d&&E()?C():p.current&&nl(p.current,k))}),R=h.useCallback(()=>{Dc.remove(N(),k)},[k]);h.useEffect(()=>()=>{R()},[R]),h.useEffect(()=>{d?T():(!w||!i)&&R()},[d,R,w,i,T]);const y=M=>z=>{var ie;(ie=M.onKeyDown)==null||ie.call(M,z),!(z.key!=="Escape"||z.which===229||!E())&&(n||(z.stopPropagation(),c&&c(z,"escapeKeyDown")))},O=M=>z=>{var ie;(ie=M.onClick)==null||ie.call(M,z),z.target===z.currentTarget&&c&&c(z,"backdropClick")};return{getRootProps:(M={})=>{const z=D5(e);delete z.onTransitionEnter,delete z.onTransitionExited;const ie={...z,...M};return{role:"presentation",...ie,onKeyDown:y(ie),ref:x}},getBackdropProps:(M={})=>{const z=M;return{"aria-hidden":!0,...z,onClick:O(z),open:d}},getTransitionProps:()=>{const M=()=>{b(!1),a&&a()},z=()=>{b(!0),o&&o(),i&&R()};return{onEnter:$y(M,(l==null?void 0:l.props.onEnter)??sb),onExited:$y(z,(l==null?void 0:l.props.onExited)??sb)}},rootRef:x,portalRef:P,isTopModal:E,exited:g,hasTransition:w}}function sO(e){return tt("MuiModal",e)}st("MuiModal",["root","hidden","backdrop"]);const iO=e=>{const{open:t,exited:n,classes:s}=e;return nt({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},sO,s)},aO=Le("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(ht(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),oO=Le(S$,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),lO=h.forwardRef(function(t,n){const s=it({name:"MuiModal",props:t}),{BackdropComponent:i=oO,BackdropProps:a,classes:o,className:l,closeAfterTransition:c=!1,children:d,container:u,component:m,components:f={},componentsProps:p={},disableAutoFocus:x=!1,disableEnforceFocus:g=!1,disableEscapeKeyDown:b=!1,disablePortal:w=!1,disableRestoreFocus:k=!1,disableScrollLock:v=!1,hideBackdrop:N=!1,keepMounted:C=!1,onClose:T,onTransitionEnter:E,onTransitionExited:P,open:R,slotProps:y={},slots:O={},theme:_,...L}=s,A={...s,closeAfterTransition:c,disableAutoFocus:x,disableEnforceFocus:g,disableEscapeKeyDown:b,disablePortal:w,disableRestoreFocus:k,disableScrollLock:v,hideBackdrop:N,keepMounted:C},{getRootProps:M,getBackdropProps:z,getTransitionProps:ie,portalRef:X,isTopModal:te,exited:B,hasTransition:H}=rO({...A,rootRef:n}),K={...A,exited:B},$=iO(K),me={};if(d.props.tabIndex===void 0&&(me.tabIndex="-1"),H){const{onEnter:Z,onExited:Y}=ie();me.onEnter=Z,me.onExited=Y}const ke={slots:{root:f.Root,backdrop:f.Backdrop,...O},slotProps:{...p,...y}},[ye,se]=$t("root",{ref:n,elementType:aO,externalForwardedProps:{...ke,...L,component:m},getSlotProps:M,ownerState:K,className:_e(l,$==null?void 0:$.root,!K.open&&K.exited&&($==null?void 0:$.hidden))}),[G,W]=$t("backdrop",{ref:a==null?void 0:a.ref,elementType:i,externalForwardedProps:ke,shouldForwardComponentProp:!0,additionalProps:a,getSlotProps:Z=>z({...Z,onClick:Y=>{Z!=null&&Z.onClick&&Z.onClick(Y)}}),className:_e(a==null?void 0:a.className,$==null?void 0:$.backdrop),ownerState:K});return!C&&!R&&(!H||B)?null:r.jsx(i$,{ref:X,container:u,disablePortal:w,children:r.jsxs(ye,{...se,children:[!N&&i?r.jsx(G,{...W}):null,r.jsx(eO,{disableEnforceFocus:g,disableAutoFocus:x,disableRestoreFocus:k,isEnabled:te,open:R,children:h.cloneElement(d,me)})]})})});function cO(e){return tt("MuiDivider",e)}st("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const dO=e=>{const{absolute:t,children:n,classes:s,flexItem:i,light:a,orientation:o,textAlign:l,variant:c}=e;return nt({root:["root",t&&"absolute",c,a&&"light",o==="vertical"&&"vertical",i&&"flexItem",n&&"withChildren",n&&o==="vertical"&&"withChildrenVertical",l==="right"&&o!=="vertical"&&"textAlignRight",l==="left"&&o!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",o==="vertical"&&"wrapperVertical"]},cO,s)},uO=Le("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,n.orientation==="vertical"&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&n.orientation==="vertical"&&t.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&t.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&t.textAlignLeft]}})(ht(({theme:e})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:It(e.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:t})=>!!t.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:t})=>t.children&&t.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:t})=>t.orientation==="vertical"&&t.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:t})=>t.textAlign==="right"&&t.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:t})=>t.textAlign==="left"&&t.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),hO=Le("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,n.orientation==="vertical"&&t.wrapperVertical]}})(ht(({theme:e})=>({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}}]}))),us=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiDivider"}),{absolute:i=!1,children:a,className:o,orientation:l="horizontal",component:c=a||l==="vertical"?"div":"hr",flexItem:d=!1,light:u=!1,role:m=c!=="hr"?"separator":void 0,textAlign:f="center",variant:p="fullWidth",...x}=s,g={...s,absolute:i,component:c,flexItem:d,light:u,orientation:l,role:m,textAlign:f,variant:p},b=dO(g);return r.jsx(uO,{as:c,className:_e(b.root,o),role:m,ref:n,ownerState:g,"aria-orientation":m==="separator"&&(c!=="hr"||l==="vertical")?l:void 0,...x,children:a?r.jsx(hO,{className:b.wrapper,ownerState:g,children:a}):null})});us&&(us.muiSkipListHighlight=!0);const mO=e=>{const{classes:t,disableUnderline:n,startAdornment:s,endAdornment:i,size:a,hiddenLabel:o,multiline:l}=e,c={root:["root",!n&&"underline",s&&"adornedStart",i&&"adornedEnd",a==="small"&&`size${Te(a)}`,o&&"hiddenLabel",l&&"multiline"],input:["input"]},d=nt(c,b$,t);return{...t,...d}},fO=Le(Eh,{shouldForwardProp:e=>wr(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Ch(e,t),!n.disableUnderline&&t.underline]}})(ht(({theme:e})=>{const t=e.palette.mode==="light",n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s}},[`&.${hi.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:s},[`&.${hi.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:a},variants:[{props:({ownerState:o})=>!o.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${hi.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${hi.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${hi.disabled}, .${hi.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${hi.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(an()).map(([o])=>{var l;return{props:{disableUnderline:!1,color:o},style:{"&::after":{borderBottom:`2px solid ${(l=(e.vars||e).palette[o])==null?void 0:l.main}`}}}}),{props:({ownerState:o})=>o.startAdornment,style:{paddingLeft:12}},{props:({ownerState:o})=>o.endAdornment,style:{paddingRight:12}},{props:({ownerState:o})=>o.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:o,size:l})=>o.multiline&&l==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel&&o.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),pO=Le(Th,{name:"MuiFilledInput",slot:"Input",overridesResolver:Sh})(ht(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),r0=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiFilledInput"}),{disableUnderline:i=!1,components:a={},componentsProps:o,fullWidth:l=!1,hiddenLabel:c,inputComponent:d="input",multiline:u=!1,slotProps:m,slots:f={},type:p="text",...x}=s,g={...s,disableUnderline:i,fullWidth:l,inputComponent:d,multiline:u,type:p},b=mO(s),w={root:{ownerState:g},input:{ownerState:g}},k=m??o?xn(w,m??o):w,v=f.root??a.Root??fO,N=f.input??a.Input??pO;return r.jsx(n0,{slots:{root:v,input:N},slotProps:k,fullWidth:l,inputComponent:d,multiline:u,ref:n,type:p,...x,classes:b})});r0.muiName="Input";function gO(e){return tt("MuiFormControl",e)}st("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const xO=e=>{const{classes:t,margin:n,fullWidth:s}=e,i={root:["root",n!=="none"&&`margin${Te(n)}`,s&&"fullWidth"]};return nt(i,gO,t)},yO=Le("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`margin${Te(n.margin)}`],n.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),bO=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiFormControl"}),{children:i,className:a,color:o="primary",component:l="div",disabled:c=!1,error:d=!1,focused:u,fullWidth:m=!1,hiddenLabel:f=!1,margin:p="none",required:x=!1,size:g="medium",variant:b="outlined",...w}=s,k={...s,color:o,component:l,disabled:c,error:d,fullWidth:m,hiddenLabel:f,margin:p,required:x,size:g,variant:b},v=xO(k),[N,C]=h.useState(()=>{let M=!1;return i&&h.Children.forEach(i,z=>{if(!tl(z,["Input","Select"]))return;const ie=tl(z,["Select"])?z.props.input:z;ie&&f$(ie.props)&&(M=!0)}),M}),[T,E]=h.useState(()=>{let M=!1;return i&&h.Children.forEach(i,z=>{tl(z,["Input","Select"])&&(tu(z.props,!0)||tu(z.props.inputProps,!0))&&(M=!0)}),M}),[P,R]=h.useState(!1);c&&P&&R(!1);const y=u!==void 0&&!c?u:P;let O;h.useRef(!1);const _=h.useCallback(()=>{E(!0)},[]),L=h.useCallback(()=>{E(!1)},[]),A=h.useMemo(()=>({adornedStart:N,setAdornedStart:C,color:o,disabled:c,error:d,filled:T,focused:y,fullWidth:m,hiddenLabel:f,size:g,onBlur:()=>{R(!1)},onFocus:()=>{R(!0)},onEmpty:L,onFilled:_,registerEffect:O,required:x,variant:b}),[N,o,c,d,T,y,m,f,O,L,_,x,g,b]);return r.jsx(t0.Provider,{value:A,children:r.jsx(yO,{as:l,ownerState:k,className:_e(v.root,a),ref:n,...w,children:i})})});function vO(e){return tt("MuiFormHelperText",e)}const ib=st("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var ab;const wO=e=>{const{classes:t,contained:n,size:s,disabled:i,error:a,filled:o,focused:l,required:c}=e,d={root:["root",i&&"disabled",a&&"error",s&&`size${Te(s)}`,n&&"contained",l&&"focused",o&&"filled",c&&"required"]};return nt(d,vO,t)},jO=Le("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${Te(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(ht(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${ib.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${ib.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),kO=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiFormHelperText"}),{children:i,className:a,component:o="p",disabled:l,error:c,filled:d,focused:u,margin:m,required:f,variant:p,...x}=s,g=yo(),b=xo({props:s,muiFormControl:g,states:["variant","size","disabled","error","filled","focused","required"]}),w={...s,component:o,contained:b.variant==="filled"||b.variant==="outlined",variant:b.variant,size:b.size,disabled:b.disabled,error:b.error,filled:b.filled,focused:b.focused,required:b.required};delete w.ownerState;const k=wO(w);return r.jsx(jO,{as:o,className:_e(k.root,a),ref:n,...x,ownerState:w,children:i===" "?ab||(ab=r.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):i})});function NO(e){return tt("MuiFormLabel",e)}const rl=st("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),CO=e=>{const{classes:t,color:n,focused:s,disabled:i,error:a,filled:o,required:l}=e,c={root:["root",`color${Te(n)}`,i&&"disabled",a&&"error",o&&"filled",s&&"focused",l&&"required"],asterisk:["asterisk",a&&"error"]};return nt(c,NO,t)},SO=Le("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color==="secondary"&&t.colorSecondary,n.filled&&t.filled]}})(ht(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(an()).map(([t])=>({props:{color:t},style:{[`&.${rl.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${rl.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${rl.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),EO=Le("span",{name:"MuiFormLabel",slot:"Asterisk"})(ht(({theme:e})=>({[`&.${rl.error}`]:{color:(e.vars||e).palette.error.main}}))),TO=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiFormLabel"}),{children:i,className:a,color:o,component:l="label",disabled:c,error:d,filled:u,focused:m,required:f,...p}=s,x=yo(),g=xo({props:s,muiFormControl:x,states:["color","required","focused","disabled","error","filled"]}),b={...s,color:g.color||"primary",component:l,disabled:g.disabled,error:g.error,filled:g.filled,focused:g.focused,required:g.required},w=CO(b);return r.jsxs(SO,{as:l,ownerState:b,className:_e(w.root,a),ref:n,...p,children:[i,g.required&&r.jsxs(EO,{ownerState:b,"aria-hidden":!0,className:w.asterisk,children:[" ","*"]})]})}),fn=s9({createStyledComponent:Le("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.container&&t.container]}}),componentName:"MuiGrid",useThemeProps:e=>it({props:e,name:"MuiGrid"}),useTheme:kh});function kp(e){return`scale(${e}, ${e**2})`}const IO={entering:{opacity:1,transform:kp(1)},entered:{opacity:1,transform:"none"}},Dm=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Np=h.forwardRef(function(t,n){const{addEndListener:s,appear:i=!0,children:a,easing:o,in:l,onEnter:c,onEntered:d,onEntering:u,onExit:m,onExited:f,onExiting:p,style:x,timeout:g="auto",TransitionComponent:b=ts,...w}=t,k=A5(),v=h.useRef(),N=kh(),C=h.useRef(null),T=Cn(C,cc(a),n),E=M=>z=>{if(M){const ie=C.current;z===void 0?M(ie):M(ie,z)}},P=E(u),R=E((M,z)=>{R5(M);const{duration:ie,delay:X,easing:te}=Zd({style:x,timeout:g,easing:o},{mode:"enter"});let B;g==="auto"?(B=N.transitions.getAutoHeightDuration(M.clientHeight),v.current=B):B=ie,M.style.transition=[N.transitions.create("opacity",{duration:B,delay:X}),N.transitions.create("transform",{duration:Dm?B:B*.666,delay:X,easing:te})].join(","),c&&c(M,z)}),y=E(d),O=E(p),_=E(M=>{const{duration:z,delay:ie,easing:X}=Zd({style:x,timeout:g,easing:o},{mode:"exit"});let te;g==="auto"?(te=N.transitions.getAutoHeightDuration(M.clientHeight),v.current=te):te=z,M.style.transition=[N.transitions.create("opacity",{duration:te,delay:ie}),N.transitions.create("transform",{duration:Dm?te:te*.666,delay:Dm?ie:ie||te*.333,easing:X})].join(","),M.style.opacity=0,M.style.transform=kp(.75),m&&m(M)}),L=E(f),A=M=>{g==="auto"&&k.start(v.current||0,M),s&&s(C.current,M)};return r.jsx(b,{appear:i,in:l,nodeRef:C,onEnter:R,onEntered:y,onEntering:P,onExit:_,onExited:L,onExiting:O,addEndListener:A,timeout:g==="auto"?null:g,...w,children:(M,{ownerState:z,...ie})=>h.cloneElement(a,{style:{opacity:0,transform:kp(.75),visibility:M==="exited"&&!l?"hidden":void 0,...IO[M],...x,...a.props.style},ref:T,...ie})})});Np&&(Np.muiSupportAuto=!0);const PO=e=>{const{classes:t,disableUnderline:n}=e,i=nt({root:["root",!n&&"underline"],input:["input"]},x$,t);return{...t,...i}},AO=Le(Eh,{shouldForwardProp:e=>wr(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Ch(e,t),!n.disableUnderline&&t.underline]}})(ht(({theme:e})=>{let n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(n=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:s})=>s.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:s})=>!s.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Eo.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Eo.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Eo.disabled}, .${Eo.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${Eo.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(an()).map(([s])=>({props:{color:s,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[s].main}`}}}))]}})),RO=Le(Th,{name:"MuiInput",slot:"Input",overridesResolver:Sh})({}),s0=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiInput"}),{disableUnderline:i=!1,components:a={},componentsProps:o,fullWidth:l=!1,inputComponent:c="input",multiline:d=!1,slotProps:u,slots:m={},type:f="text",...p}=s,x=PO(s),b={root:{ownerState:{disableUnderline:i}}},w=u??o?xn(u??o,b):b,k=m.root??a.Root??AO,v=m.input??a.Input??RO;return r.jsx(n0,{slots:{root:k,input:v},slotProps:w,fullWidth:l,inputComponent:c,multiline:d,ref:n,type:f,...p,classes:x})});s0.muiName="Input";function LO(e){return tt("MuiInputLabel",e)}st("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const MO=e=>{const{classes:t,formControl:n,size:s,shrink:i,disableAnimation:a,variant:o,required:l}=e,c={root:["root",n&&"formControl",!a&&"animated",i&&"shrink",s&&s!=="medium"&&`size${Te(s)}`,o],asterisk:[l&&"asterisk"]},d=nt(c,LO,t);return{...t,...d}},DO=Le(TO,{shouldForwardProp:e=>wr(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${rl.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(ht(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:n})=>t==="filled"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:n,size:s})=>t==="filled"&&n.shrink&&s==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:n})=>t==="outlined"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),$O=h.forwardRef(function(t,n){const s=it({name:"MuiInputLabel",props:t}),{disableAnimation:i=!1,margin:a,shrink:o,variant:l,className:c,...d}=s,u=yo();let m=o;typeof m>"u"&&u&&(m=u.filled||u.focused||u.adornedStart);const f=xo({props:s,muiFormControl:u,states:["size","variant","required","focused"]}),p={...s,disableAnimation:i,formControl:u,shrink:m,size:f.size,variant:f.variant,required:f.required,focused:f.focused},x=MO(p);return r.jsx(DO,{"data-shrink":m,ref:n,className:_e(x.root,c),...d,ownerState:p,classes:x})});function OO(e){return tt("MuiLinearProgress",e)}st("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","bar1","bar2","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const Cp=4,Sp=oi`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`,BO=typeof Sp!="string"?po`
        animation: ${Sp} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
      `:null,Ep=oi`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`,_O=typeof Ep!="string"?po`
        animation: ${Ep} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
      `:null,Tp=oi`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`,FO=typeof Tp!="string"?po`
        animation: ${Tp} 3s infinite linear;
      `:null,zO=e=>{const{classes:t,variant:n,color:s}=e,i={root:["root",`color${Te(s)}`,n],dashed:["dashed",`dashedColor${Te(s)}`],bar1:["bar","bar1",`barColor${Te(s)}`,(n==="indeterminate"||n==="query")&&"bar1Indeterminate",n==="determinate"&&"bar1Determinate",n==="buffer"&&"bar1Buffer"],bar2:["bar","bar2",n!=="buffer"&&`barColor${Te(s)}`,n==="buffer"&&`color${Te(s)}`,(n==="indeterminate"||n==="query")&&"bar2Indeterminate",n==="buffer"&&"bar2Buffer"]};return nt(i,OO,t)},i0=(e,t)=>e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:e.palette.mode==="light"?na(e.palette[t].main,.62):ta(e.palette[t].main,.5),UO=Le("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${Te(n.color)}`],t[n.variant]]}})(ht(({theme:e})=>({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},variants:[...Object.entries(e.palette).filter(an()).map(([t])=>({props:{color:t},style:{backgroundColor:i0(e,t)}})),{props:({ownerState:t})=>t.color==="inherit"&&t.variant!=="buffer",style:{"&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}}},{props:{variant:"buffer"},style:{backgroundColor:"transparent"}},{props:{variant:"query"},style:{transform:"rotate(180deg)"}}]}))),VO=Le("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.dashed,t[`dashedColor${Te(n.color)}`]]}})(ht(({theme:e})=>({position:"absolute",marginTop:0,height:"100%",width:"100%",backgroundSize:"10px 10px",backgroundPosition:"0 -23px",variants:[{props:{color:"inherit"},style:{opacity:.3,backgroundImage:"radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)"}},...Object.entries(e.palette).filter(an()).map(([t])=>{const n=i0(e,t);return{props:{color:t},style:{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`}}})]})),FO||{animation:`${Tp} 3s infinite linear`}),HO=Le("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t.bar1,t[`barColor${Te(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&t.bar1Indeterminate,n.variant==="determinate"&&t.bar1Determinate,n.variant==="buffer"&&t.bar1Buffer]}})(ht(({theme:e})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[{props:{color:"inherit"},style:{backgroundColor:"currentColor"}},...Object.entries(e.palette).filter(an()).map(([t])=>({props:{color:t},style:{backgroundColor:(e.vars||e).palette[t].main}})),{props:{variant:"determinate"},style:{transition:`transform .${Cp}s linear`}},{props:{variant:"buffer"},style:{zIndex:1,transition:`transform .${Cp}s linear`}},{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:{width:"auto"}},{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:BO||{animation:`${Sp} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite`}}]}))),WO=Le("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t.bar2,t[`barColor${Te(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&t.bar2Indeterminate,n.variant==="buffer"&&t.bar2Buffer]}})(ht(({theme:e})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[...Object.entries(e.palette).filter(an()).map(([t])=>({props:{color:t},style:{"--LinearProgressBar2-barColor":(e.vars||e).palette[t].main}})),{props:({ownerState:t})=>t.variant!=="buffer"&&t.color!=="inherit",style:{backgroundColor:"var(--LinearProgressBar2-barColor, currentColor)"}},{props:({ownerState:t})=>t.variant!=="buffer"&&t.color==="inherit",style:{backgroundColor:"currentColor"}},{props:{color:"inherit"},style:{opacity:.3}},...Object.entries(e.palette).filter(an()).map(([t])=>({props:{color:t,variant:"buffer"},style:{backgroundColor:i0(e,t),transition:`transform .${Cp}s linear`}})),{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:{width:"auto"}},{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:_O||{animation:`${Ep} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite`}}]}))),qO=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiLinearProgress"}),{className:i,color:a="primary",value:o,valueBuffer:l,variant:c="indeterminate",...d}=s,u={...s,color:a,variant:c},m=zO(u),f=b5(),p={},x={bar1:{},bar2:{}};if((c==="determinate"||c==="buffer")&&o!==void 0){p["aria-valuenow"]=Math.round(o),p["aria-valuemin"]=0,p["aria-valuemax"]=100;let g=o-100;f&&(g=-g),x.bar1.transform=`translateX(${g}%)`}if(c==="buffer"&&l!==void 0){let g=(l||0)-100;f&&(g=-g),x.bar2.transform=`translateX(${g}%)`}return r.jsxs(UO,{className:_e(m.root,i),ownerState:u,role:"progressbar",...p,ref:n,...d,children:[c==="buffer"?r.jsx(VO,{className:m.dashed,ownerState:u}):null,r.jsx(HO,{className:m.bar1,ownerState:u,style:x.bar1}),c==="determinate"?null:r.jsx(WO,{className:m.bar2,ownerState:u,style:x.bar2})]})}),hs=h.createContext({});function KO(e){return tt("MuiList",e)}st("MuiList",["root","padding","dense","subheader"]);const GO=e=>{const{classes:t,disablePadding:n,dense:s,subheader:i}=e;return nt({root:["root",!n&&"padding",s&&"dense",i&&"subheader"]},KO,t)},XO=Le("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),nu=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiList"}),{children:i,className:a,component:o="ul",dense:l=!1,disablePadding:c=!1,subheader:d,...u}=s,m=h.useMemo(()=>({dense:l}),[l]),f={...s,component:o,dense:l,disablePadding:c},p=GO(f);return r.jsx(hs.Provider,{value:m,children:r.jsxs(XO,{as:o,className:_e(p.root,a),ref:n,ownerState:f,...u,children:[d,i]})})});function YO(e){return tt("MuiListItem",e)}st("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function QO(e){return tt("MuiListItemButton",e)}const Ea=st("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),JO=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]},ZO=e=>{const{alignItems:t,classes:n,dense:s,disabled:i,disableGutters:a,divider:o,selected:l}=e,d=nt({root:["root",s&&"dense",!a&&"gutters",o&&"divider",i&&"disabled",t==="flex-start"&&"alignItemsFlexStart",l&&"selected"]},QO,n);return{...n,...d}},eB=Le(Al,{shouldForwardProp:e=>wr(e)||e==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:JO})(ht(({theme:e})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ea.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:It(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Ea.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:It(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Ea.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:It(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:It(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${Ea.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Ea.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},variants:[{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.dense,style:{paddingTop:4,paddingBottom:4}}]}))),tB=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiListItemButton"}),{alignItems:i="center",autoFocus:a=!1,component:o="div",children:l,dense:c=!1,disableGutters:d=!1,divider:u=!1,focusVisibleClassName:m,selected:f=!1,className:p,...x}=s,g=h.useContext(hs),b=h.useMemo(()=>({dense:c||g.dense||!1,alignItems:i,disableGutters:d}),[i,g.dense,c,d]),w=h.useRef(null);ni(()=>{a&&w.current&&w.current.focus()},[a]);const k={...s,alignItems:i,dense:b.dense,disableGutters:d,divider:u,selected:f},v=ZO(k),N=Cn(w,n);return r.jsx(hs.Provider,{value:b,children:r.jsx(eB,{ref:N,href:x.href||x.to,component:(x.href||x.to)&&o==="div"?"button":o,focusVisibleClassName:_e(v.focusVisible,m),ownerState:k,className:_e(v.root,p),...x,classes:v,children:l})})});function nB(e){return tt("MuiListItemSecondaryAction",e)}st("MuiListItemSecondaryAction",["root","disableGutters"]);const rB=e=>{const{disableGutters:t,classes:n}=e;return nt({root:["root",t&&"disableGutters"]},nB,n)},sB=Le("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),F5=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiListItemSecondaryAction"}),{className:i,...a}=s,o=h.useContext(hs),l={...s,disableGutters:o.disableGutters},c=rB(l);return r.jsx(sB,{className:_e(c.root,i),ownerState:l,ref:n,...a})});F5.muiName="ListItemSecondaryAction";const iB=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.hasSecondaryAction&&t.secondaryAction]},aB=e=>{const{alignItems:t,classes:n,dense:s,disableGutters:i,disablePadding:a,divider:o,hasSecondaryAction:l}=e;return nt({root:["root",s&&"dense",!i&&"gutters",!a&&"padding",o&&"divider",t==="flex-start"&&"alignItemsFlexStart",l&&"secondaryAction"],container:["container"]},YO,n)},oB=Le("div",{name:"MuiListItem",slot:"Root",overridesResolver:iB})(ht(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>!t.disablePadding&&t.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:t})=>!t.disablePadding&&!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>!t.disablePadding&&!!t.secondaryAction,style:{paddingRight:48}},{props:({ownerState:t})=>!!t.secondaryAction,style:{[`& > .${Ea.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>t.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:t})=>t.hasSecondaryAction,style:{paddingRight:48}}]}))),lB=Le("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),Rs=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiListItem"}),{alignItems:i="center",children:a,className:o,component:l,components:c={},componentsProps:d={},ContainerComponent:u="li",ContainerProps:{className:m,...f}={},dense:p=!1,disableGutters:x=!1,disablePadding:g=!1,divider:b=!1,secondaryAction:w,slotProps:k={},slots:v={},...N}=s,C=h.useContext(hs),T=h.useMemo(()=>({dense:p||C.dense||!1,alignItems:i,disableGutters:x}),[i,C.dense,p,x]),E=h.useRef(null),P=h.Children.toArray(a),R=P.length&&tl(P[P.length-1],["ListItemSecondaryAction"]),y={...s,alignItems:i,dense:T.dense,disableGutters:x,disablePadding:g,divider:b,hasSecondaryAction:R},O=aB(y),_=Cn(E,n),L=v.root||c.Root||oB,A=k.root||d.root||{},M={className:_e(O.root,A.className,o),...N};let z=l||"li";return R?(z=!M.component&&!l?"div":z,u==="li"&&(z==="li"?z="div":M.component==="li"&&(M.component="div")),r.jsx(hs.Provider,{value:T,children:r.jsxs(lB,{as:u,className:_e(O.container,m),ref:_,ownerState:y,...f,children:[r.jsx(L,{...A,...!Rl(L)&&{as:z,ownerState:{...y,...A.ownerState}},...M,children:P}),P.pop()]})})):r.jsx(hs.Provider,{value:T,children:r.jsxs(L,{...A,as:z,ref:_,...!Rl(L)&&{ownerState:{...y,...A.ownerState}},...M,children:[P,w&&r.jsx(F5,{children:w})]})})});function cB(e){return tt("MuiListItemIcon",e)}st("MuiListItemIcon",["root","alignItemsFlexStart"]);const dB=e=>{const{alignItems:t,classes:n}=e;return nt({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},cB,n)},uB=Le("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(ht(({theme:e})=>({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),fi=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiListItemIcon"}),{className:i,...a}=s,o=h.useContext(hs),l={...s,alignItems:o.alignItems},c=dB(l);return r.jsx(uB,{className:_e(c.root,i),ownerState:l,ref:n,...a})});function hB(e){return tt("MuiListItemText",e)}const $c=st("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),mB=e=>{const{classes:t,inset:n,primary:s,secondary:i,dense:a}=e;return nt({root:["root",n&&"inset",a&&"dense",s&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},hB,t)},fB=Le("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${$c.primary}`]:t.primary},{[`& .${$c.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${Gy.root}:where(& .${$c.primary})`]:{display:"block"},[`.${Gy.root}:where(& .${$c.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),Ls=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiListItemText"}),{children:i,className:a,disableTypography:o=!1,inset:l=!1,primary:c,primaryTypographyProps:d,secondary:u,secondaryTypographyProps:m,slots:f={},slotProps:p={},...x}=s,{dense:g}=h.useContext(hs);let b=c??i,w=u;const k={...s,disableTypography:o,inset:l,primary:!!b,secondary:!!w,dense:g},v=mB(k),N={slots:f,slotProps:{primary:d,secondary:m,...p}},[C,T]=$t("root",{className:_e(v.root,a),elementType:fB,externalForwardedProps:{...N,...x},ownerState:k,ref:n}),[E,P]=$t("primary",{className:v.primary,elementType:je,externalForwardedProps:N,ownerState:k}),[R,y]=$t("secondary",{className:v.secondary,elementType:je,externalForwardedProps:N,ownerState:k});return b!=null&&b.type!==je&&!o&&(b=r.jsx(E,{variant:g?"body2":"body1",component:P!=null&&P.variant?void 0:"span",...P,children:b})),w!=null&&w.type!==je&&!o&&(w=r.jsx(R,{variant:"body2",color:"textSecondary",...y,children:w})),r.jsxs(C,{...T,children:[b,w]})});function $m(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function ob(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function z5(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.startsWith(t.keys.join(""))}function To(e,t,n,s,i,a){let o=!1,l=i(e,t,t?n:!1);for(;l;){if(l===e.firstChild){if(o)return!1;o=!0}const c=s?!1:l.disabled||l.getAttribute("aria-disabled")==="true";if(!l.hasAttribute("tabindex")||!z5(l,a)||c)l=i(e,l,n);else return l.focus(),!0}return!1}const pB=h.forwardRef(function(t,n){const{actions:s,autoFocus:i=!1,autoFocusItem:a=!1,children:o,className:l,disabledItemsFocusable:c=!1,disableListWrap:d=!1,onKeyDown:u,variant:m="selectedMenu",...f}=t,p=h.useRef(null),x=h.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});ni(()=>{i&&p.current.focus()},[i]),h.useImperativeHandle(s,()=>({adjustStyleForScrollbar:(v,{direction:N})=>{const C=!p.current.style.width;if(v.clientHeight<p.current.clientHeight&&C){const T=`${_5(js(v))}px`;p.current.style[N==="rtl"?"paddingLeft":"paddingRight"]=T,p.current.style.width=`calc(100% + ${T})`}return p.current}}),[]);const g=v=>{const N=p.current,C=v.key;if(v.ctrlKey||v.metaKey||v.altKey){u&&u(v);return}const E=Ar(N).activeElement;if(C==="ArrowDown")v.preventDefault(),To(N,E,d,c,$m);else if(C==="ArrowUp")v.preventDefault(),To(N,E,d,c,ob);else if(C==="Home")v.preventDefault(),To(N,null,d,c,$m);else if(C==="End")v.preventDefault(),To(N,null,d,c,ob);else if(C.length===1){const P=x.current,R=C.toLowerCase(),y=performance.now();P.keys.length>0&&(y-P.lastTime>500?(P.keys=[],P.repeating=!0,P.previousKeyMatched=!0):P.repeating&&R!==P.keys[0]&&(P.repeating=!1)),P.lastTime=y,P.keys.push(R);const O=E&&!P.repeating&&z5(E,P);P.previousKeyMatched&&(O||To(N,E,!1,c,$m,P))?v.preventDefault():P.previousKeyMatched=!1}u&&u(v)},b=Cn(p,n);let w=-1;h.Children.forEach(o,(v,N)=>{if(!h.isValidElement(v)){w===N&&(w+=1,w>=o.length&&(w=-1));return}v.props.disabled||(m==="selectedMenu"&&v.props.selected||w===-1)&&(w=N),w===N&&(v.props.disabled||v.props.muiSkipListHighlight||v.type.muiSkipListHighlight)&&(w+=1,w>=o.length&&(w=-1))});const k=h.Children.map(o,(v,N)=>{if(N===w){const C={};return a&&(C.autoFocus=!0),v.props.tabIndex===void 0&&m==="selectedMenu"&&(C.tabIndex=0),h.cloneElement(v,C)}return v});return r.jsx(nu,{role:"menu",ref:b,className:l,onKeyDown:g,tabIndex:i?0:-1,...f,children:k})});function gB(e){return tt("MuiPopover",e)}st("MuiPopover",["root","paper"]);function lb(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function cb(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function db(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function Oc(e){return typeof e=="function"?e():e}const xB=e=>{const{classes:t}=e;return nt({root:["root"],paper:["paper"]},gB,t)},yB=Le(lO,{name:"MuiPopover",slot:"Root"})({}),U5=Le(jn,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),bB=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiPopover"}),{action:i,anchorEl:a,anchorOrigin:o={vertical:"top",horizontal:"left"},anchorPosition:l,anchorReference:c="anchorEl",children:d,className:u,container:m,elevation:f=8,marginThreshold:p=16,open:x,PaperProps:g={},slots:b={},slotProps:w={},transformOrigin:k={vertical:"top",horizontal:"left"},TransitionComponent:v,transitionDuration:N="auto",TransitionProps:C={},disableScrollLock:T=!1,...E}=s,P=h.useRef(),R={...s,anchorOrigin:o,anchorReference:c,elevation:f,marginThreshold:p,transformOrigin:k,TransitionComponent:v,transitionDuration:N,TransitionProps:C},y=xB(R),O=h.useCallback(()=>{if(c==="anchorPosition")return l;const Z=Oc(a),ee=(Z&&Z.nodeType===1?Z:Ar(P.current).body).getBoundingClientRect();return{top:ee.top+lb(ee,o.vertical),left:ee.left+cb(ee,o.horizontal)}},[a,o.horizontal,o.vertical,l,c]),_=h.useCallback(Z=>({vertical:lb(Z,k.vertical),horizontal:cb(Z,k.horizontal)}),[k.horizontal,k.vertical]),L=h.useCallback(Z=>{const Y={width:Z.offsetWidth,height:Z.offsetHeight},ee=_(Y);if(c==="none")return{top:null,left:null,transformOrigin:db(ee)};const ae=O();let de=ae.top-ee.vertical,Re=ae.left-ee.horizontal;const Be=de+Y.height,Ge=Re+Y.width,et=js(Oc(a)),lt=et.innerHeight-p,Xe=et.innerWidth-p;if(p!==null&&de<p){const He=de-p;de-=He,ee.vertical+=He}else if(p!==null&&Be>lt){const He=Be-lt;de-=He,ee.vertical+=He}if(p!==null&&Re<p){const He=Re-p;Re-=He,ee.horizontal+=He}else if(Ge>Xe){const He=Ge-Xe;Re-=He,ee.horizontal+=He}return{top:`${Math.round(de)}px`,left:`${Math.round(Re)}px`,transformOrigin:db(ee)}},[a,c,O,_,p]),[A,M]=h.useState(x),z=h.useCallback(()=>{const Z=P.current;if(!Z)return;const Y=L(Z);Y.top!==null&&Z.style.setProperty("top",Y.top),Y.left!==null&&(Z.style.left=Y.left),Z.style.transformOrigin=Y.transformOrigin,M(!0)},[L]);h.useEffect(()=>(T&&window.addEventListener("scroll",z),()=>window.removeEventListener("scroll",z)),[a,T,z]);const ie=()=>{z()},X=()=>{M(!1)};h.useEffect(()=>{x&&z()}),h.useImperativeHandle(i,()=>x?{updatePosition:()=>{z()}}:null,[x,z]),h.useEffect(()=>{if(!x)return;const Z=E5(()=>{z()}),Y=js(Oc(a));return Y.addEventListener("resize",Z),()=>{Z.clear(),Y.removeEventListener("resize",Z)}},[a,x,z]);let te=N;const B={slots:{transition:v,...b},slotProps:{transition:C,paper:g,...w}},[H,K]=$t("transition",{elementType:Np,externalForwardedProps:B,ownerState:R,getSlotProps:Z=>({...Z,onEntering:(Y,ee)=>{var ae;(ae=Z.onEntering)==null||ae.call(Z,Y,ee),ie()},onExited:Y=>{var ee;(ee=Z.onExited)==null||ee.call(Z,Y),X()}}),additionalProps:{appear:!0,in:x}});N==="auto"&&!H.muiSupportAuto&&(te=void 0);const $=m||(a?Ar(Oc(a)).body:void 0),[me,{slots:ke,slotProps:ye,...se}]=$t("root",{ref:n,elementType:yB,externalForwardedProps:{...B,...E},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:b.backdrop},slotProps:{backdrop:Q9(typeof w.backdrop=="function"?w.backdrop(R):w.backdrop,{invisible:!0})},container:$,open:x},ownerState:R,className:_e(y.root,u)}),[G,W]=$t("paper",{ref:P,className:y.paper,elementType:U5,externalForwardedProps:B,shouldForwardComponentProp:!0,additionalProps:{elevation:f,style:A?void 0:{opacity:0}},ownerState:R});return r.jsx(me,{...se,...!Rl(me)&&{slots:ke,slotProps:ye,disableScrollLock:T},children:r.jsx(H,{...K,timeout:te,children:r.jsx(G,{...W,children:d})})})});function vB(e){return tt("MuiMenu",e)}st("MuiMenu",["root","paper","list"]);const wB={vertical:"top",horizontal:"right"},jB={vertical:"top",horizontal:"left"},kB=e=>{const{classes:t}=e;return nt({root:["root"],paper:["paper"],list:["list"]},vB,t)},NB=Le(bB,{shouldForwardProp:e=>wr(e)||e==="classes",name:"MuiMenu",slot:"Root"})({}),CB=Le(U5,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),SB=Le(pB,{name:"MuiMenu",slot:"List"})({outline:0}),EB=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiMenu"}),{autoFocus:i=!0,children:a,className:o,disableAutoFocusItem:l=!1,MenuListProps:c={},onClose:d,open:u,PaperProps:m={},PopoverClasses:f,transitionDuration:p="auto",TransitionProps:{onEntering:x,...g}={},variant:b="selectedMenu",slots:w={},slotProps:k={},...v}=s,N=b5(),C={...s,autoFocus:i,disableAutoFocusItem:l,MenuListProps:c,onEntering:x,PaperProps:m,transitionDuration:p,TransitionProps:g,variant:b},T=kB(C),E=i&&!l&&u,P=h.useRef(null),R=(te,B)=>{P.current&&P.current.adjustStyleForScrollbar(te,{direction:N?"rtl":"ltr"}),x&&x(te,B)},y=te=>{te.key==="Tab"&&(te.preventDefault(),d&&d(te,"tabKeyDown"))};let O=-1;h.Children.map(a,(te,B)=>{h.isValidElement(te)&&(te.props.disabled||(b==="selectedMenu"&&te.props.selected||O===-1)&&(O=B))});const _={slots:w,slotProps:{list:c,transition:g,paper:m,...k}},L=r$({elementType:w.root,externalSlotProps:k.root,ownerState:C,className:[T.root,o]}),[A,M]=$t("paper",{className:T.paper,elementType:CB,externalForwardedProps:_,shouldForwardComponentProp:!0,ownerState:C}),[z,ie]=$t("list",{className:_e(T.list,c.className),elementType:SB,shouldForwardComponentProp:!0,externalForwardedProps:_,getSlotProps:te=>({...te,onKeyDown:B=>{var H;y(B),(H=te.onKeyDown)==null||H.call(te,B)}}),ownerState:C}),X=typeof _.slotProps.transition=="function"?_.slotProps.transition(C):_.slotProps.transition;return r.jsx(NB,{onClose:d,anchorOrigin:{vertical:"bottom",horizontal:N?"right":"left"},transformOrigin:N?wB:jB,slots:{root:w.root,paper:A,backdrop:w.backdrop,...w.transition&&{transition:w.transition}},slotProps:{root:L,paper:M,backdrop:typeof k.backdrop=="function"?k.backdrop(C):k.backdrop,transition:{...X,onEntering:(...te)=>{var B;R(...te),(B=X==null?void 0:X.onEntering)==null||B.call(X,...te)}}},open:u,ref:n,transitionDuration:p,ownerState:C,...v,classes:f,children:r.jsx(z,{actions:P,autoFocus:i&&(O===-1||l),autoFocusItem:E,variant:b,...ie,children:a})})});function TB(e){return tt("MuiNativeSelect",e)}const a0=st("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),IB=e=>{const{classes:t,variant:n,disabled:s,multiple:i,open:a,error:o}=e,l={select:["select",n,s&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${Te(n)}`,a&&"iconOpen",s&&"disabled"]};return nt(l,TB,t)},V5=Le("select")(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${a0.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),PB=Le(V5,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:wr,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${a0.multiple}`]:t.multiple}]}})({}),H5=Le("svg")(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${a0.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),AB=Le(H5,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Te(n.variant)}`],n.open&&t.iconOpen]}})({}),RB=h.forwardRef(function(t,n){const{className:s,disabled:i,error:a,IconComponent:o,inputRef:l,variant:c="standard",...d}=t,u={...t,disabled:i,variant:c,error:a},m=IB(u);return r.jsxs(h.Fragment,{children:[r.jsx(PB,{ownerState:u,className:_e(m.select,s),disabled:i,ref:l||n,...d}),t.multiple?null:r.jsx(AB,{as:o,ownerState:u,className:m.icon})]})});var ub;const LB=Le("fieldset",{shouldForwardProp:wr})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),MB=Le("legend",{shouldForwardProp:wr})(ht(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function DB(e){const{children:t,classes:n,className:s,label:i,notched:a,...o}=e,l=i!=null&&i!=="",c={...e,notched:a,withLabel:l};return r.jsx(LB,{"aria-hidden":!0,className:s,ownerState:c,...o,children:r.jsx(MB,{ownerState:c,children:l?r.jsx("span",{children:i}):ub||(ub=r.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"}))})})}const $B=e=>{const{classes:t}=e,s=nt({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},y$,t);return{...t,...s}},OB=Le(Eh,{shouldForwardProp:e=>wr(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Ch})(ht(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${Br.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${Br.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${Br.focused} .${Br.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(an()).map(([n])=>({props:{color:n},style:{[`&.${Br.focused} .${Br.notchedOutline}`]:{borderColor:(e.vars||e).palette[n].main}}})),{props:{},style:{[`&.${Br.error} .${Br.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${Br.disabled} .${Br.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:14}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:14}},{props:({ownerState:n})=>n.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:n,size:s})=>n.multiline&&s==="small",style:{padding:"8.5px 14px"}}]}})),BB=Le(DB,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(ht(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}})),_B=Le(Th,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Sh})(ht(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),o0=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiOutlinedInput"}),{components:i={},fullWidth:a=!1,inputComponent:o="input",label:l,multiline:c=!1,notched:d,slots:u={},slotProps:m={},type:f="text",...p}=s,x=$B(s),g=yo(),b=xo({props:s,muiFormControl:g,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),w={...s,color:b.color||"primary",disabled:b.disabled,error:b.error,focused:b.focused,formControl:g,fullWidth:a,hiddenLabel:b.hiddenLabel,multiline:c,size:b.size,type:f},k=u.root??i.Root??OB,v=u.input??i.Input??_B,[N,C]=$t("notchedOutline",{elementType:BB,className:x.notchedOutline,shouldForwardComponentProp:!0,ownerState:w,externalForwardedProps:{slots:u,slotProps:m},additionalProps:{label:l!=null&&l!==""&&b.required?r.jsxs(h.Fragment,{children:[l," ","*"]}):l}});return r.jsx(n0,{slots:{root:k,input:v},slotProps:m,renderSuffix:T=>r.jsx(N,{...C,notched:typeof d<"u"?d:!!(T.startAdornment||T.filled||T.focused)}),fullWidth:a,inputComponent:o,multiline:c,ref:n,type:f,...p,classes:{...x,notchedOutline:null}})});o0.muiName="Input";function W5(e){return tt("MuiSelect",e)}const Io=st("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var hb;const FB=Le(V5,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${Io.select}`]:t.select},{[`&.${Io.select}`]:t[n.variant]},{[`&.${Io.error}`]:t.error},{[`&.${Io.multiple}`]:t.multiple}]}})({[`&.${Io.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),zB=Le(H5,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Te(n.variant)}`],n.open&&t.iconOpen]}})({}),UB=Le("input",{shouldForwardProp:e=>S5(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function mb(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function VB(e){return e==null||typeof e=="string"&&!e.trim()}const HB=e=>{const{classes:t,variant:n,disabled:s,multiple:i,open:a,error:o}=e,l={select:["select",n,s&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${Te(n)}`,a&&"iconOpen",s&&"disabled"],nativeInput:["nativeInput"]};return nt(l,W5,t)},WB=h.forwardRef(function(t,n){var be;const{"aria-describedby":s,"aria-label":i,autoFocus:a,autoWidth:o,children:l,className:c,defaultOpen:d,defaultValue:u,disabled:m,displayEmpty:f,error:p=!1,IconComponent:x,inputRef:g,labelId:b,MenuProps:w={},multiple:k,name:v,onBlur:N,onChange:C,onClose:T,onFocus:E,onOpen:P,open:R,readOnly:y,renderValue:O,required:_,SelectDisplayProps:L={},tabIndex:A,type:M,value:z,variant:ie="standard",...X}=t,[te,B]=Fy({controlled:z,default:u,name:"Select"}),[H,K]=Fy({controlled:R,default:d,name:"Select"}),$=h.useRef(null),me=h.useRef(null),[ke,ye]=h.useState(null),{current:se}=h.useRef(R!=null),[G,W]=h.useState(),Z=Cn(n,g),Y=h.useCallback(ge=>{me.current=ge,ge&&ye(ge)},[]),ee=ke==null?void 0:ke.parentNode;h.useImperativeHandle(Z,()=>({focus:()=>{me.current.focus()},node:$.current,value:te}),[te]),h.useEffect(()=>{d&&H&&ke&&!se&&(W(o?null:ee.clientWidth),me.current.focus())},[ke,o]),h.useEffect(()=>{a&&me.current.focus()},[a]),h.useEffect(()=>{if(!b)return;const ge=Ar(me.current).getElementById(b);if(ge){const oe=()=>{getSelection().isCollapsed&&me.current.focus()};return ge.addEventListener("click",oe),()=>{ge.removeEventListener("click",oe)}}},[b]);const ae=(ge,oe)=>{ge?P&&P(oe):T&&T(oe),se||(W(o?null:ee.clientWidth),K(ge))},de=ge=>{ge.button===0&&(ge.preventDefault(),me.current.focus(),ae(!0,ge))},Re=ge=>{ae(!1,ge)},Be=h.Children.toArray(l),Ge=ge=>{const oe=Be.find(he=>he.props.value===ge.target.value);oe!==void 0&&(B(oe.props.value),C&&C(ge,oe))},et=ge=>oe=>{let he;if(oe.currentTarget.hasAttribute("tabindex")){if(k){he=Array.isArray(te)?te.slice():[];const fe=te.indexOf(ge.props.value);fe===-1?he.push(ge.props.value):he.splice(fe,1)}else he=ge.props.value;if(ge.props.onClick&&ge.props.onClick(oe),te!==he&&(B(he),C)){const fe=oe.nativeEvent||oe,ze=new fe.constructor(fe.type,fe);Object.defineProperty(ze,"target",{writable:!0,value:{value:he,name:v}}),C(ze,ge)}k||ae(!1,oe)}},lt=ge=>{y||[" ","ArrowUp","ArrowDown","Enter"].includes(ge.key)&&(ge.preventDefault(),ae(!0,ge))},Xe=ke!==null&&H,He=ge=>{!Xe&&N&&(Object.defineProperty(ge,"target",{writable:!0,value:{value:te,name:v}}),N(ge))};delete X["aria-invalid"];let Pe,vt;const Ye=[];let ce=!1;(tu({value:te})||f)&&(O?Pe=O(te):ce=!0);const V=Be.map(ge=>{if(!h.isValidElement(ge))return null;let oe;if(k){if(!Array.isArray(te))throw new Error(ws(2));oe=te.some(he=>mb(he,ge.props.value)),oe&&ce&&Ye.push(ge.props.children)}else oe=mb(te,ge.props.value),oe&&ce&&(vt=ge.props.children);return h.cloneElement(ge,{"aria-selected":oe?"true":"false",onClick:et(ge),onKeyUp:he=>{he.key===" "&&he.preventDefault(),ge.props.onKeyUp&&ge.props.onKeyUp(he)},role:"option",selected:oe,value:void 0,"data-value":ge.props.value})});ce&&(k?Ye.length===0?Pe=null:Pe=Ye.reduce((ge,oe,he)=>(ge.push(oe),he<Ye.length-1&&ge.push(", "),ge),[]):Pe=vt);let I=G;!o&&se&&ke&&(I=ee.clientWidth);let j;typeof A<"u"?j=A:j=m?null:0;const S=L.id||(v?`mui-component-select-${v}`:void 0),F={...t,variant:ie,value:te,open:Xe,error:p},U=HB(F),q={...w.PaperProps,...(be=w.slotProps)==null?void 0:be.paper},Q=Nh();return r.jsxs(h.Fragment,{children:[r.jsx(FB,{as:"div",ref:Y,tabIndex:j,role:"combobox","aria-controls":Xe?Q:void 0,"aria-disabled":m?"true":void 0,"aria-expanded":Xe?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[b,S].filter(Boolean).join(" ")||void 0,"aria-describedby":s,"aria-required":_?"true":void 0,"aria-invalid":p?"true":void 0,onKeyDown:lt,onMouseDown:m||y?null:de,onBlur:He,onFocus:E,...L,ownerState:F,className:_e(L.className,U.select,c),id:S,children:VB(Pe)?hb||(hb=r.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):Pe}),r.jsx(UB,{"aria-invalid":p,value:Array.isArray(te)?te.join(","):te,name:v,ref:$,"aria-hidden":!0,onChange:Ge,tabIndex:-1,disabled:m,className:U.nativeInput,autoFocus:a,required:_,...X,ownerState:F}),r.jsx(zB,{as:x,className:U.icon,ownerState:F}),r.jsx(EB,{id:`menu-${v||""}`,anchorEl:ee,open:Xe,onClose:Re,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...w,slotProps:{...w.slotProps,list:{"aria-labelledby":b,role:"listbox","aria-multiselectable":k?"true":void 0,disableListWrap:!0,id:Q,...w.MenuListProps},paper:{...q,style:{minWidth:I,...q!=null?q.style:null}}},children:V})]})}),qB=e=>{const{classes:t}=e,s=nt({root:["root"]},W5,t);return{...t,...s}},l0={name:"MuiSelect",slot:"Root",shouldForwardProp:e=>wr(e)&&e!=="variant"},KB=Le(s0,l0)(""),GB=Le(o0,l0)(""),XB=Le(r0,l0)(""),q5=h.forwardRef(function(t,n){const s=it({name:"MuiSelect",props:t}),{autoWidth:i=!1,children:a,classes:o={},className:l,defaultOpen:c=!1,displayEmpty:d=!1,IconComponent:u=v$,id:m,input:f,inputProps:p,label:x,labelId:g,MenuProps:b,multiple:w=!1,native:k=!1,onClose:v,onOpen:N,open:C,renderValue:T,SelectDisplayProps:E,variant:P="outlined",...R}=s,y=k?RB:WB,O=yo(),_=xo({props:s,muiFormControl:O,states:["variant","error"]}),L=_.variant||P,A={...s,variant:L,classes:o},M=qB(A),{root:z,...ie}=M,X=f||{standard:r.jsx(KB,{ownerState:A}),outlined:r.jsx(GB,{label:x,ownerState:A}),filled:r.jsx(XB,{ownerState:A})}[L],te=Cn(n,cc(X));return r.jsx(h.Fragment,{children:h.cloneElement(X,{inputComponent:y,inputProps:{children:a,error:_.error,IconComponent:u,variant:L,type:void 0,multiple:w,...k?{id:m}:{autoWidth:i,defaultOpen:c,displayEmpty:d,labelId:g,MenuProps:b,onClose:v,onOpen:N,open:C,renderValue:T,SelectDisplayProps:{id:m,...E}},...p,classes:p?xn(ie,p.classes):ie,...f?f.props.inputProps:{}},...(w&&k||d)&&L==="outlined"?{notched:!0}:{},ref:te,className:_e(X.props.className,l,M.root),...!f&&{variant:L},...R})})});q5.muiName="Select";const Po=u9({createStyledComponent:Le("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>it({props:e,name:"MuiStack"})}),K5=h.createContext();function YB(e){return tt("MuiTable",e)}st("MuiTable",["root","stickyHeader"]);const QB=e=>{const{classes:t,stickyHeader:n}=e;return nt({root:["root",n&&"stickyHeader"]},YB,t)},JB=Le("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.stickyHeader&&t.stickyHeader]}})(ht(({theme:e})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...e.typography.body2,padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:t})=>t.stickyHeader,style:{borderCollapse:"separate"}}]}))),fb="table",G5=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiTable"}),{className:i,component:a=fb,padding:o="normal",size:l="medium",stickyHeader:c=!1,...d}=s,u={...s,component:a,padding:o,size:l,stickyHeader:c},m=QB(u),f=h.useMemo(()=>({padding:o,size:l,stickyHeader:c}),[o,l,c]);return r.jsx(K5.Provider,{value:f,children:r.jsx(JB,{as:a,role:a===fb?null:"table",ref:n,className:_e(m.root,i),ownerState:u,...d})})}),Ih=h.createContext();function ZB(e){return tt("MuiTableBody",e)}st("MuiTableBody",["root"]);const e_=e=>{const{classes:t}=e;return nt({root:["root"]},ZB,t)},t_=Le("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),n_={variant:"body"},pb="tbody",X5=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiTableBody"}),{className:i,component:a=pb,...o}=s,l={...s,component:a},c=e_(l);return r.jsx(Ih.Provider,{value:n_,children:r.jsx(t_,{className:_e(c.root,i),as:a,ref:n,role:a===pb?null:"rowgroup",ownerState:l,...o})})});function r_(e){return tt("MuiTableCell",e)}const s_=st("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),i_=e=>{const{classes:t,variant:n,align:s,padding:i,size:a,stickyHeader:o}=e,l={root:["root",n,o&&"stickyHeader",s!=="inherit"&&`align${Te(s)}`,i!=="normal"&&`padding${Te(i)}`,`size${Te(a)}`]};return nt(l,r_,t)},a_=Le("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${Te(n.size)}`],n.padding!=="normal"&&t[`padding${Te(n.padding)}`],n.align!=="inherit"&&t[`align${Te(n.align)}`],n.stickyHeader&&t.stickyHeader]}})(ht(({theme:e})=>({...e.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${e.palette.mode==="light"?na(It(e.palette.divider,1),.88):ta(It(e.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(e.vars||e).palette.text.primary}},{props:{variant:"footer"},style:{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${s_.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:t})=>t.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default}}]}))),en=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiTableCell"}),{align:i="inherit",className:a,component:o,padding:l,scope:c,size:d,sortDirection:u,variant:m,...f}=s,p=h.useContext(K5),x=h.useContext(Ih),g=x&&x.variant==="head";let b;o?b=o:b=g?"th":"td";let w=c;b==="td"?w=void 0:!w&&g&&(w="col");const k=m||x&&x.variant,v={...s,align:i,component:b,padding:l||(p&&p.padding?p.padding:"normal"),size:d||(p&&p.size?p.size:"medium"),sortDirection:u,stickyHeader:k==="head"&&p&&p.stickyHeader,variant:k},N=i_(v);let C=null;return u&&(C=u==="asc"?"ascending":"descending"),r.jsx(a_,{as:b,ref:n,className:_e(N.root,a),"aria-sort":C,scope:w,ownerState:v,...f})});function o_(e){return tt("MuiTableContainer",e)}st("MuiTableContainer",["root"]);const l_=e=>{const{classes:t}=e;return nt({root:["root"]},o_,t)},c_=Le("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),d_=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiTableContainer"}),{className:i,component:a="div",...o}=s,l={...s,component:a},c=l_(l);return r.jsx(c_,{ref:n,as:a,className:_e(c.root,i),ownerState:l,...o})});function u_(e){return tt("MuiTableHead",e)}st("MuiTableHead",["root"]);const h_=e=>{const{classes:t}=e;return nt({root:["root"]},u_,t)},m_=Le("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),f_={variant:"head"},gb="thead",Y5=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiTableHead"}),{className:i,component:a=gb,...o}=s,l={...s,component:a},c=h_(l);return r.jsx(Ih.Provider,{value:f_,children:r.jsx(m_,{as:a,className:_e(c.root,i),ref:n,role:a===gb?null:"rowgroup",ownerState:l,...o})})});function p_(e){return tt("MuiTableRow",e)}const xb=st("MuiTableRow",["root","selected","hover","head","footer"]),g_=e=>{const{classes:t,selected:n,hover:s,head:i,footer:a}=e;return nt({root:["root",n&&"selected",s&&"hover",i&&"head",a&&"footer"]},p_,t)},x_=Le("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.head&&t.head,n.footer&&t.footer]}})(ht(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${xb.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${xb.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:It(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:It(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}}))),yb="tr",ru=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiTableRow"}),{className:i,component:a=yb,hover:o=!1,selected:l=!1,...c}=s,d=h.useContext(Ih),u={...s,component:a,hover:o,selected:l,head:d&&d.variant==="head",footer:d&&d.variant==="footer"},m=g_(u);return r.jsx(x_,{as:a,ref:n,className:_e(m.root,i),role:a===yb?null:"row",ownerState:u,...c})});function y_(e){return tt("MuiTextField",e)}st("MuiTextField",["root"]);const b_={standard:s0,filled:r0,outlined:o0},v_=e=>{const{classes:t}=e;return nt({root:["root"]},y_,t)},w_=Le(bO,{name:"MuiTextField",slot:"Root"})({}),j_=h.forwardRef(function(t,n){const s=it({props:t,name:"MuiTextField"}),{autoComplete:i,autoFocus:a=!1,children:o,className:l,color:c="primary",defaultValue:d,disabled:u=!1,error:m=!1,FormHelperTextProps:f,fullWidth:p=!1,helperText:x,id:g,InputLabelProps:b,inputProps:w,InputProps:k,inputRef:v,label:N,maxRows:C,minRows:T,multiline:E=!1,name:P,onBlur:R,onChange:y,onFocus:O,placeholder:_,required:L=!1,rows:A,select:M=!1,SelectProps:z,slots:ie={},slotProps:X={},type:te,value:B,variant:H="outlined",...K}=s,$={...s,autoFocus:a,color:c,disabled:u,error:m,fullWidth:p,multiline:E,required:L,select:M,variant:H},me=v_($),ke=Nh(g),ye=x&&ke?`${ke}-helper-text`:void 0,se=N&&ke?`${ke}-label`:void 0,G=b_[H],W={slots:ie,slotProps:{input:k,inputLabel:b,htmlInput:w,formHelperText:f,select:z,...X}},Z={},Y=W.slotProps.inputLabel;H==="outlined"&&(Y&&typeof Y.shrink<"u"&&(Z.notched=Y.shrink),Z.label=N),M&&((!z||!z.native)&&(Z.id=void 0),Z["aria-describedby"]=void 0);const[ee,ae]=$t("root",{elementType:w_,shouldForwardComponentProp:!0,externalForwardedProps:{...W,...K},ownerState:$,className:_e(me.root,l),ref:n,additionalProps:{disabled:u,error:m,fullWidth:p,required:L,color:c,variant:H}}),[de,Re]=$t("input",{elementType:G,externalForwardedProps:W,additionalProps:Z,ownerState:$}),[Be,Ge]=$t("inputLabel",{elementType:$O,externalForwardedProps:W,ownerState:$}),[et,lt]=$t("htmlInput",{elementType:"input",externalForwardedProps:W,ownerState:$}),[Xe,He]=$t("formHelperText",{elementType:kO,externalForwardedProps:W,ownerState:$}),[Pe,vt]=$t("select",{elementType:q5,externalForwardedProps:W,ownerState:$}),Ye=r.jsx(de,{"aria-describedby":ye,autoComplete:i,autoFocus:a,defaultValue:d,fullWidth:p,multiline:E,name:P,rows:A,maxRows:C,minRows:T,type:te,value:B,id:ke,inputRef:v,onBlur:R,onChange:y,onFocus:O,placeholder:_,inputProps:lt,slots:{input:ie.htmlInput?et:void 0},...Re});return r.jsxs(ee,{...ae,children:[N!=null&&N!==""&&r.jsx(Be,{htmlFor:ke,id:se,...Ge,children:N}),M?r.jsx(Pe,{"aria-describedby":ye,id:ke,labelId:se,value:B,input:Ye,...vt,children:o}):Ye,x&&r.jsx(Xe,{id:ye,...He,children:x})]})}),Q5=Rt([r.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),r.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")]),k_=Rt(r.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"})),J5=Rt(r.jsx("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"})),N_=Rt(r.jsx("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V10h14zM9 14H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2zm-8 4H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2z"})),Ip=Rt(r.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"})),C_=Rt(r.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})),Ia=Rt(r.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"})),S_=Rt(r.jsx("path",{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2M5 8V7h2v3.82C5.84 10.4 5 9.3 5 8m14 0c0 1.3-.84 2.4-2 2.82V7h2z"})),E_=Rt(r.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"})),Om=Rt(r.jsx("path",{d:"M7 14H5v5h5v-2H7zm-2-4h2V7h3V5H5zm12 7h-3v2h5v-5h-2zM14 5v2h3v3h2V5z"})),bb=Rt(r.jsx("path",{d:"M5 16h3v3h2v-5H5zm3-8H5v2h5V5H8zm6 11h2v-3h3v-2h-5zm2-11V5h-2v5h5V8z"})),T_=Rt(r.jsx("path",{d:"M12 2 4 5v6.09c0 5.05 3.41 9.76 8 10.91 4.59-1.15 8-5.86 8-10.91V5zm-1.06 13.54L7.4 12l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41z"})),I_=Rt(r.jsx("path",{d:"M11 18h2v-2h-2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4"})),P_=Rt(r.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"})),A_=Rt(r.jsx("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"})),R_=Rt(r.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16"})),L_=Rt(r.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"})),Z5=Rt(r.jsx("path",{d:"M5 13.18v4L12 21l7-3.82v-4L12 17zM12 3 1 9l11 6 9-4.91V17h2V9z"})),M_=Rt(r.jsx("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})),ek=Rt(r.jsx("path",{d:"M9 1h6v2H9zm10.03 6.39 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61M13 14h-2V8h2z"})),D_=Rt(r.jsx("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"})),Va=De.create({baseURL:"/api".replace(/\/$/,""),timeout:3e4,headers:{"Content-Type":"application/json"}});Va.interceptors.request.use(e=>{var n;const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),console.debug(`[API] ${((n=e.method)==null?void 0:n.toUpperCase())||"GET"} ${e.baseURL}${e.url}`),e},e=>Promise.reject(e));Va.interceptors.response.use(e=>e,e=>{const t=e.config;return e.response&&e.response.status===401&&!t._retry&&(t._retry=!0,window.location.pathname.includes("/login")||window.location.pathname.includes("/register")||(console.log("Authentication expired. Redirecting to login..."),localStorage.removeItem("token"),window.location.href="/login")),Promise.reject(e)});const $_={colors:{primary:"#2563eb",primaryLight:"#3b82f6",primaryDark:"#1d4ed8",secondary:"#8b5cf6",success:"#10b981",danger:"#ef4444",warning:"#f59e0b",info:"#3b82f6",neutral:"#64748b",background:"#f1f5f9",backgroundSecondary:"#f8fafc",border:"#e2e8f0",text:{primary:"#1e293b",secondary:"#64748b",light:"#94a3b8"}},shadows:{card:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",button:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",hover:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},borderRadius:{small:"0.375rem",medium:"0.75rem",large:"1rem",xl:"1.5rem"},transitions:{fast:"all 0.2s ease",default:"all 0.3s ease",slow:"all 0.5s ease"}};let Je;try{Je=require("./index").examTheme}catch{console.warn("Failed to import examTheme from index.js, using local fallback"),Je=$_}const O_=()=>{const{examId:e}=or(),t=St(),[n,s]=h.useState(null),[i,a]=h.useState(!0),[o,l]=h.useState(null),[c,d]=h.useState(!1),[u,m]=h.useState("overview");h.useEffect(()=>{f()},[e]);const f=async()=>{try{a(!0);const k=await op(e),v={...k.data,AllowRetakes:k.data.AllowRetakes??!1,MaxRetakes:k.data.MaxRetakes??0};if(s(v),l(null),v.IsRegistered)try{const N=await Va.get(`/exams/${e}/attempts`);N.data.success&&s(C=>({...C,attempts:N.data.data.attempts,attemptsUsed:N.data.data.attemptsUsed,attemptsRemaining:N.data.data.attemptsRemaining}))}catch(N){console.warn("Could not fetch attempt history",N)}}catch(k){console.error("Error fetching exam details:",k),l("Không thể tải thông tin kỳ thi. Vui lòng thử lại sau.")}finally{a(!1)}},p=async()=>{var k,v,N,C,T;try{d(!0),await Pj(e),s({...n,IsRegistered:!0})}catch(E){console.error("Error registering for exam:",E),((k=E.response)==null?void 0:k.status)===400&&((N=(v=E.response)==null?void 0:v.data)==null?void 0:N.message)==="Already registered for this exam"?s({...n,IsRegistered:!0}):alert("Đăng ký không thành công: "+(((T=(C=E.response)==null?void 0:C.data)==null?void 0:T.message)||"Vui lòng thử lại sau."))}finally{d(!1)}},x=(k,v)=>{const N=k/v;return N<.5?{text:"Dễ",color:Je.colors.success}:N<.7?{text:"Trung bình",color:Je.colors.warning}:{text:"Khó",color:Je.colors.danger}},g=(k,v)=>{if(!k||!v)return{text:"Chưa xác định",color:Je.colors.neutral};const N=new Date,C=new Date(k),T=new Date(v);return N<C?{text:"Sắp diễn ra",color:Je.colors.info}:N>=C&&N<=T?{text:"Đang diễn ra",color:Je.colors.success}:{text:"Đã kết thúc",color:Je.colors.neutral}};if(i)return r.jsx(Ne,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",background:Je.colors.background},children:r.jsxs(jn,{elevation:0,sx:{p:5,borderRadius:4,display:"flex",flexDirection:"column",alignItems:"center",boxShadow:Je.shadows.card,backgroundColor:"#fff",width:{xs:"90%",sm:"400px"}},children:[r.jsxs(Ne,{sx:{position:"relative",width:100,height:100,mb:3},children:[r.jsx(Rn,{variant:"determinate",value:100,size:100,thickness:5,sx:{color:"rgba(22, 78, 99, 0.1)"}}),r.jsx(Rn,{size:100,thickness:5,sx:{position:"absolute",left:0,top:0,color:Je.colors.primary,animation:"rotate 1.5s linear infinite","@keyframes rotate":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}})]}),r.jsx(je,{variant:"h5",sx:{fontWeight:700,color:Je.colors.primary,mb:1},children:"Đang tải thông tin kỳ thi"}),r.jsx(je,{variant:"body1",color:"text.secondary",textAlign:"center",children:"Vui lòng đợi trong giây lát"})]})});if(o||!n)return r.jsx(Ne,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"100vh",background:Je.colors.background},children:r.jsxs(jn,{elevation:0,sx:{maxWidth:500,width:"90%",textAlign:"center",p:5,borderRadius:4,boxShadow:Je.shadows.card,backgroundColor:"#fff",position:"relative",overflow:"hidden"},children:[r.jsx(Ne,{sx:{position:"absolute",top:0,left:0,right:0,height:8,backgroundColor:Je.colors.danger}}),r.jsx(E_,{sx:{fontSize:70,color:Je.colors.danger,mb:2}}),r.jsx(je,{variant:"h5",sx:{fontWeight:700,color:Je.colors.text.primary,mb:1},children:o||"Không tìm thấy thông tin kỳ thi"}),r.jsx(je,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Không thể tải thông tin chi tiết. Vui lòng thử lại sau hoặc quay lại danh sách kỳ thi."}),r.jsxs(Po,{direction:"row",spacing:2,justifyContent:"center",children:[r.jsx(gt,{variant:"outlined",startIcon:r.jsx(k_,{}),onClick:()=>t("/exams"),sx:{px:3,py:1.2,borderRadius:3,textTransform:"none",fontWeight:600,color:Je.colors.primary,borderColor:Je.colors.primary,"&:hover":{borderColor:Je.colors.primaryLight}},children:"Quay lại danh sách"}),r.jsx(gt,{variant:"contained",onClick:f,sx:{px:3,py:1.2,borderRadius:3,textTransform:"none",fontWeight:600,backgroundColor:Je.colors.primary,"&:hover":{backgroundColor:Je.colors.primaryLight}},children:"Thử lại"})]})]})});const b=x(n.PassingScore,n.TotalPoints),w=g(n.StartTime,n.EndTime);return r.jsx(Ne,{sx:{minHeight:"100vh",background:Je.colors.background},children:r.jsxs(Ne,{sx:{px:{xs:2,md:4,lg:6},py:{xs:3,md:5}},children:[r.jsxs(Ne,{sx:{mb:4,display:"flex",alignItems:"center",color:"text.secondary",typography:"body2"},children:[r.jsx(Ve,{to:"/",style:{color:"inherit",textDecoration:"none","&:hover":{color:Je.colors.primary}},children:"Trang chủ"}),r.jsx(Ne,{component:"span",sx:{mx:1},children:"/"}),r.jsx(Ve,{to:"/exams",style:{color:"inherit",textDecoration:"none","&:hover":{color:Je.colors.primary}},children:"Kỳ thi"}),r.jsx(Ne,{component:"span",sx:{mx:1},children:"/"}),r.jsx(je,{color:"text.primary",children:n.Title})]}),r.jsx(jn,{elevation:0,sx:{background:`linear-gradient(to right, ${Je.colors.primaryDark}, ${Je.colors.primary})`,color:"white",borderRadius:4,overflow:"hidden",mb:4,boxShadow:Je.shadows.card,position:"relative"},children:r.jsx(Ne,{sx:{p:{xs:3,md:4,lg:6}},children:r.jsxs(fn,{container:!0,spacing:4,children:[r.jsx(fn,{item:!0,xs:12,md:8,children:r.jsxs(Po,{spacing:3,children:[r.jsxs(Ne,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[r.jsx(kd,{label:n.CourseName||"Khóa học",icon:r.jsx(Z5,{}),sx:{backgroundColor:"rgba(255,255,255,0.2)",color:"white","& .MuiChip-icon":{color:"white"}}}),r.jsx(kd,{label:w.text,sx:{backgroundColor:`${w.color}40`,color:"white"}}),r.jsx(kd,{label:b.text,sx:{backgroundColor:`${b.color}40`,color:"white"}})]}),r.jsx(je,{variant:"h3",sx:{fontWeight:800,fontSize:{xs:"2rem",md:"2.5rem",lg:"3rem"}},children:n.Title}),r.jsx(je,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:{xs:"1rem",md:"1.1rem"},lineHeight:1.7},children:n.Description||"Không có mô tả cho kỳ thi này."}),r.jsxs(Ne,{sx:{display:"flex",alignItems:"center",gap:4,flexWrap:"wrap"},children:[r.jsxs(Ne,{sx:{display:"flex",alignItems:"center"},children:[r.jsx(M_,{sx:{mr:1,color:"#FFD700"}}),r.jsxs(je,{children:["Điểm đạt: ",n.PassingScore,"/",n.TotalPoints]})]}),r.jsxs(Ne,{sx:{display:"flex",alignItems:"center"},children:[r.jsx(L_,{sx:{mr:1}}),r.jsxs(je,{children:[n.RegisteredCount||0," thí sinh"]})]}),r.jsxs(Ne,{sx:{display:"flex",alignItems:"center"},children:[r.jsx(Q5,{sx:{mr:1}}),r.jsxs(je,{children:[n.Duration," phút"]})]})]}),n.IsRegistered?r.jsx(gt,{component:Ve,to:`/exams/${e}/session`,variant:"contained",disabled:new Date(n.StartTime)>new Date||new Date(n.EndTime)<new Date,endIcon:r.jsx(A_,{}),sx:{alignSelf:"flex-start",px:4,py:1.5,borderRadius:3,textTransform:"none",fontWeight:600,backgroundColor:"#10B981","&:hover":{backgroundColor:"#059669",transform:"translateY(-2px)",boxShadow:Je.shadows.button},"&.Mui-disabled":{backgroundColor:"rgba(16, 185, 129, 0.4)",color:"white"}},children:new Date(n.StartTime)>new Date?"Chưa đến thời gian thi":new Date(n.EndTime)<new Date?"Kỳ thi đã kết thúc":"Vào thi ngay"}):r.jsx(gt,{variant:"contained",onClick:p,disabled:c||new Date(n.EndTime)<new Date,endIcon:c?null:r.jsx(J5,{}),sx:{alignSelf:"flex-start",px:4,py:1.5,borderRadius:3,textTransform:"none",fontWeight:600,backgroundColor:"#F59E0B","&:hover":{backgroundColor:"#D97706",transform:"translateY(-2px)",boxShadow:Je.shadows.button},"&.Mui-disabled":{backgroundColor:"rgba(245, 158, 11, 0.4)",color:"white"}},children:c?r.jsxs(r.Fragment,{children:[r.jsx(Rn,{size:20,thickness:4,sx:{color:"white",mr:1}}),"Đang đăng ký..."]}):new Date(n.EndTime)<new Date?"Kỳ thi đã kết thúc":"Đăng ký tham gia"})]})}),r.jsx(fn,{item:!0,xs:12,md:4,children:r.jsx(jn,{elevation:0,sx:{backgroundColor:"rgba(255,255,255,0.1)",backdropFilter:"blur(10px)",borderRadius:3,p:3,height:"100%",border:"1px solid rgba(255,255,255,0.2)",position:"absolute",right:{md:24,lg:48},top:{md:24,lg:48},width:{md:"300px",lg:"350px"}},children:r.jsxs(Po,{spacing:3,children:[r.jsxs(Ne,{children:[r.jsx(je,{variant:"subtitle2",sx:{color:"rgba(255,255,255,0.7)"},children:"Thời gian làm bài"}),r.jsxs(je,{variant:"h6",sx:{color:"white",fontWeight:600},children:[n.Duration," phút"]})]}),r.jsxs(Ne,{children:[r.jsx(je,{variant:"subtitle2",sx:{color:"rgba(255,255,255,0.7)"},children:"Thời gian bắt đầu"}),r.jsx(je,{variant:"h6",sx:{color:"white",fontWeight:600},children:Yr(new Date(n.StartTime),"HH:mm - dd/MM/yyyy",{locale:Qr})})]}),r.jsxs(Ne,{children:[r.jsx(je,{variant:"subtitle2",sx:{color:"rgba(255,255,255,0.7)"},children:"Thời gian kết thúc"}),r.jsx(je,{variant:"h6",sx:{color:"white",fontWeight:600},children:Yr(new Date(n.EndTime),"HH:mm - dd/MM/yyyy",{locale:Qr})})]}),r.jsxs(Ne,{children:[r.jsx(je,{variant:"subtitle2",sx:{color:"rgba(255,255,255,0.7)"},children:"Điểm đạt"}),r.jsxs(je,{variant:"h6",sx:{color:"white",fontWeight:600},children:[r.jsx(Ne,{component:"span",sx:{color:b.color},children:n.PassingScore}),"/",n.TotalPoints," (",Math.round(n.PassingScore/n.TotalPoints*100),"%)"]})]})]})})})]})})}),r.jsxs(jn,{elevation:0,sx:{borderRadius:4,overflow:"hidden",mb:4,boxShadow:Je.shadows.card},children:[r.jsx(Ne,{sx:{borderBottom:1,borderColor:"divider"},children:r.jsxs(Po,{direction:"row",children:[r.jsx(gt,{onClick:()=>m("overview"),sx:{px:4,py:2,color:u==="overview"?Je.colors.primary:"text.secondary",borderBottom:u==="overview"?2:0,borderColor:Je.colors.primary,borderRadius:0,"&:hover":{backgroundColor:"transparent"}},children:"Tổng quan"}),r.jsx(gt,{onClick:()=>m("rules"),sx:{px:4,py:2,color:u==="rules"?Je.colors.primary:"text.secondary",borderBottom:u==="rules"?2:0,borderColor:Je.colors.primary,borderRadius:0,"&:hover":{backgroundColor:"transparent"}},children:"Quy định"}),r.jsx(gt,{onClick:()=>m("info"),sx:{px:4,py:2,color:u==="info"?Je.colors.primary:"text.secondary",borderBottom:u==="info"?2:0,borderColor:Je.colors.primary,borderRadius:0,"&:hover":{backgroundColor:"transparent"}},children:"Thông tin khác"}),r.jsx(gt,{onClick:()=>m("history"),sx:{px:4,py:2,color:u==="history"?Je.colors.primary:"text.secondary",borderBottom:u==="history"?2:0,borderColor:Je.colors.primary,borderRadius:0,"&:hover":{backgroundColor:"transparent"}},children:"Lịch sử thi"})]})}),r.jsxs(Ne,{sx:{p:{xs:3,md:4,lg:6}},children:[u==="overview"&&r.jsxs(Ne,{children:[r.jsx(je,{variant:"h5",sx:{fontWeight:700,mb:4},children:"Mô tả kỳ thi"}),r.jsx(je,{variant:"body1",color:"text.secondary",sx:{mb:4,lineHeight:1.7},children:n.Description||"Không có mô tả chi tiết cho kỳ thi này."}),r.jsx(Pn,{severity:"info",sx:{mb:4,borderRadius:2,".MuiAlert-icon":{color:Je.colors.info}},children:r.jsxs(je,{variant:"body2",color:"text.primary",sx:{fontWeight:500},children:["Bạn cần đạt tối thiểu ",n.PassingScore," điểm để hoàn thành kỳ thi này."]})})]}),u==="rules"&&r.jsxs(Ne,{children:[r.jsx(je,{variant:"h5",sx:{fontWeight:700,mb:4},children:"Quy định kỳ thi"}),r.jsxs(nu,{children:[r.jsxs(Rs,{sx:{py:2},children:[r.jsx(fi,{children:r.jsx(Ia,{sx:{color:Je.colors.success}})}),r.jsx(Ls,{primary:"Làm bài trong thời gian quy định",secondary:"Bài thi sẽ tự động nộp khi hết thời gian",primaryTypographyProps:{fontWeight:600},secondaryTypographyProps:{color:"text.secondary"}})]}),r.jsxs(Rs,{sx:{py:2},children:[r.jsx(fi,{children:r.jsx(Ia,{sx:{color:Je.colors.success}})}),r.jsx(Ls,{primary:"Không tham khảo tài liệu trái phép",secondary:"Trừ khi đề bài cho phép sử dụng tài liệu",primaryTypographyProps:{fontWeight:600},secondaryTypographyProps:{color:"text.secondary"}})]}),r.jsxs(Rs,{sx:{py:2},children:[r.jsx(fi,{children:r.jsx(Ia,{sx:{color:Je.colors.success}})}),r.jsx(Ls,{primary:"Không thoát khỏi chế độ toàn màn hình",secondary:"Hệ thống có thể ghi nhận các hành vi vi phạm",primaryTypographyProps:{fontWeight:600},secondaryTypographyProps:{color:"text.secondary"}})]}),r.jsxs(Rs,{sx:{py:2},children:[r.jsx(fi,{children:r.jsx(Ia,{sx:{color:Je.colors.success}})}),r.jsx(Ls,{primary:"Lưu bài thường xuyên",secondary:"Nhấn nút lưu bài định kỳ để tránh mất dữ liệu",primaryTypographyProps:{fontWeight:600},secondaryTypographyProps:{color:"text.secondary"}})]})]})]}),u==="info"&&r.jsxs(Ne,{children:[r.jsx(je,{variant:"h5",sx:{fontWeight:700,mb:4},children:"Thông tin khác"}),r.jsxs(nu,{children:[r.jsxs(Rs,{sx:{py:2},children:[r.jsx(fi,{children:r.jsx(I_,{sx:{color:Je.colors.info}})}),r.jsx(Ls,{primary:"Số lượng câu hỏi",secondary:`${n.QuestionCount||"Chưa xác định"} câu hỏi`,primaryTypographyProps:{fontWeight:600},secondaryTypographyProps:{color:"text.secondary"}})]}),r.jsxs(Rs,{sx:{py:2},children:[r.jsx(fi,{children:r.jsx(T_,{sx:{color:Je.colors.info}})}),r.jsx(Ls,{primary:"Loại hình thi",secondary:"Trắc nghiệm trực tuyến",primaryTypographyProps:{fontWeight:600},secondaryTypographyProps:{color:"text.secondary"}})]}),n.Price&&r.jsxs(Rs,{sx:{py:2},children:[r.jsx(fi,{children:r.jsx(R_,{sx:{color:Je.colors.info}})}),r.jsx(Ls,{primary:"Phí tham gia",secondary:`${n.Price} đồng`,primaryTypographyProps:{fontWeight:600},secondaryTypographyProps:{color:"text.secondary"}})]})]})]}),u==="history"&&r.jsxs(Ne,{children:[r.jsx(je,{variant:"h5",sx:{fontWeight:700,mb:4},children:"Lịch sử thi và số lần thử"}),r.jsxs(Ne,{mb:4,children:[r.jsxs(je,{variant:"body1",sx:{mb:2},children:[r.jsx("strong",{children:"Chính sách thi lại:"})," ",n.AllowRetakes?n.MaxRetakes>0?`Được phép thi lại tối đa ${n.MaxRetakes+1} lần`:"Được phép thi lại không giới hạn số lần":"Không được phép thi lại"]}),n.attemptsUsed&&r.jsxs(je,{variant:"body1",sx:{mb:2},children:[r.jsx("strong",{children:"Số lần đã thi:"})," ",n.attemptsUsed," ",n.attemptsRemaining&&`(còn ${n.attemptsRemaining==="unlimited"?"không giới hạn":n.attemptsRemaining} lượt)`]}),n.attempts&&n.attempts.length>0?r.jsx(jn,{elevation:0,sx:{borderRadius:2,overflow:"hidden",border:"1px solid",borderColor:"divider"},children:r.jsxs(G5,{children:[r.jsx(Y5,{children:r.jsxs(ru,{children:[r.jsx(en,{children:"Lần thi"}),r.jsx(en,{children:"Thời gian"}),r.jsx(en,{children:"Điểm số"}),r.jsx(en,{children:"Trạng thái"})]})}),r.jsx(X5,{children:n.attempts.map((k,v)=>r.jsxs(ru,{children:[r.jsx(en,{children:k.AttemptNumber||n.attempts.length-v}),r.jsx(en,{children:Yr(new Date(k.StartedAt||k.CreatedAt),"dd/MM/yyyy HH:mm",{locale:Qr})}),r.jsx(en,{children:k.Score!==null&&k.Score!==void 0?`${k.Score}/${n.TotalPoints} (${Math.round(k.Score/n.TotalPoints*100)}%)`:k.score!==void 0&&k.score!==null?`${k.score}/${n.TotalPoints} (${Math.round(k.score/n.TotalPoints*100)}%)`:k.Score===void 0&&k.score===void 0&&k.score!==void 0?`${k.score}/${n.TotalPoints}`:"Chưa có điểm"}),r.jsxs(en,{children:[k.Status==="completed"&&"Đã hoàn thành",k.Status==="in_progress"&&"Đang làm bài",k.Status==="registered"&&"Đã đăng ký",k.Status==="reviewed"&&"Đã chấm điểm"]})]},k.ParticipantID))})]})}):r.jsx(Pn,{severity:"info",children:"Bạn chưa tham gia kỳ thi này"})]}),r.jsxs(Po,{direction:"row",spacing:2,children:[r.jsx(gt,{component:Ve,to:`/exams/${e}/history`,variant:"outlined",color:"primary",startIcon:r.jsx(P_,{}),children:"Xem chi tiết lịch sử thi"}),n.IsRegistered&&n.AllowRetakes&&w.text!=="Đã kết thúc"&&(n.attemptsRemaining==="unlimited"||n.attemptsRemaining>0)&&r.jsx(gt,{onClick:p,variant:"contained",color:"primary",disabled:c,startIcon:c?r.jsx(Rn,{size:20}):null,children:c?"Đang đăng ký...":"Đăng ký thi lại"})]})]})]})]})]})})},B_=e=>{const[t,n]=h.useState(!1);h.useEffect(()=>{const o=()=>{n(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)};return document.addEventListener("fullscreenchange",o),document.addEventListener("webkitfullscreenchange",o),document.addEventListener("mozfullscreenchange",o),document.addEventListener("MSFullscreenChange",o),()=>{document.removeEventListener("fullscreenchange",o),document.removeEventListener("webkitfullscreenchange",o),document.removeEventListener("mozfullscreenchange",o),document.removeEventListener("MSFullscreenChange",o)}},[]);const s=async()=>{if(e.current)try{e.current.requestFullscreen?await e.current.requestFullscreen():e.current.webkitRequestFullscreen?await e.current.webkitRequestFullscreen():e.current.mozRequestFullScreen?await e.current.mozRequestFullScreen():e.current.msRequestFullscreen&&await e.current.msRequestFullscreen()}catch(o){console.error("Error entering fullscreen:",o)}},i=async()=>{try{document.exitFullscreen?await document.exitFullscreen():document.webkitExitFullscreen?await document.webkitExitFullscreen():document.mozCancelFullScreen?await document.mozCancelFullScreen():document.msExitFullscreen&&await document.msExitFullscreen()}catch(o){console.error("Error exiting fullscreen:",o)}};return{isFullscreen:t,enterFullscreen:s,exitFullscreen:i,toggleFullscreen:async()=>{t?await i():await s()}}},__=()=>{const{examId:e}=or(),t=St(),[n,s]=h.useState(!0),[i,a]=h.useState(!1),[o,l]=h.useState(!1),[c,d]=h.useState(null),[u,m]=h.useState(null),[f,p]=h.useState(null),[x,g]=h.useState(0),[b,w]=h.useState({}),[k,v]=h.useState(null),[N,C]=h.useState(!1),[T,E]=h.useState(0),[P,R]=h.useState(!1),[y,O]=h.useState(!1),[_,L]=h.useState(null),A=h.useRef(null),M=h.useRef(null),[z,ie]=h.useState({}),X=2,te=2e3,[B,H]=h.useState(null),[K,$]=h.useState(!1),[me,ke]=h.useState(!1),[ye,se]=h.useState(!1),[G,W]=h.useState({current:0,total:0,message:"Chuẩn bị chấm điểm..."}),[Z,Y]=h.useState(0),[ee,ae]=h.useState(!1),[de,Re]=h.useState({tabSwitch:0,fullscreenExit:0}),Be=3,{isFullscreen:Ge,enterFullscreen:et,toggleFullscreen:lt}=B_(A);h.useEffect(()=>{C(Ge)},[Ge]),h.useEffect(()=>((async()=>{try{s(!0);const q=async(ze=3)=>{try{const Me=await o7();return Me.success?(L(Me.data),!0):!1}catch(Me){return ze>0?(await new Promise(Ze=>setTimeout(Ze,1e3)),q(ze-1)):(console.error("Error fetching user info:",Me),!1)}};if(!await q()){const ze=localStorage.getItem("user");if(ze)try{const Me=JSON.parse(ze);L(Me)}catch(Me){console.error("Error parsing stored user:",Me)}}const be=await op(e);if(!be.success)throw new Error(be.message||"Failed to load exam");const ge=new Map;be.data.questions.forEach(ze=>{ge.has(ze.QuestionID)||ge.set(ze.QuestionID,ze)});const oe={...be.data,questions:Array.from(ge.values())};m(oe),a(!0);const he=await ty(e);if(!he.success)throw new Error(he.message||"Failed to start exam");p(he.participantId);const fe={};be.data.questions.forEach(ze=>{fe[ze.QuestionID]=""});try{console.log("Attempting to load existing answers for participant:",he.participantId);const ze=await fetch(`/api/exams/participants/${he.participantId}/answers`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")||""}`}});if(ze.ok){const Me=await ze.json();Me&&Me.answers&&Me.answers.length>0?(console.log("Found existing answers:",Me.answers.length),Me.answers.forEach(Ze=>{Ze.QuestionID&&Ze.Answer&&(fe[Ze.QuestionID]=Ze.Answer,console.log(`Loaded answer for question ${Ze.QuestionID}`))})):console.log("No existing answers found for this participant")}else{console.warn("Could not retrieve existing answers:",ze.status);try{const Me=await fetch(`/api/participants/${he.participantId}/answers`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")||""}`}});if(Me.ok){const Ze=await Me.json();Ze&&Ze.answers&&Ze.answers.length>0&&Ze.answers.forEach(Nt=>{Nt.QuestionID&&Nt.Answer&&(fe[Nt.QuestionID]=Nt.Answer)})}}catch(Me){console.error("Alternative approach to get answers also failed:",Me)}}}catch(ze){console.error("Error loading existing answers:",ze)}w(fe),v(be.data.Duration*60)}catch(q){console.error("Error initializing exam:",q);let Q="Không thể khởi tạo kỳ thi";q.response?q.response.status===401?(Q="Vui lòng đăng nhập lại để tiếp tục",t("/login")):q.response.status===403?Q="Bạn không có quyền tham gia kỳ thi này":q.response.status===404?Q="Không tìm thấy kỳ thi hoặc bạn chưa đăng ký":q.response.data&&q.response.data.message&&(Q=q.response.data.message):q.message&&(Q=q.message),d(`${Q}. Vui lòng thử lại sau hoặc liên hệ hỗ trợ.`)}finally{s(!1),a(!1)}})(),()=>{M.current&&clearInterval(M.current)}),[e,t]),h.useEffect(()=>(k!==null&&!n&&f&&(M.current=setInterval(()=>{v(U=>U<=1?(clearInterval(M.current),V(),0):U-1)},1e3)),()=>{M.current&&clearInterval(M.current)}),[k,n,f]),h.useEffect(()=>{const U=()=>{f&&(Ge?m7(f).catch(q=>{console.error("Error logging fullscreen return:",q)}):(E(q=>q+1),h7(f).catch(q=>{console.error("Error logging fullscreen exit:",q)})))};return document.addEventListener("fullscreenchange",U),document.addEventListener("webkitfullscreenchange",U),document.addEventListener("mozfullscreenchange",U),document.addEventListener("MSFullscreenChange",U),()=>{document.removeEventListener("fullscreenchange",U),document.removeEventListener("webkitfullscreenchange",U),document.removeEventListener("mozfullscreenchange",U),document.removeEventListener("MSFullscreenChange",U)}},[f,Ge]),h.useEffect(()=>{if(u&&f&&!N&&A.current&&!n){const U=setTimeout(()=>{try{et().catch(q=>{console.error("Auto fullscreen failed:",q)})}catch(q){console.error("Auto fullscreen error:",q)}},500);return()=>clearTimeout(U)}},[u,f,N,n]),h.useEffect(()=>{const U=()=>{document.visibilityState==="visible"&&!document.fullscreenElement&&Xe()};return document.addEventListener("visibilitychange",U),()=>{document.removeEventListener("visibilitychange",U)}},[u,f]);const Xe=()=>{if(A.current)try{et()}catch(U){console.error("Error attempting fullscreen:",U)}},He=U=>{const q=Math.floor(U/3600),Q=Math.floor(U%3600/60),be=U%60;return`${q.toString().padStart(2,"0")}:${Q.toString().padStart(2,"0")}:${be.toString().padStart(2,"0")}`},Pe=async()=>{try{await lt()}catch(U){console.error("Fullscreen error:",U)}},vt=(U,q)=>{w(Q=>({...Q,[U]:q}))},Ye=async()=>{const U=u.questions[x];if(!U)return;const q=U.QuestionID,Q=`${f}_${q}`;if(z[Q]>=X){console.log(`Max retries reached for question ${q}, skipping save`);return}try{l(!0),await ny(f,q,b[q]),ie(be=>({...be,[Q]:0})),O(!0),setTimeout(()=>{O(!1)},2e3)}catch(be){console.error("Error saving answer:",be);const ge=be.message||"";!(ge.includes("CHECK constraint")||ge.includes("conflicted with the"))&&!be._isRetry?(ie(he=>({...he,[Q]:(he[Q]||0)+1})),setTimeout(()=>{be._isRetry=!0,Ye()},te)):console.error("Failed to save answer, not retrying:",be)}finally{l(!1)}},ce=U=>{Ye().then(()=>{g(U)}).catch(q=>{console.error("Error saving answer before navigation:",q),g(U)})},V=async()=>{var U,q;try{$(!0),R(!1),console.log("Starting exam submission process");const Q={tabSwitches:Z,fullscreenExits:T,totalPenaltyPercentage:de.tabSwitch*5+de.fullscreenExit*3};if(console.log("Applying penalties:",Q),W({current:0,total:(((U=u==null?void 0:u.questions)==null?void 0:U.length)||1)+1,message:"Đang chuẩn bị nộp bài thi..."}),se(!0),!u||!u.questions){console.warn("Exam data missing or incomplete, attempting to retrieve it");try{const J=await op(e);J.success&&(m(J.data),console.log("Successfully retrieved exam data"))}catch(J){console.error("Failed to retrieve exam data:",J)}}if(!f){console.warn("ParticipantID missing, attempting to retrieve it");try{const J=await ty(e);J.success&&(p(J.participantId),console.log("Successfully retrieved participantId:",J.participantId))}catch(J){console.error("Failed to retrieve participantId:",J)}}const be=f||sessionStorage.getItem("examParticipantId");try{W(Ce=>({...Ce,message:"Đang lưu tất cả các câu trả lời..."}));const J=(u==null?void 0:u.questions)||[];for(let Ce=0;Ce<J.length;Ce++){const ve=J[Ce].QuestionID,$e=b[ve];if(!$e||$e.trim()===""){console.log(`No answer to save for question ${ve}`);continue}try{await ny(be,ve,$e),console.log(`Successfully saved answer for question ${ve}`)}catch(Ue){console.warn(`Could not save answer for question ${ve}:`,Ue)}}console.log("Saved all available answers")}catch(J){console.warn("Error when saving answers before submission:",J)}W({current:0,total:(((q=u==null?void 0:u.questions)==null?void 0:q.length)||1)+1,message:"Đang nộp bài thi..."});let ge=null;try{if(await new Promise(J=>setTimeout(J,500)),W(J=>({...J,message:"Đang gửi bài thi lên hệ thống..."})),be){if(ge=await ry(be,e,{tabSwitches:Z,fullscreenExits:T,penaltyPercentage:de.tabSwitch*5+de.fullscreenExit*3}),console.log("Exam completed successfully:",ge),ge&&ge.evaluationDetails){const J=u.questions.map((pt,nn)=>{const Ct=ge.evaluationDetails.find(ua=>ua.questionId.toString()===pt.QuestionID.toString());return{question:pt.Content,answer:b[pt.QuestionID]||"",score:Ct?Ct.score:0,feedback:(Ct==null?void 0:Ct.status)==="success"?"Câu trả lời được chấm bởi AI.":(Ct==null?void 0:Ct.status)==="fallback_used"?"Câu trả lời được chấm bằng phương pháp thay thế.":(Ct==null?void 0:Ct.status)==="no_answer"?"Không có câu trả lời.":"Không thể chấm điểm câu này.",similarity:Math.round((Ct==null?void 0:Ct.score)/(Ct==null?void 0:Ct.maxPoints)*100)||0}}),Ce=J.reduce((pt,nn)=>pt+nn.score,0),ne=de.tabSwitch*5+de.fullscreenExit*3,ve=Math.max(0,(100-ne)/100),$e=Ce*ve;console.log(`Original score: ${Ce}, Penalty: ${ne}%, Final score: ${$e}`),W(pt=>({...pt,current:pt.total,message:"Đã hoàn thành chấm điểm."})),await new Promise(pt=>setTimeout(pt,1e3)),H({total:$e,originalScore:Ce,penaltyApplied:ne>0,penaltyPercentage:ne,feedbacks:J}),se(!1),ke(!0);let Ue=null;ge&&ge.redirectTo?Ue=ge.redirectTo:be&&(Ue=`/exams/results/${be}`),I(be,Ue),console.log("Skipping manual grading since server already provided scores");return}}else throw console.error("No participantId available for exam completion"),new Error("Thiếu ID người tham gia");W(J=>({...J,current:1,message:"Đã nộp bài thi thành công. Bắt đầu chấm điểm..."})),await new Promise(J=>setTimeout(J,1e3))}catch(J){console.error("Error completing exam:",J),W(Ce=>({...Ce,message:"Lưu ý: Có lỗi khi nộp bài thi, nhưng vẫn tiếp tục chấm điểm..."})),await new Promise(Ce=>setTimeout(Ce,1e3))}let oe=0,he=[];const fe=(u==null?void 0:u.questions)||[];W(J=>({...J,message:"Hệ thống đang so sánh bài làm với đáp án mẫu. Vui lòng chờ..."})),await new Promise(J=>setTimeout(J,1e3));const ze=fe.map(async(J,Ce)=>{try{const ne=b[J.QuestionID]||"";W(ve=>({...ve,current:Ce+1,message:`Đang chấm điểm câu ${Ce+1}/${fe.length}...`})),console.log(`Grading question ${J.QuestionID} with answer length: ${ne.length}`);try{const ve=await g7(e,J.QuestionID,ne,be);if(!ve.success)throw console.error(`Error grading question ${J.QuestionID}:`,ve.message),new Error(ve.message||"Lỗi khi chấm điểm câu hỏi");return console.log(`Question ${J.QuestionID} graded with score: ${ve.data.score}`),{question:J.Content,answer:ne,score:ve.data.score,feedback:ve.data.feedback||"Hệ thống đã phân tích nội dung dựa trên phương pháp so sánh với đáp án mẫu.",similarity:ve.data.similarity}}catch(ve){console.error("Error grading via API, using fallback method:",ve);const $e=sy(ne,J.CorrectAnswer||"",(()=>{try{return Array.isArray(J.Keywords)?J.Keywords:typeof J.Keywords=="string"?JSON.parse(J.Keywords):[]}catch{return[]}})()),Ue=Number(J.Points||10),pt=Number(($e.totalSimilarity/100*Ue).toFixed(2));return{question:J.Content,answer:ne,score:pt,feedback:"Điểm tạm tính dựa trên so sánh nội dung khi hệ thống gặp sự cố.",similarity:$e.totalSimilarity}}}catch(ne){return console.error(`Error processing question ${J==null?void 0:J.QuestionID}:`,ne),{question:(J==null?void 0:J.Content)||`Câu hỏi ${Ce+1}`,answer:b[J==null?void 0:J.QuestionID]||"",score:0,feedback:"Lỗi khi chấm điểm câu hỏi này",similarity:0}}});try{he=await Promise.all(ze),oe=he.reduce((J,Ce)=>J+Ce.score,0)}catch(J){console.error("Error during parallel grading:",J)}W(J=>({...J,current:J.total,message:"Đã hoàn thành chấm điểm."})),await new Promise(J=>setTimeout(J,1e3));const Me=de.tabSwitch*5+de.fullscreenExit*3,Ze=Math.max(0,(100-Me)/100),Nt=oe*Ze;console.log(`Original score: ${oe}, Penalty: ${Me}%, Final score: ${Nt}`),H({total:Nt,originalScore:oe,penaltyApplied:Me>0,penaltyPercentage:Me,feedbacks:he});try{await ry(be,e,{tabSwitches:Z,fullscreenExits:T,penaltyPercentage:Me,finalScore:Nt,originalScore:oe,feedbacks:he.map(J=>{var Ce;return{questionId:(Ce=u.questions[he.indexOf(J)])==null?void 0:Ce.QuestionID,score:J.score,similarity:J.similarity}})}),console.log(`Final score ${Nt} successfully submitted to server`)}catch(J){console.error("Error submitting final score to server:",J)}se(!1),ke(!0);let Xt=null;ge&&ge.redirectTo?Xt=ge.redirectTo:be&&(Xt=`/exams/results/${be}`),I(be,Xt)}catch(Q){console.error("Error submitting exam:",Q);let be="Lỗi khi nộp bài thi. Hệ thống vẫn sẽ cố gắng hoàn thành quá trình.";if(Q.response&&Q.response.data&&Q.response.data.message?be=Q.response.data.message:Q.message&&(be=Q.message),re.error(be,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),!me){const ge=(u==null?void 0:u.questions)||[];if(ge.length>0){const oe=ge.map((fe,ze)=>{const Me=sy(b[fe.QuestionID]||"",fe.CorrectAnswer||"",(()=>{try{return Array.isArray(fe.Keywords)?fe.Keywords:typeof fe.Keywords=="string"?JSON.parse(fe.Keywords):[]}catch{return[]}})()),Ze=Number(fe.Points||10),Nt=Number((Me.totalSimilarity/100*Ze).toFixed(2));return{question:fe.Content||`Câu hỏi ${ze+1}`,answer:b[fe.QuestionID]||"",score:Nt,feedback:"Điểm tạm tính dựa trên so sánh nội dung khi hệ thống gặp sự cố.",similarity:Me.totalSimilarity}}),he=oe.reduce((fe,ze)=>fe+ze.score,0)/oe.length;H({total:he,originalScore:he,penaltyApplied:!1,penaltyPercentage:0,feedbacks:oe}),se(!1),ke(!0)}}}finally{setTimeout(()=>{$(!1),ye&&se(!1)},3e3)}},I=(U,q)=>{console.log("Setting up 30-second timer to exit fullscreen mode");const Q=setTimeout(()=>{if(console.log("30 seconds elapsed after grading, exiting fullscreen mode"),N&&document.exitFullscreen)try{document.exitFullscreen().then(()=>{console.log("Successfully exited fullscreen mode after grading"),C(!1)}).catch(be=>{console.error("Error exiting fullscreen mode after grading:",be)})}catch(be){console.error("Error with fullscreen exit after grading:",be)}},3e4);M.current=Q};h.useEffect(()=>{if(!f)return;const U=async()=>{if(document.visibilityState==="hidden"){Y(Q=>Q+1),Re(Q=>({...Q,tabSwitch:Q.tabSwitch+1}));try{await fetch("/api/exams/monitoring-logs",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")||""}`},body:JSON.stringify({participantId:f,eventType:"tab_switch",eventData:JSON.stringify({count:Z+1,timestamp:new Date().toISOString()})})})}catch(Q){console.error("Failed to log tab switch:",Q)}ae(!0),Z+1>=Be&&!K&&(re.error("Quá nhiều lần chuyển tab/cửa sổ. Bài thi sẽ tự động nộp sau 30 giây!",{position:"top-center",autoClose:!1,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1}),setTimeout(()=>{K||V()},3e4))}else document.visibilityState==="visible"&&!document.fullscreenElement&&Xe()},q=async()=>{Y(Q=>Q+1),Re(Q=>({...Q,tabSwitch:Q.tabSwitch+1}));try{await fetch("/api/exams/monitoring-logs",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")||""}`},body:JSON.stringify({participantId:f,eventType:"window_blur",eventData:JSON.stringify({count:Z+1,timestamp:new Date().toISOString()})})})}catch(Q){console.error("Failed to log window blur:",Q)}ae(!0),Z+1>=Be&&!K&&(re.error("Quá nhiều lần chuyển ứng dụng. Bài thi sẽ tự động nộp sau 30 giây!",{position:"top-center",autoClose:!1,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1}),setTimeout(()=>{K||V()},3e4))};return document.addEventListener("visibilitychange",U),window.addEventListener("blur",q),()=>{document.removeEventListener("visibilitychange",U),window.removeEventListener("blur",q)}},[f,Z,K]);const j=()=>{var U,q,Q;return r.jsxs(Ne,{sx:{display:me?"flex":"none",position:"fixed",top:0,left:0,width:"100%",height:"100vh",zIndex:9999,flexDirection:"column",backgroundColor:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(8px)",overflow:"auto"},children:[r.jsxs(Ne,{sx:{bgcolor:"primary.main",color:"white",p:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx(je,{variant:"h5",children:"Kết quả bài thi"}),r.jsx(O5,{onClick:()=>{if(N&&document.exitFullscreen)try{document.exitFullscreen()}catch{}f?t(`/exams/results/${f}`):ke(!1)},sx:{color:"white"},children:r.jsx(Ip,{})})]}),r.jsx(Ne,{sx:{p:4,flexGrow:1,overflow:"auto"},children:r.jsxs(Ne,{sx:{mt:2},children:[r.jsxs(je,{variant:"h6",gutterBottom:!0,children:["Tổng điểm: ",B!=null&&B.total?B.total.toFixed(1):"0","/10"]}),(B==null?void 0:B.penaltyApplied)&&r.jsxs(Ne,{sx:{mt:1,mb:3,p:2,bgcolor:"error.light",borderRadius:1,color:"error.contrastText"},children:[r.jsx(je,{variant:"subtitle2",gutterBottom:!0,children:r.jsx("strong",{children:"Điểm bị trừ do vi phạm quy định làm bài:"})}),r.jsxs(Ne,{component:"ul",sx:{ml:2,mt:1},children:[(de==null?void 0:de.tabSwitch)>0&&r.jsxs(je,{component:"li",variant:"body2",children:["Chuyển tab/ứng dụng: ",de.tabSwitch," lần (-",de.tabSwitch*5,"%)"]}),(de==null?void 0:de.fullscreenExit)>0&&r.jsxs(je,{component:"li",variant:"body2",children:["Thoát toàn màn hình: ",de.fullscreenExit," lần (-",de.fullscreenExit*3,"%)"]}),r.jsxs(je,{component:"li",variant:"body2",sx:{fontWeight:"bold",mt:1},children:["Tổng điểm bị trừ: ",B.penaltyPercentage,"%"]}),r.jsxs(je,{component:"li",variant:"body2",sx:{mt:1},children:["Điểm gốc: ",((U=B.originalScore)==null?void 0:U.toFixed(1))||"0","/10"]}),r.jsxs(je,{component:"li",variant:"body2",children:["Điểm sau khi trừ: ",((q=B.total)==null?void 0:q.toFixed(1))||"0","/10"]})]})]}),r.jsxs(Ne,{sx:{mt:3},children:[r.jsxs(je,{variant:"subtitle1",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:["Chi tiết từng câu:",r.jsx(Ne,{sx:{ml:1,px:1.5,py:.5,bgcolor:"#e3f2fd",borderRadius:1,fontSize:"0.875rem",color:"#1976d2"},children:"Độ tương đồng với đáp án mẫu được tính bằng so sánh nội dung và từ khóa"})]}),(Q=B==null?void 0:B.feedbacks)==null?void 0:Q.map((be,ge)=>{var oe;return r.jsxs(jn,{sx:{p:2,mb:2},children:[r.jsxs(je,{variant:"subtitle2",gutterBottom:!0,children:["Câu ",ge+1,": ",((oe=be==null?void 0:be.score)==null?void 0:oe.toFixed(1))||"0"," điểm"]}),r.jsxs(Ne,{sx:{display:"flex",alignItems:"center",mt:1,mb:1,bgcolor:"#f5f5f5",p:1.5,borderRadius:1,border:"1px solid",borderColor:"divider"},children:[r.jsx(je,{variant:"body2",color:"text.secondary",sx:{mr:1,minWidth:"180px"},children:r.jsx("strong",{children:"Độ tương đồng với đáp án:"})}),r.jsxs(Ne,{sx:{flexGrow:1,display:"flex",alignItems:"center"},children:[r.jsx(Ne,{sx:{width:"100%",bgcolor:"#e0e0e0",height:12,borderRadius:5,overflow:"hidden",mr:1},children:r.jsx(Ne,{sx:{width:`${Number(be.similarity||0).toFixed(1)}%`,bgcolor:Number(be.similarity||0)>70?"success.main":Number(be.similarity||0)>40?"warning.main":"error.main",height:"100%",borderRadius:5}})}),r.jsxs(je,{variant:"body2",sx:{fontSize:"1.1rem",color:Number(be.similarity||0)>70?"success.main":Number(be.similarity||0)>40?"warning.main":"error.main",fontWeight:"bold",minWidth:"60px",textAlign:"right"},children:[Number(be.similarity||0).toFixed(1),"%"]})]})]}),r.jsxs(je,{variant:"body2",sx:{mt:1},children:[r.jsx("strong",{children:"Nhận xét:"})," ",be.feedback||"Không có nhận xét"]})]},ge)})]})]})}),r.jsx(Ne,{sx:{p:2,display:"flex",justifyContent:"center",borderTop:"1px solid",borderColor:"divider"},children:r.jsx(gt,{onClick:()=>{if(N&&document.exitFullscreen)try{document.exitFullscreen()}catch{}f?t(`/exams/results/${f}`):ke(!1)},variant:"contained",color:"primary",size:"large",sx:{minWidth:"200px"},children:"Đóng"})})]})},S=()=>r.jsx(Ne,{sx:{display:ye?"flex":"none",position:"fixed",top:0,left:0,width:"100%",height:"100vh",zIndex:9999,flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)"},children:r.jsxs(jn,{elevation:4,sx:{width:"90%",maxWidth:"600px",overflow:"hidden",borderRadius:2},children:[r.jsx(Ne,{sx:{bgcolor:"primary.main",color:"white",p:2},children:r.jsx(je,{variant:"h5",children:"Đang chấm điểm bài thi"})}),r.jsxs(Ne,{sx:{p:4,minHeight:"350px"},children:[r.jsx(Ne,{sx:{textAlign:"center",mb:3},children:r.jsx(Rn,{size:80,thickness:5})}),r.jsx(je,{variant:"h5",gutterBottom:!0,align:"center",sx:{fontWeight:"bold",mb:2},children:"Vui lòng chờ trong ít phút"}),r.jsx(je,{variant:"body1",align:"center",sx:{mb:3},children:"Hệ thống đang chấm điểm bài thi của bạn bằng cách so sánh với đáp án mẫu. Quá trình này có thể mất vài phút."}),r.jsxs(Ne,{sx:{width:"100%",bgcolor:"background.paper",borderRadius:1,p:2,border:"1px solid",borderColor:"divider"},children:[r.jsxs(Ne,{sx:{display:"flex",alignItems:"center"},children:[r.jsx(Ne,{sx:{width:6,height:6,borderRadius:"50%",bgcolor:"success.main",mr:1,animation:"pulse 1.5s infinite","@keyframes pulse":{"0%":{opacity:.5,transform:"scale(0.8)"},"50%":{opacity:1,transform:"scale(1.2)"},"100%":{opacity:.5,transform:"scale(0.8)"}}}}),r.jsx(je,{variant:"body2",sx:{mb:1,fontWeight:"medium"},children:G.message})]}),G.total>0&&r.jsxs(r.Fragment,{children:[r.jsx(Ne,{sx:{width:"100%",bgcolor:"#e0e0e0",height:10,borderRadius:5,mt:2,overflow:"hidden"},children:r.jsx(Ne,{sx:{width:`${G.current/G.total*100}%`,bgcolor:"primary.main",height:"100%",borderRadius:5,transition:"width 0.5s ease-in-out"}})}),r.jsxs(Ne,{sx:{display:"flex",justifyContent:"space-between",mt:.5},children:[r.jsx(je,{variant:"body2",color:"text.secondary",children:`Câu ${G.current}/${G.total-1}`}),r.jsxs(je,{variant:"body2",color:"text.secondary",children:[Math.round(G.current/G.total*100),"%"]})]})]})]}),r.jsx(Ne,{sx:{mt:3,p:2,bgcolor:"#f5f5f5",borderRadius:1},children:r.jsx(je,{variant:"body2",align:"center",sx:{fontStyle:"italic",color:"text.secondary"},children:"Hệ thống đang so sánh câu trả lời của bạn với các đáp án trong cơ sở dữ liệu, kiểm tra từ khóa quan trọng và tính toán độ tương đồng để đưa ra điểm số chính xác."})}),r.jsxs(Ne,{sx:{mt:3,p:2,bgcolor:"#e3f2fd",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center"},children:[r.jsx(bb,{sx:{color:"#2196f3",mr:1}}),r.jsx(je,{variant:"body2",sx:{color:"#2196f3",fontWeight:"medium"},children:"Hệ thống sẽ tự động chuyển sang trang kết quả khi chấm điểm xong"})]})]})]})});if(n)return r.jsxs(Ne,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:[r.jsx(Rn,{}),r.jsx(je,{sx:{ml:2},children:i?"Đang bắt đầu kỳ thi...":"Đang tải..."})]});if(c)return r.jsxs(Ne,{sx:{mt:4,maxWidth:600,mx:"auto"},children:[r.jsxs(Pn,{severity:"error",children:[r.jsx(ls,{children:"Lỗi"}),c]}),r.jsx(gt,{variant:"outlined",color:"primary",onClick:()=>t("/exams"),sx:{mt:2},children:"Quay lại danh sách kỳ thi"})]});if(!u||!f)return r.jsxs(Ne,{sx:{mt:4,maxWidth:600,mx:"auto"},children:[r.jsxs(Pn,{severity:"warning",children:[r.jsx(ls,{children:"Không tìm thấy"}),"Không tìm thấy thông tin kỳ thi hoặc bạn chưa đăng ký."]}),r.jsx(gt,{variant:"outlined",color:"primary",onClick:()=>t("/exams"),sx:{mt:2},children:"Quay lại danh sách kỳ thi"})]});const F=u.questions[x];return r.jsxs(Ne,{ref:A,sx:{minHeight:"100vh",bgcolor:N?"#f5f5f5":"inherit",p:N?1.5:2,display:"flex",flexDirection:"column",maxHeight:N?"100vh":"inherit",overflow:N?"hidden":"visible"},children:[!N&&!K&&r.jsxs(Pn,{severity:"warning",sx:{mb:3},children:[r.jsx(ls,{children:"Vui lòng vào chế độ toàn màn hình"}),"Hệ thống đã cố gắng chuyển sang chế độ toàn màn hình nhưng có thể đã bị trình duyệt chặn. Để tiếp tục làm bài thi, vui lòng nhấn nút bên dưới để vào chế độ toàn màn hình.",r.jsx(gt,{variant:"contained",startIcon:r.jsx(Om,{}),onClick:Xe,sx:{mt:1},children:"Vào chế độ toàn màn hình"})]}),ee&&Z>0&&!K&&r.jsxs(Pn,{severity:"error",sx:{mb:3},children:[r.jsx(ls,{children:"Cảnh báo nghiêm trọng!"}),"Bạn đã chuyển tab/ứng dụng ",Z," lần. Mỗi lần chuyển tab sẽ bị trừ 5% tổng điểm.",Z>=Be-1&&r.jsx(je,{variant:"body2",sx:{mt:1,fontWeight:"bold"},children:"Nếu bạn chuyển tab thêm lần nữa, bài thi sẽ tự động nộp với điểm số thấp!"})]}),T>0&&!K&&r.jsxs(Pn,{severity:"error",sx:{mb:3},children:[r.jsx(ls,{children:"Cảnh báo!"}),"Bạn đã thoát chế độ toàn màn hình ",T," lần. Mỗi lần thoát chế độ toàn màn hình sẽ bị trừ 3% tổng điểm."]}),r.jsx(jn,{elevation:3,sx:{p:2,mb:2,borderRadius:N?1:2},children:r.jsxs(fn,{container:!0,spacing:2,alignItems:"center",children:[r.jsxs(fn,{item:!0,xs:12,md:8,children:[r.jsx(je,{variant:"h5",sx:{fontWeight:"medium"},children:u.Title}),r.jsx(je,{variant:"body2",color:"text.secondary",children:u.Description})]}),r.jsxs(fn,{item:!0,xs:12,md:4,sx:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[r.jsxs(Ne,{sx:{display:"flex",alignItems:"center",p:1,bgcolor:k<300?"error.light":k<600?"warning.light":"primary.light",color:"white",borderRadius:1,mb:1,position:"fixed",top:16,right:16,zIndex:1e3},children:[r.jsx(ek,{sx:{mr:1}}),r.jsx(je,{variant:"h6",children:He(k)})]}),r.jsx(Ne,{sx:{display:"flex",alignItems:"center"},children:r.jsx(gt,{variant:"outlined",size:"small",startIcon:N?r.jsx(bb,{}):r.jsx(Om,{}),onClick:Pe,children:N?"Thoát":"Toàn màn hình"})})]})]})}),r.jsxs(Ne,{sx:{display:"flex",flexGrow:1,flexDirection:{xs:"column",md:"row"},height:N?"calc(100vh - 130px)":"inherit",overflow:"hidden"},children:[r.jsxs(Ne,{sx:{width:{xs:"100%",md:"25%"},pr:{xs:0,md:2},mb:{xs:2,md:0},display:"flex",flexDirection:"column",height:N?"100%":"inherit",overflow:"hidden"},children:[r.jsxs(jn,{elevation:3,sx:{p:2,mb:2,flexGrow:0,display:"flex",flexDirection:"column",overflow:"hidden",maxHeight:N?"240px":"260px",minHeight:"220px",borderRadius:N?1:2},children:[r.jsx(je,{variant:"subtitle1",sx:{mb:1,fontWeight:"medium"},children:"Danh sách câu hỏi"}),r.jsx(us,{sx:{mb:1}}),r.jsx(Ne,{sx:{overflow:"auto",flexGrow:1},children:r.jsx(nu,{dense:!0,children:u.questions.map((U,q)=>r.jsx(Rs,{disablePadding:!0,children:r.jsx(tB,{selected:x===q,onClick:()=>ce(q),sx:{borderRadius:1,mb:.5,py:.5,bgcolor:b[U.QuestionID]?"rgba(76, 175, 80, 0.1)":"inherit",border:b[U.QuestionID]?"1px solid #4caf50":"none","&.Mui-selected":{bgcolor:"primary.light",color:"white","&:hover":{bgcolor:"primary.main"}}},children:r.jsx(Ls,{primary:`Câu ${q+1}`,secondary:`${b[U.QuestionID]?"Đã trả lời":"Chưa trả lời"}`,primaryTypographyProps:{fontWeight:x===q?"bold":"normal",fontSize:"0.9rem"},secondaryTypographyProps:{color:x===q?"inherit":b[U.QuestionID]?"success.main":"error.main",fontSize:"0.75rem"}})})},U.QuestionID))})})]}),r.jsxs(jn,{elevation:3,sx:{p:2,mb:2,flexGrow:1,display:"flex",flexDirection:"column",maxHeight:N?"calc(100% - 250px)":"300px",overflow:"auto",borderRadius:N?1:2},children:[r.jsx(je,{variant:"subtitle1",sx:{mb:1,fontWeight:"medium"},children:"Thông tin kỳ thi"}),r.jsx(us,{sx:{mb:1}}),_&&r.jsxs(Ne,{sx:{mb:1.5,p:1.5,bgcolor:"background.paper",borderRadius:1,border:"1px solid",borderColor:"primary.light",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:[r.jsx(je,{variant:"subtitle2",sx:{mb:1,fontWeight:"medium",color:"primary.main"},children:"Thông tin thí sinh"}),r.jsxs(fn,{container:!0,spacing:2,children:[r.jsx(fn,{item:!0,xs:12,sm:6,children:r.jsxs(Ne,{sx:{display:"flex",flexDirection:"column",p:1,bgcolor:"background.default",borderRadius:1},children:[r.jsx(je,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Họ và tên"}),r.jsx(je,{variant:"body1",sx:{fontWeight:"medium"},children:_.fullName||_.FullName||_.username||_.Username||_.name||"Không có thông tin"})]})}),r.jsx(fn,{item:!0,xs:12,sm:6,children:r.jsxs(Ne,{sx:{display:"flex",flexDirection:"column",p:1,bgcolor:"background.default",borderRadius:1},children:[r.jsx(je,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Mã số"}),r.jsx(je,{variant:"body1",sx:{fontWeight:"medium"},children:_.id||_.UserID||_.userId||_.studentId||f||"Không có thông tin"})]})})]})]}),r.jsxs(je,{variant:"body2",sx:{mb:1},children:[r.jsx("strong",{children:"Thời gian:"})," ",u.Duration," phút"]}),r.jsxs(je,{variant:"body2",sx:{mb:1},children:[r.jsx("strong",{children:"Tổng số câu hỏi:"})," ",u.questions.length]}),r.jsxs(je,{variant:"body2",sx:{mb:1},children:[r.jsx("strong",{children:"Điểm đạt:"})," ",u.PassingScore,"/",u.TotalPoints]}),r.jsxs(je,{variant:"body2",sx:{mb:1},children:[r.jsx("strong",{children:"Loại kỳ thi:"})," ",u.Type==="essay"?"Tự luận":u.Type==="multiple_choice"?"Trắc nghiệm":u.Type]}),u.Instructions&&r.jsxs(r.Fragment,{children:[r.jsx(je,{variant:"subtitle2",sx:{mt:2,mb:1},children:"Hướng dẫn làm bài:"}),r.jsx(je,{variant:"body2",sx:{whiteSpace:"pre-line"},children:u.Instructions})]})]}),N&&r.jsx(gt,{variant:"contained",color:"error",startIcon:r.jsx(D_,{}),onClick:async()=>{l(!0);try{await Ye()}catch(U){console.warn("Error saving current answer before submission:",U)}await V()},size:"large",fullWidth:!0,disabled:o||K,sx:{py:1.5,borderRadius:1,backgroundColor:"error.main","&:hover":{backgroundColor:"error.dark"},"&:active":{transform:"scale(0.98)",boxShadow:1},fontWeight:"bold",boxShadow:3,transition:"all 0.2s ease",position:"relative",overflow:"hidden","&::after":o?{content:'""',position:"absolute",left:0,top:0,width:"100%",height:"100%",backgroundImage:"linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent)",animation:"ripple 1.5s infinite"}:{},"@keyframes ripple":{"0%":{transform:"translateX(-100%)"},"100%":{transform:"translateX(100%)"}}},children:o?r.jsxs(r.Fragment,{children:[r.jsx(Rn,{size:16,color:"inherit",sx:{mr:1}}),"Đang xử lý..."]}):"Nộp bài"})]}),r.jsx(Ne,{sx:{width:{xs:"100%",md:"75%"},height:N?"100%":"inherit",display:"flex"},children:r.jsx(jn,{elevation:3,sx:{p:3,width:"100%",display:"flex",flexDirection:"column",overflow:"hidden",borderRadius:N?1:2},children:N?r.jsxs(r.Fragment,{children:[r.jsxs(je,{variant:"subtitle1",sx:{mb:1,fontWeight:"bold"},children:["Câu hỏi ",x+1,"/",u.questions.length]}),r.jsx(us,{sx:{mb:2}}),r.jsx(Ne,{sx:{mb:3,overflow:"auto",maxHeight:N?"20vh":"180px"},children:r.jsx(je,{variant:"body1",sx:{whiteSpace:"pre-line"},children:(F==null?void 0:F.Content)||"Không có nội dung câu hỏi"})}),r.jsx(je,{variant:"subtitle2",sx:{mb:1},children:"Câu trả lời của bạn:"}),r.jsx(Ne,{sx:{flexGrow:1,display:"flex",flexDirection:"column",minHeight:N?"calc(65vh - 100px)":"400px",mb:2},children:r.jsx(j_,{fullWidth:!0,multiline:!0,rows:N?16:12,variant:"outlined",placeholder:"Nhập câu trả lời của bạn tại đây...",value:b[F==null?void 0:F.QuestionID]||"",onChange:U=>vt(F==null?void 0:F.QuestionID,U.target.value),disabled:o,sx:{flexGrow:1,height:"100%","& .MuiOutlinedInput-root":{height:"100%","& textarea":{height:"100% !important"},"& fieldset":{borderColor:x===0?"primary.light":"inherit"},"&:hover fieldset":{borderColor:"primary.main"}}}})}),r.jsxs(Ne,{sx:{display:"flex",justifyContent:"space-between",mt:"auto"},children:[r.jsx(gt,{variant:"outlined",onClick:()=>ce(Math.max(0,x-1)),disabled:x===0||o,sx:{borderRadius:1},children:"Câu trước"}),r.jsxs(Ne,{sx:{display:"flex",alignItems:"center"},children:[r.jsx(gt,{variant:"contained",color:y?"success":"primary",onClick:Ye,disabled:o,startIcon:o?r.jsx(Rn,{size:20}):y?r.jsx(C_,{}):null,sx:{borderRadius:1},children:o?"Đang lưu...":y?"Đã lưu":"Lưu câu trả lời"}),y&&r.jsx(je,{variant:"caption",sx:{ml:1,color:"success.main",animation:"fadeIn 0.3s ease-in","@keyframes fadeIn":{"0%":{opacity:0},"100%":{opacity:1}}},children:"Đã lưu"})]}),r.jsx(gt,{variant:"outlined",onClick:()=>ce(Math.min(u.questions.length-1,x+1)),disabled:x===u.questions.length-1||o,sx:{borderRadius:1},children:"Câu tiếp theo"})]})]}):r.jsxs(Ne,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",p:4},children:[r.jsx(je,{variant:"h6",sx:{mb:3,textAlign:"center"},children:"Nội dung câu hỏi và ô nhập câu trả lời chỉ hiển thị trong chế độ toàn màn hình"}),r.jsx(gt,{variant:"contained",startIcon:r.jsx(Om,{}),onClick:Xe,size:"large",children:"Vào chế độ toàn màn hình để làm bài"})]})})})]}),r.jsx(j,{}),r.jsx(S,{})]})},F_=()=>{const{participantId:e}=or(),t=St(),[n,s]=h.useState(!0),[i,a]=h.useState(null),[o,l]=h.useState(null);if(h.useEffect(()=>{(async()=>{try{s(!0);const w=await f7(e);if(!w.success)throw new Error(w.message||"Failed to load results");l(w.data),a(null)}catch(w){console.error("Error fetching exam results:",w),a("Không thể tải kết quả kỳ thi. Vui lòng thử lại sau.")}finally{s(!1)}})()},[e]),n)return r.jsxs(Ne,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:[r.jsx(Rn,{}),r.jsx(je,{sx:{ml:2},children:"Đang tải kết quả..."})]});if(i)return r.jsxs(Ne,{sx:{mt:4,maxWidth:600,mx:"auto"},children:[r.jsxs(Pn,{severity:"error",children:[r.jsx(ls,{children:"Lỗi"}),i]}),r.jsx(gt,{variant:"outlined",color:"primary",onClick:()=>t("/exams"),sx:{mt:2},children:"Quay lại danh sách kỳ thi"})]});if(!o)return r.jsxs(Ne,{sx:{mt:4,maxWidth:600,mx:"auto"},children:[r.jsxs(Pn,{severity:"warning",children:[r.jsx(ls,{children:"Không tìm thấy"}),"Không tìm thấy kết quả bài thi."]}),r.jsx(gt,{variant:"outlined",color:"primary",onClick:()=>t("/exams"),sx:{mt:2},children:"Quay lại danh sách kỳ thi"})]});const{participant:c,answers:d=[]}=o,u=new Map;d.forEach(b=>{b&&b.QuestionID&&(u.has(b.QuestionID)||u.set(b.QuestionID,b))});const m=Array.from(u.values()),f=10,p=c.PassingScore/100*f,x=c.Score>=p,g=b=>{if(!b)return"N/A";const w=Math.floor(b/60),k=b%60;return w===0?`${k} phút`:`${w} giờ ${k} phút`};return r.jsxs(Ne,{sx:{mt:4,mb:8,px:{xs:2,md:5},width:"100%",maxWidth:{lg:"1400px",xl:"1800px"},mx:"auto"},children:[r.jsxs(jn,{elevation:3,sx:{p:3,mb:4,position:"relative",overflow:"hidden"},children:[r.jsx(Ne,{sx:{position:"absolute",top:0,right:0,width:"30%",height:"100%",background:x?"linear-gradient(135deg, transparent, rgba(76, 175, 80, 0.1))":"linear-gradient(135deg, transparent, rgba(244, 67, 54, 0.1))",zIndex:0}}),r.jsxs(fn,{container:!0,spacing:3,sx:{position:"relative",zIndex:1},children:[r.jsxs(fn,{item:!0,xs:12,md:8,children:[r.jsx(je,{variant:"h4",gutterBottom:!0,children:"Kết quả bài thi"}),r.jsx(je,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:c.ExamTitle}),r.jsxs(Ne,{sx:{display:"flex",alignItems:"center",mt:2},children:[r.jsx(kd,{icon:x?r.jsx(Ia,{}):r.jsx(Ip,{}),label:x?"Đạt":"Chưa đạt",color:x?"success":"error",sx:{mr:2}}),r.jsxs(je,{variant:"body2",color:"text.secondary",children:["Hoàn thành vào: ",c.CompletedAt?Yr(new Date(c.CompletedAt),"HH:mm - dd/MM/yyyy",{locale:Qr}):"N/A"]})]})]}),r.jsx(fn,{item:!0,xs:12,md:4,children:r.jsxs(Ne,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"},children:[r.jsxs(Ne,{sx:{position:"relative",display:"inline-flex"},children:[r.jsx(Rn,{variant:"determinate",value:c.Score/f*100,size:120,thickness:5,sx:{color:c.Score/f*100>=80?"success.main":c.Score/f*100>=60?"primary.main":"error.main"}}),r.jsx(Ne,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsxs(je,{variant:"h4",component:"div",color:"text.secondary",children:[c.Score,"/",f]})})]}),r.jsxs(je,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["Điểm đạt: ",p.toFixed(1),"/",f]})]})})]})]}),r.jsxs(fn,{container:!0,spacing:{xs:2,md:4},children:[r.jsxs(fn,{item:!0,xs:12,md:5,lg:4,children:[r.jsx(wp,{sx:{mb:3},children:r.jsxs(jp,{children:[r.jsx(je,{variant:"h6",gutterBottom:!0,children:"Thông tin bài thi"}),r.jsx(us,{sx:{mb:2}}),r.jsxs(Ne,{sx:{"& > div":{mb:1.5}},children:[r.jsxs(Ne,{sx:{display:"flex",alignItems:"center"},children:[r.jsx(ek,{sx:{mr:1,color:"primary.main"}}),r.jsxs(je,{variant:"body2",children:[r.jsx("strong",{children:"Thời gian làm bài:"})," ",g(c.TimeSpent)]})]}),r.jsxs(Ne,{sx:{display:"flex",alignItems:"center"},children:[r.jsx(Z5,{sx:{mr:1,color:"primary.main"}}),r.jsxs(je,{variant:"body2",children:[r.jsx("strong",{children:"Số câu:"})," ",m.length]})]}),r.jsxs(Ne,{sx:{display:"flex",alignItems:"center"},children:[r.jsx(Ia,{sx:{mr:1,color:"success.main"}}),r.jsxs(je,{variant:"body2",children:[r.jsx("strong",{children:"Câu trả lời đúng:"})," ",m.filter(b=>b.IsCorrect===1).length]})]}),r.jsxs(Ne,{sx:{display:"flex",alignItems:"center"},children:[r.jsx(Ip,{sx:{mr:1,color:"error.main"}}),r.jsxs(je,{variant:"body2",children:[r.jsx("strong",{children:"Câu trả lời sai:"})," ",m.filter(b=>b.IsCorrect===0).length]})]}),r.jsxs(Ne,{sx:{display:"flex",alignItems:"center"},children:[r.jsx(S_,{sx:{mr:1,color:"warning.main"}}),r.jsxs(je,{variant:"body2",children:[r.jsx("strong",{children:"Kết quả:"})," ",x?"Đạt":"Chưa đạt"]})]})]})]})}),r.jsx(wp,{children:r.jsxs(jp,{children:[r.jsx(je,{variant:"h6",gutterBottom:!0,children:"So sánh đáp án"}),r.jsx(us,{sx:{mb:2}}),r.jsx(je,{variant:"body2",paragraph:!0,children:"Điểm của bạn được tính dựa trên mức độ tương đồng giữa đáp án của bạn với đáp án mẫu."}),r.jsx(je,{variant:"body2",children:"Hệ thống so sánh:"}),r.jsxs("ul",{style:{paddingLeft:"1.5rem",margin:"0.5rem 0"},children:[r.jsx("li",{children:"Các từ khóa quan trọng (70%)"}),r.jsx("li",{children:"Độ tương đồng nội dung (30%)"})]})]})})]}),r.jsxs(fn,{item:!0,xs:12,md:7,lg:8,sx:{display:"flex",flexDirection:"column",alignItems:"stretch"},children:[r.jsx(Pn,{severity:"warning",sx:{mb:3},children:"Chi tiết bài làm đã được ẩn theo yêu cầu."}),r.jsx(Ne,{sx:{mt:"auto",display:"flex",justifyContent:"center"},children:r.jsx(gt,{variant:"contained",color:"primary",component:Ve,to:"/exams",children:"Quay lại danh sách kỳ thi"})})]})]})]})},z_=()=>{const[e,t]=h.useState([]),[n,s]=h.useState(!0),[i,a]=h.useState(null);h.useEffect(()=>{o()},[]);const o=async()=>{try{s(!0);const c=await u7();t(c.data||[]),a(null)}catch(c){console.error("Error fetching upcoming exams:",c),a("Không thể tải danh sách kỳ thi sắp tới. Vui lòng thử lại sau.")}finally{s(!1)}},l=c=>{const d=new Date,u=new Date(c),m=C7(u,d);if(m>0)return`${m} ngày nữa`;const f=S7(u,d);return f>0?`${f} giờ nữa`:"Sắp bắt đầu"};return n?r.jsx(Ne,{sx:{display:"flex",justifyContent:"center",mt:4},children:r.jsx(Rn,{})}):i?r.jsxs(Ne,{sx:{mt:4,textAlign:"center"},children:[r.jsxs(Pn,{severity:"error",children:[r.jsx(ls,{children:"Lỗi"}),i]}),r.jsx(gt,{variant:"outlined",onClick:o,sx:{mt:2},children:"Tải lại"})]}):r.jsxs(Ne,{sx:{mt:4},children:[r.jsx(je,{variant:"h4",gutterBottom:!0,children:"Kỳ thi sắp diễn ra"}),e.length===0?r.jsxs(Pn,{severity:"info",sx:{mt:2},children:[r.jsx(ls,{children:"Không có kỳ thi nào sắp diễn ra"}),"Hiện tại chưa có kỳ thi nào được lên lịch trong thời gian tới."]}):r.jsx(fn,{container:!0,spacing:3,sx:{mt:1},children:e.map(c=>r.jsx(fn,{item:!0,xs:12,children:r.jsxs(wp,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-5px)",boxShadow:6}},children:[r.jsxs(Ne,{sx:{width:{xs:"100%",sm:"200px"},display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",p:2,bgcolor:"primary.light",color:"white"},children:[r.jsx(N_,{fontSize:"large"}),r.jsx(je,{variant:"h6",sx:{mt:1},children:Yr(new Date(c.StartTime),"dd/MM/yyyy",{locale:Qr})}),r.jsx(je,{variant:"body2",children:Yr(new Date(c.StartTime),"HH:mm",{locale:Qr})}),r.jsx(je,{variant:"caption",sx:{mt:1,fontWeight:"bold"},children:l(c.StartTime)})]}),r.jsx(us,{orientation:"vertical",flexItem:!0,sx:{display:{xs:"none",sm:"block"}}}),r.jsx(us,{sx:{display:{xs:"block",sm:"none"}}}),r.jsxs(jp,{sx:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[r.jsxs(Ne,{children:[r.jsx(je,{variant:"h6",component:"div",children:c.Title}),r.jsx(je,{variant:"body2",color:"text.secondary",sx:{mt:1,mb:2},children:c.Description?c.Description.length>150?`${c.Description.substring(0,150)}...`:c.Description:"Không có mô tả"}),r.jsxs(fn,{container:!0,spacing:2,children:[r.jsx(fn,{item:!0,xs:12,sm:6,children:r.jsxs(je,{variant:"body2",sx:{display:"flex",alignItems:"center"},children:[r.jsx(Q5,{fontSize:"small",sx:{mr:.5,color:"primary.main"}}),"Thời gian: ",c.Duration," phút"]})}),r.jsx(fn,{item:!0,xs:12,sm:6,children:r.jsxs(je,{variant:"body2",children:["Loại: ",c.Type==="essay"?"Tự luận":c.Type==="multiple_choice"?"Trắc nghiệm":c.Type==="coding"?"Lập trình":"Hỗn hợp"]})})]})]}),r.jsx(Ne,{sx:{mt:2,display:"flex",justifyContent:"flex-end"},children:r.jsx(gt,{component:Ve,to:`/exams/${c.ExamID}`,variant:"contained",color:"primary",endIcon:r.jsx(J5,{}),size:"small",children:c.IsRegistered?"Xem chi tiết":"Đăng ký"})})]})]})},c.ExamID))}),r.jsx(Ne,{sx:{display:"flex",justifyContent:"center",mt:4},children:r.jsx(gt,{component:Ve,to:"/exams",variant:"outlined",children:"Xem tất cả kỳ thi"})})]})},vb=e=>{if(!e)return"N/A";try{const t=new Date(e);return Yr(t,"HH:mm - dd/MM/yyyy",{locale:Qr})}catch(t){return console.error("Error formatting date:",t),"Ngày không hợp lệ"}},U_=()=>{const{examId:e}=or();lr();const[t,n]=h.useState(!0),[s,i]=h.useState(null),[a,o]=h.useState(null),[l,c]=h.useState([]),[d,u]=h.useState(Date.now()),m=async()=>{var g,b;try{n(!0);const w=await Va.get(`/exams/${e}/attempts`);o(w.data.data.examDetails),c(w.data.data.attempts),i(null),u(Date.now())}catch(w){i(((b=(g=w.response)==null?void 0:g.data)==null?void 0:b.message)||"Không thể tải lịch sử thi"),console.error("Error loading exam history:",w)}finally{n(!1)}};h.useEffect(()=>{m()},[e]),h.useEffect(()=>{const g=()=>{document.visibilityState==="visible"&&(console.log("Page became visible, refreshing exam history"),m())};return document.addEventListener("visibilitychange",g),()=>{document.removeEventListener("visibilitychange",g)}},[e]),h.useEffect(()=>{if(!l.some(w=>w.Status==="in_progress"||w.Status==="registered"))return;console.log("Setting up polling for in-progress attempts");const b=setInterval(()=>{m()},3e4);return()=>{clearInterval(b)}},[l,e]);const f=g=>{switch(g){case"completed":return r.jsx("span",{className:"badge bg-success",children:"Đã hoàn thành"});case"in_progress":return r.jsx("span",{className:"badge bg-warning",children:"Đang làm bài"});case"registered":return r.jsx("span",{className:"badge bg-info",children:"Đã đăng ký"});case"reviewed":return r.jsx("span",{className:"badge bg-primary",children:"Đã chấm điểm"});default:return r.jsx("span",{className:"badge bg-secondary",children:g})}},p=async()=>{var g,b;try{n(!0),await Va.post(`/exams/${e}/register`);const w=await Va.get(`/exams/${e}/attempts`);o(w.data.data.examDetails),c(w.data.data.attempts),i(null)}catch(w){i(((b=(g=w.response)==null?void 0:g.data)==null?void 0:b.message)||"Đăng ký thi lại không thành công"),console.error("Error registering for exam:",w)}finally{n(!1)}},x=()=>{m()};return t&&!l.length?r.jsx(Ne,{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh",children:r.jsx(Rn,{})}):s?r.jsxs(Ne,{p:3,children:[r.jsx(Pn,{severity:"error",children:s}),r.jsx(gt,{variant:"outlined",color:"primary",onClick:x,sx:{mt:2},children:"Thử lại"})]}):a?r.jsxs(Ne,{p:3,children:[r.jsxs(Ne,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsxs(je,{variant:"h4",children:[a.Title," - Lịch sử thi"]}),r.jsx(gt,{variant:"outlined",onClick:x,disabled:t,children:t?r.jsx(Rn,{size:24}):"Cập nhật"})]}),r.jsxs(Ne,{mb:3,children:[r.jsxs(je,{variant:"body1",children:[r.jsx("strong",{children:"Tổng điểm:"})," ",a.TotalPoints]}),r.jsxs(je,{variant:"body1",children:[r.jsx("strong",{children:"Điểm đạt:"})," ",a.PassingScore]}),r.jsxs(je,{variant:"body1",children:[r.jsx("strong",{children:"Cho phép thi lại:"})," ",a.AllowRetakes?"Có":"Không",a.AllowRetakes&&a.MaxRetakes>0?` (Tối đa ${a.MaxRetakes+1} lần)`:""]})]}),t&&r.jsx(qO,{sx:{mb:2}}),l.length===0?r.jsx(Pn,{severity:"info",children:"Bạn chưa tham gia kỳ thi này"}):r.jsx(d_,{component:jn,sx:{mb:4},children:r.jsxs(G5,{children:[r.jsx(Y5,{children:r.jsxs(ru,{children:[r.jsx(en,{children:"Lần thi"}),r.jsx(en,{children:"Trạng thái"}),r.jsx(en,{children:"Bắt đầu"}),r.jsx(en,{children:"Hoàn thành"}),r.jsx(en,{children:"Thời gian làm"}),r.jsx(en,{children:"Điểm số"}),r.jsx(en,{children:"Thao tác"})]})}),r.jsx(X5,{children:l.map(g=>r.jsxs(ru,{children:[r.jsx(en,{children:g.AttemptNumber}),r.jsx(en,{children:f(g.Status)}),r.jsx(en,{children:g.StartedAt?vb(g.StartedAt):"Chưa bắt đầu"}),r.jsx(en,{children:g.CompletedAt?vb(g.CompletedAt):"Chưa hoàn thành"}),r.jsx(en,{children:g.TimeSpent?`${g.TimeSpent} phút`:"N/A"}),r.jsx(en,{children:g.Score!==null?r.jsxs("span",{className:g.Score>=a.PassingScore?"text-success":"text-danger",children:[g.Score,"/",a.TotalPoints]}):"Chưa có điểm"}),r.jsxs(en,{children:[g.Status==="registered"&&r.jsx(gt,{variant:"contained",color:"primary",size:"small",component:Ve,to:`/exams/${e}/session?participantId=${g.ParticipantID}`,children:"Bắt đầu"}),g.Status==="in_progress"&&r.jsx(gt,{variant:"contained",color:"warning",size:"small",component:Ve,to:`/exams/${e}/session?participantId=${g.ParticipantID}`,children:"Tiếp tục"})]})]},g.ParticipantID))})]})}),a.AllowRetakes&&(a.MaxRetakes===0||l.length<a.MaxRetakes+1?r.jsx(gt,{variant:"contained",color:"primary",onClick:p,disabled:t,children:t?r.jsx(Rn,{size:24}):"Đăng ký thi lại"}):r.jsx(Pn,{severity:"warning",children:"Bạn đã đạt đến số lần thi tối đa cho phép."})),r.jsx(Ne,{mt:3,children:r.jsx(gt,{variant:"outlined",component:Ve,to:`/exams/${e}`,children:"Quay lại chi tiết kỳ thi"})})]}):r.jsxs(Ne,{p:3,children:[r.jsx(Pn,{severity:"warning",children:"Không tìm thấy thông tin kỳ thi"}),r.jsx(gt,{variant:"outlined",color:"primary",onClick:x,sx:{mt:2},children:"Thử lại"})]})},V_=({children:e})=>{const t=lr(),n=St(),s=Ht(),i=gn(ce=>ce.auth.user),a=localStorage.getItem("token"),[o,l]=h.useState(null),[c,d]=h.useState(""),[u,m]=h.useState([]),[f,p]=h.useState(!1),[x,g]=h.useState(!1),[b,w]=h.useState(!1),[k,v]=h.useState(!0),[N,C]=h.useState(!1),T=h.useRef(null),[E,P]=h.useState(new Date),{logout:R}=Kn(),{theme:y,themeColor:O,colors:_}=I2(),[L,A]=h.useState(!1),M=h.useRef(null);h.useEffect(()=>{const ce=setInterval(()=>{P(new Date)},6e4);return()=>clearInterval(ce)},[]);const[z,ie]=h.useState([]),[X,te]=h.useState(0),[B,H]=h.useState(!1),[K,$]=h.useState(!1),[me,ke]=h.useState(!1),ye=h.useRef(null),[se,G]=h.useState(!1),[W,Z]=h.useState(!1);h.useEffect(()=>{const ce=()=>{window.innerWidth<640?v(!1):v(!0)};return ce(),window.addEventListener("resize",ce),()=>window.removeEventListener("resize",ce)},[]),h.useEffect(()=>{const ce=()=>{if(i&&Object.keys(i).length>0)console.log("Setting current user from Redux state:",i),l(i);else{const I=localStorage.getItem("user");if(I)try{const j=JSON.parse(I);console.log("Setting current user from localStorage:",j),l(j),(!i||Object.keys(i).length===0)&&s(Vf(j.profileImage||j.avatar))}catch(j){console.error("Error parsing user data from localStorage:",j)}}};ce();const V=I=>{I.detail&&I.detail.profileImage&&s(Vf(I.detail.profileImage)),ce()};return window.addEventListener("profileUpdated",V),()=>{window.removeEventListener("profileUpdated",V)}},[i,s]);const Y=[{name:"Trang Chủ",icon:iP,href:"/home"},{name:"Khóa Học",icon:ho,href:"/courses"},{name:"Sự Kiện",icon:Qi,href:"/events"},{name:"Bài Viết",icon:wl,href:"/posts"},{name:"AI Chat",icon:Vi,href:"/ai-chat"},{name:"AI TestCase",icon:Yx,href:"/ai-test-local"},{name:"Bài Thi",icon:Ks,href:"/exams"},{name:"Thi Lập Trình",icon:Hd,href:"/competitions"},{name:"Chat",icon:Fs,href:"/chat",onClick:()=>n("/chat")},{name:"Báo Cáo",icon:jl,href:"/reports"},{name:"Bạn Bè",icon:vs,href:"/friends"},{name:"Hồ Sơ",icon:ip,href:"/profile"},{name:"Cài Đặt",icon:ep,href:"/settings"}],ae=!["/login","/register","/forgot-password","/reset-password"].includes(t.pathname)&&a,de=()=>{window.innerWidth<640?C(!N):v(!k)};h.useEffect(()=>{if(!ae)return;const ce=async()=>{if(c.trim().length<2){m([]),p(!1);return}g(!0);try{const j=await fetch(`http://localhost:5001/api/users/search?q=${encodeURIComponent(c)}`,{headers:{Authorization:`Bearer ${a}`}});if(!j.ok)throw new Error("Không thể tìm kiếm người dùng");const S=await j.json();console.log("Kết quả tìm kiếm người dùng:",S),m(S.users||[]),p(!0)}catch(I){console.error("Lỗi tìm kiếm:",I),m([])}finally{g(!1)}},V=setTimeout(()=>{c.trim().length>=2&&ce()},300);return()=>clearTimeout(V)},[c,a,ae]),h.useEffect(()=>{if(!ae)return;(()=>{try{const V=localStorage.getItem("user");if(V){const I=JSON.parse(V),j=(I.role||I.Role||"").toUpperCase(),S=j==="ADMIN";console.log(`[Role Check] User role: ${j}, IsAdmin: ${S}`),Z(S)}}catch(V){console.error("Error parsing user data for role check:",V)}})()},[ae]);const Re=async()=>{if(W&&se){console.log("[Notifications] Skipping fetch for admin user after initial load");return}z.length===0&&ke(!0);try{const ce="http://localhost:5001";console.log(`[Notifications] Fetching notifications, isAdmin: ${W}`);const V=await fetch(`${ce}/api/notifications`,{headers:{Authorization:`Bearer ${a}`}});if(!V.ok)throw new Error("Không thể lấy thông báo");const I=await V.json();ie(I.notifications||[]);const j=(I.notifications||[]).filter(S=>!S.IsRead).length;te(j),se||(console.log("[Notifications] Setting hasInitialFetch to true"),G(!0))}catch(ce){console.error("Lỗi khi lấy thông báo:",ce),ie([])}finally{ke(!1)}};h.useEffect(()=>{if(!ae)return;Re();let ce=null;return W?console.log("[Notifications] Admin user detected, NO polling interval set"):(console.log("[Notifications] Setting up polling interval for non-admin user"),ce=setInterval(Re,9e4)),()=>{ce&&(console.log("[Notifications] Clearing polling interval"),clearInterval(ce))}},[ae,W]),h.useEffect(()=>{if(!ae)return;const ce=V=>{T.current&&!T.current.contains(V.target)&&(p(!1),w(!1)),ye.current&&!ye.current.contains(V.target)&&H(!1),M.current&&!M.current.contains(V.target)&&A(!1)};return document.addEventListener("mousedown",ce),()=>{document.removeEventListener("mousedown",ce)}},[ae]);const Be=ce=>{ce.preventDefault(),c.trim()&&(n(`/search?q=${encodeURIComponent(c)}`),p(!1))},Ge=ce=>{n(`/profile/${ce}`),p(!1),d("")},et=async()=>{await R(),s(Tg()),n("/login",{replace:!0})},lt=async ce=>{try{await fetch(`http://localhost:5001/api/notifications/${ce}/read`,{method:"PUT",headers:{Authorization:`Bearer ${a}`}}),ie(z.map(I=>I.NotificationID===ce?{...I,IsRead:!0}:I)),te(I=>Math.max(0,I-1))}catch(V){console.error("Lỗi khi đánh dấu đã đọc:",V)}},Xe=async()=>{try{await fetch("http://localhost:5001/api/notifications/read-all",{method:"PUT",headers:{Authorization:`Bearer ${a}`}}),ie(z.map(V=>({...V,IsRead:!0}))),te(0)}catch(ce){console.error("Lỗi khi đánh dấu đã đọc tất cả:",ce)}},He=()=>{$(!0),setTimeout(()=>{H(!1),$(!1)},300)},Pe=ce=>{if(ce.IsRead||lt(ce.NotificationID),ce.RelatedType==="Posts"){const V=ce.RelatedID;n(`/posts?postId=${V}`)}else if(ce.RelatedType==="Comments"){const V=ce.PostID||ce.RelatedID,I=ce.RelatedID;n(`/posts?postId=${V}&commentId=${I}`)}else ce.Type==="message"?n("/chat"):n("/notifications");He()},vt=ce=>{switch(ce){case"comment":return wl;case"reply":return Fs;case"reaction":return Tj;case"message":return Fs;default:return Qo}},Ye=ce=>{const V=new Date(ce),j=Math.floor((new Date-V)/1e3);return j<60?"Vừa xong":j<3600?`${Math.floor(j/60)} phút trước`:j<86400?`${Math.floor(j/3600)} giờ trước`:`${Math.floor(j/86400)} ngày trước`};return ae?r.jsxs("div",{className:"flex flex-col h-screen w-screen overflow-hidden text-gray-900 dark:text-gray-100",children:[r.jsx("div",{className:"h-full w-full flex flex-col",children:r.jsxs("div",{className:"flex flex-col w-full h-full bg-white dark:bg-gray-800 overflow-hidden",children:[r.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 z-10 bg-white dark:bg-gray-800 shadow-sm",children:r.jsxs("div",{className:"flex items-center justify-between h-16 px-4 md:px-6",children:[r.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4 flex-1 min-w-0",children:[r.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[r.jsx(to,{className:"h-8 w-8 text-theme-primary"}),r.jsx(Ve,{to:"/home",className:"hover:opacity-95 transition-all",children:r.jsx("span",{className:"font-extrabold text-2xl bg-clip-text text-transparent bg-gradient-to-r from-theme-primary via-theme-secondary to-theme-hover"})})]}),r.jsxs("nav",{className:"hidden sm:flex items-center flex-nowrap space-x-3 md:space-x-4 lg:space-x-6 ml-2 md:ml-4 max-w-full",children:[Y.filter(ce=>!["/profile","/settings","/exams","/competitions","/chat","/friends","/reports","/ai-chat","/ai-test-local"].includes(ce.href)).map(ce=>{const V=t.pathname===ce.href||ce.href!=="/home"&&t.pathname.startsWith(ce.href),I=ce.icon;return r.jsxs(Ve,{to:ce.href,onClick:ce.onClick,className:`flex items-center space-x-1 whitespace-nowrap text-sm font-medium hover:text-theme-primary transition-colors ${V?"text-theme-primary":"text-gray-600 dark:text-gray-300"}`,children:[r.jsx(I,{className:"h-5 w-5 flex-shrink-0"}),r.jsx("span",{className:"hidden lg:inline",children:ce.name})]},ce.name)}),r.jsxs("div",{className:"relative group",children:[r.jsxs("button",{className:`flex items-center space-x-1 whitespace-nowrap text-sm font-medium transition-colors hover:text-theme-primary ${["/exams","/competitions"].some(ce=>t.pathname.startsWith(ce))?"text-theme-primary":"text-gray-600 dark:text-gray-300"}`,children:[r.jsx(Ks,{className:"h-5 w-5 flex-shrink-0"}),r.jsx("span",{className:"hidden lg:inline",children:"Thi"}),r.jsx(Jo,{className:"h-4 w-4 hidden lg:inline"})]}),r.jsx("div",{className:"absolute left-0 mt-1 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg z-20 max-h-96 border border-gray-100 dark:border-gray-700 hidden group-hover:block",children:r.jsxs("div",{className:"py-1",children:[r.jsx("h3",{className:"px-4 py-2 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider border-b border-gray-100 dark:border-gray-700",children:"Thi & Kiểm tra"}),r.jsxs(Ve,{to:"/exams",className:"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 whitespace-nowrap",children:[r.jsx(Ks,{className:"h-5 w-5 mr-3 text-gray-500 dark:text-gray-400"}),"Bài Thi"]}),r.jsxs(Ve,{to:"/competitions",className:"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 whitespace-nowrap",children:[r.jsx(Hd,{className:"h-5 w-5 mr-3 text-gray-500 dark:text-gray-400"}),"Thi Lập Trình"]})]})})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("button",{className:`flex items-center space-x-1 whitespace-nowrap text-sm font-medium transition-colors hover:text-theme-primary ${["/chat","/friends"].some(ce=>t.pathname.startsWith(ce))?"text-theme-primary":"text-gray-600 dark:text-gray-300"}`,onClick:ce=>ce.preventDefault(),children:[r.jsx(Fs,{className:"h-5 w-5 flex-shrink-0"}),r.jsx("span",{className:"hidden lg:inline",children:"Cộng đồng"}),r.jsx(Jo,{className:"h-4 w-4 hidden lg:inline"})]}),r.jsx("div",{className:"absolute left-0 mt-1 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg z-20 max-h-96 border border-gray-100 dark:border-gray-700 hidden group-hover:block",children:r.jsxs("div",{className:"py-1",children:[r.jsx("h3",{className:"px-4 py-2 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider border-b border-gray-100 dark:border-gray-700",children:"Cộng đồng"}),r.jsxs(Ve,{to:"/chat",className:"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 whitespace-nowrap",children:[r.jsx(Fs,{className:"h-5 w-5 mr-3 text-gray-500 dark:text-gray-400"}),"Chat"]}),r.jsxs(Ve,{to:"/friends",className:"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 whitespace-nowrap",children:[r.jsx(vs,{className:"h-5 w-5 mr-3 text-gray-500 dark:text-gray-400"}),"Bạn Bè"]})]})})]}),r.jsxs("div",{className:"relative group",children:[r.jsxs("button",{className:`flex items-center space-x-1 whitespace-nowrap text-sm font-medium transition-colors hover:text-theme-primary ${["/ai-chat","/ai-test-local"].some(ce=>t.pathname.startsWith(ce))?"text-theme-primary":"text-gray-600 dark:text-gray-300"}`,children:[r.jsx(Vi,{className:"h-5 w-5 flex-shrink-0"}),r.jsx("span",{className:"hidden lg:inline",children:"AI"}),r.jsx(Jo,{className:"h-4 w-4 hidden lg:inline"})]}),r.jsx("div",{className:"absolute left-0 mt-1 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg z-20 max-h-96 border border-gray-100 dark:border-gray-700 hidden group-hover:block",children:r.jsxs("div",{className:"py-1",children:[r.jsx("h3",{className:"px-4 py-2 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider border-b border-gray-100 dark:border-gray-700",children:"Công cụ AI"}),r.jsxs(Ve,{to:"/ai-chat",className:"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 whitespace-nowrap",children:[r.jsx(Vi,{className:"h-5 w-5 mr-3 text-gray-500 dark:text-gray-400"}),"AI Chat"]}),r.jsxs(Ve,{to:"/ai-test-local",className:"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 whitespace-nowrap",children:[r.jsx(Yx,{className:"h-5 w-5 mr-3 text-gray-500 dark:text-gray-400"}),"AI TestCase"]})]})})]})]})]}),r.jsxs("div",{className:"flex items-center justify-end space-x-3 sm:space-x-4",children:[r.jsx("button",{onClick:de,className:"sm:hidden p-2 rounded-md text-gray-500 dark:text-gray-400 hover:bg-theme-accent hover:text-theme-primary dark:hover:bg-gray-700 focus:outline-none transition-all duration-200",children:r.jsx(QI,{className:"h-6 w-6"})}),r.jsx("div",{ref:T,className:"hidden md:block relative",children:r.jsxs("form",{onSubmit:Be,className:"relative group",children:[r.jsxs("div",{className:`flex items-center transition-all duration-300 ${b?"w-56 lg:w-64 xl:w-72":"w-10"}`,children:[r.jsx("button",{type:"button",className:`absolute left-0 p-2.5 text-theme-secondary hover:text-theme-primary z-10 ${b?"bg-transparent":"bg-white dark:bg-gray-700 rounded-full shadow-md"}`,onClick:()=>w(!0),children:r.jsx(Rg,{className:"h-5 w-5"})}),b&&r.jsx("input",{type:"text",className:"w-full pl-10 pr-3 py-2.5 border border-gray-200 dark:border-gray-600 rounded-full leading-5 bg-white dark:bg-gray-700 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-theme-primary focus:border-theme-primary sm:text-sm shadow-md text-gray-900 dark:text-gray-100 transition-all",placeholder:"Tìm kiếm người dùng...",value:c,onChange:ce=>d(ce.target.value),autoFocus:!0})]}),f&&u.length>0&&r.jsx("div",{className:"absolute mt-1 w-full bg-white dark:bg-gray-800 rounded-md shadow-lg z-20 max-h-96 overflow-y-auto border border-gray-100 dark:border-gray-700",children:r.jsxs("div",{className:"py-1",children:[r.jsx("h3",{className:"px-4 py-2 text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider border-b border-gray-100 dark:border-gray-700",children:"Người dùng"}),u.map(ce=>r.jsxs("div",{className:"px-4 py-2.5 hover:bg-theme-accent/50 dark:hover:bg-theme-accent/20 cursor-pointer flex items-center transition-colors duration-150",onClick:()=>Ge(ce.id),children:[r.jsx(Tt,{src:ce.avatar,name:ce.fullName,alt:ce.fullName||"User",size:"small",className:"mr-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:ce.fullName}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:ce.email})]})]},ce.id))]})})]})}),r.jsxs("div",{className:"relative",ref:ye,children:[r.jsx("button",{className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-theme-accent/50 relative transition-all duration-200 hover:text-theme-primary dark:hover:text-theme-secondary",onClick:()=>H(!B),children:X>0?r.jsxs(r.Fragment,{children:[r.jsx(JP,{className:"h-6 w-6 text-theme-primary"}),r.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full animate-pulse shadow-sm",children:X>9?"9+":X})]}):r.jsx(Qo,{className:"h-6 w-6"})}),B&&r.jsx("div",{className:`fixed top-0 right-0 w-80 h-full bg-white dark:bg-gray-800 shadow-xl z-30 transform transition-transform duration-300 ease-in-out overflow-hidden ${K?"animate-slide-out-right":"animate-slide-in-right"}`,children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-100 dark:border-gray-700 bg-gradient-to-r from-theme-accent/50 to-white dark:from-gray-700 dark:to-gray-800",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Thông báo"}),r.jsxs("div",{className:"flex space-x-2",children:[X>0&&r.jsx("button",{onClick:Xe,className:"text-xs text-theme-primary hover:text-theme-hover dark:hover:text-theme-secondary font-medium",children:"Đánh dấu đã đọc"}),r.jsx("button",{onClick:He,className:"p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:r.jsx(zt,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"})})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:me?r.jsxs("div",{className:"py-10 text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-theme-primary mx-auto"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Đang tải thông báo..."})]}):z.length>0?r.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:z.map(ce=>{const V=vt(ce.Type);return r.jsxs("div",{className:`px-4 py-3.5 hover:bg-theme-accent/50 dark:hover:bg-theme-accent/20 cursor-pointer flex items-start ${ce.IsRead?"":"bg-theme-accent/50 dark:bg-theme-accent/20"} transition-colors duration-150`,onClick:()=>Pe(ce),children:[r.jsx("div",{className:`flex-shrink-0 h-10 w-10 rounded-full flex items-center justify-center mr-3 ${ce.IsRead?"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400":"bg-theme-secondary/30 text-theme-primary dark:bg-theme-secondary/20 dark:text-theme-secondary"}`,children:r.jsx(V,{className:"h-6 w-6"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:`text-sm font-medium ${ce.IsRead?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-white"}`,children:ce.Title}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-0.5 line-clamp-2",children:ce.Content}),r.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:Ye(ce.CreatedAt)})]}),!ce.IsRead&&r.jsx("span",{className:"ml-2 h-2 w-2 bg-theme-primary rounded-full flex-shrink-0 mt-2"})]},ce.NotificationID)})}):r.jsxs("div",{className:"py-12 text-center",children:[r.jsx("div",{className:"bg-theme-accent/50 dark:bg-theme-accent/20 rounded-full h-16 w-16 flex items-center justify-center mx-auto mb-4",children:r.jsx(Qo,{className:"h-8 w-8 text-theme-secondary"})}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:"Không có thông báo nào"}),r.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:"Thông báo mới sẽ xuất hiện ở đây"})]})}),r.jsx("div",{className:"p-4 border-t border-gray-100 dark:border-gray-700 bg-white dark:bg-gray-800",children:r.jsx(Ve,{to:"/notifications",className:"block w-full py-2.5 bg-gradient-to-r from-theme-primary to-theme-hover hover:from-theme-hover hover:to-theme-active text-white text-center rounded-lg shadow-md transition-all duration-300 font-medium",onClick:He,children:"Xem tất cả thông báo"})})]})})]}),B&&r.jsx("div",{className:`fixed inset-0 bg-black z-20 transition-opacity duration-300 ${K?"opacity-0":"bg-opacity-25 animate-fade-in"}`,onClick:He}),r.jsxs("div",{className:"relative",ref:M,children:[r.jsxs("button",{onClick:()=>A(ce=>!ce),className:"flex items-center space-x-2 p-2 rounded-lg text-gray-600 dark:text-gray-300 hover:bg-theme-accent/50 dark:hover:bg-theme-accent/20 transition-all duration-200 hover:text-theme-primary dark:hover:text-theme-secondary",children:[r.jsx(Tt,{src:(o==null?void 0:o.avatar)||(o==null?void 0:o.profileImage),name:(o==null?void 0:o.fullName)||(o==null?void 0:o.username)||"User",alt:(o==null?void 0:o.fullName)||(o==null?void 0:o.username)||"User",size:"small",className:"ring-2 ring-theme-accent"}),r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 hidden sm:inline group-hover:text-theme-primary",children:(o==null?void 0:o.fullName)||(o==null?void 0:o.username)||"User"})]}),L&&r.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-100 dark:border-gray-700 z-30",children:[r.jsxs(Ve,{to:"/profile",className:"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",onClick:()=>A(!1),children:[r.jsx(ip,{className:"h-5 w-5 mr-3 text-gray-500 dark:text-gray-400"}),"Hồ sơ"]}),r.jsxs(Ve,{to:"/settings",className:"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",onClick:()=>A(!1),children:[r.jsx(ep,{className:"h-5 w-5 mr-3 text-gray-500 dark:text-gray-400"}),"Cài đặt"]}),r.jsxs(Ve,{to:"/reports",className:"flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",onClick:()=>A(!1),children:[r.jsx(jl,{className:"h-5 w-5 mr-3 text-gray-500 dark:text-gray-400"}),"Báo cáo"]}),r.jsxs("button",{onClick:()=>{A(!1),et()},className:"w-full text-left flex items-center px-4 py-2 text-sm text-red-600 hover:bg-gray-50 dark:hover:bg-gray-700",children:[r.jsx(Xx,{className:"h-5 w-5 mr-3"}),"Đăng xuất"]})]})]})]})]})}),r.jsx("div",{className:"flex-1 overflow-auto bg-white dark:bg-gray-800",children:r.jsx("main",{className:"h-full w-full",children:e})})]})}),N&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 sm:hidden",onClick:()=>C(!1)}),r.jsx("div",{className:`fixed inset-y-0 left-0 w-72 bg-white dark:bg-gray-800 shadow-xl z-40 transform transition-all duration-300 ease-in-out sm:hidden ${N?"translate-x-0":"-translate-x-full"}`,children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(to,{className:"h-8 w-8 text-theme-primary mr-2"}),r.jsx("span",{className:"font-bold text-xl",children:"Menu"})]}),r.jsx("button",{onClick:()=>C(!1),className:"p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:r.jsx(zt,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:r.jsx("div",{className:"space-y-1",children:Y.filter(ce=>!["/profile","/settings","/reports"].includes(ce.href)).map(ce=>{const V=t.pathname===ce.href||ce.href!=="/home"&&t.pathname.startsWith(ce.href),I=ce.icon;return r.jsxs(Ve,{to:ce.href,onClick:()=>C(!1),className:`flex items-center space-x-3 px-4 py-3 rounded-lg ${V?"bg-theme-accent/70 text-theme-primary dark:bg-theme-accent/20":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[r.jsx(I,{className:"h-5 w-5 flex-shrink-0"}),r.jsx("span",{className:"font-medium",children:ce.name})]},ce.name)})})}),r.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Tt,{src:(o==null?void 0:o.avatar)||(o==null?void 0:o.profileImage),name:(o==null?void 0:o.fullName)||(o==null?void 0:o.username)||"User",alt:(o==null?void 0:o.fullName)||(o==null?void 0:o.username)||"User",size:"small",className:"ring-2 ring-theme-accent"}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsx("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:(o==null?void 0:o.fullName)||(o==null?void 0:o.username)||"User"})}),r.jsx("button",{onClick:et,className:"p-1.5 rounded-full text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:r.jsx(Xx,{className:"h-5 w-5"})})]})})]})})]})]}):r.jsx(r.Fragment,{children:e})},c0=h.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Ph=h.createContext({}),Ah=h.createContext(null),Rh=typeof document<"u",dc=Rh?h.useLayoutEffect:h.useEffect,tk=h.createContext({strict:!1}),d0=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),H_="framerAppearId",nk="data-"+d0(H_);function W_(e,t,n,s){const{visualElement:i}=h.useContext(Ph),a=h.useContext(tk),o=h.useContext(Ah),l=h.useContext(c0).reducedMotion,c=h.useRef();s=s||a.renderer,!c.current&&s&&(c.current=s(e,{visualState:t,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=c.current;h.useInsertionEffect(()=>{d&&d.update(n,o)});const u=h.useRef(!!(n[nk]&&!window.HandoffComplete));return dc(()=>{d&&(d.render(),u.current&&d.animationState&&d.animationState.animateChanges())}),h.useEffect(()=>{d&&(d.updateFeatures(),!u.current&&d.animationState&&d.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),d}function Pa(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function q_(e,t,n){return h.useCallback(s=>{s&&e.mount&&e.mount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):Pa(n)&&(n.current=s))},[t])}function Ll(e){return typeof e=="string"||Array.isArray(e)}function Lh(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const u0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],h0=["initial",...u0];function Mh(e){return Lh(e.animate)||h0.some(t=>Ll(e[t]))}function rk(e){return!!(Mh(e)||e.variants)}function K_(e,t){if(Mh(e)){const{initial:n,animate:s}=e;return{initial:n===!1||Ll(n)?n:void 0,animate:Ll(s)?s:void 0}}return e.inherit!==!1?t:{}}function G_(e){const{initial:t,animate:n}=K_(e,h.useContext(Ph));return h.useMemo(()=>({initial:t,animate:n}),[wb(t),wb(n)])}function wb(e){return Array.isArray(e)?e.join(" "):e}const jb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ml={};for(const e in jb)Ml[e]={isEnabled:t=>jb[e].some(n=>!!t[n])};function X_(e){for(const t in e)Ml[t]={...Ml[t],...e[t]}}const m0=h.createContext({}),sk=h.createContext({}),Y_=Symbol.for("motionComponentSymbol");function Q_({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:s,Component:i}){e&&X_(e);function a(l,c){let d;const u={...h.useContext(c0),...l,layoutId:J_(l)},{isStatic:m}=u,f=G_(l),p=s(l,m);if(!m&&Rh){f.visualElement=W_(i,p,u,t);const x=h.useContext(sk),g=h.useContext(tk).strict;f.visualElement&&(d=f.visualElement.loadFeatures(u,g,e,x))}return h.createElement(Ph.Provider,{value:f},d&&f.visualElement?h.createElement(d,{visualElement:f.visualElement,...u}):null,n(i,l,q_(p,f.visualElement,c),p,m,f.visualElement))}const o=h.forwardRef(a);return o[Y_]=i,o}function J_({layoutId:e}){const t=h.useContext(m0).id;return t&&e!==void 0?t+"-"+e:e}function Z_(e){function t(s,i={}){return Q_(e(s,i))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(s,i)=>(n.has(i)||n.set(i,t(i)),n.get(i))})}const eF=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function f0(e){return typeof e!="string"||e.includes("-")?!1:!!(eF.indexOf(e)>-1||/[A-Z]/.test(e))}const su={};function tF(e){Object.assign(su,e)}const uc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],aa=new Set(uc);function ik(e,{layout:t,layoutId:n}){return aa.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!su[e]||e==="opacity")}const qn=e=>!!(e&&e.getVelocity),nF={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},rF=uc.length;function sF(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},s,i){let a="";for(let o=0;o<rF;o++){const l=uc[o];if(e[l]!==void 0){const c=nF[l]||l;a+=`${c}(${e[l]}) `}}return t&&!e.z&&(a+="translateZ(0)"),a=a.trim(),i?a=i(e,s?"":a):n&&s&&(a="none"),a}const ak=e=>t=>typeof t=="string"&&t.startsWith(e),ok=ak("--"),Pp=ak("var(--"),iF=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,aF=(e,t)=>t&&typeof e=="number"?t.transform(e):e,si=(e,t,n)=>Math.min(Math.max(n,e),t),oa={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},sl={...oa,transform:e=>si(0,1,e)},Bc={...oa,default:1},il=e=>Math.round(e*1e5)/1e5,Dh=/(-)?([\d]*\.?[\d])+/g,lk=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,oF=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function hc(e){return typeof e=="string"}const mc=e=>({test:t=>hc(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ms=mc("deg"),Zr=mc("%"),Ke=mc("px"),lF=mc("vh"),cF=mc("vw"),kb={...Zr,parse:e=>Zr.parse(e)/100,transform:e=>Zr.transform(e*100)},Nb={...oa,transform:Math.round},ck={borderWidth:Ke,borderTopWidth:Ke,borderRightWidth:Ke,borderBottomWidth:Ke,borderLeftWidth:Ke,borderRadius:Ke,radius:Ke,borderTopLeftRadius:Ke,borderTopRightRadius:Ke,borderBottomRightRadius:Ke,borderBottomLeftRadius:Ke,width:Ke,maxWidth:Ke,height:Ke,maxHeight:Ke,size:Ke,top:Ke,right:Ke,bottom:Ke,left:Ke,padding:Ke,paddingTop:Ke,paddingRight:Ke,paddingBottom:Ke,paddingLeft:Ke,margin:Ke,marginTop:Ke,marginRight:Ke,marginBottom:Ke,marginLeft:Ke,rotate:Ms,rotateX:Ms,rotateY:Ms,rotateZ:Ms,scale:Bc,scaleX:Bc,scaleY:Bc,scaleZ:Bc,skew:Ms,skewX:Ms,skewY:Ms,distance:Ke,translateX:Ke,translateY:Ke,translateZ:Ke,x:Ke,y:Ke,z:Ke,perspective:Ke,transformPerspective:Ke,opacity:sl,originX:kb,originY:kb,originZ:Ke,zIndex:Nb,fillOpacity:sl,strokeOpacity:sl,numOctaves:Nb};function p0(e,t,n,s){const{style:i,vars:a,transform:o,transformOrigin:l}=e;let c=!1,d=!1,u=!0;for(const m in t){const f=t[m];if(ok(m)){a[m]=f;continue}const p=ck[m],x=aF(f,p);if(aa.has(m)){if(c=!0,o[m]=x,!u)continue;f!==(p.default||0)&&(u=!1)}else m.startsWith("origin")?(d=!0,l[m]=x):i[m]=x}if(t.transform||(c||s?i.transform=sF(e.transform,n,u,s):i.transform&&(i.transform="none")),d){const{originX:m="50%",originY:f="50%",originZ:p=0}=l;i.transformOrigin=`${m} ${f} ${p}`}}const g0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function dk(e,t,n){for(const s in t)!qn(t[s])&&!ik(s,n)&&(e[s]=t[s])}function dF({transformTemplate:e},t,n){return h.useMemo(()=>{const s=g0();return p0(s,t,{enableHardwareAcceleration:!n},e),Object.assign({},s.vars,s.style)},[t])}function uF(e,t,n){const s=e.style||{},i={};return dk(i,s,e),Object.assign(i,dF(e,t,n)),e.transformValues?e.transformValues(i):i}function hF(e,t,n){const s={},i=uF(e,t,n);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=i,s}const mF=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function iu(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||mF.has(e)}let uk=e=>!iu(e);function fF(e){e&&(uk=t=>t.startsWith("on")?!iu(t):e(t))}try{fF(require("@emotion/is-prop-valid").default)}catch{}function pF(e,t,n){const s={};for(const i in e)i==="values"&&typeof e.values=="object"||(uk(i)||n===!0&&iu(i)||!t&&!iu(i)||e.draggable&&i.startsWith("onDrag"))&&(s[i]=e[i]);return s}function Cb(e,t,n){return typeof e=="string"?e:Ke.transform(t+n*e)}function gF(e,t,n){const s=Cb(t,e.x,e.width),i=Cb(n,e.y,e.height);return`${s} ${i}`}const xF={offset:"stroke-dashoffset",array:"stroke-dasharray"},yF={offset:"strokeDashoffset",array:"strokeDasharray"};function bF(e,t,n=1,s=0,i=!0){e.pathLength=1;const a=i?xF:yF;e[a.offset]=Ke.transform(-s);const o=Ke.transform(t),l=Ke.transform(n);e[a.array]=`${o} ${l}`}function x0(e,{attrX:t,attrY:n,attrScale:s,originX:i,originY:a,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...d},u,m,f){if(p0(e,d,u,f),m){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:x,dimensions:g}=e;p.transform&&(g&&(x.transform=p.transform),delete p.transform),g&&(i!==void 0||a!==void 0||x.transform)&&(x.transformOrigin=gF(g,i!==void 0?i:.5,a!==void 0?a:.5)),t!==void 0&&(p.x=t),n!==void 0&&(p.y=n),s!==void 0&&(p.scale=s),o!==void 0&&bF(p,o,l,c,!1)}const hk=()=>({...g0(),attrs:{}}),y0=e=>typeof e=="string"&&e.toLowerCase()==="svg";function vF(e,t,n,s){const i=h.useMemo(()=>{const a=hk();return x0(a,t,{enableHardwareAcceleration:!1},y0(s),e.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};dk(a,e.style,e),i.style={...a,...i.style}}return i}function wF(e=!1){return(n,s,i,{latestValues:a},o)=>{const c=(f0(n)?vF:hF)(s,a,o,n),u={...pF(s,typeof n=="string",e),...c,ref:i},{children:m}=s,f=h.useMemo(()=>qn(m)?m.get():m,[m]);return h.createElement(n,{...u,children:f})}}function mk(e,{style:t,vars:n},s,i){Object.assign(e.style,t,i&&i.getProjectionStyles(s));for(const a in n)e.style.setProperty(a,n[a])}const fk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function pk(e,t,n,s){mk(e,t,void 0,s);for(const i in t.attrs)e.setAttribute(fk.has(i)?i:d0(i),t.attrs[i])}function b0(e,t){const{style:n}=e,s={};for(const i in n)(qn(n[i])||t.style&&qn(t.style[i])||ik(i,e))&&(s[i]=n[i]);return s}function gk(e,t){const n=b0(e,t);for(const s in e)if(qn(e[s])||qn(t[s])){const i=uc.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[i]=e[s]}return n}function v0(e,t,n,s={},i={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,s,i)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,s,i)),t}function fc(e){const t=h.useRef(null);return t.current===null&&(t.current=e()),t.current}const au=e=>Array.isArray(e),jF=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),kF=e=>au(e)?e[e.length-1]||0:e;function Nd(e){const t=qn(e)?e.get():e;return jF(t)?t.toValue():t}function NF({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},s,i,a){const o={latestValues:CF(s,i,a,e),renderState:t()};return n&&(o.mount=l=>n(s,l,o)),o}const xk=e=>(t,n)=>{const s=h.useContext(Ph),i=h.useContext(Ah),a=()=>NF(e,t,s,i);return n?a():fc(a)};function CF(e,t,n,s){const i={},a=s(e,{});for(const f in a)i[f]=Nd(a[f]);let{initial:o,animate:l}=e;const c=Mh(e),d=rk(e);t&&d&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const m=u?l:o;return m&&typeof m!="boolean"&&!Lh(m)&&(Array.isArray(m)?m:[m]).forEach(p=>{const x=v0(e,p);if(!x)return;const{transitionEnd:g,transition:b,...w}=x;for(const k in w){let v=w[k];if(Array.isArray(v)){const N=u?v.length-1:0;v=v[N]}v!==null&&(i[k]=v)}for(const k in g)i[k]=g[k]}),i}const tn=e=>e;class Sb{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function SF(e){let t=new Sb,n=new Sb,s=0,i=!1,a=!1;const o=new WeakSet,l={schedule:(c,d=!1,u=!1)=>{const m=u&&i,f=m?t:n;return d&&o.add(c),f.add(c)&&m&&i&&(s=t.order.length),c},cancel:c=>{n.remove(c),o.delete(c)},process:c=>{if(i){a=!0;return}if(i=!0,[t,n]=[n,t],n.clear(),s=t.order.length,s)for(let d=0;d<s;d++){const u=t.order[d];u(c),o.has(u)&&(l.schedule(u),e())}i=!1,a&&(a=!1,l.process(c))}};return l}const _c=["prepare","read","update","preRender","render","postRender"],EF=40;function TF(e,t){let n=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=_c.reduce((m,f)=>(m[f]=SF(()=>n=!0),m),{}),o=m=>a[m].process(i),l=()=>{const m=performance.now();n=!1,i.delta=s?1e3/60:Math.max(Math.min(m-i.timestamp,EF),1),i.timestamp=m,i.isProcessing=!0,_c.forEach(o),i.isProcessing=!1,n&&t&&(s=!1,e(l))},c=()=>{n=!0,s=!0,i.isProcessing||e(l)};return{schedule:_c.reduce((m,f)=>{const p=a[f];return m[f]=(x,g=!1,b=!1)=>(n||c(),p.schedule(x,g,b)),m},{}),cancel:m=>_c.forEach(f=>a[f].cancel(m)),state:i,steps:a}}const{schedule:kt,cancel:Rr,state:vn,steps:Bm}=TF(typeof requestAnimationFrame<"u"?requestAnimationFrame:tn,!0),IF={useVisualState:xk({scrapeMotionValuesFromProps:gk,createRenderState:hk,onMount:(e,t,{renderState:n,latestValues:s})=>{kt.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),kt.render(()=>{x0(n,s,{enableHardwareAcceleration:!1},y0(t.tagName),e.transformTemplate),pk(t,n)})}})},PF={useVisualState:xk({scrapeMotionValuesFromProps:b0,createRenderState:g0})};function AF(e,{forwardMotionProps:t=!1},n,s){return{...f0(e)?IF:PF,preloadedFeatures:n,useRender:wF(t),createVisualElement:s,Component:e}}function cs(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}const yk=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function $h(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const RF=e=>t=>yk(t)&&e(t,$h(t));function ms(e,t,n,s){return cs(e,t,RF(n),s)}const LF=(e,t)=>n=>t(e(n)),Xs=(...e)=>e.reduce(LF);function bk(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const Eb=bk("dragHorizontal"),Tb=bk("dragVertical");function vk(e){let t=!1;if(e==="y")t=Tb();else if(e==="x")t=Eb();else{const n=Eb(),s=Tb();n&&s?t=()=>{n(),s()}:(n&&n(),s&&s())}return t}function wk(){const e=vk(!0);return e?(e(),!1):!0}class li{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Ib(e,t){const n="pointer"+(t?"enter":"leave"),s="onHover"+(t?"Start":"End"),i=(a,o)=>{if(a.pointerType==="touch"||wk())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[s]&&kt.update(()=>l[s](a,o))};return ms(e.current,n,i,{passive:!e.getProps()[s]})}class MF extends li{mount(){this.unmount=Xs(Ib(this.node,!0),Ib(this.node,!1))}unmount(){}}class DF extends li{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Xs(cs(this.node.current,"focus",()=>this.onFocus()),cs(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const jk=(e,t)=>t?e===t?!0:jk(e,t.parentElement):!1;function _m(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,$h(n))}class $F extends li{constructor(){super(...arguments),this.removeStartListeners=tn,this.removeEndListeners=tn,this.removeAccessibleListeners=tn,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),a=ms(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:u,globalTapTarget:m}=this.node.getProps();kt.update(()=>{!m&&!jk(this.node.current,l.target)?u&&u(l,c):d&&d(l,c)})},{passive:!(s.onTap||s.onPointerUp)}),o=ms(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=Xs(a,o),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=a=>{if(a.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||_m("up",(c,d)=>{const{onTap:u}=this.node.getProps();u&&kt.update(()=>u(c,d))})};this.removeEndListeners(),this.removeEndListeners=cs(this.node.current,"keyup",o),_m("down",(l,c)=>{this.startPress(l,c)})},n=cs(this.node.current,"keydown",t),s=()=>{this.isPressing&&_m("cancel",(a,o)=>this.cancelPress(a,o))},i=cs(this.node.current,"blur",s);this.removeAccessibleListeners=Xs(n,i)}}startPress(t,n){this.isPressing=!0;const{onTapStart:s,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&kt.update(()=>s(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!wk()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&kt.update(()=>s(t,n))}mount(){const t=this.node.getProps(),n=ms(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),s=cs(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Xs(n,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Ap=new WeakMap,Fm=new WeakMap,OF=e=>{const t=Ap.get(e.target);t&&t(e)},BF=e=>{e.forEach(OF)};function _F({root:e,...t}){const n=e||document;Fm.has(n)||Fm.set(n,{});const s=Fm.get(n),i=JSON.stringify(t);return s[i]||(s[i]=new IntersectionObserver(BF,{root:e,...t})),s[i]}function FF(e,t,n){const s=_F(t);return Ap.set(e,n),s.observe(e),()=>{Ap.delete(e),s.unobserve(e)}}const zF={some:0,all:1};class UF extends li{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:i="some",once:a}=t,o={root:n?n.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:zF[i]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:m}=this.node.getProps(),f=d?u:m;f&&f(c)};return FF(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(VF(t,n))&&this.startObserver()}unmount(){}}function VF({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const HF={inView:{Feature:UF},tap:{Feature:$F},focus:{Feature:DF},hover:{Feature:MF}};function kk(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}function WF(e){const t={};return e.values.forEach((n,s)=>t[s]=n.get()),t}function qF(e){const t={};return e.values.forEach((n,s)=>t[s]=n.getVelocity()),t}function Oh(e,t,n){const s=e.getProps();return v0(s,t,n!==void 0?n:s.custom,WF(e),qF(e))}let KF=tn,w0=tn;const Wi=e=>e*1e3,fs=e=>e/1e3,GF={current:!1},Nk=e=>Array.isArray(e)&&typeof e[0]=="number";function Ck(e){return!!(!e||typeof e=="string"&&Sk[e]||Nk(e)||Array.isArray(e)&&e.every(Ck))}const Vo=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,Sk={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Vo([0,.65,.55,1]),circOut:Vo([.55,0,1,.45]),backIn:Vo([.31,.01,.66,-.59]),backOut:Vo([.33,1.53,.69,.99])};function Ek(e){if(e)return Nk(e)?Vo(e):Array.isArray(e)?e.map(Ek):Sk[e]}function XF(e,t,n,{delay:s=0,duration:i,repeat:a=0,repeatType:o="loop",ease:l,times:c}={}){const d={[t]:n};c&&(d.offset=c);const u=Ek(l);return Array.isArray(u)&&(d.easing=u),e.animate(d,{delay:s,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"})}function YF(e,{repeat:t,repeatType:n="loop"}){const s=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[s]}const Tk=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,QF=1e-7,JF=12;function ZF(e,t,n,s,i){let a,o,l=0;do o=t+(n-t)/2,a=Tk(o,s,i)-e,a>0?n=o:t=o;while(Math.abs(a)>QF&&++l<JF);return o}function pc(e,t,n,s){if(e===t&&n===s)return tn;const i=a=>ZF(a,0,1,e,n);return a=>a===0||a===1?a:Tk(i(a),t,s)}const ez=pc(.42,0,1,1),tz=pc(0,0,.58,1),Ik=pc(.42,0,.58,1),nz=e=>Array.isArray(e)&&typeof e[0]!="number",Pk=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Ak=e=>t=>1-e(1-t),j0=e=>1-Math.sin(Math.acos(e)),Rk=Ak(j0),rz=Pk(j0),Lk=pc(.33,1.53,.69,.99),k0=Ak(Lk),sz=Pk(k0),iz=e=>(e*=2)<1?.5*k0(e):.5*(2-Math.pow(2,-10*(e-1))),az={linear:tn,easeIn:ez,easeInOut:Ik,easeOut:tz,circIn:j0,circInOut:rz,circOut:Rk,backIn:k0,backInOut:sz,backOut:Lk,anticipate:iz},Pb=e=>{if(Array.isArray(e)){w0(e.length===4);const[t,n,s,i]=e;return pc(t,n,s,i)}else if(typeof e=="string")return az[e];return e},N0=(e,t)=>n=>!!(hc(n)&&oF.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),Mk=(e,t,n)=>s=>{if(!hc(s))return s;const[i,a,o,l]=s.match(Dh);return{[e]:parseFloat(i),[t]:parseFloat(a),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},oz=e=>si(0,255,e),zm={...oa,transform:e=>Math.round(oz(e))},Li={test:N0("rgb","red"),parse:Mk("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+zm.transform(e)+", "+zm.transform(t)+", "+zm.transform(n)+", "+il(sl.transform(s))+")"};function lz(e){let t="",n="",s="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,s+=s,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const Rp={test:N0("#"),parse:lz,transform:Li.transform},Aa={test:N0("hsl","hue"),parse:Mk("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+Zr.transform(il(t))+", "+Zr.transform(il(n))+", "+il(sl.transform(s))+")"},Bn={test:e=>Li.test(e)||Rp.test(e)||Aa.test(e),parse:e=>Li.test(e)?Li.parse(e):Aa.test(e)?Aa.parse(e):Rp.parse(e),transform:e=>hc(e)?e:e.hasOwnProperty("red")?Li.transform(e):Aa.transform(e)},Gt=(e,t,n)=>-n*e+n*t+e;function Um(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function cz({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let i=0,a=0,o=0;if(!t)i=a=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;i=Um(c,l,e+1/3),a=Um(c,l,e),o=Um(c,l,e-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:s}}const Vm=(e,t,n)=>{const s=e*e;return Math.sqrt(Math.max(0,n*(t*t-s)+s))},dz=[Rp,Li,Aa],uz=e=>dz.find(t=>t.test(e));function Ab(e){const t=uz(e);let n=t.parse(e);return t===Aa&&(n=cz(n)),n}const Dk=(e,t)=>{const n=Ab(e),s=Ab(t),i={...n};return a=>(i.red=Vm(n.red,s.red,a),i.green=Vm(n.green,s.green,a),i.blue=Vm(n.blue,s.blue,a),i.alpha=Gt(n.alpha,s.alpha,a),Li.transform(i))};function hz(e){var t,n;return isNaN(e)&&hc(e)&&(((t=e.match(Dh))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(lk))===null||n===void 0?void 0:n.length)||0)>0}const $k={regex:iF,countKey:"Vars",token:"${v}",parse:tn},Ok={regex:lk,countKey:"Colors",token:"${c}",parse:Bn.parse},Bk={regex:Dh,countKey:"Numbers",token:"${n}",parse:oa.parse};function Hm(e,{regex:t,countKey:n,token:s,parse:i}){const a=e.tokenised.match(t);a&&(e["num"+n]=a.length,e.tokenised=e.tokenised.replace(t,s),e.values.push(...a.map(i)))}function ou(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Hm(n,$k),Hm(n,Ok),Hm(n,Bk),n}function _k(e){return ou(e).values}function Fk(e){const{values:t,numColors:n,numVars:s,tokenised:i}=ou(e),a=t.length;return o=>{let l=i;for(let c=0;c<a;c++)c<s?l=l.replace($k.token,o[c]):c<s+n?l=l.replace(Ok.token,Bn.transform(o[c])):l=l.replace(Bk.token,il(o[c]));return l}}const mz=e=>typeof e=="number"?0:e;function fz(e){const t=_k(e);return Fk(e)(t.map(mz))}const ii={test:hz,parse:_k,createTransformer:Fk,getAnimatableNone:fz},zk=(e,t)=>n=>`${n>0?t:e}`;function Uk(e,t){return typeof e=="number"?n=>Gt(e,t,n):Bn.test(e)?Dk(e,t):e.startsWith("var(")?zk(e,t):Hk(e,t)}const Vk=(e,t)=>{const n=[...e],s=n.length,i=e.map((a,o)=>Uk(a,t[o]));return a=>{for(let o=0;o<s;o++)n[o]=i[o](a);return n}},pz=(e,t)=>{const n={...e,...t},s={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(s[i]=Uk(e[i],t[i]));return i=>{for(const a in s)n[a]=s[a](i);return n}},Hk=(e,t)=>{const n=ii.createTransformer(t),s=ou(e),i=ou(t);return s.numVars===i.numVars&&s.numColors===i.numColors&&s.numNumbers>=i.numNumbers?Xs(Vk(s.values,i.values),n):zk(e,t)},so=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s},Rb=(e,t)=>n=>Gt(e,t,n);function gz(e){return typeof e=="number"?Rb:typeof e=="string"?Bn.test(e)?Dk:Hk:Array.isArray(e)?Vk:typeof e=="object"?pz:Rb}function xz(e,t,n){const s=[],i=n||gz(e[0]),a=e.length-1;for(let o=0;o<a;o++){let l=i(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||tn:t;l=Xs(c,l)}s.push(l)}return s}function Bh(e,t,{clamp:n=!0,ease:s,mixer:i}={}){const a=e.length;if(w0(a===t.length),a===1)return()=>t[0];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=xz(t,s,i),l=o.length,c=d=>{let u=0;if(l>1)for(;u<e.length-2&&!(d<e[u+1]);u++);const m=so(e[u],e[u+1],d);return o[u](m)};return n?d=>c(si(e[0],e[a-1],d)):c}function yz(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const i=so(0,t,s);e.push(Gt(n,1,i))}}function Wk(e){const t=[0];return yz(t,e.length-1),t}function bz(e,t){return e.map(n=>n*t)}function vz(e,t){return e.map(()=>t||Ik).splice(0,e.length-1)}function lu({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const i=nz(s)?s.map(Pb):Pb(s),a={done:!1,value:t[0]},o=bz(n&&n.length===t.length?n:Wk(t),e),l=Bh(o,t,{ease:Array.isArray(i)?i:vz(t,i)});return{calculatedDuration:e,next:c=>(a.value=l(c),a.done=c>=e,a)}}function C0(e,t){return t?e*(1e3/t):0}const wz=5;function qk(e,t,n){const s=Math.max(t-wz,0);return C0(n-e(s),t-s)}const Wm=.001,jz=.01,kz=10,Nz=.05,Cz=1;function Sz({duration:e=800,bounce:t=.25,velocity:n=0,mass:s=1}){let i,a,o=1-t;o=si(Nz,Cz,o),e=si(jz,kz,fs(e)),o<1?(i=d=>{const u=d*o,m=u*e,f=u-n,p=Lp(d,o),x=Math.exp(-m);return Wm-f/p*x},a=d=>{const m=d*o*e,f=m*n+n,p=Math.pow(o,2)*Math.pow(d,2)*e,x=Math.exp(-m),g=Lp(Math.pow(d,2),o);return(-i(d)+Wm>0?-1:1)*((f-p)*x)/g}):(i=d=>{const u=Math.exp(-d*e),m=(d-n)*e+1;return-Wm+u*m},a=d=>{const u=Math.exp(-d*e),m=(n-d)*(e*e);return u*m});const l=5/e,c=Tz(i,a,l);if(e=Wi(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const d=Math.pow(c,2)*s;return{stiffness:d,damping:o*2*Math.sqrt(s*d),duration:e}}}const Ez=12;function Tz(e,t,n){let s=n;for(let i=1;i<Ez;i++)s=s-e(s)/t(s);return s}function Lp(e,t){return e*Math.sqrt(1-t*t)}const Iz=["duration","bounce"],Pz=["stiffness","damping","mass"];function Lb(e,t){return t.some(n=>e[n]!==void 0)}function Az(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Lb(e,Pz)&&Lb(e,Iz)){const n=Sz(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function Kk({keyframes:e,restDelta:t,restSpeed:n,...s}){const i=e[0],a=e[e.length-1],o={done:!1,value:i},{stiffness:l,damping:c,mass:d,duration:u,velocity:m,isResolvedFromDuration:f}=Az({...s,velocity:-fs(s.velocity||0)}),p=m||0,x=c/(2*Math.sqrt(l*d)),g=a-i,b=fs(Math.sqrt(l/d)),w=Math.abs(g)<5;n||(n=w?.01:2),t||(t=w?.005:.5);let k;if(x<1){const v=Lp(b,x);k=N=>{const C=Math.exp(-x*b*N);return a-C*((p+x*b*g)/v*Math.sin(v*N)+g*Math.cos(v*N))}}else if(x===1)k=v=>a-Math.exp(-b*v)*(g+(p+b*g)*v);else{const v=b*Math.sqrt(x*x-1);k=N=>{const C=Math.exp(-x*b*N),T=Math.min(v*N,300);return a-C*((p+x*b*g)*Math.sinh(T)+v*g*Math.cosh(T))/v}}return{calculatedDuration:f&&u||null,next:v=>{const N=k(v);if(f)o.done=v>=u;else{let C=p;v!==0&&(x<1?C=qk(k,v,N):C=0);const T=Math.abs(C)<=n,E=Math.abs(a-N)<=t;o.done=T&&E}return o.value=o.done?a:N,o}}}function Mb({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}){const m=e[0],f={done:!1,value:m},p=P=>l!==void 0&&P<l||c!==void 0&&P>c,x=P=>l===void 0?c:c===void 0||Math.abs(l-P)<Math.abs(c-P)?l:c;let g=n*t;const b=m+g,w=o===void 0?b:o(b);w!==b&&(g=w-m);const k=P=>-g*Math.exp(-P/s),v=P=>w+k(P),N=P=>{const R=k(P),y=v(P);f.done=Math.abs(R)<=d,f.value=f.done?w:y};let C,T;const E=P=>{p(f.value)&&(C=P,T=Kk({keyframes:[f.value,x(f.value)],velocity:qk(v,P,f.value),damping:i,stiffness:a,restDelta:d,restSpeed:u}))};return E(0),{calculatedDuration:null,next:P=>{let R=!1;return!T&&C===void 0&&(R=!0,N(P),E(P)),C!==void 0&&P>C?T.next(P-C):(!R&&N(P),f)}}}const Rz=e=>{const t=({timestamp:n})=>e(n);return{start:()=>kt.update(t,!0),stop:()=>Rr(t),now:()=>vn.isProcessing?vn.timestamp:performance.now()}},Db=2e4;function $b(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<Db;)t+=n,s=e.next(t);return t>=Db?1/0:t}const Lz={decay:Mb,inertia:Mb,tween:lu,keyframes:lu,spring:Kk};function cu({autoplay:e=!0,delay:t=0,driver:n=Rz,keyframes:s,type:i="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:l="loop",onPlay:c,onStop:d,onComplete:u,onUpdate:m,...f}){let p=1,x=!1,g,b;const w=()=>{b=new Promise(H=>{g=H})};w();let k;const v=Lz[i]||lu;let N;v!==lu&&typeof s[0]!="number"&&(N=Bh([0,100],s,{clamp:!1}),s=[0,100]);const C=v({...f,keyframes:s});let T;l==="mirror"&&(T=v({...f,keyframes:[...s].reverse(),velocity:-(f.velocity||0)}));let E="idle",P=null,R=null,y=null;C.calculatedDuration===null&&a&&(C.calculatedDuration=$b(C));const{calculatedDuration:O}=C;let _=1/0,L=1/0;O!==null&&(_=O+o,L=_*(a+1)-o);let A=0;const M=H=>{if(R===null)return;p>0&&(R=Math.min(R,H)),p<0&&(R=Math.min(H-L/p,R)),P!==null?A=P:A=Math.round(H-R)*p;const K=A-t*(p>=0?1:-1),$=p>=0?K<0:K>L;A=Math.max(K,0),E==="finished"&&P===null&&(A=L);let me=A,ke=C;if(a){const W=Math.min(A,L)/_;let Z=Math.floor(W),Y=W%1;!Y&&W>=1&&(Y=1),Y===1&&Z--,Z=Math.min(Z,a+1),!!(Z%2)&&(l==="reverse"?(Y=1-Y,o&&(Y-=o/_)):l==="mirror"&&(ke=T)),me=si(0,1,Y)*_}const ye=$?{done:!1,value:s[0]}:ke.next(me);N&&(ye.value=N(ye.value));let{done:se}=ye;!$&&O!==null&&(se=p>=0?A>=L:A<=0);const G=P===null&&(E==="finished"||E==="running"&&se);return m&&m(ye.value),G&&X(),ye},z=()=>{k&&k.stop(),k=void 0},ie=()=>{E="idle",z(),g(),w(),R=y=null},X=()=>{E="finished",u&&u(),z(),g()},te=()=>{if(x)return;k||(k=n(M));const H=k.now();c&&c(),P!==null?R=H-P:(!R||E==="finished")&&(R=H),E==="finished"&&w(),y=R,P=null,E="running",k.start()};e&&te();const B={then(H,K){return b.then(H,K)},get time(){return fs(A)},set time(H){H=Wi(H),A=H,P!==null||!k||p===0?P=H:R=k.now()-H/p},get duration(){const H=C.calculatedDuration===null?$b(C):C.calculatedDuration;return fs(H)},get speed(){return p},set speed(H){H===p||!k||(p=H,B.time=fs(A))},get state(){return E},play:te,pause:()=>{E="paused",P=A},stop:()=>{x=!0,E!=="idle"&&(E="idle",d&&d(),ie())},cancel:()=>{y!==null&&M(y),ie()},complete:()=>{E="finished"},sample:H=>(R=0,M(H))};return B}function Mz(e){let t;return()=>(t===void 0&&(t=e()),t)}const Dz=Mz(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),$z=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Fc=10,Oz=2e4,Bz=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Ck(t.ease);function _z(e,t,{onUpdate:n,onComplete:s,...i}){if(!(Dz()&&$z.has(t)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,l,c,d=!1;const u=()=>{c=new Promise(v=>{l=v})};u();let{keyframes:m,duration:f=300,ease:p,times:x}=i;if(Bz(t,i)){const v=cu({...i,repeat:0,delay:0});let N={done:!1,value:m[0]};const C=[];let T=0;for(;!N.done&&T<Oz;)N=v.sample(T),C.push(N.value),T+=Fc;x=void 0,m=C,f=T-Fc,p="linear"}const g=XF(e.owner.current,t,m,{...i,duration:f,ease:p,times:x}),b=()=>{d=!1,g.cancel()},w=()=>{d=!0,kt.update(b),l(),u()};return g.onfinish=()=>{d||(e.set(YF(m,i)),s&&s(),w())},{then(v,N){return c.then(v,N)},attachTimeline(v){return g.timeline=v,g.onfinish=null,tn},get time(){return fs(g.currentTime||0)},set time(v){g.currentTime=Wi(v)},get speed(){return g.playbackRate},set speed(v){g.playbackRate=v},get duration(){return fs(f)},play:()=>{o||(g.play(),Rr(b))},pause:()=>g.pause(),stop:()=>{if(o=!0,g.playState==="idle")return;const{currentTime:v}=g;if(v){const N=cu({...i,autoplay:!1});e.setWithVelocity(N.sample(v-Fc).value,N.sample(v).value,Fc)}w()},complete:()=>{d||g.finish()},cancel:w}}function Fz({keyframes:e,delay:t,onUpdate:n,onComplete:s}){const i=()=>(n&&n(e[e.length-1]),s&&s(),{time:0,speed:1,duration:0,play:tn,pause:tn,stop:tn,then:a=>(a(),Promise.resolve()),cancel:tn,complete:tn});return t?cu({keyframes:[0,1],duration:0,delay:t,onComplete:i}):i()}const zz={type:"spring",stiffness:500,damping:25,restSpeed:10},Uz=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Vz={type:"keyframes",duration:.8},Hz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Wz=(e,{keyframes:t})=>t.length>2?Vz:aa.has(e)?e.startsWith("scale")?Uz(t[1]):zz:Hz,Mp=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ii.test(t)||t==="0")&&!t.startsWith("url(")),qz=new Set(["brightness","contrast","saturate","opacity"]);function Kz(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(Dh)||[];if(!s)return e;const i=n.replace(s,"");let a=qz.has(t)?1:0;return s!==n&&(a*=100),t+"("+a+i+")"}const Gz=/([a-z-]*)\(.*?\)/g,Dp={...ii,getAnimatableNone:e=>{const t=e.match(Gz);return t?t.map(Kz).join(" "):e}},Xz={...ck,color:Bn,backgroundColor:Bn,outlineColor:Bn,fill:Bn,stroke:Bn,borderColor:Bn,borderTopColor:Bn,borderRightColor:Bn,borderBottomColor:Bn,borderLeftColor:Bn,filter:Dp,WebkitFilter:Dp},S0=e=>Xz[e];function Gk(e,t){let n=S0(e);return n!==Dp&&(n=ii),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Xk=e=>/^0[^.\s]+$/.test(e);function Yz(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||Xk(e)}function Qz(e,t,n,s){const i=Mp(t,n);let a;Array.isArray(n)?a=[...n]:a=[null,n];const o=s.from!==void 0?s.from:e.get();let l;const c=[];for(let d=0;d<a.length;d++)a[d]===null&&(a[d]=d===0?o:a[d-1]),Yz(a[d])&&c.push(d),typeof a[d]=="string"&&a[d]!=="none"&&a[d]!=="0"&&(l=a[d]);if(i&&c.length&&l)for(let d=0;d<c.length;d++){const u=c[d];a[u]=Gk(t,l)}return a}function Jz({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}function E0(e,t){return e[t]||e.default||e}const Zz={skipAnimations:!1},T0=(e,t,n,s={})=>i=>{const a=E0(s,e)||{},o=a.delay||s.delay||0;let{elapsed:l=0}=s;l=l-Wi(o);const c=Qz(t,e,n,a),d=c[0],u=c[c.length-1],m=Mp(e,d),f=Mp(e,u);let p={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...a,delay:-l,onUpdate:x=>{t.set(x),a.onUpdate&&a.onUpdate(x)},onComplete:()=>{i(),a.onComplete&&a.onComplete()}};if(Jz(a)||(p={...p,...Wz(e,p)}),p.duration&&(p.duration=Wi(p.duration)),p.repeatDelay&&(p.repeatDelay=Wi(p.repeatDelay)),!m||!f||GF.current||a.type===!1||Zz.skipAnimations)return Fz(p);if(!s.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const x=_z(t,e,p);if(x)return x}return cu(p)};function du(e){return!!(qn(e)&&e.add)}const Yk=e=>/^\-?\d*\.?\d+$/.test(e);function I0(e,t){e.indexOf(t)===-1&&e.push(t)}function P0(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class A0{constructor(){this.subscriptions=[]}add(t){return I0(this.subscriptions,t),()=>P0(this.subscriptions,t)}notify(t,n,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,s);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const eU=e=>!isNaN(parseFloat(e)),al={current:void 0};class tU{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(s,i=!0)=>{this.prev=this.current,this.current=s;const{delta:a,timestamp:o}=vn;this.lastUpdated!==o&&(this.timeDelta=a,this.lastUpdated=o,kt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>kt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:s})=>{s!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=eU(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new A0);const s=this.events[t].add(n);return t==="change"?()=>{s(),kt.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,s){this.set(n),this.prev=t,this.timeDelta=s}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return al.current&&al.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?C0(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Er(e,t){return new tU(e,t)}const Qk=e=>t=>t.test(e),nU={test:e=>e==="auto",parse:e=>e},Jk=[oa,Ke,Zr,Ms,cF,lF,nU],Ao=e=>Jk.find(Qk(e)),rU=[...Jk,Bn,ii],sU=e=>rU.find(Qk(e));function iU(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Er(n))}function aU(e,t){const n=Oh(e,t);let{transitionEnd:s={},transition:i={},...a}=n?e.makeTargetAnimatable(n,!1):{};a={...a,...s};for(const o in a){const l=kF(a[o]);iU(e,o,l)}}function oU(e,t,n){var s,i;const a=Object.keys(t).filter(l=>!e.hasValue(l)),o=a.length;if(o)for(let l=0;l<o;l++){const c=a[l],d=t[c];let u=null;Array.isArray(d)&&(u=d[0]),u===null&&(u=(i=(s=n[c])!==null&&s!==void 0?s:e.readValue(c))!==null&&i!==void 0?i:t[c]),u!=null&&(typeof u=="string"&&(Yk(u)||Xk(u))?u=parseFloat(u):!sU(u)&&ii.test(d)&&(u=Gk(c,d)),e.addValue(c,Er(u,{owner:e})),n[c]===void 0&&(n[c]=u),u!==null&&e.setBaseTarget(c,u))}}function lU(e,t){return t?(t[e]||t.default||t).from:void 0}function cU(e,t,n){const s={};for(const i in e){const a=lU(i,t);if(a!==void 0)s[i]=a;else{const o=n.getValue(i);o&&(s[i]=o.get())}}return s}function dU({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function uU(e,t){const n=e.get();if(Array.isArray(t)){for(let s=0;s<t.length;s++)if(t[s]!==n)return!0}else return n!==t}function Zk(e,t,{delay:n=0,transitionOverride:s,type:i}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:o,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");s&&(a=s);const d=[],u=i&&e.animationState&&e.animationState.getState()[i];for(const m in l){const f=e.getValue(m),p=l[m];if(!f||p===void 0||u&&dU(u,m))continue;const x={delay:n,elapsed:0,...E0(a||{},m)};if(window.HandoffAppearAnimations){const w=e.getProps()[nk];if(w){const k=window.HandoffAppearAnimations(w,m,f,kt);k!==null&&(x.elapsed=k,x.isHandoff=!0)}}let g=!x.isHandoff&&!uU(f,p);if(x.type==="spring"&&(f.getVelocity()||x.velocity)&&(g=!1),f.animation&&(g=!1),g)continue;f.start(T0(m,f,p,e.shouldReduceMotion&&aa.has(m)?{type:!1}:x));const b=f.animation;du(c)&&(c.add(m),b.then(()=>c.remove(m))),d.push(b)}return o&&Promise.all(d).then(()=>{o&&aU(e,o)}),d}function $p(e,t,n={}){const s=Oh(e,t,n.custom);let{transition:i=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const a=s?()=>Promise.all(Zk(e,s,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:u,staggerDirection:m}=i;return hU(e,t,d+c,u,m,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,d]=l==="beforeChildren"?[a,o]:[o,a];return c().then(()=>d())}else return Promise.all([a(),o(n.delay)])}function hU(e,t,n=0,s=0,i=1,a){const o=[],l=(e.variantChildren.size-1)*s,c=i===1?(d=0)=>d*s:(d=0)=>l-d*s;return Array.from(e.variantChildren).sort(mU).forEach((d,u)=>{d.notify("AnimationStart",t),o.push($p(d,t,{...a,delay:n+c(u)}).then(()=>d.notify("AnimationComplete",t)))}),Promise.all(o)}function mU(e,t){return e.sortNodePosition(t)}function fU(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const i=t.map(a=>$p(e,a,n));s=Promise.all(i)}else if(typeof t=="string")s=$p(e,t,n);else{const i=typeof t=="function"?Oh(e,t,n.custom):t;s=Promise.all(Zk(e,i,n))}return s.then(()=>e.notify("AnimationComplete",t))}const pU=[...u0].reverse(),gU=u0.length;function xU(e){return t=>Promise.all(t.map(({animation:n,options:s})=>fU(e,n,s)))}function yU(e){let t=xU(e);const n=vU();let s=!0;const i=(c,d)=>{const u=Oh(e,d);if(u){const{transition:m,transitionEnd:f,...p}=u;c={...c,...p,...f}}return c};function a(c){t=c(e)}function o(c,d){const u=e.getProps(),m=e.getVariantContext(!0)||{},f=[],p=new Set;let x={},g=1/0;for(let w=0;w<gU;w++){const k=pU[w],v=n[k],N=u[k]!==void 0?u[k]:m[k],C=Ll(N),T=k===d?v.isActive:null;T===!1&&(g=w);let E=N===m[k]&&N!==u[k]&&C;if(E&&s&&e.manuallyAnimateOnMount&&(E=!1),v.protectedKeys={...x},!v.isActive&&T===null||!N&&!v.prevProp||Lh(N)||typeof N=="boolean")continue;let R=bU(v.prevProp,N)||k===d&&v.isActive&&!E&&C||w>g&&C,y=!1;const O=Array.isArray(N)?N:[N];let _=O.reduce(i,{});T===!1&&(_={});const{prevResolvedValues:L={}}=v,A={...L,..._},M=z=>{R=!0,p.has(z)&&(y=!0,p.delete(z)),v.needsAnimating[z]=!0};for(const z in A){const ie=_[z],X=L[z];if(x.hasOwnProperty(z))continue;let te=!1;au(ie)&&au(X)?te=!kk(ie,X):te=ie!==X,te?ie!==void 0?M(z):p.add(z):ie!==void 0&&p.has(z)?M(z):v.protectedKeys[z]=!0}v.prevProp=N,v.prevResolvedValues=_,v.isActive&&(x={...x,..._}),s&&e.blockInitialAnimation&&(R=!1),R&&(!E||y)&&f.push(...O.map(z=>({animation:z,options:{type:k,...c}})))}if(p.size){const w={};p.forEach(k=>{const v=e.getBaseTarget(k);v!==void 0&&(w[k]=v)}),f.push({animation:w})}let b=!!f.length;return s&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(b=!1),s=!1,b?t(f):Promise.resolve()}function l(c,d,u){var m;if(n[c].isActive===d)return Promise.resolve();(m=e.variantChildren)===null||m===void 0||m.forEach(p=>{var x;return(x=p.animationState)===null||x===void 0?void 0:x.setActive(c,d)}),n[c].isActive=d;const f=o(u,c);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>n}}function bU(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!kk(t,e):!1}function pi(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function vU(){return{animate:pi(!0),whileInView:pi(),whileHover:pi(),whileTap:pi(),whileDrag:pi(),whileFocus:pi(),exit:pi()}}class wU extends li{constructor(t){super(t),t.animationState||(t.animationState=yU(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Lh(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let jU=0;class kU extends li{constructor(){super(...arguments),this.id=jU++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:s}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const a=this.node.animationState.setActive("exit",!t,{custom:s??this.node.getProps().custom});n&&!t&&a.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const NU={animation:{Feature:wU},exit:{Feature:kU}},Ob=(e,t)=>Math.abs(e-t);function CU(e,t){const n=Ob(e.x,t.x),s=Ob(e.y,t.y);return Math.sqrt(n**2+s**2)}class eN{constructor(t,n,{transformPagePoint:s,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Km(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=CU(m.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:x}=m,{timestamp:g}=vn;this.history.push({...x,timestamp:g});const{onStart:b,onMove:w}=this.handlers;f||(b&&b(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,m)},this.handlePointerMove=(m,f)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=qm(f,this.transformPagePoint),kt.update(this.updatePoint,!0)},this.handlePointerUp=(m,f)=>{this.end();const{onEnd:p,onSessionEnd:x,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Km(m.type==="pointercancel"?this.lastMoveEventInfo:qm(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(m,b),x&&x(m,b)},!yk(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=s,this.contextWindow=i||window;const o=$h(t),l=qm(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=vn;this.history=[{...c,timestamp:d}];const{onSessionStart:u}=n;u&&u(t,Km(l,this.history)),this.removeListeners=Xs(ms(this.contextWindow,"pointermove",this.handlePointerMove),ms(this.contextWindow,"pointerup",this.handlePointerUp),ms(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Rr(this.updatePoint)}}function qm(e,t){return t?{point:t(e.point)}:e}function Bb(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Km({point:e},t){return{point:e,delta:Bb(e,tN(t)),offset:Bb(e,SU(t)),velocity:EU(t,.1)}}function SU(e){return e[0]}function tN(e){return e[e.length-1]}function EU(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const i=tN(e);for(;n>=0&&(s=e[n],!(i.timestamp-s.timestamp>Wi(t)));)n--;if(!s)return{x:0,y:0};const a=fs(i.timestamp-s.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-s.x)/a,y:(i.y-s.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ar(e){return e.max-e.min}function Op(e,t=0,n=.01){return Math.abs(e-t)<=n}function _b(e,t,n,s=.5){e.origin=s,e.originPoint=Gt(t.min,t.max,e.origin),e.scale=ar(n)/ar(t),(Op(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Gt(n.min,n.max,e.origin)-e.originPoint,(Op(e.translate)||isNaN(e.translate))&&(e.translate=0)}function ol(e,t,n,s){_b(e.x,t.x,n.x,s?s.originX:void 0),_b(e.y,t.y,n.y,s?s.originY:void 0)}function Fb(e,t,n){e.min=n.min+t.min,e.max=e.min+ar(t)}function TU(e,t,n){Fb(e.x,t.x,n.x),Fb(e.y,t.y,n.y)}function zb(e,t,n){e.min=t.min-n.min,e.max=e.min+ar(t)}function ll(e,t,n){zb(e.x,t.x,n.x),zb(e.y,t.y,n.y)}function IU(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?Gt(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?Gt(n,e,s.max):Math.min(e,n)),e}function Ub(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function PU(e,{top:t,left:n,bottom:s,right:i}){return{x:Ub(e.x,n,i),y:Ub(e.y,t,s)}}function Vb(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function AU(e,t){return{x:Vb(e.x,t.x),y:Vb(e.y,t.y)}}function RU(e,t){let n=.5;const s=ar(e),i=ar(t);return i>s?n=so(t.min,t.max-s,e.min):s>i&&(n=so(e.min,e.max-i,t.min)),si(0,1,n)}function LU(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Bp=.35;function MU(e=Bp){return e===!1?e=0:e===!0&&(e=Bp),{x:Hb(e,"left","right"),y:Hb(e,"top","bottom")}}function Hb(e,t,n){return{min:Wb(e,t),max:Wb(e,n)}}function Wb(e,t){return typeof e=="number"?e:e[t]||0}const qb=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ra=()=>({x:qb(),y:qb()}),Kb=()=>({min:0,max:0}),un=()=>({x:Kb(),y:Kb()});function ur(e){return[e("x"),e("y")]}function nN({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function DU({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function $U(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function Gm(e){return e===void 0||e===1}function _p({scale:e,scaleX:t,scaleY:n}){return!Gm(e)||!Gm(t)||!Gm(n)}function Ni(e){return _p(e)||rN(e)||e.z||e.rotate||e.rotateX||e.rotateY}function rN(e){return Gb(e.x)||Gb(e.y)}function Gb(e){return e&&e!=="0%"}function uu(e,t,n){const s=e-n,i=t*s;return n+i}function Xb(e,t,n,s,i){return i!==void 0&&(e=uu(e,i,s)),uu(e,n,s)+t}function Fp(e,t=0,n=1,s,i){e.min=Xb(e.min,t,n,s,i),e.max=Xb(e.max,t,n,s,i)}function sN(e,{x:t,y:n}){Fp(e.x,t.translate,t.scale,t.originPoint),Fp(e.y,n.translate,n.scale,n.originPoint)}function OU(e,t,n,s=!1){const i=n.length;if(!i)return;t.x=t.y=1;let a,o;for(let l=0;l<i;l++){a=n[l],o=a.projectionDelta;const c=a.instance;c&&c.style&&c.style.display==="contents"||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&La(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,sN(e,o)),s&&Ni(a.latestValues)&&La(e,a.latestValues))}t.x=Yb(t.x),t.y=Yb(t.y)}function Yb(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Os(e,t){e.min=e.min+t,e.max=e.max+t}function Qb(e,t,[n,s,i]){const a=t[i]!==void 0?t[i]:.5,o=Gt(e.min,e.max,a);Fp(e,t[n],t[s],o,t.scale)}const BU=["x","scaleX","originX"],_U=["y","scaleY","originY"];function La(e,t){Qb(e.x,t,BU),Qb(e.y,t,_U)}function iN(e,t){return nN($U(e.getBoundingClientRect(),t))}function FU(e,t,n){const s=iN(e,n),{scroll:i}=t;return i&&(Os(s.x,i.offset.x),Os(s.y,i.offset.y)),s}const aN=({current:e})=>e?e.ownerDocument.defaultView:null,zU=new WeakMap;class UU{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=un(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor($h(u,"page").point)},a=(u,m)=>{const{drag:f,dragPropagation:p,onDragStart:x}=this.getProps();if(f&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=vk(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ur(b=>{let w=this.getAxisMotionValue(b).get()||0;if(Zr.test(w)){const{projection:k}=this.visualElement;if(k&&k.layout){const v=k.layout.layoutBox[b];v&&(w=ar(v)*(parseFloat(w)/100))}}this.originPoint[b]=w}),x&&kt.update(()=>x(u,m),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(u,m)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:x,onDrag:g}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:b}=m;if(p&&this.currentDirection===null){this.currentDirection=VU(b),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",m.point,b),this.updateAxis("y",m.point,b),this.visualElement.render(),g&&g(u,m)},l=(u,m)=>this.stop(u,m),c=()=>ur(u=>{var m;return this.getAnimationState(u)==="paused"&&((m=this.getAxisMotionValue(u).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new eN(t,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:aN(this.visualElement)})}stop(t,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&kt.update(()=>a(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:i}=this.getProps();if(!s||!zc(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let o=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(o=IU(o,this.constraints[t],this.elastic[t])),a.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:s}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;n&&Pa(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=PU(i.layoutBox,n):this.constraints=!1,this.elastic=MU(s),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ur(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=LU(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Pa(t))return!1;const s=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=FU(s,i.root,this.visualElement.getTransformPagePoint());let o=AU(i.layout.layoutBox,a);if(n){const l=n(DU(o));this.hasMutatedConstraints=!!l,l&&(o=nN(l))}return o}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=ur(u=>{if(!zc(u,n,this.currentDirection))return;let m=c&&c[u]||{};o&&(m={min:0,max:0});const f=i?200:1e6,p=i?40:1e7,x={type:"inertia",velocity:s?t[u]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...a,...m};return this.startAxisValueAnimation(u,x)});return Promise.all(d).then(l)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return s.start(T0(t,s,0,n))}stopAnimation(){ur(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ur(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),s=this.visualElement.getProps(),i=s[n];return i||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){ur(n=>{const{drag:s}=this.getProps();if(!zc(n,s,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];a.set(t[n]-Gt(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Pa(n)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ur(o=>{const l=this.getAxisMotionValue(o);if(l){const c=l.get();i[o]=RU({min:c,max:c},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),ur(o=>{if(!zc(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(Gt(c,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;zU.set(this.visualElement,this);const t=this.visualElement.current,n=ms(t,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();Pa(c)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),s();const o=cs(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(ur(u=>{const m=this.getAxisMotionValue(u);m&&(this.originPoint[u]+=c[u].translate,m.set(m.get()+c[u].translate))}),this.visualElement.render())});return()=>{o(),n(),a(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=Bp,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function zc(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function VU(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class HU extends li{constructor(t){super(t),this.removeGroupControls=tn,this.removeListeners=tn,this.controls=new UU(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||tn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Jb=e=>(t,n)=>{e&&kt.update(()=>e(t,n))};class WU extends li{constructor(){super(...arguments),this.removePointerDownListener=tn}onPointerDown(t){this.session=new eN(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:aN(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:Jb(t),onStart:Jb(n),onMove:s,onEnd:(a,o)=>{delete this.session,i&&kt.update(()=>i(a,o))}}}mount(){this.removePointerDownListener=ms(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function qU(){const e=h.useContext(Ah);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:s}=e,i=h.useId();return h.useEffect(()=>s(i),[]),!t&&n?[!1,()=>n&&n(i)]:[!0]}const Cd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Zb(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ro={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Ke.test(e))e=parseFloat(e);else return e;const n=Zb(e,t.target.x),s=Zb(e,t.target.y);return`${n}% ${s}%`}},KU={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,i=ii.parse(e);if(i.length>5)return s;const a=ii.createTransformer(e),o=typeof i[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;i[0+o]/=l,i[1+o]/=c;const d=Gt(l,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),a(i)}};class GU extends Fe.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:i}=this.props,{projection:a}=t;tF(XU),a&&(n.group&&n.group.add(a),s&&s.register&&i&&s.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Cd.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:i,isPresent:a}=this.props,o=s.projection;return o&&(o.isPresent=a,i||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?o.promote():o.relegate()||kt.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function oN(e){const[t,n]=qU(),s=h.useContext(m0);return Fe.createElement(GU,{...e,layoutGroup:s,switchLayoutGroup:h.useContext(sk),isPresent:t,safeToRemove:n})}const XU={borderRadius:{...Ro,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ro,borderTopRightRadius:Ro,borderBottomLeftRadius:Ro,borderBottomRightRadius:Ro,boxShadow:KU},lN=["TopLeft","TopRight","BottomLeft","BottomRight"],YU=lN.length,e1=e=>typeof e=="string"?parseFloat(e):e,t1=e=>typeof e=="number"||Ke.test(e);function QU(e,t,n,s,i,a){i?(e.opacity=Gt(0,n.opacity!==void 0?n.opacity:1,JU(s)),e.opacityExit=Gt(t.opacity!==void 0?t.opacity:1,0,ZU(s))):a&&(e.opacity=Gt(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let o=0;o<YU;o++){const l=`border${lN[o]}Radius`;let c=n1(t,l),d=n1(n,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||t1(c)===t1(d)?(e[l]=Math.max(Gt(e1(c),e1(d),s),0),(Zr.test(d)||Zr.test(c))&&(e[l]+="%")):e[l]=d}(t.rotate||n.rotate)&&(e.rotate=Gt(t.rotate||0,n.rotate||0,s))}function n1(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const JU=cN(0,.5,Rk),ZU=cN(.5,.95,tn);function cN(e,t,n){return s=>s<e?0:s>t?1:n(so(e,t,s))}function r1(e,t){e.min=t.min,e.max=t.max}function dr(e,t){r1(e.x,t.x),r1(e.y,t.y)}function s1(e,t,n,s,i){return e-=t,e=uu(e,1/n,s),i!==void 0&&(e=uu(e,1/i,s)),e}function eV(e,t=0,n=1,s=.5,i,a=e,o=e){if(Zr.test(t)&&(t=parseFloat(t),t=Gt(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Gt(a.min,a.max,s);e===a&&(l-=t),e.min=s1(e.min,t,n,l,i),e.max=s1(e.max,t,n,l,i)}function i1(e,t,[n,s,i],a,o){eV(e,t[n],t[s],t[i],t.scale,a,o)}const tV=["x","scaleX","originX"],nV=["y","scaleY","originY"];function a1(e,t,n,s){i1(e.x,t,tV,n?n.x:void 0,s?s.x:void 0),i1(e.y,t,nV,n?n.y:void 0,s?s.y:void 0)}function o1(e){return e.translate===0&&e.scale===1}function dN(e){return o1(e.x)&&o1(e.y)}function rV(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function uN(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function l1(e){return ar(e.x)/ar(e.y)}class sV{constructor(){this.members=[]}add(t){I0(this.members,t),t.scheduleRender()}remove(t){if(P0(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let s;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){s=a;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function c1(e,t,n){let s="";const i=e.x.translate/t.x,a=e.y.translate/t.y;if((i||a)&&(s=`translate3d(${i}px, ${a}px, 0) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:c,rotateX:d,rotateY:u}=n;c&&(s+=`rotate(${c}deg) `),d&&(s+=`rotateX(${d}deg) `),u&&(s+=`rotateY(${u}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(s+=`scale(${o}, ${l})`),s||"none"}const iV=(e,t)=>e.depth-t.depth;class aV{constructor(){this.children=[],this.isDirty=!1}add(t){I0(this.children,t),this.isDirty=!0}remove(t){P0(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(iV),this.isDirty=!1,this.children.forEach(t)}}function oV(e,t){const n=performance.now(),s=({timestamp:i})=>{const a=i-n;a>=t&&(Rr(s),e(a-t))};return kt.read(s,!0),()=>Rr(s)}function lV(e){window.MotionDebug&&window.MotionDebug.record(e)}function cV(e){return e instanceof SVGElement&&e.tagName!=="svg"}function dV(e,t,n){const s=qn(e)?e:Er(e);return s.start(T0("",s,t,n)),s.animation}const d1=["","X","Y","Z"],uV={visibility:"hidden"},u1=1e3;let hV=0;const Ci={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function hN({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(o={},l=t==null?void 0:t()){this.id=hV++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ci.totalNodes=Ci.resolvedTargetDeltas=Ci.recalculatedProjection=0,this.nodes.forEach(pV),this.nodes.forEach(vV),this.nodes.forEach(wV),this.nodes.forEach(gV),lV(Ci)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new aV)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new A0),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=cV(o),this.instance=o;const{layoutId:c,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),e){let m;const f=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=oV(f,250),Cd.hasAnimatedSinceResize&&(Cd.hasAnimatedSinceResize=!1,this.nodes.forEach(m1))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||SV,{onLayoutAnimationStart:b,onLayoutAnimationComplete:w}=u.getProps(),k=!this.targetLayout||!uN(this.targetLayout,x)||p,v=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||v||f&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,v);const N={...E0(g,"layout"),onPlay:b,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else f||m1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Rr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(jV),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const m=this.path[u];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(h1);return}this.isUpdating||this.nodes.forEach(yV),this.isUpdating=!1,this.nodes.forEach(bV),this.nodes.forEach(mV),this.nodes.forEach(fV),this.clearAllSnapshots();const l=performance.now();vn.delta=si(0,1e3/60,l-vn.timestamp),vn.timestamp=l,vn.isProcessing=!0,Bm.update.process(vn),Bm.preRender.process(vn),Bm.render.process(vn),vn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(xV),this.sharedNodes.forEach(kV)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,kt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){kt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=un(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:s(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!dN(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&(l||Ni(this.latestValues)||u)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),EV(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return un();const l=o.measureViewportBox(),{scroll:c}=this.root;return c&&(Os(l.x,c.offset.x),Os(l.y,c.offset.y)),l}removeElementScroll(o){const l=un();dr(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:u,options:m}=d;if(d!==this.root&&u&&m.layoutScroll){if(u.isRoot){dr(l,o);const{scroll:f}=this.root;f&&(Os(l.x,-f.offset.x),Os(l.y,-f.offset.y))}Os(l.x,u.offset.x),Os(l.y,u.offset.y)}}return l}applyTransform(o,l=!1){const c=un();dr(c,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&La(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Ni(u.latestValues)&&La(c,u.latestValues)}return Ni(this.latestValues)&&La(c,this.latestValues),c}removeTransform(o){const l=un();dr(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!Ni(d.latestValues))continue;_p(d.latestValues)&&d.updateSnapshot();const u=un(),m=d.measurePageBox();dr(u,m),a1(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return Ni(this.latestValues)&&a1(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==vn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:m,layoutId:f}=this.options;if(!(!this.layout||!(m||f))){if(this.resolvedRelativeTargetAt=vn.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=un(),this.relativeTargetOrigin=un(),ll(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),dr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=un(),this.targetWithTransforms=un()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),TU(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):dr(this.target,this.layout.layoutBox),sN(this.target,this.targetDelta)):dr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=un(),this.relativeTargetOrigin=un(),ll(this.relativeTargetOrigin,this.target,p.target),dr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ci.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||_p(this.parent.latestValues)||rN(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===vn.timestamp&&(d=!1),d)return;const{layout:u,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||m))return;dr(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;OU(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:x}=l;if(!x){this.projectionTransform&&(this.projectionDelta=Ra(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ra(),this.projectionDeltaWithTransform=Ra());const g=this.projectionTransform;ol(this.projectionDelta,this.layoutCorrected,x,this.latestValues),this.projectionTransform=c1(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==f||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),Ci.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},m=Ra();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=un(),p=c?c.source:void 0,x=this.layout?this.layout.source:void 0,g=p!==x,b=this.getStack(),w=!b||b.members.length<=1,k=!!(g&&!w&&this.options.crossfade===!0&&!this.path.some(CV));this.animationProgress=0;let v;this.mixTargetDelta=N=>{const C=N/1e3;f1(m.x,o.x,C),f1(m.y,o.y,C),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ll(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),NV(this.relativeTarget,this.relativeTargetOrigin,f,C),v&&rV(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=un()),dr(v,this.relativeTarget)),g&&(this.animationValues=u,QU(u,d,this.latestValues,C,k,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Rr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=kt.update(()=>{Cd.hasAnimatedSinceResize=!0,this.currentAnimation=dV(0,u1,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(u1),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&mN(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||un();const m=ar(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+m;const f=ar(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}dr(l,c),La(l,u),ol(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new sV),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const d={};for(let u=0;u<d1.length;u++){const m="rotate"+d1[u];c[m]&&(d[m]=c[m],o.setStaticValue(m,0))}o.render();for(const u in d)o.setStaticValue(u,d[u]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return uV;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Nd(o==null?void 0:o.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Nd(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ni(this.latestValues)&&(g.transform=u?u({},""):"none",this.hasProjected=!1),g}const f=m.animationValues||m.latestValues;this.applyTransformsToTarget(),d.transform=c1(this.projectionDeltaWithTransform,this.treeScale,f),u&&(d.transform=u(f,d.transform));const{x:p,y:x}=this.projectionDelta;d.transformOrigin=`${p.origin*100}% ${x.origin*100}% 0`,m.animationValues?d.opacity=m===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:d.opacity=m===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in su){if(f[g]===void 0)continue;const{correct:b,applyTo:w}=su[g],k=d.transform==="none"?f[g]:b(f[g],m);if(w){const v=w.length;for(let N=0;N<v;N++)d[w[N]]=k}else d[g]=k}return this.options.layoutId&&(d.pointerEvents=m===this?Nd(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(h1),this.root.sharedNodes.clear()}}}function mV(e){e.updateLayout()}function fV(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=e.layout,{animationType:a}=e.options,o=n.source!==e.layout.source;a==="size"?ur(m=>{const f=o?n.measuredBox[m]:n.layoutBox[m],p=ar(f);f.min=s[m].min,f.max=f.min+p}):mN(a,n.layoutBox,s)&&ur(m=>{const f=o?n.measuredBox[m]:n.layoutBox[m],p=ar(s[m]);f.max=f.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[m].max=e.relativeTarget[m].min+p)});const l=Ra();ol(l,s,n.layoutBox);const c=Ra();o?ol(c,e.applyTransform(i,!0),n.measuredBox):ol(c,s,n.layoutBox);const d=!dN(l);let u=!1;if(!e.resumeFrom){const m=e.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:f,layout:p}=m;if(f&&p){const x=un();ll(x,n.layoutBox,f.layoutBox);const g=un();ll(g,s,p.layoutBox),uN(x,g)||(u=!0),m.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=x,e.relativeParent=m)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:u})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function pV(e){Ci.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function gV(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function xV(e){e.clearSnapshot()}function h1(e){e.clearMeasurements()}function yV(e){e.isLayoutDirty=!1}function bV(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function m1(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function vV(e){e.resolveTargetDelta()}function wV(e){e.calcProjection()}function jV(e){e.resetRotation()}function kV(e){e.removeLeadSnapshot()}function f1(e,t,n){e.translate=Gt(t.translate,0,n),e.scale=Gt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function p1(e,t,n,s){e.min=Gt(t.min,n.min,s),e.max=Gt(t.max,n.max,s)}function NV(e,t,n,s){p1(e.x,t.x,n.x,s),p1(e.y,t.y,n.y,s)}function CV(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const SV={duration:.45,ease:[.4,0,.1,1]},g1=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),x1=g1("applewebkit/")&&!g1("chrome/")?Math.round:tn;function y1(e){e.min=x1(e.min),e.max=x1(e.max)}function EV(e){y1(e.x),y1(e.y)}function mN(e,t,n){return e==="position"||e==="preserve-aspect"&&!Op(l1(t),l1(n),.2)}const TV=hN({attachResizeListener:(e,t)=>cs(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Xm={current:void 0},fN=hN({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Xm.current){const e=new TV({});e.mount(window),e.setOptions({layoutScroll:!0}),Xm.current=e}return Xm.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),IV={pan:{Feature:WU},drag:{Feature:HU,ProjectionNode:fN,MeasureLayout:oN}},PV=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function AV(e){const t=PV.exec(e);if(!t)return[,];const[,n,s]=t;return[n,s]}function zp(e,t,n=1){const[s,i]=AV(e);if(!s)return;const a=window.getComputedStyle(t).getPropertyValue(s);if(a){const o=a.trim();return Yk(o)?parseFloat(o):o}else return Pp(i)?zp(i,t,n+1):i}function RV(e,{...t},n){const s=e.current;if(!(s instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(i=>{const a=i.get();if(!Pp(a))return;const o=zp(a,s);o&&i.set(o)});for(const i in t){const a=t[i];if(!Pp(a))continue;const o=zp(a,s);o&&(t[i]=o,n||(n={}),n[i]===void 0&&(n[i]=a))}return{target:t,transitionEnd:n}}const LV=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),pN=e=>LV.has(e),MV=e=>Object.keys(e).some(pN),b1=e=>e===oa||e===Ke,v1=(e,t)=>parseFloat(e.split(", ")[t]),w1=(e,t)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const i=s.match(/^matrix3d\((.+)\)$/);if(i)return v1(i[1],t);{const a=s.match(/^matrix\((.+)\)$/);return a?v1(a[1],e):0}},DV=new Set(["x","y","z"]),$V=uc.filter(e=>!DV.has(e));function OV(e){const t=[];return $V.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const io={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:w1(4,13),y:w1(5,14)};io.translateX=io.x;io.translateY=io.y;const BV=(e,t,n)=>{const s=t.measureViewportBox(),i=t.current,a=getComputedStyle(i),{display:o}=a,l={};o==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(d=>{l[d]=io[d](s,a)}),t.render();const c=t.measureViewportBox();return n.forEach(d=>{const u=t.getValue(d);u&&u.jump(l[d]),e[d]=io[d](c,a)}),e},_V=(e,t,n={},s={})=>{t={...t},s={...s};const i=Object.keys(t).filter(pN);let a=[],o=!1;const l=[];if(i.forEach(c=>{const d=e.getValue(c);if(!e.hasValue(c))return;let u=n[c],m=Ao(u);const f=t[c];let p;if(au(f)){const x=f.length,g=f[0]===null?1:0;u=f[g],m=Ao(u);for(let b=g;b<x&&f[b]!==null;b++)p?w0(Ao(f[b])===p):p=Ao(f[b])}else p=Ao(f);if(m!==p)if(b1(m)&&b1(p)){const x=d.get();typeof x=="string"&&d.set(parseFloat(x)),typeof f=="string"?t[c]=parseFloat(f):Array.isArray(f)&&p===Ke&&(t[c]=f.map(parseFloat))}else m!=null&&m.transform&&(p!=null&&p.transform)&&(u===0||f===0)?u===0?d.set(p.transform(u)):t[c]=m.transform(f):(o||(a=OV(e),o=!0),l.push(c),s[c]=s[c]!==void 0?s[c]:t[c],d.jump(f))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,d=BV(t,e,l);return a.length&&a.forEach(([u,m])=>{e.getValue(u).set(m)}),e.render(),Rh&&c!==null&&window.scrollTo({top:c}),{target:d,transitionEnd:s}}else return{target:t,transitionEnd:s}};function FV(e,t,n,s){return MV(t)?_V(e,t,n,s):{target:t,transitionEnd:s}}const zV=(e,t,n,s)=>{const i=RV(e,t,s);return t=i.target,s=i.transitionEnd,FV(e,t,n,s)},Up={current:null},gN={current:!1};function UV(){if(gN.current=!0,!!Rh)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Up.current=e.matches;e.addListener(t),t()}else Up.current=!1}function VV(e,t,n){const{willChange:s}=t;for(const i in t){const a=t[i],o=n[i];if(qn(a))e.addValue(i,a),du(s)&&s.add(i);else if(qn(o))e.addValue(i,Er(a,{owner:e})),du(s)&&s.remove(i);else if(o!==a)if(e.hasValue(i)){const l=e.getValue(i);!l.hasAnimated&&l.set(a)}else{const l=e.getStaticValue(i);e.addValue(i,Er(l!==void 0?l:a,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const j1=new WeakMap,xN=Object.keys(Ml),HV=xN.length,k1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],WV=h0.length;class qV{constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:i,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>kt.render(this.render,!1,!0);const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=Mh(n),this.isVariantNode=rk(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...u}=this.scrapeMotionValuesFromProps(n,{});for(const m in u){const f=u[m];l[m]!==void 0&&qn(f)&&(f.set(l[m],!1),du(d)&&d.add(m))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,j1.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),gN.current||UV(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Up.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){j1.delete(this.current),this.projection&&this.projection.unmount(),Rr(this.notifyUpdate),Rr(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const s=aa.has(t),i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&kt.update(this.notifyUpdate,!1,!0),s&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{i(),a()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},s,i,a){let o,l;for(let c=0;c<HV;c++){const d=xN[c],{isEnabled:u,Feature:m,ProjectionNode:f,MeasureLayout:p}=Ml[d];f&&(o=f),u(n)&&(!this.features[d]&&m&&(this.features[d]=new m(this)),p&&(l=p))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:d,drag:u,dragConstraints:m,layoutScroll:f,layoutRoot:p}=n;this.projection.setOptions({layoutId:c,layout:d,alwaysMeasureLayout:!!u||m&&Pa(m),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof d=="string"?d:"both",initialPromotionConfig:a,layoutScroll:f,layoutRoot:p})}return l}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):un()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<k1.length;s++){const i=k1[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a=t["on"+i];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=VV(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const s=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(s.initial=this.props.initial),s}const n={};for(let s=0;s<WV;s++){const i=h0[s],a=this.props[i];(Ll(a)||a===!1)&&(n[i]=a)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=Er(n,{owner:this}),this.addValue(t,s)),s}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:s}=this.props,i=typeof s=="string"||typeof s=="object"?(n=v0(this.props,s))===null||n===void 0?void 0:n[t]:void 0;if(s&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!qn(a)?a:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new A0),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class yN extends qV{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...s},{transformValues:i},a){let o=cU(s,t||{},this);if(i&&(n&&(n=i(n)),s&&(s=i(s)),o&&(o=i(o))),a){oU(this,s,o);const l=zV(this,s,o,n);n=l.transitionEnd,s=l.target}return{transition:t,transitionEnd:n,...s}}}function KV(e){return window.getComputedStyle(e)}class GV extends yN{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(aa.has(n)){const s=S0(n);return s&&s.default||0}else{const s=KV(t),i=(ok(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return iN(t,n)}build(t,n,s,i){p0(t,n,s,i.transformTemplate)}scrapeMotionValuesFromProps(t,n){return b0(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;qn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,s,i){mk(t,n,s,i)}}class XV extends yN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(aa.has(n)){const s=S0(n);return s&&s.default||0}return n=fk.has(n)?n:d0(n),t.getAttribute(n)}measureInstanceViewportBox(){return un()}scrapeMotionValuesFromProps(t,n){return gk(t,n)}build(t,n,s,i){x0(t,n,s,this.isSVGTag,i.transformTemplate)}renderInstance(t,n,s,i){pk(t,n,s,i)}mount(t){this.isSVGTag=y0(t.tagName),super.mount(t)}}const YV=(e,t)=>f0(e)?new XV(t,{enableHardwareAcceleration:!1}):new GV(t,{enableHardwareAcceleration:!0}),QV={layout:{ProjectionNode:fN,MeasureLayout:oN}},JV={...NU,...HF,...IV,...QV},qe=Z_((e,t)=>AF(e,t,JV,YV));function bN(){const e=h.useRef(!1);return dc(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function ZV(){const e=bN(),[t,n]=h.useState(0),s=h.useCallback(()=>{e.current&&n(t+1)},[t]);return[h.useCallback(()=>kt.postRender(s),[s]),t]}class eH extends h.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function tH({children:e,isPresent:t}){const n=h.useId(),s=h.useRef(null),i=h.useRef({width:0,height:0,top:0,left:0});return h.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:c}=i.current;if(t||!s.current||!a||!o)return;s.current.dataset.motionPopId=n;const d=document.createElement("style");return document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[t]),h.createElement(eH,{isPresent:t,childRef:s,sizeRef:i},h.cloneElement(e,{ref:s}))}const Ym=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:i,presenceAffectsLayout:a,mode:o})=>{const l=fc(nH),c=h.useId(),d=h.useMemo(()=>({id:c,initial:t,isPresent:n,custom:i,onExitComplete:u=>{l.set(u,!0);for(const m of l.values())if(!m)return;s&&s()},register:u=>(l.set(u,!1),()=>l.delete(u))}),a?void 0:[n]);return h.useMemo(()=>{l.forEach((u,m)=>l.set(m,!1))},[n]),h.useEffect(()=>{!n&&!l.size&&s&&s()},[n]),o==="popLayout"&&(e=h.createElement(tH,{isPresent:n},e)),h.createElement(Ah.Provider,{value:d},e)};function nH(){return new Map}function rH(e){return h.useEffect(()=>()=>e(),[])}const Si=e=>e.key||"";function sH(e,t){e.forEach(n=>{const s=Si(n);t.set(s,n)})}function iH(e){const t=[];return h.Children.forEach(e,n=>{h.isValidElement(n)&&t.push(n)}),t}const R0=({children:e,custom:t,initial:n=!0,onExitComplete:s,exitBeforeEnter:i,presenceAffectsLayout:a=!0,mode:o="sync"})=>{const l=h.useContext(m0).forceRender||ZV()[0],c=bN(),d=iH(e);let u=d;const m=h.useRef(new Map).current,f=h.useRef(u),p=h.useRef(new Map).current,x=h.useRef(!0);if(dc(()=>{x.current=!1,sH(d,p),f.current=u}),rH(()=>{x.current=!0,p.clear(),m.clear()}),x.current)return h.createElement(h.Fragment,null,u.map(k=>h.createElement(Ym,{key:Si(k),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:a,mode:o},k)));u=[...u];const g=f.current.map(Si),b=d.map(Si),w=g.length;for(let k=0;k<w;k++){const v=g[k];b.indexOf(v)===-1&&!m.has(v)&&m.set(v,void 0)}return o==="wait"&&m.size&&(u=[]),m.forEach((k,v)=>{if(b.indexOf(v)!==-1)return;const N=p.get(v);if(!N)return;const C=g.indexOf(v);let T=k;if(!T){const E=()=>{m.delete(v);const P=Array.from(p.keys()).filter(R=>!b.includes(R));if(P.forEach(R=>p.delete(R)),f.current=d.filter(R=>{const y=Si(R);return y===v||P.includes(y)}),!m.size){if(c.current===!1)return;l(),s&&s()}};T=h.createElement(Ym,{key:Si(N),isPresent:!1,onExitComplete:E,custom:t,presenceAffectsLayout:a,mode:o},N),m.set(v,T)}u.splice(C,0,T)}),u=u.map(k=>{const v=k.key;return m.has(v)?k:h.createElement(Ym,{key:Si(k),isPresent:!0,presenceAffectsLayout:a,mode:o},k)}),h.createElement(h.Fragment,null,m.size?u:u.map(k=>h.cloneElement(k)))};function aH(e){const t=fc(()=>Er(e)),{isStatic:n}=h.useContext(c0);if(n){const[,s]=h.useState(e);h.useEffect(()=>t.on("change",s),[])}return t}const oH=e=>e&&typeof e=="object"&&e.mix,lH=e=>oH(e)?e.mix:void 0;function cH(...e){const t=!Array.isArray(e[0]),n=t?0:-1,s=e[0+n],i=e[1+n],a=e[2+n],o=e[3+n],l=Bh(i,a,{mixer:lH(a[0]),...o});return t?l(s):l}function vN(e,t){const n=aH(t()),s=()=>n.set(t());return s(),dc(()=>{const i=()=>kt.update(s,!1,!0),a=e.map(o=>o.on("change",i));return()=>{a.forEach(o=>o()),Rr(s)}}),n}function dH(e){al.current=[],e();const t=vN(al.current,e);return al.current=void 0,t}function N1(e,t,n,s){if(typeof e=="function")return dH(e);const i=typeof t=="function"?t:cH(t,n,s);return Array.isArray(e)?C1(e,i):C1([e],([a])=>i(a))}function C1(e,t){const n=fc(()=>[]);return vN(e,()=>{n.length=0;const s=e.length;for(let i=0;i<s;i++)n[i]=e[i].get();return t(n)})}function uH(e,t,n){return typeof e=="string"?e=document.querySelectorAll(e):e instanceof Element&&(e=[e]),Array.from(e||[])}const Sd=new WeakMap;let Ds;function hH(e,t){if(t){const{inlineSize:n,blockSize:s}=t[0];return{width:n,height:s}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function mH({target:e,contentRect:t,borderBoxSize:n}){var s;(s=Sd.get(e))===null||s===void 0||s.forEach(i=>{i({target:e,contentSize:t,get size(){return hH(e,n)}})})}function fH(e){e.forEach(mH)}function pH(){typeof ResizeObserver>"u"||(Ds=new ResizeObserver(fH))}function gH(e,t){Ds||pH();const n=uH(e);return n.forEach(s=>{let i=Sd.get(s);i||(i=new Set,Sd.set(s,i)),i.add(t),Ds==null||Ds.observe(s)}),()=>{n.forEach(s=>{const i=Sd.get(s);i==null||i.delete(t),i!=null&&i.size||Ds==null||Ds.unobserve(s)})}}const Ed=new Set;let cl;function xH(){cl=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};Ed.forEach(n=>n(t))},window.addEventListener("resize",cl)}function yH(e){return Ed.add(e),cl||xH(),()=>{Ed.delete(e),!Ed.size&&cl&&(cl=void 0)}}function bH(e,t){return typeof e=="function"?yH(e):gH(e,t)}const vH=50,S1=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),wH=()=>({time:0,x:S1(),y:S1()}),jH={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function E1(e,t,n,s){const i=n[t],{length:a,position:o}=jH[t],l=i.current,c=n.time;i.current=e["scroll"+o],i.scrollLength=e["scroll"+a]-e["client"+a],i.offset.length=0,i.offset[0]=0,i.offset[1]=i.scrollLength,i.progress=so(0,i.scrollLength,i.current);const d=s-c;i.velocity=d>vH?0:C0(i.current-l,d)}function kH(e,t,n){E1(e,"x",t,n),E1(e,"y",t,n),t.time=n}function NH(e,t){const n={x:0,y:0};let s=e;for(;s&&s!==t;)if(s instanceof HTMLElement)n.x+=s.offsetLeft,n.y+=s.offsetTop,s=s.offsetParent;else if(s.tagName==="svg"){const i=s.getBoundingClientRect();s=s.parentElement;const a=s.getBoundingClientRect();n.x+=i.left-a.left,n.y+=i.top-a.top}else if(s instanceof SVGGraphicsElement){const{x:i,y:a}=s.getBBox();n.x+=i,n.y+=a;let o=null,l=s.parentNode;for(;!o;)l.tagName==="svg"&&(o=l),l=s.parentNode;s=o}else break;return n}const CH={All:[[0,0],[1,1]]},Vp={start:0,center:.5,end:1};function T1(e,t,n=0){let s=0;if(Vp[e]!==void 0&&(e=Vp[e]),typeof e=="string"){const i=parseFloat(e);e.endsWith("px")?s=i:e.endsWith("%")?e=i/100:e.endsWith("vw")?s=i/100*document.documentElement.clientWidth:e.endsWith("vh")?s=i/100*document.documentElement.clientHeight:e=i}return typeof e=="number"&&(s=t*e),n+s}const SH=[0,0];function EH(e,t,n,s){let i=Array.isArray(e)?e:SH,a=0,o=0;return typeof e=="number"?i=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?i=e.split(" "):i=[e,Vp[e]?e:"0"]),a=T1(i[0],n,s),o=T1(i[1],t),a-o}const TH={x:0,y:0};function IH(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function PH(e,t,n){let{offset:s=CH.All}=n;const{target:i=e,axis:a="y"}=n,o=a==="y"?"height":"width",l=i!==e?NH(i,e):TH,c=i===e?{width:e.scrollWidth,height:e.scrollHeight}:IH(i),d={width:e.clientWidth,height:e.clientHeight};t[a].offset.length=0;let u=!t[a].interpolate;const m=s.length;for(let f=0;f<m;f++){const p=EH(s[f],d[o],c[o],l[a]);!u&&p!==t[a].interpolatorOffsets[f]&&(u=!0),t[a].offset[f]=p}u&&(t[a].interpolate=Bh(t[a].offset,Wk(s)),t[a].interpolatorOffsets=[...t[a].offset]),t[a].progress=t[a].interpolate(t[a].current)}function AH(e,t=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let s=t;for(;s&&s!==e;)n.x.targetOffset+=s.offsetLeft,n.y.targetOffset+=s.offsetTop,s=s.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}function RH(e,t,n,s={}){return{measure:()=>AH(e,s.target,n),update:i=>{kH(e,n,i),(s.offset||s.target)&&PH(e,n,s)},notify:()=>t(n)}}const Lo=new WeakMap,I1=new WeakMap,Qm=new WeakMap,P1=e=>e===document.documentElement?window:e;function LH(e,{container:t=document.documentElement,...n}={}){let s=Qm.get(t);s||(s=new Set,Qm.set(t,s));const i=wH(),a=RH(t,e,i,n);if(s.add(a),!Lo.has(t)){const l=()=>{for(const f of s)f.measure()},c=()=>{for(const f of s)f.update(vn.timestamp)},d=()=>{for(const f of s)f.notify()},u=()=>{kt.read(l,!1,!0),kt.read(c,!1,!0),kt.update(d,!1,!0)};Lo.set(t,u);const m=P1(t);window.addEventListener("resize",u,{passive:!0}),t!==document.documentElement&&I1.set(t,bH(t,u)),m.addEventListener("scroll",u,{passive:!0})}const o=Lo.get(t);return kt.read(o,!1,!0),()=>{var l;Rr(o);const c=Qm.get(t);if(!c||(c.delete(a),c.size))return;const d=Lo.get(t);Lo.delete(t),d&&(P1(t).removeEventListener("scroll",d),(l=I1.get(t))===null||l===void 0||l(),window.removeEventListener("resize",d))}}function A1(e,t){KF(!!(!t||t.current))}const MH=()=>({scrollX:Er(0),scrollY:Er(0),scrollXProgress:Er(0),scrollYProgress:Er(0)});function DH({container:e,target:t,layoutEffect:n=!0,...s}={}){const i=fc(MH);return(n?dc:h.useEffect)(()=>(A1("target",t),A1("container",e),LH(({x:o,y:l})=>{i.scrollX.set(o.current),i.scrollXProgress.set(o.progress),i.scrollY.set(l.current),i.scrollYProgress.set(l.progress)},{...s,container:(e==null?void 0:e.current)||void 0,target:(t==null?void 0:t.current)||void 0})),[e,t,JSON.stringify(s.offset)]),i}const $H=()=>{const e=St(),{currentUser:t,isAuthenticated:n}=Kn(),[s,i]=h.useState(0),[a,o]=h.useState([]),[l,c]=h.useState(!0),d=Ht(),u=gn(g=>g.auth.user),[m,f]=h.useState(!1);h.useEffect(()=>{if(!u||Object.keys(u).length===0){const g=localStorage.getItem("user");if(g)try{const b=JSON.parse(g);d(W2(b))}catch(b){console.error("Error parsing user data from localStorage:",b)}}},[d,u]),h.useEffect(()=>{m||(!n&&!localStorage.getItem("token")&&e("/login",{replace:!0}),f(!0))},[n,e,m]);const p=[{quote:"Mọi người nghĩ rằng khoa học máy tính là nghệ thuật của những thiên tài, nhưng thực tế ngược lại, chỉ là nhiều người làm việc cùng nhau, giống như xây dựng một bức tường gạch nhỏ.",author:"Alan Kay",role:"Nhà khoa học máy tính"},{quote:"Đoạn code đầu tiên mà bạn viết sẽ luôn là đoạn code tồi tệ nhất.",author:"Jeff Atwood",role:"Đồng sáng lập Stack Overflow"},{quote:"Học lập trình không phải là học ngôn ngữ, mà là học cách giải quyết vấn đề.",author:"Edsger W. Dijkstra",role:"Nhà khoa học máy tính"},{quote:"Máy tính tốt nhất là máy tính trong đầu bạn.",author:"Alan Turing",role:"Cha đẻ của khoa học máy tính"},{quote:"Đừng sợ thất bại, hãy sợ việc không thử.",author:"Linus Torvalds",role:"Người tạo ra Linux"}];h.useEffect(()=>{const g=setInterval(()=>{i(b=>b===p.length-1?0:b+1)},5e3);return()=>clearInterval(g)},[]),h.useEffect(()=>{(async()=>{try{const b=await bt.getAllCourses();if(b.data&&b.data.success){const k=(b.data.data||[]).sort((v,N)=>(N.EnrolledCount||0)-(v.EnrolledCount||0)).slice(0,4);o(k)}}catch(b){console.error("Error fetching popular courses:",b)}finally{c(!1)}})()},[]);const x=[{title:"Học tập thông minh",description:"Hệ thống học tập thông minh với AI giúp bạn tiếp thu kiến thức hiệu quả hơn",icon:Ag},{title:"Nội dung chất lượng",description:"Kho tài liệu phong phú, được biên soạn bởi các chuyên gia hàng đầu trong ngành",icon:ho},{title:"Thực hành trực tuyến",description:"Môi trường thực hành code trực tuyến với các bài tập và dự án thực tế",icon:yj},{title:"Cộng đồng học tập",description:"Kết nối và trao đổi với cộng đồng người học và chuyên gia trên toàn quốc",icon:vs},{title:"Chứng chỉ công nghiệp",description:"Nhận chứng chỉ được công nhận bởi các công ty công nghệ hàng đầu",icon:ei},{title:"Lộ trình cá nhân hóa",description:"Xây dựng lộ trình học tập phù hợp với mục tiêu và trình độ của bạn",icon:kj}];return r.jsxs("div",{className:"min-h-screen bg-white",children:[r.jsx("section",{className:"relative overflow-hidden bg-white py-32",children:r.jsx("div",{className:"max-w-[1120px] mx-auto px-8 relative z-10",children:r.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center",children:[r.jsxs(qe.h1,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1.2,delay:.2},className:"text-5xl md:text-6xl lg:text-7xl font-semibold tracking-tight mb-6 leading-none",children:["Thành thạo công nghệ.",r.jsx("br",{}),r.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-purple-700",children:"Tạo dựng tương lai."})]}),r.jsxs(qe.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1,delay:.4},className:"text-xl md:text-2xl mb-12 text-gray-600 font-light max-w-3xl mx-auto",children:["Khám phá hơn ",r.jsx("span",{className:"text-black font-normal",children:"500+"})," khóa học IT chất lượng cao. Học từ các chuyên gia hàng đầu và xây dựng sự nghiệp công nghệ thành công."]}),r.jsxs(qe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.6},className:"flex justify-center gap-4 mb-20",children:[r.jsxs(qe.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>e("/courses"),className:"px-8 py-4 bg-blue-600 text-white rounded-full font-medium text-lg shadow-sm transition-all duration-300 flex items-center justify-center gap-2 hover:bg-blue-700",children:["Khám phá ngay",r.jsx(xd,{className:"w-5 h-5"})]}),r.jsxs(qe.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>e("/roadmaps"),className:"px-8 py-4 rounded-full font-medium text-lg transition-all duration-300 flex items-center justify-center gap-2 text-purple-600 hover:text-purple-800",children:["Xem lộ trình",r.jsx(gj,{className:"w-5 h-5"})]})]}),r.jsx(qe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,delay:.6},children:r.jsx("img",{src:"https://images.unsplash.com/photo-1498050108023-c5249f4df085?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2072&q=80",alt:"Campus Learning Platform",className:"mx-auto rounded-2xl shadow-2xl w-full max-w-5xl object-cover"})})]})})}),r.jsx("section",{className:"py-24 bg-white",children:r.jsx("div",{className:"max-w-[1120px] mx-auto px-8 text-center",children:r.jsxs(qe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"grid grid-cols-3 gap-16",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-5xl font-medium text-blue-600 mb-4",children:"10K+"}),r.jsx("div",{className:"text-gray-500 text-lg",children:"Học viên"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-5xl font-medium text-green-600 mb-4",children:"500+"}),r.jsx("div",{className:"text-gray-500 text-lg",children:"Khóa học"})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-5xl font-medium text-purple-600 mb-4",children:"98%"}),r.jsx("div",{className:"text-gray-500 text-lg",children:"Hài lòng"})]})]})})}),r.jsx("section",{className:"py-24 bg-white",children:r.jsxs("div",{className:"max-w-[900px] mx-auto px-8 text-center",children:[r.jsx(R0,{mode:"wait",children:r.jsxs(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.8},className:"text-center",children:[r.jsxs("blockquote",{className:"text-3xl md:text-4xl text-blue-900 mb-8 font-light leading-tight",children:['"',p[s].quote,'"']}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xl font-medium text-purple-800",children:p[s].author}),r.jsx("p",{className:"text-gray-500",children:p[s].role})]})]},s)}),r.jsx("div",{className:"flex justify-center mt-12 gap-3",children:p.map((g,b)=>r.jsx("button",{onClick:()=>i(b),className:`h-2.5 rounded-full transition-all duration-300 ${b===s?"bg-gray-900 w-6":"bg-gray-300 hover:bg-gray-400 w-2.5"}`},b))})]})}),r.jsxs("section",{className:"py-32 bg-white overflow-hidden",children:[r.jsx("div",{className:"max-w-[1120px] mx-auto px-8 mb-20",children:r.jsxs(qe.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.8},viewport:{once:!0},className:"text-center",children:[r.jsx("h2",{className:"text-4xl md:text-5xl font-semibold mb-6 tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-purple-700",children:"Khóa học phổ biến"}),r.jsx("p",{className:"text-xl text-gray-500 max-w-2xl mx-auto font-light",children:"Bắt đầu hành trình học tập với những khóa học được yêu thích nhất"})]})}),r.jsx("div",{className:"w-full flex justify-center items-center",children:r.jsx("div",{className:"grid grid-cols-2 gap-1 w-full mx-6 md:mx-12 max-w-[1440px] md:max-w-[90%] lg:max-w-[80%]",children:l?Array(4).fill(0).map((g,b)=>r.jsx("div",{className:"animate-pulse relative",children:r.jsx("div",{className:"relative aspect-[4/3] bg-gray-200",children:r.jsx("div",{className:"absolute inset-x-0 bottom-0 h-32 bg-gradient-to-t from-black/70 to-transparent",children:r.jsxs("div",{className:"absolute bottom-4 left-4",children:[r.jsx("div",{className:"h-6 w-40 bg-gray-300 rounded mb-2"}),r.jsx("div",{className:"h-4 w-48 bg-gray-300/70 rounded mb-4"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"h-8 w-24 bg-blue-300 rounded-full"}),r.jsx("div",{className:"h-8 w-8 bg-gray-300 rounded-full"})]})]})})})},b)):a.slice(0,4).map((g,b)=>r.jsx(qe.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6,delay:b*.05},viewport:{once:!0},className:"group relative cursor-pointer overflow-hidden h-full",children:r.jsxs("div",{className:"aspect-[4/3] relative overflow-hidden",children:[r.jsx("img",{src:g.ImageUrl||g.thumbnail||"https://placehold.co/600x400?text=No+Image",alt:g.Title||g.title,className:"w-full h-full object-cover object-center group-hover:scale-105 transition-transform duration-700"}),r.jsx("div",{className:"absolute inset-x-0 bottom-0 h-40 bg-gradient-to-t from-black/80 to-transparent",children:r.jsxs("div",{className:"absolute bottom-4 left-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:g.Title||g.title}),r.jsx("p",{className:"text-sm text-white/80 font-light mb-4 line-clamp-1",children:g.ShortDescription||g.Description||g.description||"Nâng cao kỹ năng của bạn"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:w=>{w.stopPropagation(),e(`/courses/${g.CourseID||g.id}`)},className:"bg-blue-600 text-white text-sm font-medium py-1.5 px-4 rounded-full hover:bg-blue-500 transition-colors",children:"Tìm hiểu thêm"}),r.jsx("button",{onClick:w=>w.stopPropagation(),className:"w-8 h-8 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center hover:bg-white/30 transition-colors",children:r.jsx(xd,{className:"w-4 h-4 text-white"})})]})]})})]})},g.CourseID||g.id+"-"+b))})}),r.jsx("div",{className:"max-w-[1120px] mx-auto px-8",children:r.jsx(qe.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6},viewport:{once:!0},className:"text-center mt-20",children:r.jsxs("button",{onClick:()=>e("/courses"),className:"inline-flex items-center px-8 py-4 bg-blue-600 text-white font-medium rounded-full transition-all duration-300 hover:bg-blue-700",children:["Xem tất cả khóa học",r.jsx(xd,{className:"w-5 h-5 ml-2"})]})})})]}),r.jsx("section",{className:"py-40 bg-white",children:r.jsxs("div",{className:"max-w-[1120px] mx-auto px-8",children:[r.jsxs(qe.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.8},viewport:{once:!0},className:"text-center mb-24",children:[r.jsx("h2",{className:"text-4xl md:text-5xl font-semibold tracking-tight mb-6 bg-clip-text text-transparent bg-gradient-to-r from-blue-700 via-purple-700 to-green-700",children:"Tại sao chọn Campus Learning?"}),r.jsx("p",{className:"text-xl text-gray-500 max-w-2xl mx-auto font-light",children:"Nền tảng học tập toàn diện với công nghệ AI tiên tiến và phương pháp giảng dạy hiện đại"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-16",children:x.map((g,b)=>r.jsxs(qe.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6,delay:b*.1},viewport:{once:!0},className:"group",children:[r.jsx("div",{className:"mb-6",children:r.jsx(g.icon,{className:"h-12 w-12 text-blue-600"})}),r.jsx("h3",{className:"text-2xl font-medium text-blue-900 mb-3",children:g.title}),r.jsx("p",{className:"text-gray-500 leading-relaxed font-light",children:g.description}),r.jsx("div",{className:"mt-6 w-12 h-0.5 bg-gray-200 group-hover:bg-blue-600 transition-colors duration-300"})]},b))})]})}),r.jsxs("section",{className:"py-40 bg-white relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 z-0 opacity-5",children:r.jsx("img",{src:"https://images.unsplash.com/photo-1498050108023-c5249f4df085?auto=format&fit=crop&w=2000&q=80",alt:"Background pattern",className:"w-full h-full object-cover"})}),r.jsx("div",{className:"max-w-[800px] mx-auto px-8 relative z-10",children:r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx(qe.h2,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.8},viewport:{once:!0},className:"text-4xl md:text-5xl lg:text-6xl font-semibold tracking-tight mb-8 leading-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-purple-600",children:"Sẵn sàng bắt đầu hành trình học tập?"}),r.jsx(qe.p,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.8,delay:.2},viewport:{once:!0},className:"text-xl text-gray-500 mb-12 max-w-2xl font-light",children:"Tham gia ngay để trải nghiệm phương pháp học tập hiện đại và hiệu quả"}),r.jsxs(qe.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.8,delay:.4},viewport:{once:!0},className:"flex flex-col sm:flex-row gap-4",children:[r.jsx(qe.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>e("/register"),className:"px-8 py-4 bg-blue-600 text-white rounded-full font-medium text-lg transition-all duration-300 hover:bg-blue-700",children:"Đăng ký ngay"}),r.jsx(qe.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>e("/courses"),className:"px-8 py-4 text-purple-600 rounded-full font-medium text-lg transition-all duration-300 hover:text-purple-800",children:"Xem khóa học"})]})]})})]}),r.jsx("footer",{className:"py-16 bg-gray-50",children:r.jsxs("div",{className:"max-w-[1120px] mx-auto px-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-5 gap-12",children:[r.jsxs("div",{className:"lg:col-span-2",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[r.jsx(to,{className:"h-5 w-5 text-gray-900"}),r.jsx("span",{className:"text-lg font-medium text-gray-900",children:"Campus Learning"})]}),r.jsx("p",{className:"text-gray-500 mb-6 max-w-sm font-light",children:"Nền tảng học tập trực tuyến hàng đầu, giúp bạn phát triển kỹ năng và kiến thức một cách hiệu quả."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs font-medium text-gray-900 mb-5 uppercase tracking-wider",children:"Liên kết nhanh"}),r.jsxs("ul",{className:"space-y-3",children:[r.jsx("li",{children:r.jsx(Ve,{to:"/courses",className:"text-gray-500 hover:text-gray-900 transition-colors text-sm",children:"Khóa học"})}),r.jsx("li",{children:r.jsx(Ve,{to:"/roadmaps",className:"text-gray-500 hover:text-gray-900 transition-colors text-sm",children:"Lộ trình học tập"})}),r.jsx("li",{children:r.jsx(Ve,{to:"/blog",className:"text-gray-500 hover:text-gray-900 transition-colors text-sm",children:"Blog"})}),r.jsx("li",{children:r.jsx(Ve,{to:"/about",className:"text-gray-500 hover:text-gray-900 transition-colors text-sm",children:"Về chúng tôi"})})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs font-medium text-gray-900 mb-5 uppercase tracking-wider",children:"Hỗ trợ"}),r.jsxs("ul",{className:"space-y-3",children:[r.jsx("li",{children:r.jsx(Ve,{to:"/support/faq",className:"text-gray-500 hover:text-gray-900 transition-colors text-sm",children:"Câu hỏi thường gặp"})}),r.jsx("li",{children:r.jsx(Ve,{to:"/support/help-center",className:"text-gray-500 hover:text-gray-900 transition-colors text-sm",children:"Trung tâm trợ giúp"})}),r.jsx("li",{children:r.jsx(Ve,{to:"/support/privacy-policy",className:"text-gray-500 hover:text-gray-900 transition-colors text-sm",children:"Chính sách bảo mật"})}),r.jsx("li",{children:r.jsx(Ve,{to:"/support/terms-of-use",className:"text-gray-500 hover:text-gray-900 transition-colors text-sm",children:"Điều khoản sử dụng"})})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs font-medium text-gray-900 mb-5 uppercase tracking-wider",children:"Liên hệ"}),r.jsxs("ul",{className:"space-y-3",children:[r.jsx("li",{className:"flex items-start text-gray-500 text-sm",children:r.jsx("span",{className:"block",children:"123 Đường Nguyễn Văn Linh, Quận 7, TP. Hồ Chí Minh"})}),r.jsx("li",{className:"text-gray-500 text-sm",children:r.jsx("a",{href:"mailto:contact@campuslearning.vn",className:"hover:text-gray-900 transition-colors",children:"contact@campuslearning.vn"})}),r.jsx("li",{className:"text-gray-500 text-sm",children:r.jsx("a",{href:"tel:84123456789",className:"hover:text-gray-900 transition-colors",children:"(84) 123 456 789"})})]})]})]}),r.jsxs("div",{className:"border-t border-gray-200 mt-12 pt-8 flex flex-col md:flex-row justify-between",children:[r.jsxs("p",{className:"text-gray-500 text-sm",children:["© ",new Date().getFullYear()," Campus Learning. All rights reserved."]}),r.jsxs("div",{className:"flex mt-4 md:mt-0 gap-6",children:[r.jsx(Ve,{to:"/privacy",className:"text-gray-500 hover:text-gray-900 transition-colors text-sm",children:"Chính sách riêng tư"}),r.jsx(Ve,{to:"/terms",className:"text-gray-500 hover:text-gray-900 transition-colors text-sm",children:"Điều khoản sử dụng"}),r.jsx(Ve,{to:"/sitemap",className:"text-gray-500 hover:text-gray-900 transition-colors text-sm",children:"Bản đồ trang"})]})]})]})})]})};typeof window<"u"&&(window.browser=window.browser||window.chrome||{},window.browser.runtime||(window.browser.runtime={sendMessage:()=>Promise.resolve({}),onMessage:{addListener:()=>{},removeListener:()=>{}}}),window.addEventListener("error",e=>e.message&&e.message.includes("browser is not defined")?(console.warn("Suppressing browser not defined error"),e.preventDefault(),!0):!1,!0));const Ps={status:null,lastCheck:0,checkInterval:3e4},OH=async e=>{const t=Date.now();if(Ps.status!==null&&t-Ps.lastCheck<Ps.checkInterval)return Ps.status;try{const n=new AbortController,s=setTimeout(()=>n.abort(),2e3);return await fetch(`http://localhost:${e}/healthz`,{method:"GET",mode:"no-cors",signal:n.signal}),clearTimeout(s),Ps.status=!0,Ps.lastCheck=t,console.log("Code-server is running"),!0}catch(n){return Ps.status=!1,Ps.lastCheck=t,n.name==="AbortError"?console.error("Code-server health check timed out"):console.error("Code-server health check failed:",n),!1}},BH=async(e={})=>{const{courseId:t,lessonId:n}=e,s=e.port||8080;try{if(console.log(`Checking if code-server is running on port ${s}...`),!await OH(s))throw new Error("Code-server is not running or not accessible");const a=`http://localhost:${s}/`;return console.log(`Code-server URL: ${a}`),{success:!0,url:a,message:"Code-server initialized successfully"}}catch(i){return console.error("Error initializing code-server:",i),{success:!1,message:i.message||"Code-server is not running or inaccessible. Please ensure it is started."}}},_H=()=>{const{courseId:e,lessonId:t}=or(),n=St(),{isAuthenticated:s}=Kn(),i=h.useRef(null),[a,o]=h.useState(!0),[l,c]=h.useState(null),[d,u]=h.useState(null),[m,f]=h.useState(""),[p,x]=h.useState(""),[g,b]=h.useState(null),[w,k]=h.useState(null);return h.useEffect(()=>((async()=>{if(!s){re.error("Vui lòng đăng nhập để truy cập bài tập"),n("/login",{state:{from:`/courses/${e}/edit-code/${t}`}});return}try{o(!0);const N=await BH({courseId:e,lessonId:t,port:8080});if(!N.success)throw new Error(N.message);x(N.url);const C=await bt.getCodeExercise(e,t);if(!C||!C.success)throw new Error((C==null?void 0:C.message)||"Không thể tải thông tin bài tập");const T=C.data;if(u(T),T.moduleTitle&&f(T.moduleTitle),T.exerciseContent)try{const E=T.exerciseContent;console.log("Creating README.md in workspace with content:",E)}catch(E){console.error("Failed to create README.md in workspace:",E)}try{const E=await bt.getCourseDetails(e);if(E&&E.success){const P=E.data;let R=!1,y=null;if(P&&Array.isArray(P.Modules)){P.Modules.length>0&&P.Modules[0].Lessons&&P.Modules[0].Lessons.length>0&&k(P.Modules[0].Lessons[0].LessonID);for(let O=0;O<P.Modules.length&&!R;O++){const _=P.Modules[O];if(!(!_||!Array.isArray(_.Lessons)))for(let L=0;L<_.Lessons.length;L++){const A=_.Lessons[L];if(String(A.LessonID)===String(t)){if(L<_.Lessons.length-1)y=_.Lessons[L+1].LessonID;else if(O<P.Modules.length-1){const M=P.Modules[O+1];M&&Array.isArray(M.Lessons)&&M.Lessons.length>0&&(y=M.Lessons[0].LessonID)}R=!0;break}}}}b(y)}}catch(E){console.error("Error determining next lesson:",E)}o(!1)}catch(N){console.error("Error initializing code environment:",N),c(N.message||"Có lỗi xảy ra khi tải môi trường code. Vui lòng thử lại sau."),o(!1)}})(),()=>{i.current&&(i.current.src="about:blank")}),[e,t,s,n]),a&&!p?r.jsx("div",{className:"flex justify-center items-center h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500"})}):l?r.jsxs("div",{className:"flex flex-col items-center justify-center h-screen px-4",children:[r.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded-lg mb-3 max-w-md text-sm",children:r.jsx("p",{className:"font-medium",children:l})}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:()=>window.location.reload(),className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:"Thử lại"}),r.jsx("button",{onClick:()=>n(`/courses/${e}`),className:"px-3 py-1.5 bg-gray-600 text-white rounded-lg hover:bg-gray-700 text-sm",children:"Quay lại khóa học"})]})]}):r.jsxs("div",{className:"flex flex-col h-screen max-h-screen bg-white",children:[r.jsx("header",{className:"bg-white border-b border-gray-200 h-1"}),r.jsxs("div",{className:"flex-1 flex max-h-[calc(100vh-4.5rem)] overflow-hidden",children:[d&&r.jsxs("div",{className:"w-1/5 border-r border-gray-200 p-2 h-full flex flex-col max-h-full",children:[r.jsxs("div",{className:"mb-2 flex space-x-1",children:[r.jsx(Ve,{to:`/courses/${e}/learn?lessonId=${t}`,className:"flex-1 px-2 py-1 bg-gray-600 text-white rounded text-xs flex items-center justify-center",children:"◀ Bài trước"}),g?r.jsx("button",{onClick:async()=>{try{await bt.markLessonAsComplete(e,t),re.success("Đã đánh dấu hoàn thành bài học")}catch(v){console.error("Error marking complete:",v)}finally{n(`/courses/${e}/learn?lessonId=${g}`)}},className:"flex-1 px-2 py-1 bg-blue-600 text-white rounded text-xs flex items-center justify-center",children:"Bài tiếp ▶"}):r.jsx("button",{onClick:async()=>{try{await bt.markLessonAsComplete(e,t),re.success("Bạn đã hoàn thành khóa học!")}catch(v){console.error("Error marking complete:",v)}finally{const v=w?`/courses/${e}/learn?lessonId=${w}`:`/courses/${e}/learn`;n(v,{state:{finishedCourse:!0}})}},className:"flex-1 px-2 py-1 bg-green-600 text-white rounded text-xs flex items-center justify-center",children:"Kết thúc khóa học"})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto pr-1 text-xs",children:[r.jsxs("div",{className:"border-b pb-1.5 mb-2",children:[r.jsx("h1",{className:"font-bold text-sm text-gray-800",children:(d==null?void 0:d.title)||"Hello C++ World"}),m&&r.jsxs("div",{className:"text-xs text-gray-600 mt-0.5",children:["Module: ",m]})]}),r.jsx("div",{className:"mb-2",children:d.description&&r.jsx("div",{className:"prose prose-xs max-w-none",dangerouslySetInnerHTML:{__html:d.description}})}),d.instructions&&r.jsxs("div",{className:"mb-2",children:[r.jsx("h3",{className:"text-xs font-semibold mb-1",children:"Hướng dẫn"}),r.jsx("div",{className:"prose prose-xs max-w-none",dangerouslySetInnerHTML:{__html:d.instructions}})]}),d.hints&&d.hints.length>0&&r.jsxs("div",{className:"mb-2",children:[r.jsx("h3",{className:"text-xs font-semibold mb-1",children:"Gợi ý"}),r.jsx("ul",{className:"list-disc pl-3 space-y-0.5 text-xs",children:d.hints.map((v,N)=>r.jsx("li",{className:"text-gray-700",children:v},N))})]}),d.testCases&&d.testCases.length>0&&r.jsxs("div",{className:"mb-2",children:[r.jsx("h3",{className:"text-xs font-semibold mb-1",children:"Các test case"}),r.jsx("div",{className:"space-y-1",children:d.testCases.map((v,N)=>r.jsxs("div",{className:"bg-gray-50 p-1.5 rounded border text-xs",children:[r.jsxs("p",{className:"font-medium text-xs",children:["Test ",N+1,":"]}),v.input&&r.jsxs("p",{className:"text-xs leading-tight",children:[r.jsx("span",{className:"font-medium",children:"Input:"})," ",v.input]}),v.expected&&r.jsxs("p",{className:"text-xs leading-tight",children:[r.jsx("span",{className:"font-medium",children:"Expected:"})," ",v.expected]})]},N))})]}),d.exerciseContent&&!d.description&&!d.instructions&&r.jsx("div",{className:"prose prose-xs max-w-none",children:r.jsx("div",{dangerouslySetInnerHTML:{__html:d.exerciseContent}})})]})]}),r.jsx("div",{className:"w-4/5 h-full",children:p?r.jsx("iframe",{ref:i,src:p,className:"w-full h-full border-none",title:"Code Editor",allow:"fullscreen"}):r.jsx("div",{className:"flex justify-center items-center h-full",children:r.jsx("p",{className:"text-xs text-gray-500",children:"Đang tải môi trường code..."})})})]})]})},R1=e=>{if(e==null)return 0;const t=parseFloat(e);return isNaN(t)?0:t},Ei=e=>{if(e.CourseType!==void 0||e.courseType!==void 0)return(e.CourseType||e.courseType||"").toLowerCase()==="it";const t=(e.Title||e.title||"").toLowerCase();if(t.includes("lịch sử")||t.includes("tư tưởng")||t.includes("chính trị")||t.includes("đạo đức")||t.includes("triết học")||t.includes("xã hội")||t.includes("kinh tế"))return!1;if(t.includes("it")||t.includes("code")||t.includes("coding")||t.includes("lập trình")||t.includes("web")||t.includes("app")||t.includes("software")||t.includes("phần mềm")||t.includes("database")||t.includes("dữ liệu")||t.includes("python")||t.includes("java")||t.includes("javascript")||t.includes("html")||t.includes("css")||t.includes("algorithm")||t.includes("thuật toán"))return!0;const n=(e.Category||e.category||"").toLowerCase();return n.includes("it")||n.includes("programming")||n.includes("web")||n.includes("mobile")||n.includes("data")||n.includes("computer"),!0},FH=(e,t=[])=>{if(!t||!Array.isArray(t)||t.length===0)return!1;if(e.enrolled===!0)return!0;const n=e.CourseID||e.id;return n?t.some(s=>(s.CourseID||s.id)===n):!1},zH=()=>r.jsxs("div",{className:"bg-white rounded-lg overflow-hidden animate-pulse shadow-md h-full flex flex-col",children:[r.jsx("div",{className:"h-52 bg-gradient-to-br from-gray-100 to-gray-200 relative"}),r.jsxs("div",{className:"p-5 space-y-3 flex-1 flex flex-col",children:[r.jsx("div",{className:"h-4 bg-gray-100 rounded-md w-1/2 mb-1"}),r.jsx("div",{className:"h-5 bg-gray-200 rounded-md w-4/5"}),r.jsx("div",{className:"h-4 bg-gray-100 rounded-md w-full"}),r.jsx("div",{className:"h-4 bg-gray-100 rounded-md w-2/3"}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx("div",{className:"h-4 w-4 rounded-full bg-gray-200"}),r.jsx("div",{className:"h-3 bg-gray-100 rounded-md w-12"}),r.jsx("div",{className:"h-4 w-4 rounded-full bg-gray-200"}),r.jsx("div",{className:"h-3 bg-gray-100 rounded-md w-16"})]}),r.jsxs("div",{className:"mt-auto pt-4 flex justify-between items-center border-t border-gray-100 mt-3",children:[r.jsx("div",{className:"h-5 bg-gray-200 rounded-md w-16"}),r.jsx("div",{className:"h-8 bg-gray-200 rounded-md w-20"})]})]})]}),UH=({course:e,enrollmentFilter:t,courseCategory:n,navigate:s,enrolledCourses:i})=>{const a=e.CourseID||e.id,o=R1(e.Price)===0,l=e.enrolled===!0||FH(e,i),c=Ei(e)?"it":"regular",d=Ht(),{isAuthenticated:u}=Kn(),m=async w=>{if(w.stopPropagation(),!u){re.info("Vui lòng đăng nhập để đăng ký khóa học"),s("/login");return}if(o)try{const k=await bt.enrollFreeCourse(a);k&&(k.success||k.alreadyEnrolled)?(re.success("Đăng ký khóa học thành công!"),d(Ig(e)),setTimeout(()=>{s(`/courses/${a}/learn`)},1e3)):re.error((k==null?void 0:k.message)||"Không thể đăng ký khóa học")}catch(k){re.error("Đã xảy ra lỗi khi đăng ký khóa học"),console.error("Error enrolling in course:",k)}else s(`/payment/${a}`)},f=e.Duration||e.duration||0,p=e.EnrolledCount||e.enrolledCount||0,x=e.DifficultyLevel||e.Level||e.level||"Cơ bản",g=e.Rating||e.rating||0,b=e.RatingCount||e.ratingCount||0;return r.jsxs("div",{className:"group bg-white rounded-lg overflow-hidden shadow-md hover:shadow-lg cursor-pointer h-full flex flex-col transition-shadow",onClick:()=>s(`/courses/${a}`),children:[r.jsxs("div",{className:"relative overflow-hidden",children:[r.jsx("img",{src:e.ImageUrl||e.thumbnail||"https://placehold.co/600x400?text=No+Image",alt:e.Title||e.title,className:"w-full h-52 object-cover"}),r.jsx("div",{className:"absolute top-0 left-0 bg-black/60 backdrop-blur-sm text-white text-xs px-2 py-1.5",children:"CampusT"}),r.jsxs("div",{className:"absolute bottom-2 left-2 flex flex-wrap gap-1.5 max-w-[calc(100%-1rem)]",children:[r.jsx("span",{className:`px-2 py-0.5 rounded-md text-[10px] font-medium ${c==="it"?"bg-blue-600 text-white":"bg-green-600 text-white"}`,children:c==="it"?"IT & Công nghệ":"Kiến thức cơ bản"}),l&&r.jsx("span",{className:"px-2 py-0.5 rounded-md text-[10px] font-medium bg-emerald-600 text-white",children:"Đã đăng ký"})]})]}),r.jsxs("div",{className:"p-5 flex-1 flex flex-col",children:[r.jsx("div",{className:"text-xs font-medium text-blue-600 mb-1",children:c==="it"?"Khoa học máy tính":"Kiến thức xã hội"}),r.jsx("h3",{className:"font-medium text-gray-900 line-clamp-2 mb-2 text-base hover:text-blue-700 transition-colors",children:e.Title||e.title}),r.jsx("p",{className:"text-gray-500 text-xs line-clamp-2 mb-2",children:e.ShortDescription||e.Description||e.description||"Khóa học này sẽ giúp bạn nắm vững những kiến thức quan trọng và kỹ năng cần thiết."}),r.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 flex-wrap mb-auto",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("svg",{className:"w-3 h-3 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),r.jsxs("span",{children:[g>0?g:"4.0",b>0?` (${b})`:""]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("svg",{className:"w-3 h-3 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("span",{children:f>0?`${f} giờ`:"Chưa có"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("svg",{className:"w-3 h-3 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),r.jsx("span",{children:p>0?`${p.toLocaleString()} học viên`:"0 học viên"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("svg",{className:"w-3 h-3 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),r.jsx("span",{children:x})]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-4 mt-3 border-t border-gray-100",children:[r.jsx("div",{children:o?r.jsx("span",{className:"text-sm font-semibold text-green-600",children:"Miễn phí"}):r.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[R1(e.DiscountPrice||e.Price).toLocaleString(),"₫"]})}),l?r.jsx("button",{onClick:w=>{w.stopPropagation(),s(`/courses/${a}/learn`)},className:"px-4 py-2 rounded-md text-sm font-medium bg-emerald-600 hover:bg-emerald-700 text-white transition-shadow shadow-sm",children:"Học tiếp"}):r.jsx("button",{onClick:m,className:`px-4 py-2 rounded-md text-sm font-medium ${o?"bg-green-600 hover:bg-green-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"} transition-shadow shadow-sm`,children:o?"Đăng ký ngay":"Mua ngay"})]})]})]})},VH=()=>{var T;const e=Ht(),t=lr(),n=St(),{isAuthenticated:s}=Kn(),{enrolledCourses:i,allCourses:a,loading:o,dataLoaded:l}=gn(E=>E.course),[c,d]=h.useState("it"),[u,m]=h.useState("all"),[f,p]=h.useState(!1),[x,g]=h.useState(null),[b,w]=h.useState("");h.useEffect(()=>{e(vT())},[e]),h.useEffect(()=>{a&&a.length>0&&p(!1)},[a]),h.useEffect(()=>{var E;(E=t.state)!=null&&E.activeTab&&s&&(t.state.activeTab==="enrolled"&&m("enrolled"),t.state.paymentSuccess&&(e(yr({forceRefresh:!0})),re.success("Thanh toán thành công! Bạn đã đăng ký khóa học thành công.")))},[t.state,s,e]),h.useEffect(()=>{!s&&u==="enrolled"&&m("all")},[s,u]),h.useEffect(()=>{let E=!0;return(async()=>{if(!l&&(!a||a.length===0)){p(!0);try{await e(id()).unwrap(),E&&p(!1)}catch(R){console.error("Error loading courses:",R),E&&(g("Lỗi khi tải danh sách khóa học"),p(!1));try{const y=await bt.getAllCourses();y.data&&y.data.success&&E?(e({type:"course/preloadAllCourses/fulfilled",payload:y.data.data}),p(!1)):E&&g("Không thể tải danh sách khóa học")}catch(y){console.error("Error in direct API call:",y),E&&g("Lỗi khi tải danh sách khóa học")}finally{E&&p(!1)}}}})(),()=>{E=!1}},[e,l]),h.useEffect(()=>{s&&!i.length&&(console.log("Fetching enrolled courses..."),e(yr()))},[e,s,i.length]),h.useEffect(()=>{var E;s&&((E=t.state)!=null&&E.paymentSuccess)&&(re.success("Thanh toán thành công! Bạn đã đăng ký khóa học thành công."),e(yr({forceRefresh:!0})).then(()=>{console.log("Successfully refreshed enrollment data after payment")}).catch(P=>{console.error("Error refreshing enrollment data after payment:",P)}),window.history.replaceState({...window.history.state,state:{...t.state,paymentSuccess:!1}},document.title))},[e,s,(T=t.state)==null?void 0:T.paymentSuccess]),h.useEffect(()=>{let E=!0;const P=new URLSearchParams(window.location.search),R=P.get("courseId"),y=P.get("status");return R&&y==="success"&&s&&(console.log("Detected successful payment for course ID:",R),(async()=>{e(yr({forceRefresh:!0}));try{const _=await bt.getCourseDetails(R);if(_&&_.success&&E){const L=_.data;if(!L.CourseType&&!L.courseType){const A=(L.Title||L.title||"").toLowerCase();A.includes("lịch sử")||A.includes("tư tưởng")||A.includes("chính trị")||A.includes("đạo đức")||A.includes("triết học")?L.CourseType="regular":L.CourseType="it"}e(Ig(L)),re.success("Khóa học đã được thêm vào danh sách đã đăng ký của bạn!")}}catch(_){console.error("Error fetching course details after payment:",_),E&&re.error("Không thể tải thông tin khóa học")}})()),()=>{E=!1}},[s,e]);const k=E=>{w(E.target.value)},v=h.useMemo(()=>{const E=new Set,P=[];if(u==="enrolled"&&s)return i.forEach(R=>{const y=R.CourseID||R.id,O=c==="all"||(c==="it"?Ei(R):!Ei(R)),_=!b||(R.Title||R.title||"").toLowerCase().includes(b.toLowerCase())||(R.Description||R.description||"").toLowerCase().includes(b.toLowerCase());y&&O&&_&&!E.has(y)&&(E.add(y),P.push({...R,enrolled:!0}))}),P;{const R=new Set(i.map(y=>y.CourseID||y.id).filter(Boolean));return a&&a.length>0&&a.forEach(y=>{const O=y.CourseID||y.id;if(!O||E.has(O))return;const _=R.has(O),L=c==="all"||(c==="it"?Ei(y):!Ei(y)),A=!b||(y.Title||y.title||"").toLowerCase().includes(b.toLowerCase())||(y.Description||y.description||"").toLowerCase().includes(b.toLowerCase());L&&A&&!_&&(E.add(O),P.push({...y,enrolled:!1}))}),P}},[c,u,a,i,s,b]),N=h.useMemo(()=>u==="enrolled"?o&&(!i||i.length===0):f&&(!a||a.length===0),[u,o,f,i==null?void 0:i.length,a==null?void 0:a.length]),C=()=>Array(6).fill(0).map((E,P)=>r.jsx(zH,{},`skeleton-${P}`));return x?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:r.jsx("div",{className:"bg-white rounded-xl shadow-md p-8 max-w-md w-full",children:r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx("div",{className:"bg-red-100 p-4 rounded-full mb-6",children:r.jsx("svg",{className:"w-12 h-12 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-3",children:"Đã xảy ra lỗi"}),r.jsx("p",{className:"text-red-500 mb-6",children:x}),r.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Tải lại trang"})]})})}):r.jsxs("div",{className:"bg-gray-50 min-h-screen pb-12",children:[r.jsx("div",{className:"bg-white border-b border-gray-200 mb-6",children:r.jsxs("div",{className:"container mx-auto px-4 py-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Khám phá khóa học"}),s&&r.jsxs("button",{onClick:()=>n("/payment-history"),className:"flex items-center gap-2 px-4 py-2 bg-white text-blue-600 border border-blue-600 rounded-md hover:bg-blue-50 transition-colors",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Lịch sử thanh toán"]})]}),r.jsxs("div",{className:"flex justify-between items-center mt-6",children:[r.jsxs("div",{className:"flex space-x-6 overflow-x-auto",children:[r.jsx("button",{onClick:()=>d("it"),className:`px-4 py-2 font-medium rounded-md ${c==="it"?"bg-blue-50 text-blue-600":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:"Khóa học IT & Công nghệ"}),r.jsx("button",{onClick:()=>d("regular"),className:`px-4 py-2 font-medium rounded-md ${c==="regular"?"bg-blue-50 text-blue-600":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:"Khóa học Thường"}),s&&r.jsxs("button",{onClick:()=>m(u==="enrolled"?"all":"enrolled"),className:`px-4 py-2 font-medium rounded-md ${u==="enrolled"?"bg-blue-50 text-blue-600":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:["Đã đăng ký (",i.filter(E=>c==="it"?Ei(E):!Ei(E)).length,")"]})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",value:b,onChange:k,placeholder:"Tìm kiếm khóa học...",className:"w-64 px-4 py-2 rounded-md text-sm border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx("svg",{className:"w-4 h-4 text-gray-400 absolute right-3 top-1/2 -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})]})}),r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N?C():v.length>0?v.map(E=>r.jsx(UH,{course:E,enrollmentFilter:u,courseCategory:c,navigate:n,enrolledCourses:i},`course-${c}-${E.CourseID||E.id}`)):r.jsx("div",{className:"col-span-full py-12 text-center",children:r.jsxs("div",{className:"bg-white rounded-xl p-8 max-w-md mx-auto shadow-sm",children:[r.jsx("div",{className:"bg-gray-50 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Không tìm thấy khóa học"}),r.jsx("p",{className:"text-gray-600 mb-6",children:b?`Không tìm thấy khóa học phù hợp với từ khóa "${b}". Vui lòng thử tìm kiếm với từ khóa khác.`:"Hiện tại chưa có khóa học nào trong danh mục này. Hãy thử danh mục khác!"}),b?r.jsx("button",{onClick:()=>w(""),className:"px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors shadow-sm",children:"Xóa tìm kiếm"}):r.jsxs("button",{onClick:()=>d(c==="it"?"regular":"it"),className:"px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors shadow-sm",children:["Xem khóa học ",c==="it"?"Thường":"IT"]})]})})})})]})},HH=()=>{var L;const{courseId:e}=or(),t=St(),n=lr(),s=Ht(),{isAuthenticated:i}=Kn(),[a,o]=h.useState(null),[l,c]=h.useState(!0),[d,u]=h.useState(null),[m,f]=h.useState(!1),[p,x]=h.useState(null),[g,b]=h.useState("overview"),[w,k]=h.useState([]),[v,N]=h.useState(!1),C=A=>{if(A==null)return 0;const M=parseFloat(A);return isNaN(M)?0:M},T=A=>A?new Date(A).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",E=A=>{if(!A)return null;let M={...A};if(typeof M.Requirements=="string")if(M.Requirements.startsWith("["))try{M.Requirements=JSON.parse(M.Requirements)}catch{M.Requirements=M.Requirements?[M.Requirements]:[]}else M.Requirements=M.Requirements?[M.Requirements]:[];if(typeof M.Objectives=="string")if(M.Objectives.startsWith("["))try{M.Objectives=JSON.parse(M.Objectives)}catch{M.Objectives=M.Objectives?[M.Objectives]:[]}else M.Objectives=M.Objectives?[M.Objectives]:[];return Array.isArray(M.Modules)||(M.Modules=[]),M.Instructor||(M.Instructor={Name:"Giảng viên",Title:"Chuyên gia",Bio:"Thông tin chưa được cập nhật."}),M},P=async()=>{if(!(!i||!e)){N(!0);try{const A=await bt.getCoursePaymentHistory(e);A&&A.data&&Array.isArray(A.data)&&k(A.data)}catch(A){console.error("Error fetching payment history:",A)}finally{N(!1)}}};h.useEffect(()=>{e&&(async()=>{var M;try{if(c(!0),!e){u("ID khóa học không hợp lệ"),c(!1);return}const z=await bt.getCourseDetails(e);if(!z){u("Không nhận được phản hồi từ máy chủ"),c(!1);return}if(z.success){const ie=E(z.data);if(!ie){u("Không tìm thấy dữ liệu khóa học"),c(!1);return}if(o(ie),document.title=`${ie.Title} | Campust`,i)try{if(typeof bt.checkEnrollment=="function"){const X=await bt.checkEnrollment(e);X.success&&X.isEnrolled&&(f(!0),x(X.enrollmentData||((M=X.data)==null?void 0:M.enrollment)||null))}}catch(X){console.error("Error checking enrollment:",X)}}else u(z.message||"Không thể tải thông tin khóa học")}catch{u("Có lỗi xảy ra khi tải thông tin khóa học. Vui lòng thử lại sau.")}finally{c(!1)}})()},[e,i,t]),h.useEffect(()=>{var A;(A=n.state)!=null&&A.paymentSuccess&&i&&(bt.checkEnrollment(e).then(M=>{var z;M.success&&M.isEnrolled&&(f(!0),x(M.enrollmentData||((z=M.data)==null?void 0:z.enrollment)||null),s(yr({forceRefresh:!0})),re.success("Đã đăng ký khóa học thành công!"))}).catch(M=>console.error("Error re-checking enrollment:",M)),P())},[(L=n.state)==null?void 0:L.paymentSuccess,e,i,s]),h.useEffect(()=>{g==="payment-history"&&i&&P()},[g,i,e]);const R=async()=>{var A,M;if(!i){t("/login",{state:{from:`/courses/${e}`}});return}if(m){t(`/courses/${e}/learn`);return}try{const z=C(a.Price),ie=C(a.DiscountPrice),te=(ie>0?ie:z)===0;if(re.info("Đang xử lý đăng ký khóa học...",{autoClose:2e3}),te){const B=await s(ad(e)).unwrap();if(B&&(B.success||B.alreadyEnrolled)){if(f(!0),(A=B.data)!=null&&A.enrollment)x(B.data.enrollment);else try{const H=await bt.checkEnrollment(e);H.success&&H.isEnrolled&&x(H.enrollmentData||((M=H.data)==null?void 0:M.enrollment)||null)}catch{console.warn("Unable to fetch enrollment after alreadyEnrolled response")}re.success("Đăng ký khóa học thành công!"),s(yr()),setTimeout(()=>t(`/courses/${e}/learn`),1e3)}else re.error((B==null?void 0:B.message)||"Đăng ký khóa học thất bại")}else t(`/payment/${e}`,{state:{initialPaymentMethod:"paypal"}})}catch(z){console.error("Error enrolling in course:",z);const ie=z.message||"Có lỗi xảy ra khi đăng ký khóa học";re.error(ie)}};if(l)return r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})});if(d||!a)return r.jsxs("div",{className:"text-center py-10",children:[r.jsx("p",{className:"text-red-500 mb-4",children:d||"Không tìm thấy khóa học"}),r.jsx("button",{onClick:()=>t("/courses"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Quay lại danh sách khóa học"})]});const y=C(a.Price),O=C(a.DiscountPrice),_=y===0;return r.jsx("div",{className:"min-h-screen bg-white",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.isLimitedView&&r.jsx("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-6 rounded shadow",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-yellow-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm font-medium",children:"Bạn đang xem phiên bản giới hạn của khóa học này."}),r.jsxs("p",{className:"mt-1 text-sm",children:[a.isFallbackData?"Dữ liệu hiển thị là dữ liệu dự phòng do không thể kết nối tới máy chủ.":r.jsx(Ve,{to:"/login",className:"text-yellow-800 font-medium underline",children:"Đăng nhập"}),a.isFallbackData?"":" để xem đầy đủ thông tin khóa học."]})]})]})}),r.jsxs("div",{className:"mb-6 flex items-center text-sm text-gray-500",children:[r.jsx(Ve,{to:"/",className:"hover:text-blue-600",children:"Trang chủ"}),r.jsx("span",{className:"mx-2",children:"/"}),r.jsx(Ve,{to:"/courses",className:"hover:text-blue-600",children:"Khóa học"}),r.jsx("span",{className:"mx-2",children:"/"}),r.jsx("span",{className:"text-gray-700",children:a.Title})]}),r.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-700 text-white rounded-2xl shadow-lg mb-8 overflow-hidden",children:r.jsxs("div",{className:"container mx-auto p-6 md:p-8 flex flex-col md:flex-row",children:[r.jsxs("div",{className:"md:w-3/5 mb-6 md:mb-0 md:pr-6",children:[r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx("span",{className:"bg-blue-500 text-xs font-bold uppercase px-3 py-1 rounded-full mr-2",children:a.Level||"All Levels"}),r.jsx("span",{className:"bg-blue-500 text-xs font-bold uppercase px-3 py-1 rounded-full",children:a.Category||"Lập trình"})]}),r.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:a.Title}),r.jsx("p",{className:"text-blue-100 mb-6 text-lg",children:a.ShortDescription||(typeof a.Description=="string"?a.Description.substring(0,150):"Không có mô tả")}),r.jsxs("div",{className:"flex items-center mb-6",children:[a.Instructor&&r.jsxs("div",{className:"flex items-center mr-8",children:[r.jsx(Tt,{src:a.Instructor.AvatarUrl,name:a.Instructor.Name,alt:a.Instructor.Name,className:"mr-2",size:"small"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:a.Instructor.Name}),r.jsx("p",{className:"text-blue-200 text-xs",children:a.Instructor.Title||"Giảng viên"})]})]}),r.jsxs("div",{className:"flex items-center space-x-6",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 text-yellow-400 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),r.jsxs("span",{children:[a.Rating||"0"," (",a.RatingCount||0," đánh giá)"]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 text-blue-300 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})}),r.jsxs("span",{children:[a.EnrolledCount||0," học viên"]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 text-blue-300 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),r.jsxs("span",{children:[a.Duration||0," phút"]})]})]})]}),m?r.jsx(Ve,{to:`/courses/${e}/learn`,className:"inline-block bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-2xl transition duration-200",children:"Tiếp tục học"}):r.jsx("button",{onClick:R,className:"bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-6 rounded-2xl transition duration-200",children:_?"Đăng ký miễn phí":"Mua ngay"})]}),r.jsx("div",{className:"md:w-2/5",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-md overflow-hidden",children:[a.ImageUrl?r.jsx("img",{src:a.ImageUrl,alt:a.Title,className:"w-full h-48 md:h-64 object-cover",onError:A=>{A.target.onerror=null,A.target.src="https://placehold.co/600x400?text=Course+Image"}}):r.jsx("div",{className:"w-full h-48 md:h-64 bg-gray-200 flex items-center justify-center",children:r.jsx("p",{className:"text-gray-500",children:"Không có hình ảnh"})}),r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"mb-4",children:_?r.jsx("p",{className:"text-2xl font-bold text-green-600",children:"Miễn phí"}):r.jsx("div",{children:O>0?r.jsxs("div",{className:"flex items-center",children:[r.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[O.toLocaleString()," VND"]}),r.jsxs("p",{className:"ml-2 text-gray-500 line-through",children:[y.toLocaleString()," VND"]}),y>0&&r.jsxs("span",{className:"ml-2 bg-red-100 text-red-800 text-xs font-medium px-2.5 py-0.5 rounded",children:[Math.round((1-O/y)*100),"% giảm"]})]}):r.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[y.toLocaleString()," VND"]})})}),r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{className:"flex items-start",children:[r.jsx("svg",{className:"w-5 h-5 text-green-500 mr-3 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),r.jsx("span",{className:"text-gray-900 font-medium",children:"Truy cập trọn đời"})]}),r.jsxs("div",{className:"flex items-start",children:[r.jsx("svg",{className:"w-5 h-5 text-green-500 mr-3 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),r.jsx("span",{className:"text-gray-900 font-medium",children:"Bài giảng chi tiết"})]}),r.jsxs("div",{className:"flex items-start",children:[r.jsx("svg",{className:"w-5 h-5 text-green-500 mr-3 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),r.jsx("span",{className:"text-gray-900 font-medium",children:"Hỗ trợ 24/7"})]}),r.jsxs("div",{className:"flex items-start",children:[r.jsx("svg",{className:"w-5 h-5 text-green-500 mr-3 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),r.jsx("span",{className:"text-gray-900 font-medium",children:"Giấy chứng nhận hoàn thành"})]})]})]})]})})]})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-md overflow-hidden mb-8",children:[r.jsx("div",{className:"border-b",children:r.jsxs("div",{className:"flex flex-wrap",children:[r.jsx("button",{className:`px-6 py-3 font-medium text-sm ${g==="overview"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500"}`,onClick:()=>b("overview"),children:"Tổng quan"}),r.jsx("button",{className:`px-6 py-3 font-medium text-sm ${g==="curriculum"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500"}`,onClick:()=>b("curriculum"),children:"Nội dung khóa học"}),r.jsx("button",{className:`px-6 py-3 font-medium text-sm ${g==="instructor"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500"}`,onClick:()=>b("instructor"),children:"Giảng viên"}),i&&r.jsx("button",{className:`px-6 py-3 font-medium text-sm ${g==="payment-history"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500"}`,onClick:()=>b("payment-history"),children:"Lịch sử thanh toán"})]})}),r.jsxs("div",{className:"p-6",children:[g==="overview"&&r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Mô tả khóa học"}),a.Description?r.jsx("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:a.Description}}):r.jsx("p",{className:"text-gray-500",children:"Chưa có mô tả chi tiết cho khóa học này."}),a.Requirements&&(Array.isArray(a.Requirements)?a.Requirements.length>0:!1)&&r.jsxs("div",{className:"mt-8",children:[r.jsx("h3",{className:"text-lg font-bold mb-3",children:"Yêu cầu"}),r.jsx("ul",{className:"list-disc pl-5 space-y-2",children:a.Requirements.map((A,M)=>r.jsx("li",{className:"text-gray-700",children:A},M))})]}),a.Objectives&&r.jsxs("div",{className:"mt-8",children:[r.jsx("h3",{className:"text-lg font-bold mb-3",children:"Bạn sẽ học được gì"}),typeof a.Objectives=="string"?r.jsx("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:a.Objectives}}):Array.isArray(a.Objectives)&&a.Objectives.length>0?r.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:a.Objectives.map((A,M)=>r.jsxs("li",{className:"flex items-start",children:[r.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),r.jsx("span",{children:A})]},M))}):r.jsx("p",{className:"text-gray-500",children:"Chưa có thông tin về mục tiêu khóa học."})]})]}),g==="curriculum"&&r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Nội dung khóa học"}),a.Modules&&a.Modules.length>0?r.jsx("div",{className:"space-y-4",children:a.Modules.map((A,M)=>{var z;return r.jsxs("div",{className:"border rounded-2xl overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-50 p-4 flex justify-between items-center",children:[r.jsx("h3",{className:"font-medium",children:A.Title}),r.jsxs("div",{className:"text-sm text-gray-500",children:[((z=A.Lessons)==null?void 0:z.length)||0," bài học"]})]}),A.Lessons&&A.Lessons.length>0&&r.jsx("div",{className:"divide-y",children:A.Lessons.map((ie,X)=>r.jsxs("div",{className:"p-4 pl-6 flex items-center hover:bg-gray-50 cursor-pointer",onClick:()=>{if(m)t(`/courses/${e}/learn?lessonId=${ie.LessonID}`);else if(ie.IsPreview)t(`/courses/${e}/learn?lessonId=${ie.LessonID}`);else{re.info("Bạn cần đăng ký khóa học để xem bài học này");const te=document.querySelector(".bg-blue-50");te&&te.scrollIntoView({behavior:"smooth"})}},children:[r.jsxs("svg",{className:"w-5 h-5 text-gray-400 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:ie.Title}),r.jsxs("p",{className:"text-sm text-gray-500",children:[ie.Duration||0," phút"]})]}),!m&&r.jsx("div",{className:"ml-auto flex items-center",children:ie.IsPreview?r.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded",children:"Xem trước"}):r.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]},ie.LessonID||X))})]},A.ModuleID||M)})}):r.jsx("p",{className:"text-gray-500",children:"Chưa có thông tin về nội dung khóa học."})]}),g==="instructor"&&r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold mb-6",children:"Thông tin giảng viên"}),a.Instructor?r.jsxs("div",{className:"flex flex-col md:flex-row bg-gray-50 rounded-2xl p-6 shadow-sm",children:[r.jsx("div",{className:"md:w-1/4 mb-4 md:mb-0 flex justify-center md:justify-start",children:r.jsx(Tt,{src:a.Instructor.Image||a.Instructor.AvatarUrl,name:a.Instructor.FullName||a.Instructor.Name,alt:a.Instructor.FullName||a.Instructor.Name,className:"border-4 border-white shadow-md",size:"xxl"})}),r.jsxs("div",{className:"md:w-3/4 md:pl-6",children:[r.jsx("h3",{className:"text-xl font-bold mb-2 text-blue-700",children:a.Instructor.FullName||a.Instructor.Name}),r.jsx("p",{className:"text-gray-600 mb-3 font-medium",children:a.Instructor.Title||"Giảng viên"}),r.jsxs("div",{className:"mb-4 flex items-center text-gray-500",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"})}),r.jsx("span",{children:"Giảng viên khóa học"})]}),a.Instructor.Bio||a.Instructor.Biography?r.jsx("div",{className:"prose max-w-none border-t border-gray-200 pt-4",dangerouslySetInnerHTML:{__html:a.Instructor.Bio||a.Instructor.Biography}}):r.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[r.jsx("p",{className:"text-gray-500",children:"Chưa có thông tin chi tiết về giảng viên."}),r.jsx("p",{className:"mt-2",children:"Giảng viên là người có chuyên môn trong lĩnh vực và sẽ hỗ trợ bạn trong suốt quá trình học."})]})]})]}):r.jsx("div",{className:"bg-gray-50 rounded-2xl p-6",children:r.jsx("p",{className:"text-gray-500",children:"Chưa có thông tin về giảng viên."})})]}),g==="payment-history"&&i&&r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold mb-6",children:"Lịch sử thanh toán"}),v?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})}):w.length>0?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"py-3 px-4 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mã giao dịch"}),r.jsx("th",{className:"py-3 px-4 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phương thức"}),r.jsx("th",{className:"py-3 px-4 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Số tiền"}),r.jsx("th",{className:"py-3 px-4 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trạng thái"}),r.jsx("th",{className:"py-3 px-4 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ngày thanh toán"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:w.map(A=>{var M;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"py-3 px-4 whitespace-nowrap text-sm font-medium text-gray-900",children:A.TransactionCode||"N/A"}),r.jsx("td",{className:"py-3 px-4 whitespace-nowrap text-sm text-gray-700",children:A.PaymentMethod==="vnpay"?"VNPay":A.PaymentMethod==="paypal"?"PayPal":A.PaymentMethod==="free"?"Miễn phí":A.PaymentMethod}),r.jsxs("td",{className:"py-3 px-4 whitespace-nowrap text-sm text-gray-700",children:[(M=A.Amount)==null?void 0:M.toLocaleString()," ",A.Currency||"VND"]}),r.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${A.PaymentStatus==="completed"?"bg-green-100 text-green-800":A.PaymentStatus==="pending"?"bg-yellow-100 text-yellow-800":A.PaymentStatus==="failed"?"bg-red-100 text-red-800":A.PaymentStatus==="refunded"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:A.PaymentStatus==="completed"?"Thành công":A.PaymentStatus==="pending"?"Đang xử lý":A.PaymentStatus==="failed"?"Thất bại":A.PaymentStatus==="refunded"?"Hoàn tiền":A.PaymentStatus})}),r.jsx("td",{className:"py-3 px-4 whitespace-nowrap text-sm text-gray-700",children:T(A.PaymentDate||A.CreatedAt)})]},A.TransactionID)})})]})}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Chưa có giao dịch"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Bạn chưa có giao dịch nào cho khóa học này."})]})]})]})]}),!m&&r.jsxs("div",{className:"bg-blue-50 rounded-2xl p-8 text-center",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Sẵn sàng để nâng cao kỹ năng của bạn?"}),r.jsx("p",{className:"text-gray-600 mb-6 max-w-2xl mx-auto",children:"Học ngay hôm nay và nhận đầy đủ quyền truy cập vào tất cả các tài liệu khóa học, bài tập thực hành và hỗ trợ từ giảng viên."}),r.jsx("button",{onClick:R,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-2xl transition duration-200",children:_?"Đăng ký miễn phí ngay":"Mua ngay"})]})]})})};typeof window<"u"&&(window.browser=window.browser||window.chrome||{},window.browser.runtime||(window.browser.runtime={sendMessage:()=>Promise.resolve({}),onMessage:{addListener:()=>{},removeListener:()=>{}}}),window.addEventListener("error",e=>e.message&&e.message.includes("browser is not defined")?(console.warn("Suppressing browser not defined error"),e.preventDefault(),!0):!1,!0));(async function(){try{console.log("Checking for existing workspaces...");try{const t=await fetch("http://localhost:8080/",{method:"HEAD",mode:"no-cors",cache:"no-cache"});console.log("Code-server is accessible, but not creating any workspaces automatically")}catch(t){console.warn("Code-server is not running:",t)}}catch(t){console.warn("Pre-initialization failed:",t)}})();const WH=async(e={})=>{const{port:t=8080,workspacePath:n="/workspace"}=e;try{const s=await fetch(`http://localhost:${t}`,{method:"HEAD",mode:"no-cors",cache:"no-cache"});console.log("Code-server is already running");const i=await qH(t);return{success:!0,url:`http://localhost:${t}`,message:"Code-server is already running",hasWorkspace:i.hasWorkspace,workspaceError:i.error}}catch(s){return console.error("Error checking code-server status:",s),{success:!1,message:"Code-server is not running. Please start it manually with: code-server --auth none --port 8080"}}};async function qH(e){try{const n=await(await fetch(`http://localhost:${e}`,{method:"GET",cache:"no-cache"})).text();return n.includes("Workspace does not exist")||n.includes("Please select another workspace")?(console.log("Detected workspace error - no workspace exists"),{hasWorkspace:!1,error:"No workspace exists"}):{hasWorkspace:!0,error:null}}catch(t){return console.warn("Error checking workspace status:",t),{hasWorkspace:!1,error:t.message}}}const KH=e=>{if(!e||!e.contentWindow)return;const t=`
    (function() {
      try {
        // Create workspace directory if it doesn't exist
        const fs = require('fs');
        const path = require('path');
        const os = require('os');
        
        // Try both paths - /workspace is for Docker environments, /home/coder/project for direct installs
        const workspacePaths = ['/workspace', '/home/coder/project'];
        
        let workspaceCreated = false;
        let createdWorkspacePath = '';
        
        for (const wsPath of workspacePaths) {
          try {
            if (!fs.existsSync(wsPath)) {
              fs.mkdirSync(wsPath, { recursive: true });
              console.log('Created workspace directory at ' + wsPath);
              workspaceCreated = true;
              createdWorkspacePath = wsPath;
              break;
            } else {
              console.log('Workspace directory already exists at ' + wsPath);
              workspaceCreated = true;
              createdWorkspacePath = wsPath;
              break;
            }
          } catch (err) {
            console.error('Error creating workspace at ' + wsPath + ':', err);
          }
        }
        
        if (!workspaceCreated) {
          // If all paths failed, create in home directory
          const homeDir = os.homedir();
          const fallbackPath = path.join(homeDir, 'workspace');
          
          if (!fs.existsSync(fallbackPath)) {
            fs.mkdirSync(fallbackPath, { recursive: true });
            console.log('Created fallback workspace at ' + fallbackPath);
            createdWorkspacePath = fallbackPath;
          } else {
            console.log('Fallback workspace already exists at ' + fallbackPath);
            createdWorkspacePath = fallbackPath;
          }
        }

        // Create a hidden .user-workspace marker file for this user
        if (createdWorkspacePath) {
          const userId = localStorage.getItem('userId') || 'anonymous-' + Math.random().toString(36).substring(2, 15);
          const userMarkerPath = path.join(createdWorkspacePath, '.user-workspace');
          fs.writeFileSync(userMarkerPath, userId);
          console.log('Added user workspace marker at:', userMarkerPath);
          
          // Store which workspace belongs to this user
          localStorage.setItem('userWorkspacePath', createdWorkspacePath);
        }
      } catch (error) {
        console.error('Error creating workspace directory:', error);
      }
    })();
  `;try{e.contentWindow.postMessage({type:"create-workspace",script:t},"*")}catch(n){console.error("Error sending create-workspace message:",n)}},GH=e=>{if(!e||!e.contentWindow)return console.error("Invalid iframe element for file creation enablement"),!1;try{return e.contentWindow.postMessage({type:"inject-script",script:`
      (function() {
        try {
          console.log('Initializing file creation capabilities...');
          
          // Function to add file creation commands to the global context
          const enableFileCommands = () => {
            if (typeof window.vscodeApi === 'undefined') {
              try {
                // Try to acquire VS Code API if not already available
                window.vscodeApi = window.acquireVsCodeApi ? window.acquireVsCodeApi() : undefined;
              } catch (vsErr) {
                console.warn('Could not acquire VS Code API:', vsErr);
              }
            }
            
            // Set up global helper for file operations that works without the VS Code API
            window.campustFileHelper = {
              // Create a new file at the specified path
              createFile: async (filePath, content = '') => {
                try {
                  if (typeof require === 'function') {
                    const fs = require('fs');
                    const path = require('path');
                    
                    // Ensure we have an absolute path
                    if (!path.isAbsolute(filePath)) {
                      // Try to determine workspace root
                      const workspacePaths = ['/workspace', '/home/coder/project'];
                      let workspaceRoot = null;
                      
                      for (const wsPath of workspacePaths) {
                        try {
                          if (fs.existsSync(wsPath)) {
                            workspaceRoot = wsPath;
                            break;
                          }
                        } catch (err) {}
                      }
                      
                      // If no workspace found, use home directory
                      if (!workspaceRoot) {
                        const os = require('os');
                        workspaceRoot = path.join(os.homedir(), 'workspace');
                        
                        // Ensure the directory exists
                        if (!fs.existsSync(workspaceRoot)) {
                          fs.mkdirSync(workspaceRoot, { recursive: true });
                        }
                      }
                      
                      // Join with workspace path
                      filePath = path.join(workspaceRoot, filePath);
                    }
                    
                    // Ensure the directory exists
                    const dirPath = path.dirname(filePath);
                    if (!fs.existsSync(dirPath)) {
                      fs.mkdirSync(dirPath, { recursive: true });
                    }
                    
                    // Write the file
                    fs.writeFileSync(filePath, content);
                    console.log('File created successfully at: ' + filePath);
                    
                    // Try to open the file in editor
                    setTimeout(() => {
                      try {
                        // Try using VS Code API first
                        if (window.vscodeApi) {
                          window.vscodeApi.postMessage({ 
                            command: 'openFile', 
                            path: filePath 
                          });
                        } else {
                          // Fallback: Try to use file navigator UI to show the file
                          const sidebarElem = document.querySelector('.sidebar, .filetree, .explorer-viewlet');
                          if (sidebarElem) {
                            // Try to find the refresh button
                            const refreshBtn = sidebarElem.querySelector('button[title*="Refresh"], .refresh');
                            if (refreshBtn) {
                              refreshBtn.click();
                              console.log('Refreshed file explorer');
                            }
                          }
                        }
                      } catch (openErr) {
                        console.warn('Error trying to open file:', openErr);
                      }
                    }, 500);
                    
                    return { success: true, path: filePath };
                  } else {
                    throw new Error('Node.js require not available for file operations');
                  }
                } catch (error) {
                  console.error('Error creating file:', error);
                  return { success: false, error: error.toString() };
                }
              },
              
              // Create a new folder at the specified path
              createFolder: async (folderPath) => {
                try {
                  if (typeof require === 'function') {
                    const fs = require('fs');
                    const path = require('path');
                    
                    // Ensure we have an absolute path
                    if (!path.isAbsolute(folderPath)) {
                      // Try to determine workspace root
                      const workspacePaths = ['/workspace', '/home/coder/project'];
                      let workspaceRoot = null;
                      
                      for (const wsPath of workspacePaths) {
                        try {
                          if (fs.existsSync(wsPath)) {
                            workspaceRoot = wsPath;
                            break;
                          }
                        } catch (err) {}
                      }
                      
                      // If no workspace found, use home directory
                      if (!workspaceRoot) {
                        const os = require('os');
                        workspaceRoot = path.join(os.homedir(), 'workspace');
                        
                        // Ensure the parent directory exists
                        if (!fs.existsSync(workspaceRoot)) {
                          fs.mkdirSync(workspaceRoot, { recursive: true });
                        }
                      }
                      
                      // Join with workspace path
                      folderPath = path.join(workspaceRoot, folderPath);
                    }
                    
                    // Create the directory
                    fs.mkdirSync(folderPath, { recursive: true });
                    console.log('Folder created successfully at: ' + folderPath);
                    
                    // Try to refresh file explorer
                    setTimeout(() => {
                      try {
                        const sidebarElem = document.querySelector('.sidebar, .filetree, .explorer-viewlet');
                        if (sidebarElem) {
                          // Try to find the refresh button
                          const refreshBtn = sidebarElem.querySelector('button[title*="Refresh"], .refresh');
                          if (refreshBtn) {
                            refreshBtn.click();
                            console.log('Refreshed file explorer');
                          }
                        }
                      } catch (refreshErr) {
                        console.warn('Error refreshing file explorer:', refreshErr);
                      }
                    }, 500);
                    
                    return { success: true, path: folderPath };
                  } else {
                    throw new Error('Node.js require not available for file operations');
                  }
                } catch (error) {
                  console.error('Error creating folder:', error);
                  return { success: false, error: error.toString() };
                }
              }
            };
            
            // Also listen for file creation commands from the parent window
            window.addEventListener('message', (event) => {
              if (!event.data || !event.data.type) return;
              
              const { type, data } = event.data;
              
              if (type === 'create-file' && data && data.path) {
                const content = data.content || '';
                window.campustFileHelper.createFile(data.path, content)
                  .then(result => {
                    // Send result back to parent
                    window.parent.postMessage({
                      type: 'file-creation-result',
                      data: result
                    }, '*');
                  });
              } else if (type === 'create-folder' && data && data.path) {
                window.campustFileHelper.createFolder(data.path)
                  .then(result => {
                    // Send result back to parent
                    window.parent.postMessage({
                      type: 'folder-creation-result',
                      data: result
                    }, '*');
                  });
              }
            });
            
            console.log('File operations initialized successfully');
            return true;
          };
          
          // Try immediately
          if (!enableFileCommands()) {
            // If not successful, try again with a delay
            const interval = setInterval(() => {
              if (enableFileCommands()) {
                clearInterval(interval);
              }
            }, 1000);
            
            // Safety cleanup after 10 seconds
            setTimeout(() => clearInterval(interval), 10000);
          }
        } catch (error) {
          console.error('Error enabling file creation:', error);
        }
      })();
    `},"*"),!0}catch(t){return console.error("Error setting up file creation:",t),!1}},L1=async(e,t,n="")=>!e||!e.contentWindow?(console.error("Invalid iframe element for file creation"),{success:!1,error:"Invalid iframe"}):new Promise(s=>{const i=a=>{a.data&&a.data.type==="file-creation-result"&&(window.removeEventListener("message",i),s(a.data.data))};window.addEventListener("message",i);try{e.contentWindow.postMessage({type:"create-file",data:{path:t,content:n}},"*"),setTimeout(()=>{window.removeEventListener("message",i),s({success:!1,error:"Timeout waiting for file creation result"})},5e3)}catch(a){window.removeEventListener("message",i),s({success:!1,error:a.toString()})}}),XH=async(e,t)=>!e||!e.contentWindow?(console.error("Invalid iframe element for folder creation"),{success:!1,error:"Invalid iframe"}):new Promise(n=>{const s=i=>{i.data&&i.data.type==="folder-creation-result"&&(window.removeEventListener("message",s),n(i.data.data))};window.addEventListener("message",s);try{e.contentWindow.postMessage({type:"create-folder",data:{path:t}},"*"),setTimeout(()=>{window.removeEventListener("message",s),n({success:!1,error:"Timeout waiting for folder creation result"})},5e3)}catch(i){window.removeEventListener("message",s),n({success:!1,error:i.toString()})}}),YH=e=>{if(!e||!e.contentWindow)return console.error("Invalid iframe element or content window"),!1;try{return KH(e),GH(e),setTimeout(()=>{try{return e.contentWindow.postMessage({type:"inject-script",script:`
          (function() {
            // Polyfill browser if it doesn't exist
            if (typeof browser === 'undefined') {
              window.browser = window.browser || window.chrome || {};
              
              // Global polyfill for browser.runtime
              if (!window.browser.runtime) {
                window.browser.runtime = {
                  sendMessage: () => Promise.resolve({}),
                  onMessage: {
                    addListener: () => {},
                    removeListener: () => {}
                  }
                };
              }
            }
            
            // Add error suppression
            window.addEventListener('error', (event) => {
              if (event.message && (
                event.message.includes('browser is not defined') ||
                event.message.includes('vsda') ||
                event.message.includes('404 (Not Found)')
              )) {
                console.warn('Suppressing error:', event.message);
                event.preventDefault();
                return true;
              }
              return false;
            }, true);
            
            let lastSavedContent = '';
            let editorInitialized = false;
            
            // Function to send content changes to parent window
            function sendContentToParent() {
              const editor = window.monaco?.editor?.getModels()[0];
              if (editor) {
                const content = editor.getValue();
                if (content !== lastSavedContent) {
                  lastSavedContent = content;
                  window.parent.postMessage({
                    type: 'code-changed',
                    data: { code: content }
                  }, '*');
                }
              }
            }
            
            // Listen for content changes
            const setupMonacoListeners = () => {
              if (window.monaco && window.monaco.editor) {
                const editor = window.monaco.editor.getModels()[0];
                
                if (editor && !editorInitialized) {
                  editorInitialized = true;
                editor.onDidChangeContent(() => {
                  sendContentToParent();
                });
                
                // Notify parent that editor is ready
                window.parent.postMessage({
                  type: 'editor-ready',
                  data: {}
                }, '*');
                  
                  return true;
                }
              }
              
              // If we get here, monaco or editor isn't ready yet
              return false;
            };
            
            // Listen for messages from parent
            window.addEventListener('message', (event) => {
              if (event.data && event.data.type === 'set-code') {
                const { code, language } = event.data.data;
                
                const setupAndSetCode = () => {
                  if (window.monaco && window.monaco.editor) {
                    const editor = window.monaco.editor.getModels()[0];
                
                if (editor) {
                  lastSavedContent = code;
                  editor.setValue(code);
                  
                  // Set language if monaco is available
                  if (window.monaco && language) {
                    monaco.editor.setModelLanguage(editor, language);
                  }
                      return true;
                    }
                  }
                  
                  // If we get here, monaco or editor isn't ready yet
                  return false;
                };
                
                // Try to set code immediately, or retry with a delay if not ready
                if (!setupAndSetCode()) {
                  const interval = setInterval(() => {
                    if (setupAndSetCode()) {
                      clearInterval(interval);
                    }
                  }, 500);
                  
                  // Safety cleanup after 10 seconds
                  setTimeout(() => clearInterval(interval), 10000);
                }
              }
            });
            
            // Auto-reload the editor if the workspace doesn't exist
            const checkWorkspaceError = () => {
              if (document.body.innerText && document.body.innerText.includes('Workspace does not exist')) {
                console.log('Detected workspace error, reloading...');
                window.location.href = window.location.origin;
                return true;
              }
              return false;
            };
            
            // Check for workspace error immediately and then periodically
            if (!checkWorkspaceError()) {
              setTimeout(checkWorkspaceError, 1000);
              setTimeout(checkWorkspaceError, 3000);
            }
            
            // Start checking for Monaco to be ready
            if (!setupMonacoListeners()) {
              const interval = setInterval(() => {
                if (setupMonacoListeners()) {
                  clearInterval(interval);
                }
              }, 500);
              
              // Safety cleanup after 10 seconds
              setTimeout(() => clearInterval(interval), 10000);
            }
          })();
        `},"*"),!0}catch(t){return console.error("Error in setTimeout for communication script:",t),!1}},1e3),!0}catch(t){return console.error("Error injecting communication script:",t),!1}},QH=(e,t={})=>{if(!e||!e.contentWindow)return console.error("Invalid iframe element or content window for configuring"),!1;const{theme:n="vs",fontSize:s=14}=t;try{return setTimeout(()=>{try{return e.contentWindow.postMessage({type:"configure-editor",settings:{theme:n,fontSize:s,options:{automaticLayout:!0,wordWrap:"on",scrollBeyondLastLine:!1,minimap:{enabled:!0}}}},"*"),!0}catch(i){return console.error("Error in setTimeout for configuration:",i),!1}},2e3),!0}catch(i){return console.error("Error configuring code-server:",i),!1}},Jm=e=>{if(!e)return!1;try{const t=`
      (function() {
        try {
          // Fix workspace error if present
          if (document.body.innerText && document.body.innerText.includes('Workspace does not exist')) {
            console.log('Detected workspace error, attempting to fix...');
            
            // Try to reload to the root
            setTimeout(() => {
              window.location.href = window.location.origin;
            }, 500);
            
            return; // Exit and let the reload handle it
          }
          
          // Try to access node modules in code-server environment
          if (typeof require === 'function') {
            const fs = require('fs');
            const path = require('path');
            
            // Try multiple possible workspace paths
            const workspacePaths = ['/workspace', '/home/coder/project', '/tmp/workspace'];
            let workspaceCreated = false;
            let workspacePath = '';
            
            for (const wsPath of workspacePaths) {
              try {
                if (!fs.existsSync(wsPath)) {
                  fs.mkdirSync(wsPath, { recursive: true });
                  console.log('Created workspace directory at ' + wsPath);
                  workspaceCreated = true;
                  workspacePath = wsPath;
                  break;
                } else {
                  console.log('Workspace directory already exists at ' + wsPath);
                  workspaceCreated = true;
                  workspacePath = wsPath;
                  break;
                }
              } catch (err) {
                console.error('Error creating workspace at ' + wsPath + ':', err);
              }
            }
            
            if (!workspaceCreated) {
              // If all paths failed, create in home directory
              try {
                const homeDir = require('os').homedir();
                workspacePath = path.join(homeDir, 'workspace');
                
                if (!fs.existsSync(workspacePath)) {
                  fs.mkdirSync(workspacePath, { recursive: true });
                  console.log('Created fallback workspace at ' + workspacePath);
                  workspaceCreated = true;
                } else {
                  console.log('Fallback workspace already exists at ' + workspacePath);
                  workspaceCreated = true;
                }
              } catch (homeErr) {
                console.error('Error creating home workspace:', homeErr);
                
                // Last attempt: try to create in /tmp
                try {
                  workspacePath = '/tmp/codeserver-workspace';
                  fs.mkdirSync(workspacePath, { recursive: true });
                  console.log('Created emergency workspace at ' + workspacePath);
                  workspaceCreated = true;
                } catch (tmpErr) {
                  console.error('Failed to create any workspace directory:', tmpErr);
                }
              }
            }
            
            if (workspaceCreated && workspacePath) {
              // Create a welcome README file
              try {
                fs.writeFileSync(path.join(workspacePath, 'README.md'), 
                  '# CHÀO MỪNG BẠN ĐẾN VỚI CAMPUST

' +
                  '## Nền tảng học tập lập trình hiện đại

' +
                  'Đây là không gian làm việc của bạn để thực hành lập trình và giải quyết các bài toán.

' +
                  '### Lợi ích khi học tập tại CAMPUST

' +
                  '- Trải nghiệm học tập thực tế với môi trường lập trình chuyên nghiệp
' +
                  '- Hỗ trợ nhiều ngôn ngữ: JavaScript, Python, C++, Java
' +
                  '- Bài tập đa dạng từ cơ bản đến nâng cao
' +
                  '- Hướng dẫn và kiểm tra tự động giúp bạn nhanh chóng cải thiện kỹ năng

' +
                  '### Bắt đầu ngay

' +
                  '1. Chọn ngôn ngữ lập trình bạn muốn học
' +
                  '2. Làm quen với giao diện editor và các công cụ hỗ trợ
' +
                  '3. Thử sức với các bài tập từ cơ bản đến nâng cao

' +
                  '**Chúc bạn học tập hiệu quả!**
',
                  { flag: 'w' }
                );
                console.log('Created README.md file');
                
                // Try to open the README file automatically
                setTimeout(() => {
                  try {
                    // Get all VS Code commands
                    const vscode = window.vscodeApi || window.acquireVsCodeApi();
                    vscode.postMessage({ 
                      command: 'openFile', 
                      path: path.join(workspacePath, 'README.md') 
                    });
                  } catch (cmdErr) {
                    console.error('Error sending open command:', cmdErr);
                  }
                }, 1000);
              } catch (fileErr) {
                console.error('Error creating README file:', fileErr);
              }

              // Create a sample JavaScript file
              try {
                fs.writeFileSync(path.join(workspacePath, 'example.js'), 
                  '// Ví dụ code JavaScript tại CAMPUST

' +
                  'function helloCAMPUST() {
' +
                  '  console.log("Chào mừng bạn đến với CAMPUST!");
' +
                  '  console.log("Nơi học tập lập trình hiện đại nhất");
' +
                  '}

' +
                  'helloCAMPUST();

' +
                  '// Hãy thử chỉnh sửa code này và quan sát kết quả!',
                  { flag: 'w' }
                );
                console.log('Created example.js file');
              } catch (fileErr) {
                console.error('Error creating JavaScript example file:', fileErr);
              }

              // Create a sample Python file
              try {
                fs.writeFileSync(path.join(workspacePath, 'example.py'), 
                  '# Ví dụ code Python tại CAMPUST

' +
                  'def hello_campust():
' +
                  '    print("Chào mừng bạn đến với CAMPUST!")
' +
                  '    print("Nơi học tập lập trình hiện đại nhất")

' +
                  'hello_campust()

' +
                  '# Hãy thử chỉnh sửa code này và quan sát kết quả!',
                  { flag: 'w' }
                );
                console.log('Created example.py file');
              } catch (fileErr) {
                console.error('Error creating Python example file:', fileErr);
              }
              
              // Create a sample C++ file
              try {
                fs.writeFileSync(path.join(workspacePath, 'example.cpp'), 
                  '// Ví dụ code C++ tại CAMPUST

' +
                  '#include <iostream>

' +
                  'int main() {
' +
                  '    std::cout << "Chào mừng bạn đến với CAMPUST!" << std::endl;
' +
                  '    std::cout << "Nơi học tập lập trình hiện đại nhất" << std::endl;
' +
                  '    return 0;
' +
                  '}

' +
                  '// Hãy thử chỉnh sửa code này và quan sát kết quả!',
                  { flag: 'w' }
                );
                console.log('Created example.cpp file');
              } catch (fileErr) {
                console.error('Error creating C++ example file:', fileErr);
              }
              
              // Create a sample Java file
              try {
                fs.writeFileSync(path.join(workspacePath, 'Main.java'), 
                  '// Ví dụ code Java tại CAMPUST

' +
                  'public class Main {
' +
                  '    public static void main(String[] args) {
' +
                  '        System.out.println("Chào mừng bạn đến với CAMPUST!");
' +
                  '        System.out.println("Nơi học tập lập trình hiện đại nhất");
' +
                  '    }
' +
                  '}

' +
                  '// Hãy thử chỉnh sửa code này và quan sát kết quả!',
                  { flag: 'w' }
                );
                console.log('Created Main.java file');
              } catch (fileErr) {
                console.error('Error creating Java example file:', fileErr);
              }
            }
          } else {
            console.warn('Node.js require function not available');
            
            // Notify parent about the problem
            window.parent.postMessage({
              type: 'workspace-error',
              error: 'node-unavailable'
            }, '*');
          }
        } catch (error) {
          console.error('Error in workspace directory creation:', error);
          
          // Notify parent about the error
          window.parent.postMessage({
            type: 'workspace-error',
            error: error.toString()
          }, '*');
        }
      })();
    `;if(e.postMessage)return e.postMessage({type:"workspace-setup",script:t},"*"),!0;if(e.eval)try{return e.eval(t),!0}catch(n){console.error("Direct eval failed:",n)}return!1}catch(t){return console.error("Error setting up workspace directory:",t),!1}},Zm=e=>{if(!e||!e.contentWindow){console.error("Invalid iframe element for workspace setup");return}try{Jm(e.contentWindow);const t=s=>{const{type:i}=s.data||{};i==="editor-ready"&&(Jm(e.contentWindow),window.removeEventListener("message",t))};window.addEventListener("message",t),setTimeout(()=>{window.removeEventListener("message",t)},1e4);const n=setInterval(()=>{if(e.contentWindow)try{const s=e.contentWindow.document;s.body&&s.body.innerText&&s.body.innerText.includes("Workspace does not exist")&&(console.log("Periodic check found workspace error, attempting to fix..."),Jm(e.contentWindow))}catch{}else clearInterval(n)},2e3);setTimeout(()=>clearInterval(n),3e4)}catch(t){console.error("Error in setupWorkspaceForCodeServer:",t)}},JH=({iframeRef:e,onError:t,onFixed:n})=>{const[s,i]=h.useState(!1),[a,o]=h.useState(0),l=10;return h.useEffect(()=>{if(!e||!e.current)return;const c=()=>{try{const u=e.current;if(!u||!u.contentWindow||!u.contentWindow.document)return;const m=u.contentWindow.document.body.innerText||"";return m.includes("Workspace does not exist")||m.includes("Please select another workspace")?(console.log("WorkspaceErrorHandler: Detected workspace error"),i(!0),t&&t(),!0):!1}catch{return!1}};if(!c()){const u=setInterval(()=>{const m=c();o(f=>{const p=f+1;return p>=l&&clearInterval(u),p}),m&&clearInterval(u)},1e3);return()=>clearInterval(u)}},[e,t]),h.useEffect(()=>{if(!s||!e||!e.current)return;console.log("WorkspaceErrorHandler: Attempting to fix workspace error");const c=e.current,u=c.src.split("/").slice(0,3).join("/"),m=setTimeout(()=>{c.src=u,console.log("WorkspaceErrorHandler: Reloaded iframe to",u),n&&n(),i(!1)},500);return()=>clearTimeout(m)},[s,e,n]),null},wN=({code:e,language:t,onChange:n})=>{const s=h.useRef(null),[i,a]=h.useState(!1),[o,l]=h.useState(""),[c,d]=h.useState({loading:!0,success:!1,message:"Checking code-server status..."}),[u,m]=h.useState(!1),f=h.useRef(null),p=h.useRef(0),x=3;h.useEffect(()=>((async()=>{try{const N=await WH({port:8080});d({loading:!1,success:N.success,message:N.message}),N.success&&l(N.url)}catch(N){console.error("Failed to initialize code-server:",N),d({loading:!1,success:!1,message:"Failed to connect to code-server. Please make sure it is running."})}})(),f.current=setTimeout(()=>{i||(console.log("Timeout reached, setting editor as loaded anyway"),a(!0))},2e3),()=>{f.current&&clearTimeout(f.current)}),[]),h.useEffect(()=>{if(!o)return;const v=N=>{const{type:C,data:T}=N.data||{};if(C==="code-changed"&&(T!=null&&T.code))n(T.code);else if(C==="editor-ready")console.log("Editor is ready, sending initial code"),a(!0),m(!0),f.current&&(clearTimeout(f.current),f.current=null),s.current&&s.current.contentWindow&&s.current.contentWindow.postMessage({type:"set-code",data:{code:e,language:t}},"*"),b();else if(C==="workspace-error")console.log("Workspace error detected, attempting to fix..."),g();else if(C==="workspace-setup"){if(console.log("Setting up workspace directory"),N.data.script&&s.current&&s.current.contentWindow)try{const E=`
              (function() {
                try {
                  ${N.data.script}
                } catch (error) {
                  console.error('Error executing workspace setup script:', error);
                }
              })();
            `;try{s.current.contentWindow.eval(E)}catch(P){console.error("Direct workspace setup script eval failed:",P)}}catch(E){console.error("Error processing workspace-setup message:",E)}}else if(C==="inject-script"&&N.data.script)try{if(s.current&&s.current.contentWindow){const E=`
              (function() {
                try {
                  ${N.data.script}
                } catch (error) {
                  console.error('Error executing injected script:', error);
                }
              })();
            `;console.log("Please run this script in the iframe console if editor fails to load:"),console.log(E);try{const P=s.current;P&&P.contentWindow&&P.contentWindow.eval(E)}catch(P){console.error("Direct eval failed:",P)}}}catch(E){console.error("Error processing inject-script message:",E)}else if(C==="configure-editor")try{if(s.current&&s.current.contentWindow){const{theme:E,fontSize:P,options:R}=N.data.settings||{},y=`
              (function() {
                try {
                  if (window.monaco) {
                    monaco.editor.setTheme('${E||"vs"}');
                    
                    const editor = monaco.editor.getEditors()[0];
                    if (editor) {
                      editor.updateOptions(${JSON.stringify({fontSize:P||14,...R||{}})});
                    }
                  }
                } catch (error) {
                  console.error('Error configuring editor:', error);
                }
              })();
            `;console.log("Please run this configuration script in the iframe console if needed:"),console.log(y);try{const O=s.current;O&&O.contentWindow&&O.contentWindow.eval(y)}catch(O){console.error("Direct config eval failed:",O)}}}catch(E){console.error("Error processing configure-editor message:",E)}else(C==="file-creation-result"||C==="folder-creation-result")&&(console.log(`${C==="file-creation-result"?"File":"Folder"} creation result:`,T),T.success?console.log(`Successfully created ${C==="file-creation-result"?"file":"folder"} at: ${T.path}`):console.error(`Failed to create ${C==="file-creation-result"?"file":"folder"}:`,T.error))};return window.addEventListener("message",v),()=>{window.removeEventListener("message",v)}},[n,o,e,t]);const g=()=>{console.log(`Handling workspace error (attempt ${p.current+1}/${x})`),p.current<x?(p.current++,s.current&&s.current.contentWindow&&(Zm(s.current),setTimeout(()=>{if(s.current){const v=s.current.src;s.current.src=v}},1e3))):console.error(`Failed to fix workspace after ${x} attempts`)},b=async()=>{if(!(!s.current||!u))try{await XH(s.current,"campust-examples"),console.log("Created campust-examples folder");const v={"html-example.html":`<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CAMPUST Demo Page</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      color: #333;
      margin: 40px;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 5px;
    }
    h1 {
      color: #2c3e50;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Chào mừng đến với CAMPUST</h1>
    <p>Đây là một ví dụ trang HTML đơn giản được tạo bởi CAMPUST Code Editor.</p>
    <p>Bạn có thể chỉnh sửa tệp này để học HTML và CSS.</p>
  </div>
</body>
</html>`,"js-example.js":`// Ví dụ JavaScript
class CAMPUSTDemo {
  constructor(name) {
    this.name = name;
  }
  
  sayHello() {
    return \`Xin chào, tôi là \${this.name} từ CAMPUST!\`;
  }
  
  createList(items) {
    return items.map((item, index) => {
      return \`Item \${index + 1}: \${item}\`;
    });
  }
}

// Tạo đối tượng demo mới
const demo = new CAMPUSTDemo('Học viên');
console.log(demo.sayHello());

// Tạo danh sách
const items = ['HTML', 'CSS', 'JavaScript', 'Python'];
const formattedItems = demo.createList(items);
console.log('Các khóa học:', formattedItems);`,"python-example.py":`# Ví dụ Python

class CAMPUSTDemo:
    def __init__(self, name):
        self.name = name
    
    def say_hello(self):
        return f"Xin chào, tôi là {self.name} từ CAMPUST!"
    
    def create_list(self, items):
        return [f"Item {i+1}: {item}" for i, item in enumerate(items)]

# Tạo đối tượng demo mới
demo = CAMPUSTDemo("Học viên")
print(demo.say_hello())

# Tạo danh sách
items = ["HTML", "CSS", "JavaScript", "Python"]
formatted_items = demo.create_list(items)
print("Các khóa học:")
for item in formatted_items:
    print(item)`};for(const[N,C]of Object.entries(v)){const T=`campust-examples/${N}`,E=await L1(s.current,T,C);console.log(`Created file: ${T}`,E)}await L1(s.current,"campust-examples/README.md",`# CAMPUST Code Examples
        
## Hướng dẫn sử dụng

Thư mục này chứa các ví dụ mã nguồn để giúp bạn làm quen với trình soạn thảo code CAMPUST:

1. **html-example.html** - Ví dụ về cú pháp HTML và CSS cơ bản
2. **js-example.js** - Ví dụ về JavaScript với class và các hàm
3. **python-example.py** - Ví dụ về Python với class và các phương thức

## Cách tạo tệp mới

Để tạo một tệp mới:
1. Nhấp chuột phải vào explorer bên trái
2. Chọn "New File" hoặc "New Folder"
3. Nhập tên tệp và nhấn Enter

## Tính năng chính

- Làm việc với nhiều loại tệp khác nhau
- Tự động highlight cú pháp
- Autocompletion (gợi ý hoàn thành mã)
- Mở nhiều tệp cùng lúc với tabs`)}catch(v){console.error("Error creating sample files:",v)}},w=()=>{if(!(!s.current||!s.current.contentWindow))try{const v=s.current.contentWindow.document;v&&v.body&&v.body.innerText&&v.body.innerText.includes("Workspace does not exist")&&(console.log("Detected workspace error in iframe"),g())}catch{}};h.useEffect(()=>{u&&s.current&&s.current.contentWindow&&s.current.contentWindow.postMessage({type:"set-code",data:{code:e,language:t}},"*")},[e,t,u]);const k=()=>{s.current&&(console.log("Code-server iframe loaded, injecting communication script"),setTimeout(w,500),setTimeout(w,1500),Zm(s.current),setTimeout(()=>{YH(s.current),QH(s.current,{theme:"vs",fontSize:14}),s.current&&s.current.contentWindow&&s.current.contentWindow.postMessage({type:"set-code",data:{code:e,language:t}},"*")},500))};return c.loading?r.jsx("div",{className:"h-full w-full bg-white flex items-center justify-center",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mb-4"}),r.jsx("p",{className:"text-gray-700",children:"Đang kết nối tới không gian làm việc..."})]})}):c.success?r.jsxs("div",{className:"h-full w-full bg-white relative",children:[!i&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-80 z-10",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mb-4"}),r.jsx("p",{className:"text-gray-700",children:"Đang tải không gian làm việc..."})]})}),r.jsx("iframe",{ref:s,src:`${o}/`,className:"w-full h-full",title:"CAMPUST Code Editor",onLoad:k,style:{border:"none"},sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals"}),r.jsx(JH,{iframeRef:s,onError:()=>{console.log("Workspace error detected by handler"),g()},onFixed:()=>{console.log("Workspace error fixed by handler"),setTimeout(()=>{Zm(s.current)},1e3)}})]}):r.jsxs("div",{className:"h-full w-full bg-white flex flex-col items-center justify-center p-4",children:[r.jsx("div",{className:"text-red-500 text-xl mb-4",children:"⚠️ Không thể kết nối tới code-server"}),r.jsx("p",{className:"text-gray-700 mb-4 text-center",children:c.message}),r.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg w-full max-w-2xl text-sm",children:[r.jsx("p",{className:"font-bold mb-2",children:"Khởi động code-server với lệnh:"}),r.jsx("pre",{className:"bg-gray-800 text-white p-3 rounded overflow-x-auto",children:"code-server --auth none --port 8080"})]})]})};function ZH(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const eW=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,tW=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,nW={};function M1(e,t){return(nW.jsx?tW:eW).test(e)}const rW=/[ \t\n\f\r]/g;function sW(e){return typeof e=="object"?e.type==="text"?D1(e.value):!1:D1(e)}function D1(e){return e.replace(rW,"")===""}class gc{constructor(t,n,s){this.normal=n,this.property=t,s&&(this.space=s)}}gc.prototype.normal={};gc.prototype.property={};gc.prototype.space=void 0;function jN(e,t){const n={},s={};for(const i of e)Object.assign(n,i.property),Object.assign(s,i.normal);return new gc(n,s,t)}function Hp(e){return e.toLowerCase()}class Gn{constructor(t,n){this.attribute=n,this.property=t}}Gn.prototype.attribute="";Gn.prototype.booleanish=!1;Gn.prototype.boolean=!1;Gn.prototype.commaOrSpaceSeparated=!1;Gn.prototype.commaSeparated=!1;Gn.prototype.defined=!1;Gn.prototype.mustUseProperty=!1;Gn.prototype.number=!1;Gn.prototype.overloadedBoolean=!1;Gn.prototype.property="";Gn.prototype.spaceSeparated=!1;Gn.prototype.space=void 0;let iW=0;const ot=la(),hn=la(),Wp=la(),Ee=la(),Ft=la(),Ha=la(),Xn=la();function la(){return 2**++iW}const qp=Object.freeze(Object.defineProperty({__proto__:null,boolean:ot,booleanish:hn,commaOrSpaceSeparated:Xn,commaSeparated:Ha,number:Ee,overloadedBoolean:Wp,spaceSeparated:Ft},Symbol.toStringTag,{value:"Module"})),ef=Object.keys(qp);class L0 extends Gn{constructor(t,n,s,i){let a=-1;if(super(t,n),$1(this,"space",i),typeof s=="number")for(;++a<ef.length;){const o=ef[a];$1(this,ef[a],(s&qp[o])===qp[o])}}}L0.prototype.defined=!0;function $1(e,t,n){n&&(e[t]=n)}function bo(e){const t={},n={};for(const[s,i]of Object.entries(e.properties)){const a=new L0(s,e.transform(e.attributes||{},s),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(s)&&(a.mustUseProperty=!0),t[s]=a,n[Hp(s)]=s,n[Hp(a.attribute)]=s}return new gc(t,n,e.space)}const kN=bo({properties:{ariaActiveDescendant:null,ariaAtomic:hn,ariaAutoComplete:null,ariaBusy:hn,ariaChecked:hn,ariaColCount:Ee,ariaColIndex:Ee,ariaColSpan:Ee,ariaControls:Ft,ariaCurrent:null,ariaDescribedBy:Ft,ariaDetails:null,ariaDisabled:hn,ariaDropEffect:Ft,ariaErrorMessage:null,ariaExpanded:hn,ariaFlowTo:Ft,ariaGrabbed:hn,ariaHasPopup:null,ariaHidden:hn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ft,ariaLevel:Ee,ariaLive:null,ariaModal:hn,ariaMultiLine:hn,ariaMultiSelectable:hn,ariaOrientation:null,ariaOwns:Ft,ariaPlaceholder:null,ariaPosInSet:Ee,ariaPressed:hn,ariaReadOnly:hn,ariaRelevant:null,ariaRequired:hn,ariaRoleDescription:Ft,ariaRowCount:Ee,ariaRowIndex:Ee,ariaRowSpan:Ee,ariaSelected:hn,ariaSetSize:Ee,ariaSort:null,ariaValueMax:Ee,ariaValueMin:Ee,ariaValueNow:Ee,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function NN(e,t){return t in e?e[t]:t}function CN(e,t){return NN(e,t.toLowerCase())}const aW=bo({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ha,acceptCharset:Ft,accessKey:Ft,action:null,allow:null,allowFullScreen:ot,allowPaymentRequest:ot,allowUserMedia:ot,alt:null,as:null,async:ot,autoCapitalize:null,autoComplete:Ft,autoFocus:ot,autoPlay:ot,blocking:Ft,capture:null,charSet:null,checked:ot,cite:null,className:Ft,cols:Ee,colSpan:null,content:null,contentEditable:hn,controls:ot,controlsList:Ft,coords:Ee|Ha,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ot,defer:ot,dir:null,dirName:null,disabled:ot,download:Wp,draggable:hn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ot,formTarget:null,headers:Ft,height:Ee,hidden:Wp,high:Ee,href:null,hrefLang:null,htmlFor:Ft,httpEquiv:Ft,id:null,imageSizes:null,imageSrcSet:null,inert:ot,inputMode:null,integrity:null,is:null,isMap:ot,itemId:null,itemProp:Ft,itemRef:Ft,itemScope:ot,itemType:Ft,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ot,low:Ee,manifest:null,max:null,maxLength:Ee,media:null,method:null,min:null,minLength:Ee,multiple:ot,muted:ot,name:null,nonce:null,noModule:ot,noValidate:ot,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ot,optimum:Ee,pattern:null,ping:Ft,placeholder:null,playsInline:ot,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ot,referrerPolicy:null,rel:Ft,required:ot,reversed:ot,rows:Ee,rowSpan:Ee,sandbox:Ft,scope:null,scoped:ot,seamless:ot,selected:ot,shadowRootClonable:ot,shadowRootDelegatesFocus:ot,shadowRootMode:null,shape:null,size:Ee,sizes:null,slot:null,span:Ee,spellCheck:hn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ee,step:null,style:null,tabIndex:Ee,target:null,title:null,translate:null,type:null,typeMustMatch:ot,useMap:null,value:hn,width:Ee,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ft,axis:null,background:null,bgColor:null,border:Ee,borderColor:null,bottomMargin:Ee,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ot,declare:ot,event:null,face:null,frame:null,frameBorder:null,hSpace:Ee,leftMargin:Ee,link:null,longDesc:null,lowSrc:null,marginHeight:Ee,marginWidth:Ee,noResize:ot,noHref:ot,noShade:ot,noWrap:ot,object:null,profile:null,prompt:null,rev:null,rightMargin:Ee,rules:null,scheme:null,scrolling:hn,standby:null,summary:null,text:null,topMargin:Ee,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ee,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ot,disableRemotePlayback:ot,prefix:null,property:null,results:Ee,security:null,unselectable:null},space:"html",transform:CN}),oW=bo({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Xn,accentHeight:Ee,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ee,amplitude:Ee,arabicForm:null,ascent:Ee,attributeName:null,attributeType:null,azimuth:Ee,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ee,by:null,calcMode:null,capHeight:Ee,className:Ft,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ee,diffuseConstant:Ee,direction:null,display:null,dur:null,divisor:Ee,dominantBaseline:null,download:ot,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ee,enableBackground:null,end:null,event:null,exponent:Ee,externalResourcesRequired:null,fill:null,fillOpacity:Ee,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ha,g2:Ha,glyphName:Ha,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ee,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ee,horizOriginX:Ee,horizOriginY:Ee,id:null,ideographic:Ee,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ee,k:Ee,k1:Ee,k2:Ee,k3:Ee,k4:Ee,kernelMatrix:Xn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ee,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ee,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ee,overlineThickness:Ee,paintOrder:null,panose1:null,path:null,pathLength:Ee,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ft,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ee,pointsAtY:Ee,pointsAtZ:Ee,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Xn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Xn,rev:Xn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Xn,requiredFeatures:Xn,requiredFonts:Xn,requiredFormats:Xn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ee,specularExponent:Ee,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ee,strikethroughThickness:Ee,string:null,stroke:null,strokeDashArray:Xn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ee,strokeOpacity:Ee,strokeWidth:null,style:null,surfaceScale:Ee,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Xn,tabIndex:Ee,tableValues:null,target:null,targetX:Ee,targetY:Ee,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Xn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ee,underlineThickness:Ee,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ee,values:null,vAlphabetic:Ee,vMathematical:Ee,vectorEffect:null,vHanging:Ee,vIdeographic:Ee,version:null,vertAdvY:Ee,vertOriginX:Ee,vertOriginY:Ee,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ee,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:NN}),SN=bo({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),EN=bo({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:CN}),TN=bo({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),lW={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},cW=/[A-Z]/g,O1=/-[a-z]/g,dW=/^data[-\w.:]+$/i;function uW(e,t){const n=Hp(t);let s=t,i=Gn;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&dW.test(t)){if(t.charAt(4)==="-"){const a=t.slice(5).replace(O1,mW);s="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=t.slice(4);if(!O1.test(a)){let o=a.replace(cW,hW);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=L0}return new i(s,t)}function hW(e){return"-"+e.toLowerCase()}function mW(e){return e.charAt(1).toUpperCase()}const fW=jN([kN,aW,SN,EN,TN],"html"),M0=jN([kN,oW,SN,EN,TN],"svg");function pW(e){return e.join(" ").trim()}var D0={},B1=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,gW=/\n/g,xW=/^\s*/,yW=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,bW=/^:\s*/,vW=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,wW=/^[;\s]*/,jW=/^\s+|\s+$/g,kW=`
`,_1="/",F1="*",Ii="",NW="comment",CW="declaration",SW=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,s=1;function i(x){var g=x.match(gW);g&&(n+=g.length);var b=x.lastIndexOf(kW);s=~b?x.length-b:s+x.length}function a(){var x={line:n,column:s};return function(g){return g.position=new o(x),d(),g}}function o(x){this.start=x,this.end={line:n,column:s},this.source=t.source}o.prototype.content=e;function l(x){var g=new Error(t.source+":"+n+":"+s+": "+x);if(g.reason=x,g.filename=t.source,g.line=n,g.column=s,g.source=e,!t.silent)throw g}function c(x){var g=x.exec(e);if(g){var b=g[0];return i(b),e=e.slice(b.length),g}}function d(){c(xW)}function u(x){var g;for(x=x||[];g=m();)g!==!1&&x.push(g);return x}function m(){var x=a();if(!(_1!=e.charAt(0)||F1!=e.charAt(1))){for(var g=2;Ii!=e.charAt(g)&&(F1!=e.charAt(g)||_1!=e.charAt(g+1));)++g;if(g+=2,Ii===e.charAt(g-1))return l("End of comment missing");var b=e.slice(2,g-2);return s+=2,i(b),e=e.slice(g),s+=2,x({type:NW,comment:b})}}function f(){var x=a(),g=c(yW);if(g){if(m(),!c(bW))return l("property missing ':'");var b=c(vW),w=x({type:CW,property:z1(g[0].replace(B1,Ii)),value:b?z1(b[0].replace(B1,Ii)):Ii});return c(wW),w}}function p(){var x=[];u(x);for(var g;g=f();)g!==!1&&(x.push(g),u(x));return x}return d(),p()};function z1(e){return e?e.replace(jW,Ii):Ii}var EW=Rd&&Rd.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(D0,"__esModule",{value:!0});D0.default=IW;var TW=EW(SW);function IW(e,t){var n=null;if(!e||typeof e!="string")return n;var s=(0,TW.default)(e),i=typeof t=="function";return s.forEach(function(a){if(a.type==="declaration"){var o=a.property,l=a.value;i?t(o,l,a):l&&(n=n||{},n[o]=l)}}),n}var _h={};Object.defineProperty(_h,"__esModule",{value:!0});_h.camelCase=void 0;var PW=/^--[a-zA-Z0-9_-]+$/,AW=/-([a-z])/g,RW=/^[^-]+$/,LW=/^-(webkit|moz|ms|o|khtml)-/,MW=/^-(ms)-/,DW=function(e){return!e||RW.test(e)||PW.test(e)},$W=function(e,t){return t.toUpperCase()},U1=function(e,t){return"".concat(t,"-")},OW=function(e,t){return t===void 0&&(t={}),DW(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(MW,U1):e=e.replace(LW,U1),e.replace(AW,$W))};_h.camelCase=OW;var BW=Rd&&Rd.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},_W=BW(D0),FW=_h;function Kp(e,t){var n={};return!e||typeof e!="string"||(0,_W.default)(e,function(s,i){s&&i&&(n[(0,FW.camelCase)(s,t)]=i)}),n}Kp.default=Kp;var zW=Kp;const UW=wu(zW),IN=PN("end"),$0=PN("start");function PN(e){return t;function t(n){const s=n&&n.position&&n.position[e]||{};if(typeof s.line=="number"&&s.line>0&&typeof s.column=="number"&&s.column>0)return{line:s.line,column:s.column,offset:typeof s.offset=="number"&&s.offset>-1?s.offset:void 0}}}function VW(e){const t=$0(e),n=IN(e);if(t&&n)return{start:t,end:n}}function dl(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?V1(e.position):"start"in e||"end"in e?V1(e):"line"in e||"column"in e?Gp(e):""}function Gp(e){return H1(e&&e.line)+":"+H1(e&&e.column)}function V1(e){return Gp(e&&e.start)+"-"+Gp(e&&e.end)}function H1(e){return e&&typeof e=="number"?e:1}class Mn extends Error{constructor(t,n,s){super(),typeof n=="string"&&(s=n,n=void 0);let i="",a={},o=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof t=="string"?i=t:!a.cause&&t&&(o=!0,i=t.message,a.cause=t),!a.ruleId&&!a.source&&typeof s=="string"){const c=s.indexOf(":");c===-1?a.ruleId=s:(a.source=s.slice(0,c),a.ruleId=s.slice(c+1))}if(!a.place&&a.ancestors&&a.ancestors){const c=a.ancestors[a.ancestors.length-1];c&&(a.place=c.position)}const l=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=l?l.line:void 0,this.name=dl(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=o&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual,this.expected,this.note,this.url}}Mn.prototype.file="";Mn.prototype.name="";Mn.prototype.reason="";Mn.prototype.message="";Mn.prototype.stack="";Mn.prototype.column=void 0;Mn.prototype.line=void 0;Mn.prototype.ancestors=void 0;Mn.prototype.cause=void 0;Mn.prototype.fatal=void 0;Mn.prototype.place=void 0;Mn.prototype.ruleId=void 0;Mn.prototype.source=void 0;const O0={}.hasOwnProperty,HW=new Map,WW=/[A-Z]/g,qW=new Set(["table","tbody","thead","tfoot","tr"]),KW=new Set(["td","th"]),AN="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function GW(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let s;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");s=nq(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");s=tq(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:s,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?M0:fW,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=RN(i,e,void 0);return a&&typeof a!="string"?a:i.create(e,i.Fragment,{children:a||void 0},void 0)}function RN(e,t,n){if(t.type==="element")return XW(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return YW(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return JW(e,t,n);if(t.type==="mdxjsEsm")return QW(e,t);if(t.type==="root")return ZW(e,t,n);if(t.type==="text")return eq(e,t)}function XW(e,t,n){const s=e.schema;let i=s;t.tagName.toLowerCase()==="svg"&&s.space==="html"&&(i=M0,e.schema=i),e.ancestors.push(t);const a=MN(e,t.tagName,!1),o=rq(e,t);let l=_0(e,t);return qW.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!sW(c):!0})),LN(e,o,a,t),B0(o,l),e.ancestors.pop(),e.schema=s,e.create(t,a,o,n)}function YW(e,t){if(t.data&&t.data.estree&&e.evaluater){const s=t.data.estree.body[0];return s.type,e.evaluater.evaluateExpression(s.expression)}Dl(e,t.position)}function QW(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Dl(e,t.position)}function JW(e,t,n){const s=e.schema;let i=s;t.name==="svg"&&s.space==="html"&&(i=M0,e.schema=i),e.ancestors.push(t);const a=t.name===null?e.Fragment:MN(e,t.name,!0),o=sq(e,t),l=_0(e,t);return LN(e,o,a,t),B0(o,l),e.ancestors.pop(),e.schema=s,e.create(t,a,o,n)}function ZW(e,t,n){const s={};return B0(s,_0(e,t)),e.create(t,e.Fragment,s,n)}function eq(e,t){return t.value}function LN(e,t,n,s){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=s)}function B0(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function tq(e,t,n){return s;function s(i,a,o,l){const d=Array.isArray(o.children)?n:t;return l?d(a,o,l):d(a,o)}}function nq(e,t){return n;function n(s,i,a,o){const l=Array.isArray(a.children),c=$0(s);return t(i,a,o,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function rq(e,t){const n={};let s,i;for(i in t.properties)if(i!=="children"&&O0.call(t.properties,i)){const a=iq(e,i,t.properties[i]);if(a){const[o,l]=a;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&KW.has(t.tagName)?s=l:n[o]=l}}if(s){const a=n.style||(n.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=s}return n}function sq(e,t){const n={};for(const s of t.attributes)if(s.type==="mdxJsxExpressionAttribute")if(s.data&&s.data.estree&&e.evaluater){const a=s.data.estree.body[0];a.type;const o=a.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else Dl(e,t.position);else{const i=s.name;let a;if(s.value&&typeof s.value=="object")if(s.value.data&&s.value.data.estree&&e.evaluater){const l=s.value.data.estree.body[0];l.type,a=e.evaluater.evaluateExpression(l.expression)}else Dl(e,t.position);else a=s.value===null?!0:s.value;n[i]=a}return n}function _0(e,t){const n=[];let s=-1;const i=e.passKeys?new Map:HW;for(;++s<t.children.length;){const a=t.children[s];let o;if(e.passKeys){const c=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(c){const d=i.get(c)||0;o=c+"-"+d,i.set(c,d+1)}}const l=RN(e,a,o);l!==void 0&&n.push(l)}return n}function iq(e,t,n){const s=uW(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=s.commaSeparated?ZH(n):pW(n)),s.property==="style"){let i=typeof n=="object"?n:aq(e,String(n));return e.stylePropertyNameCase==="css"&&(i=oq(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&s.space?lW[s.property]||s.property:s.attribute,n]}}function aq(e,t){try{return UW(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const s=n,i=new Mn("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=AN+"#cannot-parse-style-attribute",i}}function MN(e,t,n){let s;if(!n)s={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let a=-1,o;for(;++a<i.length;){const l=M1(i[a])?{type:"Identifier",name:i[a]}:{type:"Literal",value:i[a]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(a&&l.type==="Literal"),optional:!1}:l}s=o}else s=M1(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(s.type==="Literal"){const i=s.value;return O0.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(s);Dl(e)}function Dl(e,t){const n=new Mn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=AN+"#cannot-handle-mdx-estrees-without-createevaluater",n}function oq(e){const t={};let n;for(n in e)O0.call(e,n)&&(t[lq(n)]=e[n]);return t}function lq(e){let t=e.replace(WW,cq);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function cq(e){return"-"+e.toLowerCase()}const tf={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},dq={};function F0(e,t){const n=dq,s=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return DN(e,s,i)}function DN(e,t,n){if(uq(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return W1(e.children,t,n)}return Array.isArray(e)?W1(e,t,n):""}function W1(e,t,n){const s=[];let i=-1;for(;++i<e.length;)s[i]=DN(e[i],t,n);return s.join("")}function uq(e){return!!(e&&typeof e=="object")}const q1=document.createElement("i");function z0(e){const t="&"+e+";";q1.innerHTML=t;const n=q1.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function nr(e,t,n,s){const i=e.length;let a=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,s.length<1e4)o=Array.from(s),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);a<s.length;)o=s.slice(a,a+1e4),o.unshift(t,0),e.splice(...o),a+=1e4,t+=1e4}function xr(e,t){return e.length>0?(nr(e,e.length,0,t),e):t}const K1={}.hasOwnProperty;function $N(e){const t={};let n=-1;for(;++n<e.length;)hq(t,e[n]);return t}function hq(e,t){let n;for(n in t){const i=(K1.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let o;if(a)for(o in a){K1.call(i,o)||(i[o]=[]);const l=a[o];mq(i[o],Array.isArray(l)?l:l?[l]:[])}}}function mq(e,t){let n=-1;const s=[];for(;++n<t.length;)(t[n].add==="after"?e:s).push(t[n]);nr(e,0,0,s)}function ON(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function Ir(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Fn=ci(/[A-Za-z]/),Ln=ci(/[\dA-Za-z]/),fq=ci(/[#-'*+\--9=?A-Z^-~]/);function hu(e){return e!==null&&(e<32||e===127)}const Xp=ci(/\d/),pq=ci(/[\dA-Fa-f]/),gq=ci(/[!-/:-@[-`{-~]/);function We(e){return e!==null&&e<-2}function Ot(e){return e!==null&&(e<0||e===32)}function ut(e){return e===-2||e===-1||e===32}const Fh=ci(new RegExp("\\p{P}|\\p{S}","u")),ra=ci(/\s/);function ci(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function vo(e){const t=[];let n=-1,s=0,i=0;for(;++n<e.length;){const a=e.charCodeAt(n);let o="";if(a===37&&Ln(e.charCodeAt(n+1))&&Ln(e.charCodeAt(n+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){const l=e.charCodeAt(n+1);a<56320&&l>56319&&l<57344?(o=String.fromCharCode(a,l),i=1):o="�"}else o=String.fromCharCode(a);o&&(t.push(e.slice(s,n),encodeURIComponent(o)),s=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(s)}function ft(e,t,n,s){const i=s?s-1:Number.POSITIVE_INFINITY;let a=0;return o;function o(c){return ut(c)?(e.enter(n),l(c)):t(c)}function l(c){return ut(c)&&a++<i?(e.consume(c),l):(e.exit(n),t(c))}}const xq={tokenize:yq};function yq(e){const t=e.attempt(this.parser.constructs.contentInitial,s,i);let n;return t;function s(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),ft(e,t,"linePrefix")}function i(l){return e.enter("paragraph"),a(l)}function a(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return We(l)?(e.consume(l),e.exit("chunkText"),a):(e.consume(l),o)}}const bq={tokenize:vq},G1={tokenize:wq};function vq(e){const t=this,n=[];let s=0,i,a,o;return l;function l(v){if(s<n.length){const N=n[s];return t.containerState=N[1],e.attempt(N[0].continuation,c,d)(v)}return d(v)}function c(v){if(s++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&k();const N=t.events.length;let C=N,T;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){T=t.events[C][1].end;break}w(s);let E=N;for(;E<t.events.length;)t.events[E][1].end={...T},E++;return nr(t.events,C+1,0,t.events.slice(N)),t.events.length=E,d(v)}return l(v)}function d(v){if(s===n.length){if(!i)return f(v);if(i.currentConstruct&&i.currentConstruct.concrete)return x(v);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(G1,u,m)(v)}function u(v){return i&&k(),w(s),f(v)}function m(v){return t.parser.lazy[t.now().line]=s!==n.length,o=t.now().offset,x(v)}function f(v){return t.containerState={},e.attempt(G1,p,x)(v)}function p(v){return s++,n.push([t.currentConstruct,t.containerState]),f(v)}function x(v){if(v===null){i&&k(),w(0),e.consume(v);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:a}),g(v)}function g(v){if(v===null){b(e.exit("chunkFlow"),!0),w(0),e.consume(v);return}return We(v)?(e.consume(v),b(e.exit("chunkFlow")),s=0,t.interrupt=void 0,l):(e.consume(v),g)}function b(v,N){const C=t.sliceStream(v);if(N&&C.push(null),v.previous=a,a&&(a.next=v),a=v,i.defineSkip(v.start),i.write(C),t.parser.lazy[v.start.line]){let T=i.events.length;for(;T--;)if(i.events[T][1].start.offset<o&&(!i.events[T][1].end||i.events[T][1].end.offset>o))return;const E=t.events.length;let P=E,R,y;for(;P--;)if(t.events[P][0]==="exit"&&t.events[P][1].type==="chunkFlow"){if(R){y=t.events[P][1].end;break}R=!0}for(w(s),T=E;T<t.events.length;)t.events[T][1].end={...y},T++;nr(t.events,P+1,0,t.events.slice(E)),t.events.length=T}}function w(v){let N=n.length;for(;N-- >v;){const C=n[N];t.containerState=C[1],C[0].exit.call(t,e)}n.length=v}function k(){i.write([null]),a=void 0,i=void 0,t.containerState._closeFlow=void 0}}function wq(e,t,n){return ft(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ao(e){if(e===null||Ot(e)||ra(e))return 1;if(Fh(e))return 2}function zh(e,t,n){const s=[];let i=-1;for(;++i<e.length;){const a=e[i].resolveAll;a&&!s.includes(a)&&(t=a(t,n),s.push(a))}return t}const Yp={name:"attention",resolveAll:jq,tokenize:kq};function jq(e,t){let n=-1,s,i,a,o,l,c,d,u;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(s=n;s--;)if(e[s][0]==="exit"&&e[s][1].type==="attentionSequence"&&e[s][1]._open&&t.sliceSerialize(e[s][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[s][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[s][1].end.offset-e[s][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[s][1].end.offset-e[s][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const m={...e[s][1].end},f={...e[n][1].start};X1(m,-c),X1(f,c),o={type:c>1?"strongSequence":"emphasisSequence",start:m,end:{...e[s][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:f},a={type:c>1?"strongText":"emphasisText",start:{...e[s][1].end},end:{...e[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[s][1].end={...o.start},e[n][1].start={...l.end},d=[],e[s][1].end.offset-e[s][1].start.offset&&(d=xr(d,[["enter",e[s][1],t],["exit",e[s][1],t]])),d=xr(d,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",a,t]]),d=xr(d,zh(t.parser.constructs.insideSpan.null,e.slice(s+1,n),t)),d=xr(d,[["exit",a,t],["enter",l,t],["exit",l,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(u=2,d=xr(d,[["enter",e[n][1],t],["exit",e[n][1],t]])):u=0,nr(e,s-1,n-s+3,d),n=s+d.length-u-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function kq(e,t){const n=this.parser.constructs.attentionMarkers.null,s=this.previous,i=ao(s);let a;return o;function o(c){return a=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===a)return e.consume(c),l;const d=e.exit("attentionSequence"),u=ao(c),m=!u||u===2&&i||n.includes(c),f=!i||i===2&&u||n.includes(s);return d._open=!!(a===42?m:m&&(i||!f)),d._close=!!(a===42?f:f&&(u||!m)),t(c)}}function X1(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Nq={name:"autolink",tokenize:Cq};function Cq(e,t,n){let s=0;return i;function i(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(p){return Fn(p)?(e.consume(p),o):p===64?n(p):d(p)}function o(p){return p===43||p===45||p===46||Ln(p)?(s=1,l(p)):d(p)}function l(p){return p===58?(e.consume(p),s=0,c):(p===43||p===45||p===46||Ln(p))&&s++<32?(e.consume(p),l):(s=0,d(p))}function c(p){return p===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):p===null||p===32||p===60||hu(p)?n(p):(e.consume(p),c)}function d(p){return p===64?(e.consume(p),u):fq(p)?(e.consume(p),d):n(p)}function u(p){return Ln(p)?m(p):n(p)}function m(p){return p===46?(e.consume(p),s=0,u):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t):f(p)}function f(p){if((p===45||Ln(p))&&s++<63){const x=p===45?f:m;return e.consume(p),x}return n(p)}}const xc={partial:!0,tokenize:Sq};function Sq(e,t,n){return s;function s(a){return ut(a)?ft(e,i,"linePrefix")(a):i(a)}function i(a){return a===null||We(a)?t(a):n(a)}}const BN={continuation:{tokenize:Tq},exit:Iq,name:"blockQuote",tokenize:Eq};function Eq(e,t,n){const s=this;return i;function i(o){if(o===62){const l=s.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),a}return n(o)}function a(o){return ut(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function Tq(e,t,n){const s=this;return i;function i(o){return ut(o)?ft(e,a,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):a(o)}function a(o){return e.attempt(BN,t,n)(o)}}function Iq(e){e.exit("blockQuote")}const _N={name:"characterEscape",tokenize:Pq};function Pq(e,t,n){return s;function s(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),i}function i(a){return gq(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(a)}}const FN={name:"characterReference",tokenize:Aq};function Aq(e,t,n){const s=this;let i=0,a,o;return l;function l(m){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),c}function c(m){return m===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(m),e.exit("characterReferenceMarkerNumeric"),d):(e.enter("characterReferenceValue"),a=31,o=Ln,u(m))}function d(m){return m===88||m===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(m),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,o=pq,u):(e.enter("characterReferenceValue"),a=7,o=Xp,u(m))}function u(m){if(m===59&&i){const f=e.exit("characterReferenceValue");return o===Ln&&!z0(s.sliceSerialize(f))?n(m):(e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(m)&&i++<a?(e.consume(m),u):n(m)}}const Y1={partial:!0,tokenize:Lq},Q1={concrete:!0,name:"codeFenced",tokenize:Rq};function Rq(e,t,n){const s=this,i={partial:!0,tokenize:C};let a=0,o=0,l;return c;function c(T){return d(T)}function d(T){const E=s.events[s.events.length-1];return a=E&&E[1].type==="linePrefix"?E[2].sliceSerialize(E[1],!0).length:0,l=T,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(T)}function u(T){return T===l?(o++,e.consume(T),u):o<3?n(T):(e.exit("codeFencedFenceSequence"),ut(T)?ft(e,m,"whitespace")(T):m(T))}function m(T){return T===null||We(T)?(e.exit("codeFencedFence"),s.interrupt?t(T):e.check(Y1,g,N)(T)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(T))}function f(T){return T===null||We(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),m(T)):ut(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ft(e,p,"whitespace")(T)):T===96&&T===l?n(T):(e.consume(T),f)}function p(T){return T===null||We(T)?m(T):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),x(T))}function x(T){return T===null||We(T)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),m(T)):T===96&&T===l?n(T):(e.consume(T),x)}function g(T){return e.attempt(i,N,b)(T)}function b(T){return e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),w}function w(T){return a>0&&ut(T)?ft(e,k,"linePrefix",a+1)(T):k(T)}function k(T){return T===null||We(T)?e.check(Y1,g,N)(T):(e.enter("codeFlowValue"),v(T))}function v(T){return T===null||We(T)?(e.exit("codeFlowValue"),k(T)):(e.consume(T),v)}function N(T){return e.exit("codeFenced"),t(T)}function C(T,E,P){let R=0;return y;function y(M){return T.enter("lineEnding"),T.consume(M),T.exit("lineEnding"),O}function O(M){return T.enter("codeFencedFence"),ut(M)?ft(T,_,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):_(M)}function _(M){return M===l?(T.enter("codeFencedFenceSequence"),L(M)):P(M)}function L(M){return M===l?(R++,T.consume(M),L):R>=o?(T.exit("codeFencedFenceSequence"),ut(M)?ft(T,A,"whitespace")(M):A(M)):P(M)}function A(M){return M===null||We(M)?(T.exit("codeFencedFence"),E(M)):P(M)}}}function Lq(e,t,n){const s=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a)}function a(o){return s.parser.lazy[s.now().line]?n(o):t(o)}}const nf={name:"codeIndented",tokenize:Dq},Mq={partial:!0,tokenize:$q};function Dq(e,t,n){const s=this;return i;function i(d){return e.enter("codeIndented"),ft(e,a,"linePrefix",5)(d)}function a(d){const u=s.events[s.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(d):n(d)}function o(d){return d===null?c(d):We(d)?e.attempt(Mq,o,c)(d):(e.enter("codeFlowValue"),l(d))}function l(d){return d===null||We(d)?(e.exit("codeFlowValue"),o(d)):(e.consume(d),l)}function c(d){return e.exit("codeIndented"),t(d)}}function $q(e,t,n){const s=this;return i;function i(o){return s.parser.lazy[s.now().line]?n(o):We(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):ft(e,a,"linePrefix",5)(o)}function a(o){const l=s.events[s.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):We(o)?i(o):n(o)}}const Oq={name:"codeText",previous:_q,resolve:Bq,tokenize:Fq};function Bq(e){let t=e.length-4,n=3,s,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(s=n;++s<t;)if(e[s][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(s=n-1,t++;++s<=t;)i===void 0?s!==t&&e[s][1].type!=="lineEnding"&&(i=s):(s===t||e[s][1].type==="lineEnding")&&(e[i][1].type="codeTextData",s!==i+2&&(e[i][1].end=e[s-1][1].end,e.splice(i+2,s-i-2),t-=s-i-2,s=i+2),i=void 0);return e}function _q(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Fq(e,t,n){let s=0,i,a;return o;function o(m){return e.enter("codeText"),e.enter("codeTextSequence"),l(m)}function l(m){return m===96?(e.consume(m),s++,l):(e.exit("codeTextSequence"),c(m))}function c(m){return m===null?n(m):m===32?(e.enter("space"),e.consume(m),e.exit("space"),c):m===96?(a=e.enter("codeTextSequence"),i=0,u(m)):We(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),c):(e.enter("codeTextData"),d(m))}function d(m){return m===null||m===32||m===96||We(m)?(e.exit("codeTextData"),c(m)):(e.consume(m),d)}function u(m){return m===96?(e.consume(m),i++,u):i===s?(e.exit("codeTextSequence"),e.exit("codeText"),t(m)):(a.type="codeTextData",d(m))}}class zq{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const s=n??Number.POSITIVE_INFINITY;return s<this.left.length?this.left.slice(t,s):t>this.left.length?this.right.slice(this.right.length-s+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-s+this.left.length).reverse())}splice(t,n,s){const i=n||0;this.setCursor(Math.trunc(t));const a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return s&&Mo(this.left,s),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Mo(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Mo(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Mo(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Mo(this.left,n.reverse())}}}function Mo(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function zN(e){const t={};let n=-1,s,i,a,o,l,c,d;const u=new zq(e);for(;++n<u.length;){for(;n in t;)n=t[n];if(s=u.get(n),n&&s[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(c=s[1]._tokenizer.events,a=0,a<c.length&&c[a][1].type==="lineEndingBlank"&&(a+=2),a<c.length&&c[a][1].type==="content"))for(;++a<c.length&&c[a][1].type!=="content";)c[a][1].type==="chunkText"&&(c[a][1]._isInFirstContentOfListItem=!0,a++);if(s[0]==="enter")s[1].contentType&&(Object.assign(t,Uq(u,n)),n=t[n],d=!0);else if(s[1]._container){for(a=n,i=void 0;a--;)if(o=u.get(a),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=a);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(s[1].end={...u.get(i)[1].start},l=u.slice(i,n),l.unshift(s),u.splice(i,n-i+1,l))}}return nr(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!d}function Uq(e,t){const n=e.get(t)[1],s=e.get(t)[2];let i=t-1;const a=[];let o=n._tokenizer;o||(o=s.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],d={};let u,m,f=-1,p=n,x=0,g=0;const b=[g];for(;p;){for(;e.get(++i)[1]!==p;);a.push(i),p._tokenizer||(u=s.sliceStream(p),p.next||u.push(null),m&&o.defineSkip(p.start),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),m=p,p=p.next}for(p=n;++f<l.length;)l[f][0]==="exit"&&l[f-1][0]==="enter"&&l[f][1].type===l[f-1][1].type&&l[f][1].start.line!==l[f][1].end.line&&(g=f+1,b.push(g),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(o.events=[],p?(p._tokenizer=void 0,p.previous=void 0):b.pop(),f=b.length;f--;){const w=l.slice(b[f],b[f+1]),k=a.pop();c.push([k,k+w.length-1]),e.splice(k,2,w)}for(c.reverse(),f=-1;++f<c.length;)d[x+c[f][0]]=x+c[f][1],x+=c[f][1]-c[f][0]-1;return d}const Vq={resolve:Wq,tokenize:qq},Hq={partial:!0,tokenize:Kq};function Wq(e){return zN(e),e}function qq(e,t){let n;return s;function s(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?a(l):We(l)?e.check(Hq,o,a)(l):(e.consume(l),i)}function a(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Kq(e,t,n){const s=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ft(e,a,"linePrefix")}function a(o){if(o===null||We(o))return n(o);const l=s.events[s.events.length-1];return!s.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(s.parser.constructs.flow,n,t)(o)}}function UN(e,t,n,s,i,a,o,l,c){const d=c||Number.POSITIVE_INFINITY;let u=0;return m;function m(w){return w===60?(e.enter(s),e.enter(i),e.enter(a),e.consume(w),e.exit(a),f):w===null||w===32||w===41||hu(w)?n(w):(e.enter(s),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),g(w))}function f(w){return w===62?(e.enter(a),e.consume(w),e.exit(a),e.exit(i),e.exit(s),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),p(w))}function p(w){return w===62?(e.exit("chunkString"),e.exit(l),f(w)):w===null||w===60||We(w)?n(w):(e.consume(w),w===92?x:p)}function x(w){return w===60||w===62||w===92?(e.consume(w),p):p(w)}function g(w){return!u&&(w===null||w===41||Ot(w))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(s),t(w)):u<d&&w===40?(e.consume(w),u++,g):w===41?(e.consume(w),u--,g):w===null||w===32||w===40||hu(w)?n(w):(e.consume(w),w===92?b:g)}function b(w){return w===40||w===41||w===92?(e.consume(w),g):g(w)}}function VN(e,t,n,s,i,a){const o=this;let l=0,c;return d;function d(p){return e.enter(s),e.enter(i),e.consume(p),e.exit(i),e.enter(a),u}function u(p){return l>999||p===null||p===91||p===93&&!c||p===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(p):p===93?(e.exit(a),e.enter(i),e.consume(p),e.exit(i),e.exit(s),t):We(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),m(p))}function m(p){return p===null||p===91||p===93||We(p)||l++>999?(e.exit("chunkString"),u(p)):(e.consume(p),c||(c=!ut(p)),p===92?f:m)}function f(p){return p===91||p===92||p===93?(e.consume(p),l++,m):m(p)}}function HN(e,t,n,s,i,a){let o;return l;function l(f){return f===34||f===39||f===40?(e.enter(s),e.enter(i),e.consume(f),e.exit(i),o=f===40?41:f,c):n(f)}function c(f){return f===o?(e.enter(i),e.consume(f),e.exit(i),e.exit(s),t):(e.enter(a),d(f))}function d(f){return f===o?(e.exit(a),c(o)):f===null?n(f):We(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),ft(e,d,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(f))}function u(f){return f===o||f===null||We(f)?(e.exit("chunkString"),d(f)):(e.consume(f),f===92?m:u)}function m(f){return f===o||f===92?(e.consume(f),u):u(f)}}function ul(e,t){let n;return s;function s(i){return We(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,s):ut(i)?ft(e,s,n?"linePrefix":"lineSuffix")(i):t(i)}}const Gq={name:"definition",tokenize:Yq},Xq={partial:!0,tokenize:Qq};function Yq(e,t,n){const s=this;let i;return a;function a(p){return e.enter("definition"),o(p)}function o(p){return VN.call(s,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function l(p){return i=Ir(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)),p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),c):n(p)}function c(p){return Ot(p)?ul(e,d)(p):d(p)}function d(p){return UN(e,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function u(p){return e.attempt(Xq,m,m)(p)}function m(p){return ut(p)?ft(e,f,"whitespace")(p):f(p)}function f(p){return p===null||We(p)?(e.exit("definition"),s.parser.defined.push(i),t(p)):n(p)}}function Qq(e,t,n){return s;function s(l){return Ot(l)?ul(e,i)(l):n(l)}function i(l){return HN(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function a(l){return ut(l)?ft(e,o,"whitespace")(l):o(l)}function o(l){return l===null||We(l)?t(l):n(l)}}const Jq={name:"hardBreakEscape",tokenize:Zq};function Zq(e,t,n){return s;function s(a){return e.enter("hardBreakEscape"),e.consume(a),i}function i(a){return We(a)?(e.exit("hardBreakEscape"),t(a)):n(a)}}const eK={name:"headingAtx",resolve:tK,tokenize:nK};function tK(e,t){let n=e.length-2,s=3,i,a;return e[s][1].type==="whitespace"&&(s+=2),n-2>s&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(s===n-1||n-4>s&&e[n-2][1].type==="whitespace")&&(n-=s+1===n?2:4),n>s&&(i={type:"atxHeadingText",start:e[s][1].start,end:e[n][1].end},a={type:"chunkText",start:e[s][1].start,end:e[n][1].end,contentType:"text"},nr(e,s,n-s+1,[["enter",i,t],["enter",a,t],["exit",a,t],["exit",i,t]])),e}function nK(e,t,n){let s=0;return i;function i(u){return e.enter("atxHeading"),a(u)}function a(u){return e.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&s++<6?(e.consume(u),o):u===null||Ot(u)?(e.exit("atxHeadingSequence"),l(u)):n(u)}function l(u){return u===35?(e.enter("atxHeadingSequence"),c(u)):u===null||We(u)?(e.exit("atxHeading"),t(u)):ut(u)?ft(e,l,"whitespace")(u):(e.enter("atxHeadingText"),d(u))}function c(u){return u===35?(e.consume(u),c):(e.exit("atxHeadingSequence"),l(u))}function d(u){return u===null||u===35||Ot(u)?(e.exit("atxHeadingText"),l(u)):(e.consume(u),d)}}const rK=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],J1=["pre","script","style","textarea"],sK={concrete:!0,name:"htmlFlow",resolveTo:oK,tokenize:lK},iK={partial:!0,tokenize:dK},aK={partial:!0,tokenize:cK};function oK(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function lK(e,t,n){const s=this;let i,a,o,l,c;return d;function d($){return u($)}function u($){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume($),m}function m($){return $===33?(e.consume($),f):$===47?(e.consume($),a=!0,g):$===63?(e.consume($),i=3,s.interrupt?t:B):Fn($)?(e.consume($),o=String.fromCharCode($),b):n($)}function f($){return $===45?(e.consume($),i=2,p):$===91?(e.consume($),i=5,l=0,x):Fn($)?(e.consume($),i=4,s.interrupt?t:B):n($)}function p($){return $===45?(e.consume($),s.interrupt?t:B):n($)}function x($){const me="CDATA[";return $===me.charCodeAt(l++)?(e.consume($),l===me.length?s.interrupt?t:_:x):n($)}function g($){return Fn($)?(e.consume($),o=String.fromCharCode($),b):n($)}function b($){if($===null||$===47||$===62||Ot($)){const me=$===47,ke=o.toLowerCase();return!me&&!a&&J1.includes(ke)?(i=1,s.interrupt?t($):_($)):rK.includes(o.toLowerCase())?(i=6,me?(e.consume($),w):s.interrupt?t($):_($)):(i=7,s.interrupt&&!s.parser.lazy[s.now().line]?n($):a?k($):v($))}return $===45||Ln($)?(e.consume($),o+=String.fromCharCode($),b):n($)}function w($){return $===62?(e.consume($),s.interrupt?t:_):n($)}function k($){return ut($)?(e.consume($),k):y($)}function v($){return $===47?(e.consume($),y):$===58||$===95||Fn($)?(e.consume($),N):ut($)?(e.consume($),v):y($)}function N($){return $===45||$===46||$===58||$===95||Ln($)?(e.consume($),N):C($)}function C($){return $===61?(e.consume($),T):ut($)?(e.consume($),C):v($)}function T($){return $===null||$===60||$===61||$===62||$===96?n($):$===34||$===39?(e.consume($),c=$,E):ut($)?(e.consume($),T):P($)}function E($){return $===c?(e.consume($),c=null,R):$===null||We($)?n($):(e.consume($),E)}function P($){return $===null||$===34||$===39||$===47||$===60||$===61||$===62||$===96||Ot($)?C($):(e.consume($),P)}function R($){return $===47||$===62||ut($)?v($):n($)}function y($){return $===62?(e.consume($),O):n($)}function O($){return $===null||We($)?_($):ut($)?(e.consume($),O):n($)}function _($){return $===45&&i===2?(e.consume($),z):$===60&&i===1?(e.consume($),ie):$===62&&i===4?(e.consume($),H):$===63&&i===3?(e.consume($),B):$===93&&i===5?(e.consume($),te):We($)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(iK,K,L)($)):$===null||We($)?(e.exit("htmlFlowData"),L($)):(e.consume($),_)}function L($){return e.check(aK,A,K)($)}function A($){return e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),M}function M($){return $===null||We($)?L($):(e.enter("htmlFlowData"),_($))}function z($){return $===45?(e.consume($),B):_($)}function ie($){return $===47?(e.consume($),o="",X):_($)}function X($){if($===62){const me=o.toLowerCase();return J1.includes(me)?(e.consume($),H):_($)}return Fn($)&&o.length<8?(e.consume($),o+=String.fromCharCode($),X):_($)}function te($){return $===93?(e.consume($),B):_($)}function B($){return $===62?(e.consume($),H):$===45&&i===2?(e.consume($),B):_($)}function H($){return $===null||We($)?(e.exit("htmlFlowData"),K($)):(e.consume($),H)}function K($){return e.exit("htmlFlow"),t($)}}function cK(e,t,n){const s=this;return i;function i(o){return We(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):n(o)}function a(o){return s.parser.lazy[s.now().line]?n(o):t(o)}}function dK(e,t,n){return s;function s(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(xc,t,n)}}const uK={name:"htmlText",tokenize:hK};function hK(e,t,n){const s=this;let i,a,o;return l;function l(B){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(B),c}function c(B){return B===33?(e.consume(B),d):B===47?(e.consume(B),C):B===63?(e.consume(B),v):Fn(B)?(e.consume(B),P):n(B)}function d(B){return B===45?(e.consume(B),u):B===91?(e.consume(B),a=0,x):Fn(B)?(e.consume(B),k):n(B)}function u(B){return B===45?(e.consume(B),p):n(B)}function m(B){return B===null?n(B):B===45?(e.consume(B),f):We(B)?(o=m,ie(B)):(e.consume(B),m)}function f(B){return B===45?(e.consume(B),p):m(B)}function p(B){return B===62?z(B):B===45?f(B):m(B)}function x(B){const H="CDATA[";return B===H.charCodeAt(a++)?(e.consume(B),a===H.length?g:x):n(B)}function g(B){return B===null?n(B):B===93?(e.consume(B),b):We(B)?(o=g,ie(B)):(e.consume(B),g)}function b(B){return B===93?(e.consume(B),w):g(B)}function w(B){return B===62?z(B):B===93?(e.consume(B),w):g(B)}function k(B){return B===null||B===62?z(B):We(B)?(o=k,ie(B)):(e.consume(B),k)}function v(B){return B===null?n(B):B===63?(e.consume(B),N):We(B)?(o=v,ie(B)):(e.consume(B),v)}function N(B){return B===62?z(B):v(B)}function C(B){return Fn(B)?(e.consume(B),T):n(B)}function T(B){return B===45||Ln(B)?(e.consume(B),T):E(B)}function E(B){return We(B)?(o=E,ie(B)):ut(B)?(e.consume(B),E):z(B)}function P(B){return B===45||Ln(B)?(e.consume(B),P):B===47||B===62||Ot(B)?R(B):n(B)}function R(B){return B===47?(e.consume(B),z):B===58||B===95||Fn(B)?(e.consume(B),y):We(B)?(o=R,ie(B)):ut(B)?(e.consume(B),R):z(B)}function y(B){return B===45||B===46||B===58||B===95||Ln(B)?(e.consume(B),y):O(B)}function O(B){return B===61?(e.consume(B),_):We(B)?(o=O,ie(B)):ut(B)?(e.consume(B),O):R(B)}function _(B){return B===null||B===60||B===61||B===62||B===96?n(B):B===34||B===39?(e.consume(B),i=B,L):We(B)?(o=_,ie(B)):ut(B)?(e.consume(B),_):(e.consume(B),A)}function L(B){return B===i?(e.consume(B),i=void 0,M):B===null?n(B):We(B)?(o=L,ie(B)):(e.consume(B),L)}function A(B){return B===null||B===34||B===39||B===60||B===61||B===96?n(B):B===47||B===62||Ot(B)?R(B):(e.consume(B),A)}function M(B){return B===47||B===62||Ot(B)?R(B):n(B)}function z(B){return B===62?(e.consume(B),e.exit("htmlTextData"),e.exit("htmlText"),t):n(B)}function ie(B){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(B),e.exit("lineEnding"),X}function X(B){return ut(B)?ft(e,te,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):te(B)}function te(B){return e.enter("htmlTextData"),o(B)}}const U0={name:"labelEnd",resolveAll:gK,resolveTo:xK,tokenize:yK},mK={tokenize:bK},fK={tokenize:vK},pK={tokenize:wK};function gK(e){let t=-1;const n=[];for(;++t<e.length;){const s=e[t][1];if(n.push(e[t]),s.type==="labelImage"||s.type==="labelLink"||s.type==="labelEnd"){const i=s.type==="labelImage"?4:2;s.type="data",t+=i}}return e.length!==n.length&&nr(e,0,e.length,n),e}function xK(e,t){let n=e.length,s=0,i,a,o,l;for(;n--;)if(i=e[n][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=n,i.type!=="labelLink")){s=2;break}}else i.type==="labelEnd"&&(o=n);const c={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},d={type:"label",start:{...e[a][1].start},end:{...e[o][1].end}},u={type:"labelText",start:{...e[a+s+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",c,t],["enter",d,t]],l=xr(l,e.slice(a+1,a+s+3)),l=xr(l,[["enter",u,t]]),l=xr(l,zh(t.parser.constructs.insideSpan.null,e.slice(a+s+4,o-3),t)),l=xr(l,[["exit",u,t],e[o-2],e[o-1],["exit",d,t]]),l=xr(l,e.slice(o+1)),l=xr(l,[["exit",c,t]]),nr(e,a,e.length,l),e}function yK(e,t,n){const s=this;let i=s.events.length,a,o;for(;i--;)if((s.events[i][1].type==="labelImage"||s.events[i][1].type==="labelLink")&&!s.events[i][1]._balanced){a=s.events[i][1];break}return l;function l(f){return a?a._inactive?m(f):(o=s.parser.defined.includes(Ir(s.sliceSerialize({start:a.end,end:s.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelEnd"),c):n(f)}function c(f){return f===40?e.attempt(mK,u,o?u:m)(f):f===91?e.attempt(fK,u,o?d:m)(f):o?u(f):m(f)}function d(f){return e.attempt(pK,u,m)(f)}function u(f){return t(f)}function m(f){return a._balanced=!0,n(f)}}function bK(e,t,n){return s;function s(m){return e.enter("resource"),e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),i}function i(m){return Ot(m)?ul(e,a)(m):a(m)}function a(m){return m===41?u(m):UN(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function o(m){return Ot(m)?ul(e,c)(m):u(m)}function l(m){return n(m)}function c(m){return m===34||m===39||m===40?HN(e,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):u(m)}function d(m){return Ot(m)?ul(e,u)(m):u(m)}function u(m){return m===41?(e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),e.exit("resource"),t):n(m)}}function vK(e,t,n){const s=this;return i;function i(l){return VN.call(s,e,a,o,"reference","referenceMarker","referenceString")(l)}function a(l){return s.parser.defined.includes(Ir(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function o(l){return n(l)}}function wK(e,t,n){return s;function s(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),i}function i(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):n(a)}}const jK={name:"labelStartImage",resolveAll:U0.resolveAll,tokenize:kK};function kK(e,t,n){const s=this;return i;function i(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),a}function a(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in s.parser.constructs?n(l):t(l)}}const NK={name:"labelStartLink",resolveAll:U0.resolveAll,tokenize:CK};function CK(e,t,n){const s=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),a}function a(o){return o===94&&"_hiddenFootnoteSupport"in s.parser.constructs?n(o):t(o)}}const rf={name:"lineEnding",tokenize:SK};function SK(e,t){return n;function n(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),ft(e,t,"linePrefix")}}const Td={name:"thematicBreak",tokenize:EK};function EK(e,t,n){let s=0,i;return a;function a(d){return e.enter("thematicBreak"),o(d)}function o(d){return i=d,l(d)}function l(d){return d===i?(e.enter("thematicBreakSequence"),c(d)):s>=3&&(d===null||We(d))?(e.exit("thematicBreak"),t(d)):n(d)}function c(d){return d===i?(e.consume(d),s++,c):(e.exit("thematicBreakSequence"),ut(d)?ft(e,l,"whitespace")(d):l(d))}}const Un={continuation:{tokenize:AK},exit:LK,name:"list",tokenize:PK},TK={partial:!0,tokenize:MK},IK={partial:!0,tokenize:RK};function PK(e,t,n){const s=this,i=s.events[s.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return l;function l(p){const x=s.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!s.containerState.marker||p===s.containerState.marker:Xp(p)){if(s.containerState.type||(s.containerState.type=x,e.enter(x,{_container:!0})),x==="listUnordered")return e.enter("listItemPrefix"),p===42||p===45?e.check(Td,n,d)(p):d(p);if(!s.interrupt||p===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(p)}return n(p)}function c(p){return Xp(p)&&++o<10?(e.consume(p),c):(!s.interrupt||o<2)&&(s.containerState.marker?p===s.containerState.marker:p===41||p===46)?(e.exit("listItemValue"),d(p)):n(p)}function d(p){return e.enter("listItemMarker"),e.consume(p),e.exit("listItemMarker"),s.containerState.marker=s.containerState.marker||p,e.check(xc,s.interrupt?n:u,e.attempt(TK,f,m))}function u(p){return s.containerState.initialBlankLine=!0,a++,f(p)}function m(p){return ut(p)?(e.enter("listItemPrefixWhitespace"),e.consume(p),e.exit("listItemPrefixWhitespace"),f):n(p)}function f(p){return s.containerState.size=a+s.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(p)}}function AK(e,t,n){const s=this;return s.containerState._closeFlow=void 0,e.check(xc,i,a);function i(l){return s.containerState.furtherBlankLines=s.containerState.furtherBlankLines||s.containerState.initialBlankLine,ft(e,t,"listItemIndent",s.containerState.size+1)(l)}function a(l){return s.containerState.furtherBlankLines||!ut(l)?(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,o(l)):(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,e.attempt(IK,t,o)(l))}function o(l){return s.containerState._closeFlow=!0,s.interrupt=void 0,ft(e,e.attempt(Un,t,n),"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function RK(e,t,n){const s=this;return ft(e,i,"listItemIndent",s.containerState.size+1);function i(a){const o=s.events[s.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===s.containerState.size?t(a):n(a)}}function LK(e){e.exit(this.containerState.type)}function MK(e,t,n){const s=this;return ft(e,i,"listItemPrefixWhitespace",s.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(a){const o=s.events[s.events.length-1];return!ut(a)&&o&&o[1].type==="listItemPrefixWhitespace"?t(a):n(a)}}const Z1={name:"setextUnderline",resolveTo:DK,tokenize:$K};function DK(e,t){let n=e.length,s,i,a;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){s=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!a&&e[n][1].type==="definition"&&(a=n);const o={type:"setextHeading",start:{...e[s][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",a?(e.splice(i,0,["enter",o,t]),e.splice(a+1,0,["exit",e[s][1],t]),e[s][1].end={...e[a][1].end}):e[s][1]=o,e.push(["exit",o,t]),e}function $K(e,t,n){const s=this;let i;return a;function a(d){let u=s.events.length,m;for(;u--;)if(s.events[u][1].type!=="lineEnding"&&s.events[u][1].type!=="linePrefix"&&s.events[u][1].type!=="content"){m=s.events[u][1].type==="paragraph";break}return!s.parser.lazy[s.now().line]&&(s.interrupt||m)?(e.enter("setextHeadingLine"),i=d,o(d)):n(d)}function o(d){return e.enter("setextHeadingLineSequence"),l(d)}function l(d){return d===i?(e.consume(d),l):(e.exit("setextHeadingLineSequence"),ut(d)?ft(e,c,"lineSuffix")(d):c(d))}function c(d){return d===null||We(d)?(e.exit("setextHeadingLine"),t(d)):n(d)}}const OK={tokenize:BK};function BK(e){const t=this,n=e.attempt(xc,s,e.attempt(this.parser.constructs.flowInitial,i,ft(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Vq,i)),"linePrefix")));return n;function s(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const _K={resolveAll:qN()},FK=WN("string"),zK=WN("text");function WN(e){return{resolveAll:qN(e==="text"?UK:void 0),tokenize:t};function t(n){const s=this,i=this.parser.constructs[e],a=n.attempt(i,o,l);return o;function o(u){return d(u)?a(u):l(u)}function l(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),c}function c(u){return d(u)?(n.exit("data"),a(u)):(n.consume(u),c)}function d(u){if(u===null)return!0;const m=i[u];let f=-1;if(m)for(;++f<m.length;){const p=m[f];if(!p.previous||p.previous.call(s,s.previous))return!0}return!1}}}function qN(e){return t;function t(n,s){let i=-1,a;for(;++i<=n.length;)a===void 0?n[i]&&n[i][1].type==="data"&&(a=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==a+2&&(n[a][1].end=n[i-1][1].end,n.splice(a+2,i-a-2),i=a+2),a=void 0);return e?e(n,s):n}}function UK(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const s=e[n-1][1],i=t.sliceStream(s);let a=i.length,o=-1,l=0,c;for(;a--;){const d=i[a];if(typeof d=="string"){for(o=d.length;d.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(d===-2)c=!0,l++;else if(d!==-1){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const d={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:s.start._bufferIndex+o,_index:s.start._index+a,line:s.end.line,column:s.end.column-l,offset:s.end.offset-l},end:{...s.end}};s.end={...d.start},s.start.offset===s.end.offset?Object.assign(s,d):(e.splice(n,0,["enter",d,t],["exit",d,t]),n+=2)}n++}return e}const VK={42:Un,43:Un,45:Un,48:Un,49:Un,50:Un,51:Un,52:Un,53:Un,54:Un,55:Un,56:Un,57:Un,62:BN},HK={91:Gq},WK={[-2]:nf,[-1]:nf,32:nf},qK={35:eK,42:Td,45:[Z1,Td],60:sK,61:Z1,95:Td,96:Q1,126:Q1},KK={38:FN,92:_N},GK={[-5]:rf,[-4]:rf,[-3]:rf,33:jK,38:FN,42:Yp,60:[Nq,uK],91:NK,92:[Jq,_N],93:U0,95:Yp,96:Oq},XK={null:[Yp,_K]},YK={null:[42,95]},QK={null:[]},JK=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:YK,contentInitial:HK,disable:QK,document:VK,flow:qK,flowInitial:WK,insideSpan:XK,string:KK,text:GK},Symbol.toStringTag,{value:"Module"}));function ZK(e,t,n){let s={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},a=[];let o=[],l=[];const c={attempt:E(C),check:E(T),consume:k,enter:v,exit:N,interrupt:E(T,{interrupt:!0})},d={code:null,containerState:{},defineSkip:g,events:[],now:x,parser:e,previous:null,sliceSerialize:f,sliceStream:p,write:m};let u=t.tokenize.call(d,c);return t.resolveAll&&a.push(t),d;function m(O){return o=xr(o,O),b(),o[o.length-1]!==null?[]:(P(t,0),d.events=zh(a,d.events,d),d.events)}function f(O,_){return tG(p(O),_)}function p(O){return eG(o,O)}function x(){const{_bufferIndex:O,_index:_,line:L,column:A,offset:M}=s;return{_bufferIndex:O,_index:_,line:L,column:A,offset:M}}function g(O){i[O.line]=O.column,y()}function b(){let O;for(;s._index<o.length;){const _=o[s._index];if(typeof _=="string")for(O=s._index,s._bufferIndex<0&&(s._bufferIndex=0);s._index===O&&s._bufferIndex<_.length;)w(_.charCodeAt(s._bufferIndex));else w(_)}}function w(O){u=u(O)}function k(O){We(O)?(s.line++,s.column=1,s.offset+=O===-3?2:1,y()):O!==-1&&(s.column++,s.offset++),s._bufferIndex<0?s._index++:(s._bufferIndex++,s._bufferIndex===o[s._index].length&&(s._bufferIndex=-1,s._index++)),d.previous=O}function v(O,_){const L=_||{};return L.type=O,L.start=x(),d.events.push(["enter",L,d]),l.push(L),L}function N(O){const _=l.pop();return _.end=x(),d.events.push(["exit",_,d]),_}function C(O,_){P(O,_.from)}function T(O,_){_.restore()}function E(O,_){return L;function L(A,M,z){let ie,X,te,B;return Array.isArray(A)?K(A):"tokenize"in A?K([A]):H(A);function H(ye){return se;function se(G){const W=G!==null&&ye[G],Z=G!==null&&ye.null,Y=[...Array.isArray(W)?W:W?[W]:[],...Array.isArray(Z)?Z:Z?[Z]:[]];return K(Y)(G)}}function K(ye){return ie=ye,X=0,ye.length===0?z:$(ye[X])}function $(ye){return se;function se(G){return B=R(),te=ye,ye.partial||(d.currentConstruct=ye),ye.name&&d.parser.constructs.disable.null.includes(ye.name)?ke():ye.tokenize.call(_?Object.assign(Object.create(d),_):d,c,me,ke)(G)}}function me(ye){return O(te,B),M}function ke(ye){return B.restore(),++X<ie.length?$(ie[X]):z}}}function P(O,_){O.resolveAll&&!a.includes(O)&&a.push(O),O.resolve&&nr(d.events,_,d.events.length-_,O.resolve(d.events.slice(_),d)),O.resolveTo&&(d.events=O.resolveTo(d.events,d))}function R(){const O=x(),_=d.previous,L=d.currentConstruct,A=d.events.length,M=Array.from(l);return{from:A,restore:z};function z(){s=O,d.previous=_,d.currentConstruct=L,d.events.length=A,l=M,y()}}function y(){s.line in i&&s.column<2&&(s.column=i[s.line],s.offset+=i[s.line]-1)}}function eG(e,t){const n=t.start._index,s=t.start._bufferIndex,i=t.end._index,a=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(s,a)];else{if(o=e.slice(n,i),s>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(s):o.shift()}a>0&&o.push(e[i].slice(0,a))}return o}function tG(e,t){let n=-1;const s=[];let i;for(;++n<e.length;){const a=e[n];let o;if(typeof a=="string")o=a;else switch(a){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(a)}i=a===-2,s.push(o)}return s.join("")}function nG(e){const s={constructs:$N([JK,...(e||{}).extensions||[]]),content:i(xq),defined:[],document:i(bq),flow:i(OK),lazy:{},string:i(FK),text:i(zK)};return s;function i(a){return o;function o(l){return ZK(s,a,l)}}}function rG(e){for(;!zN(e););return e}const ev=/[\0\t\n\r]/g;function sG(){let e=1,t="",n=!0,s;return i;function i(a,o,l){const c=[];let d,u,m,f,p;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(o||void 0).decode(a)),m=0,t="",n&&(a.charCodeAt(0)===65279&&m++,n=void 0);m<a.length;){if(ev.lastIndex=m,d=ev.exec(a),f=d&&d.index!==void 0?d.index:a.length,p=a.charCodeAt(f),!d){t=a.slice(m);break}if(p===10&&m===f&&s)c.push(-3),s=void 0;else switch(s&&(c.push(-5),s=void 0),m<f&&(c.push(a.slice(m,f)),e+=f-m),p){case 0:{c.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,c.push(-2);e++<u;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:s=!0,e=1}m=f+1}return l&&(s&&c.push(-5),t&&c.push(t),c.push(null)),c}}const iG=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function aG(e){return e.replace(iG,oG)}function oG(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),a=i===120||i===88;return ON(n.slice(a?2:1),a?16:10)}return z0(n)||e}const KN={}.hasOwnProperty;function lG(e,t,n){return typeof t!="string"&&(n=t,t=void 0),cG(n)(rG(nG(n).document().write(sG()(e,t,!0))))}function cG(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(lt),autolinkProtocol:R,autolinkEmail:R,atxHeading:a(Re),blockQuote:a(Z),characterEscape:R,characterReference:R,codeFenced:a(Y),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:a(Y,o),codeText:a(ee,o),codeTextData:R,data:R,codeFlowValue:R,definition:a(ae),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:a(de),hardBreakEscape:a(Be),hardBreakTrailing:a(Be),htmlFlow:a(Ge,o),htmlFlowData:R,htmlText:a(Ge,o),htmlTextData:R,image:a(et),label:o,link:a(lt),listItem:a(He),listItemValue:f,listOrdered:a(Xe,m),listUnordered:a(Xe),paragraph:a(Pe),reference:$,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:a(Re),strong:a(vt),thematicBreak:a(ce)},exit:{atxHeading:c(),atxHeadingSequence:C,autolink:c(),autolinkEmail:W,autolinkProtocol:G,blockQuote:c(),characterEscapeValue:y,characterReferenceMarkerHexadecimal:ke,characterReferenceMarkerNumeric:ke,characterReferenceValue:ye,characterReference:se,codeFenced:c(b),codeFencedFence:g,codeFencedFenceInfo:p,codeFencedFenceMeta:x,codeFlowValue:y,codeIndented:c(w),codeText:c(M),codeTextData:y,data:y,definition:c(),definitionDestinationString:N,definitionLabelString:k,definitionTitleString:v,emphasis:c(),hardBreakEscape:c(_),hardBreakTrailing:c(_),htmlFlow:c(L),htmlFlowData:y,htmlText:c(A),htmlTextData:y,image:c(ie),label:te,labelText:X,lineEnding:O,link:c(z),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:me,resourceDestinationString:B,resourceTitleString:H,resource:K,setextHeading:c(P),setextHeadingLineSequence:E,setextHeadingText:T,strong:c(),thematicBreak:c()}};GN(t,(e||{}).mdastExtensions||[]);const n={};return s;function s(V){let I={type:"root",children:[]};const j={stack:[I],tokenStack:[],config:t,enter:l,exit:d,buffer:o,resume:u,data:n},S=[];let F=-1;for(;++F<V.length;)if(V[F][1].type==="listOrdered"||V[F][1].type==="listUnordered")if(V[F][0]==="enter")S.push(F);else{const U=S.pop();F=i(V,U,F)}for(F=-1;++F<V.length;){const U=t[V[F][0]];KN.call(U,V[F][1].type)&&U[V[F][1].type].call(Object.assign({sliceSerialize:V[F][2].sliceSerialize},j),V[F][1])}if(j.tokenStack.length>0){const U=j.tokenStack[j.tokenStack.length-1];(U[1]||tv).call(j,void 0,U[0])}for(I.position={start:As(V.length>0?V[0][1].start:{line:1,column:1,offset:0}),end:As(V.length>0?V[V.length-2][1].end:{line:1,column:1,offset:0})},F=-1;++F<t.transforms.length;)I=t.transforms[F](I)||I;return I}function i(V,I,j){let S=I-1,F=-1,U=!1,q,Q,be,ge;for(;++S<=j;){const oe=V[S];switch(oe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{oe[0]==="enter"?F++:F--,ge=void 0;break}case"lineEndingBlank":{oe[0]==="enter"&&(q&&!ge&&!F&&!be&&(be=S),ge=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ge=void 0}if(!F&&oe[0]==="enter"&&oe[1].type==="listItemPrefix"||F===-1&&oe[0]==="exit"&&(oe[1].type==="listUnordered"||oe[1].type==="listOrdered")){if(q){let he=S;for(Q=void 0;he--;){const fe=V[he];if(fe[1].type==="lineEnding"||fe[1].type==="lineEndingBlank"){if(fe[0]==="exit")continue;Q&&(V[Q][1].type="lineEndingBlank",U=!0),fe[1].type="lineEnding",Q=he}else if(!(fe[1].type==="linePrefix"||fe[1].type==="blockQuotePrefix"||fe[1].type==="blockQuotePrefixWhitespace"||fe[1].type==="blockQuoteMarker"||fe[1].type==="listItemIndent"))break}be&&(!Q||be<Q)&&(q._spread=!0),q.end=Object.assign({},Q?V[Q][1].start:oe[1].end),V.splice(Q||S,0,["exit",q,oe[2]]),S++,j++}if(oe[1].type==="listItemPrefix"){const he={type:"listItem",_spread:!1,start:Object.assign({},oe[1].start),end:void 0};q=he,V.splice(S,0,["enter",he,oe[2]]),S++,j++,be=void 0,ge=!0}}}return V[I][1]._spread=U,j}function a(V,I){return j;function j(S){l.call(this,V(S),S),I&&I.call(this,S)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(V,I,j){this.stack[this.stack.length-1].children.push(V),this.stack.push(V),this.tokenStack.push([I,j||void 0]),V.position={start:As(I.start),end:void 0}}function c(V){return I;function I(j){V&&V.call(this,j),d.call(this,j)}}function d(V,I){const j=this.stack.pop(),S=this.tokenStack.pop();if(S)S[0].type!==V.type&&(I?I.call(this,V,S[0]):(S[1]||tv).call(this,V,S[0]));else throw new Error("Cannot close `"+V.type+"` ("+dl({start:V.start,end:V.end})+"): it’s not open");j.position.end=As(V.end)}function u(){return F0(this.stack.pop())}function m(){this.data.expectingFirstListItemValue=!0}function f(V){if(this.data.expectingFirstListItemValue){const I=this.stack[this.stack.length-2];I.start=Number.parseInt(this.sliceSerialize(V),10),this.data.expectingFirstListItemValue=void 0}}function p(){const V=this.resume(),I=this.stack[this.stack.length-1];I.lang=V}function x(){const V=this.resume(),I=this.stack[this.stack.length-1];I.meta=V}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function b(){const V=this.resume(),I=this.stack[this.stack.length-1];I.value=V.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function w(){const V=this.resume(),I=this.stack[this.stack.length-1];I.value=V.replace(/(\r?\n|\r)$/g,"")}function k(V){const I=this.resume(),j=this.stack[this.stack.length-1];j.label=I,j.identifier=Ir(this.sliceSerialize(V)).toLowerCase()}function v(){const V=this.resume(),I=this.stack[this.stack.length-1];I.title=V}function N(){const V=this.resume(),I=this.stack[this.stack.length-1];I.url=V}function C(V){const I=this.stack[this.stack.length-1];if(!I.depth){const j=this.sliceSerialize(V).length;I.depth=j}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function E(V){const I=this.stack[this.stack.length-1];I.depth=this.sliceSerialize(V).codePointAt(0)===61?1:2}function P(){this.data.setextHeadingSlurpLineEnding=void 0}function R(V){const j=this.stack[this.stack.length-1].children;let S=j[j.length-1];(!S||S.type!=="text")&&(S=Ye(),S.position={start:As(V.start),end:void 0},j.push(S)),this.stack.push(S)}function y(V){const I=this.stack.pop();I.value+=this.sliceSerialize(V),I.position.end=As(V.end)}function O(V){const I=this.stack[this.stack.length-1];if(this.data.atHardBreak){const j=I.children[I.children.length-1];j.position.end=As(V.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(I.type)&&(R.call(this,V),y.call(this,V))}function _(){this.data.atHardBreak=!0}function L(){const V=this.resume(),I=this.stack[this.stack.length-1];I.value=V}function A(){const V=this.resume(),I=this.stack[this.stack.length-1];I.value=V}function M(){const V=this.resume(),I=this.stack[this.stack.length-1];I.value=V}function z(){const V=this.stack[this.stack.length-1];if(this.data.inReference){const I=this.data.referenceType||"shortcut";V.type+="Reference",V.referenceType=I,delete V.url,delete V.title}else delete V.identifier,delete V.label;this.data.referenceType=void 0}function ie(){const V=this.stack[this.stack.length-1];if(this.data.inReference){const I=this.data.referenceType||"shortcut";V.type+="Reference",V.referenceType=I,delete V.url,delete V.title}else delete V.identifier,delete V.label;this.data.referenceType=void 0}function X(V){const I=this.sliceSerialize(V),j=this.stack[this.stack.length-2];j.label=aG(I),j.identifier=Ir(I).toLowerCase()}function te(){const V=this.stack[this.stack.length-1],I=this.resume(),j=this.stack[this.stack.length-1];if(this.data.inReference=!0,j.type==="link"){const S=V.children;j.children=S}else j.alt=I}function B(){const V=this.resume(),I=this.stack[this.stack.length-1];I.url=V}function H(){const V=this.resume(),I=this.stack[this.stack.length-1];I.title=V}function K(){this.data.inReference=void 0}function $(){this.data.referenceType="collapsed"}function me(V){const I=this.resume(),j=this.stack[this.stack.length-1];j.label=I,j.identifier=Ir(this.sliceSerialize(V)).toLowerCase(),this.data.referenceType="full"}function ke(V){this.data.characterReferenceType=V.type}function ye(V){const I=this.sliceSerialize(V),j=this.data.characterReferenceType;let S;j?(S=ON(I,j==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):S=z0(I);const F=this.stack[this.stack.length-1];F.value+=S}function se(V){const I=this.stack.pop();I.position.end=As(V.end)}function G(V){y.call(this,V);const I=this.stack[this.stack.length-1];I.url=this.sliceSerialize(V)}function W(V){y.call(this,V);const I=this.stack[this.stack.length-1];I.url="mailto:"+this.sliceSerialize(V)}function Z(){return{type:"blockquote",children:[]}}function Y(){return{type:"code",lang:null,meta:null,value:""}}function ee(){return{type:"inlineCode",value:""}}function ae(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function de(){return{type:"emphasis",children:[]}}function Re(){return{type:"heading",depth:0,children:[]}}function Be(){return{type:"break"}}function Ge(){return{type:"html",value:""}}function et(){return{type:"image",title:null,url:"",alt:null}}function lt(){return{type:"link",title:null,url:"",children:[]}}function Xe(V){return{type:"list",ordered:V.type==="listOrdered",start:null,spread:V._spread,children:[]}}function He(V){return{type:"listItem",spread:V._spread,checked:null,children:[]}}function Pe(){return{type:"paragraph",children:[]}}function vt(){return{type:"strong",children:[]}}function Ye(){return{type:"text",value:""}}function ce(){return{type:"thematicBreak"}}}function As(e){return{line:e.line,column:e.column,offset:e.offset}}function GN(e,t){let n=-1;for(;++n<t.length;){const s=t[n];Array.isArray(s)?GN(e,s):dG(e,s)}}function dG(e,t){let n;for(n in t)if(KN.call(t,n))switch(n){case"canContainEols":{const s=t[n];s&&e[n].push(...s);break}case"transforms":{const s=t[n];s&&e[n].push(...s);break}case"enter":case"exit":{const s=t[n];s&&Object.assign(e[n],s);break}}}function tv(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+dl({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+dl({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+dl({start:t.start,end:t.end})+") is still open")}function uG(e){const t=this;t.parser=n;function n(s){return lG(s,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function hG(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function mG(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function fG(e,t){const n=t.value?t.value+`
`:"",s={};t.lang&&(s.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:s,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function pG(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function gG(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function xG(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",s=String(t.identifier).toUpperCase(),i=vo(s.toLowerCase()),a=e.footnoteOrder.indexOf(s);let o,l=e.footnoteCounts.get(s);l===void 0?(l=0,e.footnoteOrder.push(s),o=e.footnoteOrder.length):o=a+1,l+=1,e.footnoteCounts.set(s,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,c);const d={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,d),e.applyData(t,d)}function yG(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function bG(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function XN(e,t){const n=t.referenceType;let s="]";if(n==="collapsed"?s+="[]":n==="full"&&(s+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+s}];const i=e.all(t),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=s:i.push({type:"text",value:s}),i}function vG(e,t){const n=String(t.identifier).toUpperCase(),s=e.definitionById.get(n);if(!s)return XN(e,t);const i={src:vo(s.url||""),alt:t.alt};s.title!==null&&s.title!==void 0&&(i.title=s.title);const a={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,a),e.applyData(t,a)}function wG(e,t){const n={src:vo(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const s={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,s),e.applyData(t,s)}function jG(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const s={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,s),e.applyData(t,s)}function kG(e,t){const n=String(t.identifier).toUpperCase(),s=e.definitionById.get(n);if(!s)return XN(e,t);const i={href:vo(s.url||"")};s.title!==null&&s.title!==void 0&&(i.title=s.title);const a={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function NG(e,t){const n={href:vo(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const s={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function CG(e,t,n){const s=e.all(t),i=n?SG(n):YN(t),a={},o=[];if(typeof t.checked=="boolean"){const u=s[0];let m;u&&u.type==="element"&&u.tagName==="p"?m=u:(m={type:"element",tagName:"p",properties:{},children:[]},s.unshift(m)),m.children.length>0&&m.children.unshift({type:"text",value:" "}),m.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let l=-1;for(;++l<s.length;){const u=s[l];(i||l!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?o.push(...u.children):o.push(u)}const c=s[s.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:a,children:o};return e.patch(t,d),e.applyData(t,d)}function SG(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let s=-1;for(;!t&&++s<n.length;)t=YN(n[s])}return t}function YN(e){const t=e.spread;return t??e.children.length>1}function EG(e,t){const n={},s=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<s.length;){const o=s[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(s,!0)};return e.patch(t,a),e.applyData(t,a)}function TG(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function IG(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function PG(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function AG(e,t){const n=e.all(t),s=n.shift(),i=[];if(s){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([s],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=$0(t.children[1]),c=IN(t.children[t.children.length-1]);l&&c&&(o.position={start:l,end:c}),i.push(o)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,a),e.applyData(t,a)}function RG(e,t,n){const s=n?n.children:void 0,a=(s?s.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:t.children.length;let c=-1;const d=[];for(;++c<l;){const m=t.children[c],f={},p=o?o[c]:void 0;p&&(f.align=p);let x={type:"element",tagName:a,properties:f,children:[]};m&&(x.children=e.all(m),e.patch(m,x),x=e.applyData(m,x)),d.push(x)}const u={type:"element",tagName:"tr",properties:{},children:e.wrap(d,!0)};return e.patch(t,u),e.applyData(t,u)}function LG(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const nv=9,rv=32;function MG(e){const t=String(e),n=/\r?\n|\r/g;let s=n.exec(t),i=0;const a=[];for(;s;)a.push(sv(t.slice(i,s.index),i>0,!0),s[0]),i=s.index+s[0].length,s=n.exec(t);return a.push(sv(t.slice(i),i>0,!1)),a.join("")}function sv(e,t,n){let s=0,i=e.length;if(t){let a=e.codePointAt(s);for(;a===nv||a===rv;)s++,a=e.codePointAt(s)}if(n){let a=e.codePointAt(i-1);for(;a===nv||a===rv;)i--,a=e.codePointAt(i-1)}return i>s?e.slice(s,i):""}function DG(e,t){const n={type:"text",value:MG(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function $G(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const OG={blockquote:hG,break:mG,code:fG,delete:pG,emphasis:gG,footnoteReference:xG,heading:yG,html:bG,imageReference:vG,image:wG,inlineCode:jG,linkReference:kG,link:NG,listItem:CG,list:EG,paragraph:TG,root:IG,strong:PG,table:AG,tableCell:LG,tableRow:RG,text:DG,thematicBreak:$G,toml:Uc,yaml:Uc,definition:Uc,footnoteDefinition:Uc};function Uc(){}const QN=-1,Uh=0,hl=1,mu=2,V0=3,H0=4,W0=5,q0=6,JN=7,ZN=8,iv=typeof self=="object"?self:globalThis,BG=(e,t)=>{const n=(i,a)=>(e.set(a,i),i),s=i=>{if(e.has(i))return e.get(i);const[a,o]=t[i];switch(a){case Uh:case QN:return n(o,i);case hl:{const l=n([],i);for(const c of o)l.push(s(c));return l}case mu:{const l=n({},i);for(const[c,d]of o)l[s(c)]=s(d);return l}case V0:return n(new Date(o),i);case H0:{const{source:l,flags:c}=o;return n(new RegExp(l,c),i)}case W0:{const l=n(new Map,i);for(const[c,d]of o)l.set(s(c),s(d));return l}case q0:{const l=n(new Set,i);for(const c of o)l.add(s(c));return l}case JN:{const{name:l,message:c}=o;return n(new iv[l](c),i)}case ZN:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new iv[a](o),i)};return s},av=e=>BG(new Map,e)(0),ja="",{toString:_G}={},{keys:FG}=Object,Do=e=>{const t=typeof e;if(t!=="object"||!e)return[Uh,t];const n=_G.call(e).slice(8,-1);switch(n){case"Array":return[hl,ja];case"Object":return[mu,ja];case"Date":return[V0,ja];case"RegExp":return[H0,ja];case"Map":return[W0,ja];case"Set":return[q0,ja];case"DataView":return[hl,n]}return n.includes("Array")?[hl,n]:n.includes("Error")?[JN,n]:[mu,n]},Vc=([e,t])=>e===Uh&&(t==="function"||t==="symbol"),zG=(e,t,n,s)=>{const i=(o,l)=>{const c=s.push(o)-1;return n.set(l,c),c},a=o=>{if(n.has(o))return n.get(o);let[l,c]=Do(o);switch(l){case Uh:{let u=o;switch(c){case"bigint":l=ZN,u=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);u=null;break;case"undefined":return i([QN],o)}return i([l,u],o)}case hl:{if(c){let f=o;return c==="DataView"?f=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(f=new Uint8Array(o)),i([c,[...f]],o)}const u=[],m=i([l,u],o);for(const f of o)u.push(a(f));return m}case mu:{if(c)switch(c){case"BigInt":return i([c,o.toString()],o);case"Boolean":case"Number":case"String":return i([c,o.valueOf()],o)}if(t&&"toJSON"in o)return a(o.toJSON());const u=[],m=i([l,u],o);for(const f of FG(o))(e||!Vc(Do(o[f])))&&u.push([a(f),a(o[f])]);return m}case V0:return i([l,o.toISOString()],o);case H0:{const{source:u,flags:m}=o;return i([l,{source:u,flags:m}],o)}case W0:{const u=[],m=i([l,u],o);for(const[f,p]of o)(e||!(Vc(Do(f))||Vc(Do(p))))&&u.push([a(f),a(p)]);return m}case q0:{const u=[],m=i([l,u],o);for(const f of o)(e||!Vc(Do(f)))&&u.push(a(f));return m}}const{message:d}=o;return i([l,{name:c,message:d}],o)};return a},ov=(e,{json:t,lossy:n}={})=>{const s=[];return zG(!(t||n),!!t,new Map,s)(e),s},fu=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?av(ov(e,t)):structuredClone(e):(e,t)=>av(ov(e,t));function UG(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function VG(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function HG(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||UG,s=e.options.footnoteBackLabel||VG,i=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const d=e.footnoteById.get(e.footnoteOrder[c]);if(!d)continue;const u=e.all(d),m=String(d.identifier).toUpperCase(),f=vo(m.toLowerCase());let p=0;const x=[],g=e.footnoteCounts.get(m);for(;g!==void 0&&++p<=g;){x.length>0&&x.push({type:"text",value:" "});let k=typeof n=="string"?n:n(c,p);typeof k=="string"&&(k={type:"text",value:k}),x.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+f+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof s=="string"?s:s(c,p),className:["data-footnote-backref"]},children:Array.isArray(k)?k:[k]})}const b=u[u.length-1];if(b&&b.type==="element"&&b.tagName==="p"){const k=b.children[b.children.length-1];k&&k.type==="text"?k.value+=" ":b.children.push({type:"text",value:" "}),b.children.push(...x)}else u.push(...x);const w={type:"element",tagName:"li",properties:{id:t+"fn-"+f},children:e.wrap(u,!0)};e.patch(d,w),l.push(w)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...fu(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const Vh=function(e){if(e==null)return GG;if(typeof e=="function")return Hh(e);if(typeof e=="object")return Array.isArray(e)?WG(e):qG(e);if(typeof e=="string")return KG(e);throw new Error("Expected function, string, or object as test")};function WG(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Vh(e[n]);return Hh(s);function s(...i){let a=-1;for(;++a<t.length;)if(t[a].apply(this,i))return!0;return!1}}function qG(e){const t=e;return Hh(n);function n(s){const i=s;let a;for(a in e)if(i[a]!==t[a])return!1;return!0}}function KG(e){return Hh(t);function t(n){return n&&n.type===e}}function Hh(e){return t;function t(n,s,i){return!!(XG(n)&&e.call(this,n,typeof s=="number"?s:void 0,i||void 0))}}function GG(){return!0}function XG(e){return e!==null&&typeof e=="object"&&"type"in e}const e4=[],YG=!0,Qp=!1,QG="skip";function t4(e,t,n,s){let i;typeof t=="function"&&typeof n!="function"?(s=n,n=t):i=t;const a=Vh(i),o=s?-1:1;l(e,void 0,[])();function l(c,d,u){const m=c&&typeof c=="object"?c:{};if(typeof m.type=="string"){const p=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(c.type+(p?"<"+p+">":""))+")"})}return f;function f(){let p=e4,x,g,b;if((!t||a(c,d,u[u.length-1]||void 0))&&(p=JG(n(c,u)),p[0]===Qp))return p;if("children"in c&&c.children){const w=c;if(w.children&&p[0]!==QG)for(g=(s?w.children.length:-1)+o,b=u.concat(w);g>-1&&g<w.children.length;){const k=w.children[g];if(x=l(k,g,b)(),x[0]===Qp)return x;g=typeof x[1]=="number"?x[1]:g+o}}return p}}}function JG(e){return Array.isArray(e)?e:typeof e=="number"?[YG,e]:e==null?e4:[e]}function K0(e,t,n,s){let i,a,o;typeof t=="function"&&typeof n!="function"?(a=void 0,o=t,i=n):(a=t,o=n,i=s),t4(e,a,l,i);function l(c,d){const u=d[d.length-1],m=u?u.children.indexOf(c):void 0;return o(c,m,u)}}const Jp={}.hasOwnProperty,ZG={};function eX(e,t){const n=t||ZG,s=new Map,i=new Map,a=new Map,o={...OG,...n.handlers},l={all:d,applyData:nX,definitionById:s,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:o,one:c,options:n,patch:tX,wrap:sX};return K0(e,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const m=u.type==="definition"?s:i,f=String(u.identifier).toUpperCase();m.has(f)||m.set(f,u)}}),l;function c(u,m){const f=u.type,p=l.handlers[f];if(Jp.call(l.handlers,f)&&p)return p(l,u,m);if(l.options.passThrough&&l.options.passThrough.includes(f)){if("children"in u){const{children:g,...b}=u,w=fu(b);return w.children=l.all(u),w}return fu(u)}return(l.options.unknownHandler||rX)(l,u,m)}function d(u){const m=[];if("children"in u){const f=u.children;let p=-1;for(;++p<f.length;){const x=l.one(f[p],u);if(x){if(p&&f[p-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=lv(x.value)),!Array.isArray(x)&&x.type==="element")){const g=x.children[0];g&&g.type==="text"&&(g.value=lv(g.value))}Array.isArray(x)?m.push(...x):m.push(x)}}}return m}}function tX(e,t){e.position&&(t.position=VW(e))}function nX(e,t){let n=t;if(e&&e.data){const s=e.data.hName,i=e.data.hChildren,a=e.data.hProperties;if(typeof s=="string")if(n.type==="element")n.tagName=s;else{const o="children"in n?n.children:[n];n={type:"element",tagName:s,properties:{},children:o}}n.type==="element"&&a&&Object.assign(n.properties,fu(a)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function rX(e,t){const n=t.data||{},s="value"in t&&!(Jp.call(n,"hProperties")||Jp.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function sX(e,t){const n=[];let s=-1;for(t&&n.push({type:"text",value:`
`});++s<e.length;)s&&n.push({type:"text",value:`
`}),n.push(e[s]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function lv(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function cv(e,t){const n=eX(e,t),s=n.one(e,void 0),i=HG(n),a=Array.isArray(s)?{type:"root",children:s}:s||{type:"root",children:[]};return i&&a.children.push({type:"text",value:`
`},i),a}function iX(e,t){return e&&"run"in e?async function(n,s){const i=cv(n,{file:s,...t});await e.run(i,s)}:function(n,s){return cv(n,{file:s,...e||t})}}function dv(e){if(e)throw e}var Id=Object.prototype.hasOwnProperty,n4=Object.prototype.toString,uv=Object.defineProperty,hv=Object.getOwnPropertyDescriptor,mv=function(t){return typeof Array.isArray=="function"?Array.isArray(t):n4.call(t)==="[object Array]"},fv=function(t){if(!t||n4.call(t)!=="[object Object]")return!1;var n=Id.call(t,"constructor"),s=t.constructor&&t.constructor.prototype&&Id.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!s)return!1;var i;for(i in t);return typeof i>"u"||Id.call(t,i)},pv=function(t,n){uv&&n.name==="__proto__"?uv(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},gv=function(t,n){if(n==="__proto__")if(Id.call(t,n)){if(hv)return hv(t,n).value}else return;return t[n]},aX=function e(){var t,n,s,i,a,o,l=arguments[0],c=1,d=arguments.length,u=!1;for(typeof l=="boolean"&&(u=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<d;++c)if(t=arguments[c],t!=null)for(n in t)s=gv(l,n),i=gv(t,n),l!==i&&(u&&i&&(fv(i)||(a=mv(i)))?(a?(a=!1,o=s&&mv(s)?s:[]):o=s&&fv(s)?s:{},pv(l,{name:n,newValue:e(u,o,i)})):typeof i<"u"&&pv(l,{name:n,newValue:i}));return l};const sf=wu(aX);function Zp(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function oX(){const e=[],t={run:n,use:s};return t;function n(...i){let a=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...i);function l(c,...d){const u=e[++a];let m=-1;if(c){o(c);return}for(;++m<i.length;)(d[m]===null||d[m]===void 0)&&(d[m]=i[m]);i=d,u?lX(u,l)(...d):o(null,...d)}}function s(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function lX(e,t){let n;return s;function s(...o){const l=e.length>o.length;let c;l&&o.push(i);try{c=e.apply(this,o)}catch(d){const u=d;if(l&&n)throw u;return i(u)}l||(c&&c.then&&typeof c.then=="function"?c.then(a,i):c instanceof Error?i(c):a(c))}function i(o,...l){n||(n=!0,t(o,...l))}function a(o){i(null,o)}}const _r={basename:cX,dirname:dX,extname:uX,join:hX,sep:"/"};function cX(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');yc(e);let n=0,s=-1,i=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(a){n=i+1;break}}else s<0&&(a=!0,s=i+1);return s<0?"":e.slice(n,s)}if(t===e)return"";let o=-1,l=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(a){n=i+1;break}}else o<0&&(a=!0,o=i+1),l>-1&&(e.codePointAt(i)===t.codePointAt(l--)?l<0&&(s=i):(l=-1,s=o));return n===s?s=o:s<0&&(s=e.length),e.slice(n,s)}function dX(e){if(yc(e),e.length===0)return".";let t=-1,n=e.length,s;for(;--n;)if(e.codePointAt(n)===47){if(s){t=n;break}}else s||(s=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function uX(e){yc(e);let t=e.length,n=-1,s=0,i=-1,a=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){s=t+1;break}continue}n<0&&(o=!0,n=t+1),l===46?i<0?i=t:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||n<0||a===0||a===1&&i===n-1&&i===s+1?"":e.slice(i,n)}function hX(...e){let t=-1,n;for(;++t<e.length;)yc(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":mX(n)}function mX(e){yc(e);const t=e.codePointAt(0)===47;let n=fX(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function fX(e,t){let n="",s=0,i=-1,a=0,o=-1,l,c;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(i===o-1||a===1))if(i!==o-1&&a===2){if(n.length<2||s!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",s=0):(n=n.slice(0,c),s=n.length-1-n.lastIndexOf("/")),i=o,a=0;continue}}else if(n.length>0){n="",s=0,i=o,a=0;continue}}t&&(n=n.length>0?n+"/..":"..",s=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),s=o-i-1;i=o,a=0}else l===46&&a>-1?a++:a=-1}return n}function yc(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const pX={cwd:gX};function gX(){return"/"}function eg(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function xX(e){if(typeof e=="string")e=new URL(e);else if(!eg(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return yX(e)}function yX(e){if(e.hostname!==""){const s=new TypeError('File URL host must be "localhost" or empty on darwin');throw s.code="ERR_INVALID_FILE_URL_HOST",s}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const s=t.codePointAt(n+2);if(s===70||s===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const af=["history","path","basename","stem","extname","dirname"];class r4{constructor(t){let n;t?eg(t)?n={path:t}:typeof t=="string"||bX(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":pX.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let s=-1;for(;++s<af.length;){const a=af[s];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let i;for(i in n)af.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?_r.basename(this.path):void 0}set basename(t){lf(t,"basename"),of(t,"basename"),this.path=_r.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?_r.dirname(this.path):void 0}set dirname(t){xv(this.basename,"dirname"),this.path=_r.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?_r.extname(this.path):void 0}set extname(t){if(of(t,"extname"),xv(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=_r.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){eg(t)&&(t=xX(t)),lf(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?_r.basename(this.path,this.extname):void 0}set stem(t){lf(t,"stem"),of(t,"stem"),this.path=_r.join(this.dirname||"",t+(this.extname||""))}fail(t,n,s){const i=this.message(t,n,s);throw i.fatal=!0,i}info(t,n,s){const i=this.message(t,n,s);return i.fatal=void 0,i}message(t,n,s){const i=new Mn(t,n,s);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function of(e,t){if(e&&e.includes(_r.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+_r.sep+"`")}function lf(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function xv(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function bX(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const vX=function(e){const s=this.constructor.prototype,i=s[e],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,s),a},wX={}.hasOwnProperty;class G0 extends vX{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=oX()}copy(){const t=new G0;let n=-1;for(;++n<this.attachers.length;){const s=this.attachers[n];t.use(...s)}return t.data(sf(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(uf("data",this.frozen),this.namespace[t]=n,this):wX.call(this.namespace,t)&&this.namespace[t]||void 0:t?(uf("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...s]=this.attachers[this.freezeIndex];if(s[0]===!1)continue;s[0]===!0&&(s[0]=void 0);const i=n.call(t,...s);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Hc(t),s=this.parser||this.Parser;return cf("parse",s),s(String(n),n)}process(t,n){const s=this;return this.freeze(),cf("process",this.parser||this.Parser),df("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(a,o){const l=Hc(t),c=s.parse(l);s.run(c,l,function(u,m,f){if(u||!m||!f)return d(u);const p=m,x=s.stringify(p,f);NX(x)?f.value=x:f.result=x,d(u,f)});function d(u,m){u||!m?o(u):a?a(m):n(void 0,m)}}}processSync(t){let n=!1,s;return this.freeze(),cf("processSync",this.parser||this.Parser),df("processSync",this.compiler||this.Compiler),this.process(t,i),bv("processSync","process",n),s;function i(a,o){n=!0,dv(a),s=o}}run(t,n,s){yv(t),this.freeze();const i=this.transformers;return!s&&typeof n=="function"&&(s=n,n=void 0),s?a(void 0,s):new Promise(a);function a(o,l){const c=Hc(n);i.run(t,c,d);function d(u,m,f){const p=m||t;u?l(u):o?o(p):s(void 0,p,f)}}}runSync(t,n){let s=!1,i;return this.run(t,n,a),bv("runSync","run",s),i;function a(o,l){dv(o),i=l,s=!0}}stringify(t,n){this.freeze();const s=Hc(n),i=this.compiler||this.Compiler;return df("stringify",i),yv(t),i(t,s)}use(t,...n){const s=this.attachers,i=this.namespace;if(uf("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function a(d){if(typeof d=="function")c(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[u,...m]=d;c(u,m)}else o(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function o(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(d.plugins),d.settings&&(i.settings=sf(!0,i.settings,d.settings))}function l(d){let u=-1;if(d!=null)if(Array.isArray(d))for(;++u<d.length;){const m=d[u];a(m)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function c(d,u){let m=-1,f=-1;for(;++m<s.length;)if(s[m][0]===d){f=m;break}if(f===-1)s.push([d,...u]);else if(u.length>0){let[p,...x]=u;const g=s[f][1];Zp(g)&&Zp(p)&&(p=sf(!0,g,p)),s[f]=[d,p,...x]}}}}const jX=new G0().freeze();function cf(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function df(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function uf(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function yv(e){if(!Zp(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function bv(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Hc(e){return kX(e)?e:new r4(e)}function kX(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function NX(e){return typeof e=="string"||CX(e)}function CX(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const SX="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",vv=[],wv={allowDangerousHtml:!0},EX=/^(https?|ircs?|mailto|xmpp)$/i,TX=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function ps(e){const t=IX(e),n=PX(e);return AX(t.runSync(t.parse(n),n),e)}function IX(e){const t=e.rehypePlugins||vv,n=e.remarkPlugins||vv,s=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...wv}:wv;return jX().use(uG).use(n).use(iX,s).use(t)}function PX(e){const t=e.children||"",n=new r4;return typeof t=="string"&&(n.value=t),n}function AX(e,t){const n=t.allowedElements,s=t.allowElement,i=t.components,a=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||RX;for(const u of TX)Object.hasOwn(t,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+SX+u.id,void 0);return K0(e,d),GW(e,{Fragment:r.Fragment,components:i,ignoreInvalidStyle:!0,jsx:r.jsx,jsxs:r.jsxs,passKeys:!0,passNode:!0});function d(u,m,f){if(u.type==="raw"&&f&&typeof m=="number")return o?f.children.splice(m,1):f.children[m]={type:"text",value:u.value},m;if(u.type==="element"){let p;for(p in tf)if(Object.hasOwn(tf,p)&&Object.hasOwn(u.properties,p)){const x=u.properties[p],g=tf[p];(g===null||g.includes(u.tagName))&&(u.properties[p]=c(String(x||""),p,u))}}if(u.type==="element"){let p=n?!n.includes(u.tagName):a?a.includes(u.tagName):!1;if(!p&&s&&typeof m=="number"&&(p=!s(u,m,f)),p&&f&&typeof m=="number")return l&&u.children?f.children.splice(m,1,...u.children):f.children.splice(m,1),m}}}function RX(e){const t=e.indexOf(":"),n=e.indexOf("?"),s=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||s!==-1&&t>s||EX.test(e.slice(0,t))?e:""}function jv(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let s=0,i=n.indexOf(t);for(;i!==-1;)s++,i=n.indexOf(t,i+t.length);return s}function LX(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function MX(e,t,n){const i=Vh((n||{}).ignore||[]),a=DX(t);let o=-1;for(;++o<a.length;)t4(e,"text",l);function l(d,u){let m=-1,f;for(;++m<u.length;){const p=u[m],x=f?f.children:void 0;if(i(p,x?x.indexOf(p):void 0,f))return;f=p}if(f)return c(d,u)}function c(d,u){const m=u[u.length-1],f=a[o][0],p=a[o][1];let x=0;const b=m.children.indexOf(d);let w=!1,k=[];f.lastIndex=0;let v=f.exec(d.value);for(;v;){const N=v.index,C={index:v.index,input:v.input,stack:[...u,d]};let T=p(...v,C);if(typeof T=="string"&&(T=T.length>0?{type:"text",value:T}:void 0),T===!1?f.lastIndex=N+1:(x!==N&&k.push({type:"text",value:d.value.slice(x,N)}),Array.isArray(T)?k.push(...T):T&&k.push(T),x=N+v[0].length,w=!0),!f.global)break;v=f.exec(d.value)}return w?(x<d.value.length&&k.push({type:"text",value:d.value.slice(x)}),m.children.splice(b,1,...k)):k=[d],b+k.length}}function DX(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let s=-1;for(;++s<n.length;){const i=n[s];t.push([$X(i[0]),OX(i[1])])}return t}function $X(e){return typeof e=="string"?new RegExp(LX(e),"g"):e}function OX(e){return typeof e=="function"?e:function(){return e}}const hf="phrasing",mf=["autolink","link","image","label"];function BX(){return{transforms:[WX],enter:{literalAutolink:FX,literalAutolinkEmail:ff,literalAutolinkHttp:ff,literalAutolinkWww:ff},exit:{literalAutolink:HX,literalAutolinkEmail:VX,literalAutolinkHttp:zX,literalAutolinkWww:UX}}}function _X(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:hf,notInConstruct:mf},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:hf,notInConstruct:mf},{character:":",before:"[ps]",after:"\\/",inConstruct:hf,notInConstruct:mf}]}}function FX(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function ff(e){this.config.enter.autolinkProtocol.call(this,e)}function zX(e){this.config.exit.autolinkProtocol.call(this,e)}function UX(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function VX(e){this.config.exit.autolinkEmail.call(this,e)}function HX(e){this.exit(e)}function WX(e){MX(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,qX],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),KX]],{ignore:["link","linkReference"]})}function qX(e,t,n,s,i){let a="";if(!s4(i)||(/^w/i.test(t)&&(n=t+n,t="",a="http://"),!GX(n)))return!1;const o=XX(n+s);if(!o[0])return!1;const l={type:"link",title:null,url:a+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function KX(e,t,n,s){return!s4(s,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function GX(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function XX(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],s=n.indexOf(")");const i=jv(e,"(");let a=jv(e,")");for(;s!==-1&&i>a;)e+=n.slice(0,s+1),n=n.slice(s+1),s=n.indexOf(")"),a++;return[e,n]}function s4(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||ra(n)||Fh(n))&&(!t||n!==47)}i4.peek=sY;function YX(){this.buffer()}function QX(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function JX(){this.buffer()}function ZX(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function eY(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ir(this.sliceSerialize(e)).toLowerCase(),n.label=t}function tY(e){this.exit(e)}function nY(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ir(this.sliceSerialize(e)).toLowerCase(),n.label=t}function rY(e){this.exit(e)}function sY(){return"["}function i4(e,t,n,s){const i=n.createTracker(s);let a=i.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return a+=i.move(n.safe(n.associationId(e),{after:"]",before:a})),l(),o(),a+=i.move("]"),a}function iY(){return{enter:{gfmFootnoteCallString:YX,gfmFootnoteCall:QX,gfmFootnoteDefinitionLabelString:JX,gfmFootnoteDefinition:ZX},exit:{gfmFootnoteCallString:eY,gfmFootnoteCall:tY,gfmFootnoteDefinitionLabelString:nY,gfmFootnoteDefinition:rY}}}function aY(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:i4},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(s,i,a,o){const l=a.createTracker(o);let c=l.move("[^");const d=a.enter("footnoteDefinition"),u=a.enter("label");return c+=l.move(a.safe(a.associationId(s),{before:c,after:"]"})),u(),c+=l.move("]:"),s.children&&s.children.length>0&&(l.shift(4),c+=l.move((t?`
`:" ")+a.indentLines(a.containerFlow(s,l.current()),t?a4:oY))),d(),c}}function oY(e,t,n){return t===0?e:a4(e,t,n)}function a4(e,t,n){return(n?"":"    ")+e}const lY=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];o4.peek=mY;function cY(){return{canContainEols:["delete"],enter:{strikethrough:uY},exit:{strikethrough:hY}}}function dY(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:lY}],handlers:{delete:o4}}}function uY(e){this.enter({type:"delete",children:[]},e)}function hY(e){this.exit(e)}function o4(e,t,n,s){const i=n.createTracker(s),a=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(e,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),a(),o}function mY(){return"~"}function fY(e){return e.length}function pY(e,t){const n=t||{},s=(n.align||[]).concat(),i=n.stringLength||fY,a=[],o=[],l=[],c=[];let d=0,u=-1;for(;++u<e.length;){const g=[],b=[];let w=-1;for(e[u].length>d&&(d=e[u].length);++w<e[u].length;){const k=gY(e[u][w]);if(n.alignDelimiters!==!1){const v=i(k);b[w]=v,(c[w]===void 0||v>c[w])&&(c[w]=v)}g.push(k)}o[u]=g,l[u]=b}let m=-1;if(typeof s=="object"&&"length"in s)for(;++m<d;)a[m]=kv(s[m]);else{const g=kv(s);for(;++m<d;)a[m]=g}m=-1;const f=[],p=[];for(;++m<d;){const g=a[m];let b="",w="";g===99?(b=":",w=":"):g===108?b=":":g===114&&(w=":");let k=n.alignDelimiters===!1?1:Math.max(1,c[m]-b.length-w.length);const v=b+"-".repeat(k)+w;n.alignDelimiters!==!1&&(k=b.length+k+w.length,k>c[m]&&(c[m]=k),p[m]=k),f[m]=v}o.splice(1,0,f),l.splice(1,0,p),u=-1;const x=[];for(;++u<o.length;){const g=o[u],b=l[u];m=-1;const w=[];for(;++m<d;){const k=g[m]||"";let v="",N="";if(n.alignDelimiters!==!1){const C=c[m]-(b[m]||0),T=a[m];T===114?v=" ".repeat(C):T===99?C%2?(v=" ".repeat(C/2+.5),N=" ".repeat(C/2-.5)):(v=" ".repeat(C/2),N=v):N=" ".repeat(C)}n.delimiterStart!==!1&&!m&&w.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&k==="")&&(n.delimiterStart!==!1||m)&&w.push(" "),n.alignDelimiters!==!1&&w.push(v),w.push(k),n.alignDelimiters!==!1&&w.push(N),n.padding!==!1&&w.push(" "),(n.delimiterEnd!==!1||m!==d-1)&&w.push("|")}x.push(n.delimiterEnd===!1?w.join("").replace(/ +$/,""):w.join(""))}return x.join(`
`)}function gY(e){return e==null?"":String(e)}function kv(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function xY(e,t,n,s){const i=n.enter("blockquote"),a=n.createTracker(s);a.move("> "),a.shift(2);const o=n.indentLines(n.containerFlow(e,a.current()),yY);return i(),o}function yY(e,t,n){return">"+(n?"":" ")+e}function bY(e,t){return Nv(e,t.inConstruct,!0)&&!Nv(e,t.notInConstruct,!1)}function Nv(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let s=-1;for(;++s<t.length;)if(e.includes(t[s]))return!0;return!1}function Cv(e,t,n,s){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&bY(n.stack,n.unsafe[i]))return/[ \t]/.test(s.before)?"":" ";return`\\
`}function vY(e,t){const n=String(e);let s=n.indexOf(t),i=s,a=0,o=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;s!==-1;)s===i?++a>o&&(o=a):a=1,i=s+t.length,s=n.indexOf(t,i);return o}function wY(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function jY(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function kY(e,t,n,s){const i=jY(n),a=e.value||"",o=i==="`"?"GraveAccent":"Tilde";if(wY(e,n)){const m=n.enter("codeIndented"),f=n.indentLines(a,NY);return m(),f}const l=n.createTracker(s),c=i.repeat(Math.max(vY(a,i)+1,3)),d=n.enter("codeFenced");let u=l.move(c);if(e.lang){const m=n.enter(`codeFencedLang${o}`);u+=l.move(n.safe(e.lang,{before:u,after:" ",encode:["`"],...l.current()})),m()}if(e.lang&&e.meta){const m=n.enter(`codeFencedMeta${o}`);u+=l.move(" "),u+=l.move(n.safe(e.meta,{before:u,after:`
`,encode:["`"],...l.current()})),m()}return u+=l.move(`
`),a&&(u+=l.move(a+`
`)),u+=l.move(c),d(),u}function NY(e,t,n){return(n?"":"    ")+e}function X0(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function CY(e,t,n,s){const i=X0(n),a=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const c=n.createTracker(s);let d=c.move("[");return d+=c.move(n.safe(n.associationId(e),{before:d,after:"]",...c.current()})),d+=c.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),d+=c.move("<"),d+=c.move(n.safe(e.url,{before:d,after:">",...c.current()})),d+=c.move(">")):(l=n.enter("destinationRaw"),d+=c.move(n.safe(e.url,{before:d,after:e.title?" ":`
`,...c.current()}))),l(),e.title&&(l=n.enter(`title${a}`),d+=c.move(" "+i),d+=c.move(n.safe(e.title,{before:d,after:i,...c.current()})),d+=c.move(i),l()),o(),d}function SY(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function $l(e){return"&#x"+e.toString(16).toUpperCase()+";"}function pu(e,t,n){const s=ao(e),i=ao(t);return s===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:s===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}l4.peek=EY;function l4(e,t,n,s){const i=SY(n),a=n.enter("emphasis"),o=n.createTracker(s),l=o.move(i);let c=o.move(n.containerPhrasing(e,{after:i,before:l,...o.current()}));const d=c.charCodeAt(0),u=pu(s.before.charCodeAt(s.before.length-1),d,i);u.inside&&(c=$l(d)+c.slice(1));const m=c.charCodeAt(c.length-1),f=pu(s.after.charCodeAt(0),m,i);f.inside&&(c=c.slice(0,-1)+$l(m));const p=o.move(i);return a(),n.attentionEncodeSurroundingInfo={after:f.outside,before:u.outside},l+c+p}function EY(e,t,n){return n.options.emphasis||"*"}function TY(e,t){let n=!1;return K0(e,function(s){if("value"in s&&/\r?\n|\r/.test(s.value)||s.type==="break")return n=!0,Qp}),!!((!e.depth||e.depth<3)&&F0(e)&&(t.options.setext||n))}function IY(e,t,n,s){const i=Math.max(Math.min(6,e.depth||1),1),a=n.createTracker(s);if(TY(e,n)){const u=n.enter("headingSetext"),m=n.enter("phrasing"),f=n.containerPhrasing(e,{...a.current(),before:`
`,after:`
`});return m(),u(),f+`
`+(i===1?"=":"-").repeat(f.length-(Math.max(f.lastIndexOf("\r"),f.lastIndexOf(`
`))+1))}const o="#".repeat(i),l=n.enter("headingAtx"),c=n.enter("phrasing");a.move(o+" ");let d=n.containerPhrasing(e,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(d)&&(d=$l(d.charCodeAt(0))+d.slice(1)),d=d?o+" "+d:o,n.options.closeAtx&&(d+=" "+o),c(),l(),d}c4.peek=PY;function c4(e){return e.value||""}function PY(){return"<"}d4.peek=AY;function d4(e,t,n,s){const i=X0(n),a=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const c=n.createTracker(s);let d=c.move("![");return d+=c.move(n.safe(e.alt,{before:d,after:"]",...c.current()})),d+=c.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),d+=c.move("<"),d+=c.move(n.safe(e.url,{before:d,after:">",...c.current()})),d+=c.move(">")):(l=n.enter("destinationRaw"),d+=c.move(n.safe(e.url,{before:d,after:e.title?" ":")",...c.current()}))),l(),e.title&&(l=n.enter(`title${a}`),d+=c.move(" "+i),d+=c.move(n.safe(e.title,{before:d,after:i,...c.current()})),d+=c.move(i),l()),d+=c.move(")"),o(),d}function AY(){return"!"}u4.peek=RY;function u4(e,t,n,s){const i=e.referenceType,a=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(s);let c=l.move("![");const d=n.safe(e.alt,{before:c,after:"]",...l.current()});c+=l.move(d+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const m=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return o(),n.stack=u,a(),i==="full"||!d||d!==m?c+=l.move(m+"]"):i==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function RY(){return"!"}h4.peek=LY;function h4(e,t,n){let s=e.value||"",i="`",a=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(s);)i+="`";for(/[^ \r\n]/.test(s)&&(/^[ \r\n]/.test(s)&&/[ \r\n]$/.test(s)||/^`|`$/.test(s))&&(s=" "+s+" ");++a<n.unsafe.length;){const o=n.unsafe[a],l=n.compilePattern(o);let c;if(o.atBreak)for(;c=l.exec(s);){let d=c.index;s.charCodeAt(d)===10&&s.charCodeAt(d-1)===13&&d--,s=s.slice(0,d)+" "+s.slice(c.index+1)}}return i+s+i}function LY(){return"`"}function m4(e,t){const n=F0(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}f4.peek=MY;function f4(e,t,n,s){const i=X0(n),a=i==='"'?"Quote":"Apostrophe",o=n.createTracker(s);let l,c;if(m4(e,n)){const u=n.stack;n.stack=[],l=n.enter("autolink");let m=o.move("<");return m+=o.move(n.containerPhrasing(e,{before:m,after:">",...o.current()})),m+=o.move(">"),l(),n.stack=u,m}l=n.enter("link"),c=n.enter("label");let d=o.move("[");return d+=o.move(n.containerPhrasing(e,{before:d,after:"](",...o.current()})),d+=o.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),d+=o.move("<"),d+=o.move(n.safe(e.url,{before:d,after:">",...o.current()})),d+=o.move(">")):(c=n.enter("destinationRaw"),d+=o.move(n.safe(e.url,{before:d,after:e.title?" ":")",...o.current()}))),c(),e.title&&(c=n.enter(`title${a}`),d+=o.move(" "+i),d+=o.move(n.safe(e.title,{before:d,after:i,...o.current()})),d+=o.move(i),c()),d+=o.move(")"),l(),d}function MY(e,t,n){return m4(e,n)?"<":"["}p4.peek=DY;function p4(e,t,n,s){const i=e.referenceType,a=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(s);let c=l.move("[");const d=n.containerPhrasing(e,{before:c,after:"]",...l.current()});c+=l.move(d+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const m=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return o(),n.stack=u,a(),i==="full"||!d||d!==m?c+=l.move(m+"]"):i==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function DY(){return"["}function Y0(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function $Y(e){const t=Y0(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function OY(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function g4(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function BY(e,t,n,s){const i=n.enter("list"),a=n.bulletCurrent;let o=e.ordered?OY(n):Y0(n);const l=e.ordered?o==="."?")":".":$Y(n);let c=t&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!e.ordered){const u=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),g4(n)===o&&u){let m=-1;for(;++m<e.children.length;){const f=e.children[m];if(f&&f.type==="listItem"&&f.children&&f.children[0]&&f.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=l),n.bulletCurrent=o;const d=n.containerFlow(e,s);return n.bulletLastUsed=o,n.bulletCurrent=a,i(),d}function _Y(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function FY(e,t,n,s){const i=_Y(n);let a=n.bulletCurrent||Y0(n);t&&t.type==="list"&&t.ordered&&(a=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+a);let o=a.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(s);l.move(a+" ".repeat(o-a.length)),l.shift(o);const c=n.enter("listItem"),d=n.indentLines(n.containerFlow(e,l.current()),u);return c(),d;function u(m,f,p){return f?(p?"":" ".repeat(o))+m:(p?a:a+" ".repeat(o-a.length))+m}}function zY(e,t,n,s){const i=n.enter("paragraph"),a=n.enter("phrasing"),o=n.containerPhrasing(e,s);return a(),i(),o}const UY=Vh(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function VY(e,t,n,s){return(e.children.some(function(o){return UY(o)})?n.containerPhrasing:n.containerFlow).call(n,e,s)}function HY(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}x4.peek=WY;function x4(e,t,n,s){const i=HY(n),a=n.enter("strong"),o=n.createTracker(s),l=o.move(i+i);let c=o.move(n.containerPhrasing(e,{after:i,before:l,...o.current()}));const d=c.charCodeAt(0),u=pu(s.before.charCodeAt(s.before.length-1),d,i);u.inside&&(c=$l(d)+c.slice(1));const m=c.charCodeAt(c.length-1),f=pu(s.after.charCodeAt(0),m,i);f.inside&&(c=c.slice(0,-1)+$l(m));const p=o.move(i+i);return a(),n.attentionEncodeSurroundingInfo={after:f.outside,before:u.outside},l+c+p}function WY(e,t,n){return n.options.strong||"*"}function qY(e,t,n,s){return n.safe(e.value,s)}function KY(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function GY(e,t,n){const s=(g4(n)+(n.options.ruleSpaces?" ":"")).repeat(KY(n));return n.options.ruleSpaces?s.slice(0,-1):s}const y4={blockquote:xY,break:Cv,code:kY,definition:CY,emphasis:l4,hardBreak:Cv,heading:IY,html:c4,image:d4,imageReference:u4,inlineCode:h4,link:f4,linkReference:p4,list:BY,listItem:FY,paragraph:zY,root:VY,strong:x4,text:qY,thematicBreak:GY};function XY(){return{enter:{table:YY,tableData:Sv,tableHeader:Sv,tableRow:JY},exit:{codeText:ZY,table:QY,tableData:pf,tableHeader:pf,tableRow:pf}}}function YY(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function QY(e){this.exit(e),this.data.inTable=void 0}function JY(e){this.enter({type:"tableRow",children:[]},e)}function pf(e){this.exit(e)}function Sv(e){this.enter({type:"tableCell",children:[]},e)}function ZY(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,eQ));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function eQ(e,t){return t==="|"?t:e}function tQ(e){const t=e||{},n=t.tableCellPadding,s=t.tablePipeAlign,i=t.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:f,table:o,tableCell:c,tableRow:l}};function o(p,x,g,b){return d(u(p,g,b),p.align)}function l(p,x,g,b){const w=m(p,g,b),k=d([w]);return k.slice(0,k.indexOf(`
`))}function c(p,x,g,b){const w=g.enter("tableCell"),k=g.enter("phrasing"),v=g.containerPhrasing(p,{...b,before:a,after:a});return k(),w(),v}function d(p,x){return pY(p,{align:x,alignDelimiters:s,padding:n,stringLength:i})}function u(p,x,g){const b=p.children;let w=-1;const k=[],v=x.enter("table");for(;++w<b.length;)k[w]=m(b[w],x,g);return v(),k}function m(p,x,g){const b=p.children;let w=-1;const k=[],v=x.enter("tableRow");for(;++w<b.length;)k[w]=c(b[w],p,x,g);return v(),k}function f(p,x,g){let b=y4.inlineCode(p,x,g);return g.stack.includes("tableCell")&&(b=b.replace(/\|/g,"\\$&")),b}}function nQ(){return{exit:{taskListCheckValueChecked:Ev,taskListCheckValueUnchecked:Ev,paragraph:sQ}}}function rQ(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:iQ}}}function Ev(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function sQ(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const s=n.children[0];if(s&&s.type==="text"){const i=t.children;let a=-1,o;for(;++a<i.length;){const l=i[a];if(l.type==="paragraph"){o=l;break}}o===n&&(s.value=s.value.slice(1),s.value.length===0?n.children.shift():n.position&&s.position&&typeof s.position.start.offset=="number"&&(s.position.start.column++,s.position.start.offset++,n.position.start=Object.assign({},s.position.start)))}}this.exit(e)}function iQ(e,t,n,s){const i=e.children[0],a=typeof e.checked=="boolean"&&i&&i.type==="paragraph",o="["+(e.checked?"x":" ")+"] ",l=n.createTracker(s);a&&l.move(o);let c=y4.listItem(e,t,n,{...s,...l.current()});return a&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),c;function d(u){return u+o}}function aQ(){return[BX(),iY(),cY(),XY(),nQ()]}function oQ(e){return{extensions:[_X(),aY(e),dY(),tQ(e),rQ()]}}const lQ={tokenize:fQ,partial:!0},b4={tokenize:pQ,partial:!0},v4={tokenize:gQ,partial:!0},w4={tokenize:xQ,partial:!0},cQ={tokenize:yQ,partial:!0},j4={name:"wwwAutolink",tokenize:hQ,previous:N4},k4={name:"protocolAutolink",tokenize:mQ,previous:C4},ks={name:"emailAutolink",tokenize:uQ,previous:S4},ns={};function dQ(){return{text:ns}}let gi=48;for(;gi<123;)ns[gi]=ks,gi++,gi===58?gi=65:gi===91&&(gi=97);ns[43]=ks;ns[45]=ks;ns[46]=ks;ns[95]=ks;ns[72]=[ks,k4];ns[104]=[ks,k4];ns[87]=[ks,j4];ns[119]=[ks,j4];function uQ(e,t,n){const s=this;let i,a;return o;function o(m){return!tg(m)||!S4.call(s,s.previous)||Q0(s.events)?n(m):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(m))}function l(m){return tg(m)?(e.consume(m),l):m===64?(e.consume(m),c):n(m)}function c(m){return m===46?e.check(cQ,u,d)(m):m===45||m===95||Ln(m)?(a=!0,e.consume(m),c):u(m)}function d(m){return e.consume(m),i=!0,c}function u(m){return a&&i&&Fn(s.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(m)):n(m)}}function hQ(e,t,n){const s=this;return i;function i(o){return o!==87&&o!==119||!N4.call(s,s.previous)||Q0(s.events)?n(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(lQ,e.attempt(b4,e.attempt(v4,a),n),n)(o))}function a(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(o)}}function mQ(e,t,n){const s=this;let i="",a=!1;return o;function o(m){return(m===72||m===104)&&C4.call(s,s.previous)&&!Q0(s.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(m),e.consume(m),l):n(m)}function l(m){if(Fn(m)&&i.length<5)return i+=String.fromCodePoint(m),e.consume(m),l;if(m===58){const f=i.toLowerCase();if(f==="http"||f==="https")return e.consume(m),c}return n(m)}function c(m){return m===47?(e.consume(m),a?d:(a=!0,c)):n(m)}function d(m){return m===null||hu(m)||Ot(m)||ra(m)||Fh(m)?n(m):e.attempt(b4,e.attempt(v4,u),n)(m)}function u(m){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(m)}}function fQ(e,t,n){let s=0;return i;function i(o){return(o===87||o===119)&&s<3?(s++,e.consume(o),i):o===46&&s===3?(e.consume(o),a):n(o)}function a(o){return o===null?n(o):t(o)}}function pQ(e,t,n){let s,i,a;return o;function o(d){return d===46||d===95?e.check(w4,c,l)(d):d===null||Ot(d)||ra(d)||d!==45&&Fh(d)?c(d):(a=!0,e.consume(d),o)}function l(d){return d===95?s=!0:(i=s,s=void 0),e.consume(d),o}function c(d){return i||s||!a?n(d):t(d)}}function gQ(e,t){let n=0,s=0;return i;function i(o){return o===40?(n++,e.consume(o),i):o===41&&s<n?a(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(w4,t,a)(o):o===null||Ot(o)||ra(o)?t(o):(e.consume(o),i)}function a(o){return o===41&&s++,e.consume(o),i}}function xQ(e,t,n){return s;function s(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),s):l===38?(e.consume(l),a):l===93?(e.consume(l),i):l===60||l===null||Ot(l)||ra(l)?t(l):n(l)}function i(l){return l===null||l===40||l===91||Ot(l)||ra(l)?t(l):s(l)}function a(l){return Fn(l)?o(l):n(l)}function o(l){return l===59?(e.consume(l),s):Fn(l)?(e.consume(l),o):n(l)}}function yQ(e,t,n){return s;function s(a){return e.consume(a),i}function i(a){return Ln(a)?n(a):t(a)}}function N4(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Ot(e)}function C4(e){return!Fn(e)}function S4(e){return!(e===47||tg(e))}function tg(e){return e===43||e===45||e===46||e===95||Ln(e)}function Q0(e){let t=e.length,n=!1;for(;t--;){const s=e[t][1];if((s.type==="labelLink"||s.type==="labelImage")&&!s._balanced){n=!0;break}if(s._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const bQ={tokenize:EQ,partial:!0};function vQ(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:NQ,continuation:{tokenize:CQ},exit:SQ}},text:{91:{name:"gfmFootnoteCall",tokenize:kQ},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:wQ,resolveTo:jQ}}}}function wQ(e,t,n){const s=this;let i=s.events.length;const a=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let o;for(;i--;){const c=s.events[i][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!o||!o._balanced)return n(c);const d=Ir(s.sliceSerialize({start:o.end,end:s.now()}));return d.codePointAt(0)!==94||!a.includes(d.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function jQ(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const s={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},l=[e[n+1],e[n+2],["enter",s,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",a,t],["enter",o,t],["exit",o,t],["exit",a,t],e[e.length-2],e[e.length-1],["exit",s,t]];return e.splice(n,e.length-n+1,...l),e}function kQ(e,t,n){const s=this,i=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let a=0,o;return l;function l(m){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(m),e.exit("gfmFootnoteCallLabelMarker"),c}function c(m){return m!==94?n(m):(e.enter("gfmFootnoteCallMarker"),e.consume(m),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",d)}function d(m){if(a>999||m===93&&!o||m===null||m===91||Ot(m))return n(m);if(m===93){e.exit("chunkString");const f=e.exit("gfmFootnoteCallString");return i.includes(Ir(s.sliceSerialize(f)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(m),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(m)}return Ot(m)||(o=!0),a++,e.consume(m),m===92?u:d}function u(m){return m===91||m===92||m===93?(e.consume(m),a++,d):d(m)}}function NQ(e,t,n){const s=this,i=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let a,o=0,l;return c;function c(x){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(x){return x===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",u):n(x)}function u(x){if(o>999||x===93&&!l||x===null||x===91||Ot(x))return n(x);if(x===93){e.exit("chunkString");const g=e.exit("gfmFootnoteDefinitionLabelString");return a=Ir(s.sliceSerialize(g)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),f}return Ot(x)||(l=!0),o++,e.consume(x),x===92?m:u}function m(x){return x===91||x===92||x===93?(e.consume(x),o++,u):u(x)}function f(x){return x===58?(e.enter("definitionMarker"),e.consume(x),e.exit("definitionMarker"),i.includes(a)||i.push(a),ft(e,p,"gfmFootnoteDefinitionWhitespace")):n(x)}function p(x){return t(x)}}function CQ(e,t,n){return e.check(xc,t,e.attempt(bQ,t,n))}function SQ(e){e.exit("gfmFootnoteDefinition")}function EQ(e,t,n){const s=this;return ft(e,i,"gfmFootnoteDefinitionIndent",5);function i(a){const o=s.events[s.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?t(a):n(a)}}function TQ(e){let n=(e||{}).singleTilde;const s={name:"strikethrough",tokenize:a,resolveAll:i};return n==null&&(n=!0),{text:{126:s},insideSpan:{null:[s]},attentionMarkers:{null:[126]}};function i(o,l){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let d=c;for(;d--;)if(o[d][0]==="exit"&&o[d][1].type==="strikethroughSequenceTemporary"&&o[d][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[d][1].end.offset-o[d][1].start.offset){o[c][1].type="strikethroughSequence",o[d][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},o[d][1].start),end:Object.assign({},o[c][1].end)},m={type:"strikethroughText",start:Object.assign({},o[d][1].end),end:Object.assign({},o[c][1].start)},f=[["enter",u,l],["enter",o[d][1],l],["exit",o[d][1],l],["enter",m,l]],p=l.parser.constructs.insideSpan.null;p&&nr(f,f.length,0,zh(p,o.slice(d+1,c),l)),nr(f,f.length,0,[["exit",m,l],["enter",o[c][1],l],["exit",o[c][1],l],["exit",u,l]]),nr(o,d-1,c-d+3,f),c=d+f.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function a(o,l,c){const d=this.previous,u=this.events;let m=0;return f;function f(x){return d===126&&u[u.length-1][1].type!=="characterEscape"?c(x):(o.enter("strikethroughSequenceTemporary"),p(x))}function p(x){const g=ao(d);if(x===126)return m>1?c(x):(o.consume(x),m++,p);if(m<2&&!n)return c(x);const b=o.exit("strikethroughSequenceTemporary"),w=ao(x);return b._open=!w||w===2&&!!g,b._close=!g||g===2&&!!w,l(x)}}}class IQ{constructor(){this.map=[]}add(t,n,s){PQ(this,t,n,s)}consume(t){if(this.map.sort(function(a,o){return a[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const s=[];for(;n>0;)n-=1,s.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];s.push(t.slice()),t.length=0;let i=s.pop();for(;i;){for(const a of i)t.push(a);i=s.pop()}this.map.length=0}}function PQ(e,t,n,s){let i=0;if(!(n===0&&s.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...s);return}i+=1}e.map.push([t,n,s])}}function AQ(e,t){let n=!1;const s=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&s.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const a=s.length-1;s[a]=s[a]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return s}function RQ(){return{flow:{null:{name:"table",tokenize:LQ,resolveAll:MQ}}}}function LQ(e,t,n){const s=this;let i=0,a=0,o;return l;function l(y){let O=s.events.length-1;for(;O>-1;){const A=s.events[O][1].type;if(A==="lineEnding"||A==="linePrefix")O--;else break}const _=O>-1?s.events[O][1].type:null,L=_==="tableHead"||_==="tableRow"?T:c;return L===T&&s.parser.lazy[s.now().line]?n(y):L(y)}function c(y){return e.enter("tableHead"),e.enter("tableRow"),d(y)}function d(y){return y===124||(o=!0,a+=1),u(y)}function u(y){return y===null?n(y):We(y)?a>1?(a=0,s.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(y),e.exit("lineEnding"),p):n(y):ut(y)?ft(e,u,"whitespace")(y):(a+=1,o&&(o=!1,i+=1),y===124?(e.enter("tableCellDivider"),e.consume(y),e.exit("tableCellDivider"),o=!0,u):(e.enter("data"),m(y)))}function m(y){return y===null||y===124||Ot(y)?(e.exit("data"),u(y)):(e.consume(y),y===92?f:m)}function f(y){return y===92||y===124?(e.consume(y),m):m(y)}function p(y){return s.interrupt=!1,s.parser.lazy[s.now().line]?n(y):(e.enter("tableDelimiterRow"),o=!1,ut(y)?ft(e,x,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(y):x(y))}function x(y){return y===45||y===58?b(y):y===124?(o=!0,e.enter("tableCellDivider"),e.consume(y),e.exit("tableCellDivider"),g):C(y)}function g(y){return ut(y)?ft(e,b,"whitespace")(y):b(y)}function b(y){return y===58?(a+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(y),e.exit("tableDelimiterMarker"),w):y===45?(a+=1,w(y)):y===null||We(y)?N(y):C(y)}function w(y){return y===45?(e.enter("tableDelimiterFiller"),k(y)):C(y)}function k(y){return y===45?(e.consume(y),k):y===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(y),e.exit("tableDelimiterMarker"),v):(e.exit("tableDelimiterFiller"),v(y))}function v(y){return ut(y)?ft(e,N,"whitespace")(y):N(y)}function N(y){return y===124?x(y):y===null||We(y)?!o||i!==a?C(y):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(y)):C(y)}function C(y){return n(y)}function T(y){return e.enter("tableRow"),E(y)}function E(y){return y===124?(e.enter("tableCellDivider"),e.consume(y),e.exit("tableCellDivider"),E):y===null||We(y)?(e.exit("tableRow"),t(y)):ut(y)?ft(e,E,"whitespace")(y):(e.enter("data"),P(y))}function P(y){return y===null||y===124||Ot(y)?(e.exit("data"),E(y)):(e.consume(y),y===92?R:P)}function R(y){return y===92||y===124?(e.consume(y),P):P(y)}}function MQ(e,t){let n=-1,s=!0,i=0,a=[0,0,0,0],o=[0,0,0,0],l=!1,c=0,d,u,m;const f=new IQ;for(;++n<e.length;){const p=e[n],x=p[1];p[0]==="enter"?x.type==="tableHead"?(l=!1,c!==0&&(Tv(f,t,c,d,u),u=void 0,c=0),d={type:"table",start:Object.assign({},x.start),end:Object.assign({},x.end)},f.add(n,0,[["enter",d,t]])):x.type==="tableRow"||x.type==="tableDelimiterRow"?(s=!0,m=void 0,a=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,u={type:"tableBody",start:Object.assign({},x.start),end:Object.assign({},x.end)},f.add(n,0,[["enter",u,t]])),i=x.type==="tableDelimiterRow"?2:u?3:1):i&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")?(s=!1,o[2]===0&&(a[1]!==0&&(o[0]=o[1],m=Wc(f,t,a,i,void 0,m),a=[0,0,0,0]),o[2]=n)):x.type==="tableCellDivider"&&(s?s=!1:(a[1]!==0&&(o[0]=o[1],m=Wc(f,t,a,i,void 0,m)),a=o,o=[a[1],n,0,0])):x.type==="tableHead"?(l=!0,c=n):x.type==="tableRow"||x.type==="tableDelimiterRow"?(c=n,a[1]!==0?(o[0]=o[1],m=Wc(f,t,a,i,n,m)):o[1]!==0&&(m=Wc(f,t,o,i,n,m)),i=0):i&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")&&(o[3]=n)}for(c!==0&&Tv(f,t,c,d,u),f.consume(t.events),n=-1;++n<t.events.length;){const p=t.events[n];p[0]==="enter"&&p[1].type==="table"&&(p[1]._align=AQ(t.events,n))}return e}function Wc(e,t,n,s,i,a){const o=s===1?"tableHeader":s===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(a.end=Object.assign({},Ta(t.events,n[0])),e.add(n[0],0,[["exit",a,t]]));const c=Ta(t.events,n[1]);if(a={type:o,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",a,t]]),n[2]!==0){const d=Ta(t.events,n[2]),u=Ta(t.events,n[3]),m={type:l,start:Object.assign({},d),end:Object.assign({},u)};if(e.add(n[2],0,[["enter",m,t]]),s!==2){const f=t.events[n[2]],p=t.events[n[3]];if(f[1].end=Object.assign({},p[1].end),f[1].type="chunkText",f[1].contentType="text",n[3]>n[2]+1){const x=n[2]+1,g=n[3]-n[2]-1;e.add(x,g,[])}}e.add(n[3]+1,0,[["exit",m,t]])}return i!==void 0&&(a.end=Object.assign({},Ta(t.events,i)),e.add(i,0,[["exit",a,t]]),a=void 0),a}function Tv(e,t,n,s,i){const a=[],o=Ta(t.events,n);i&&(i.end=Object.assign({},o),a.push(["exit",i,t])),s.end=Object.assign({},o),a.push(["exit",s,t]),e.add(n+1,0,a)}function Ta(e,t){const n=e[t],s=n[0]==="enter"?"start":"end";return n[1][s]}const DQ={name:"tasklistCheck",tokenize:OQ};function $Q(){return{text:{91:DQ}}}function OQ(e,t,n){const s=this;return i;function i(c){return s.previous!==null||!s._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),a)}function a(c){return Ot(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),o):n(c)}function o(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):n(c)}function l(c){return We(c)?t(c):ut(c)?e.check({tokenize:BQ},t,n)(c):n(c)}}function BQ(e,t,n){return ft(e,s,"whitespace");function s(i){return i===null?n(i):t(i)}}function _Q(e){return $N([dQ(),vQ(),TQ(e),RQ(),$Q()])}const FQ={};function qi(e){const t=this,n=e||FQ,s=t.data(),i=s.micromarkExtensions||(s.micromarkExtensions=[]),a=s.fromMarkdownExtensions||(s.fromMarkdownExtensions=[]),o=s.toMarkdownExtensions||(s.toMarkdownExtensions=[]);i.push(_Q(n)),a.push(aQ()),o.push(oQ(n))}const $n={table:"min-w-full border border-gray-300 border-collapse my-4",thead:"bg-gray-50",th:"border border-gray-300 px-4 py-2 text-left font-semibold",td:"border border-gray-300 px-4 py-2",ul:"list-disc pl-6 space-y-1 my-4",ol:"list-decimal pl-6 space-y-1 my-4",li:"pl-1",h1:"text-2xl font-bold mt-6 mb-4",h2:"text-xl font-bold mt-5 mb-3",h3:"text-lg font-bold mt-4 mb-2",p:"my-3",blockquote:"border-l-4 border-gray-200 pl-4 py-2 italic my-4",pre:"bg-gray-50 p-4 rounded my-4 overflow-x-auto",code:"bg-gray-50 p-1 rounded text-sm font-mono"},zQ="AIzaSyDLh0Md76lI4wZLgDrO9jAQemim6czJQE0",UQ="gemini-2.0-flash",Iv=`https://generativelanguage.googleapis.com/v1beta/models/${UQ}:generateContent?key=${zQ}`,VQ=()=>{var se;const{courseId:e}=or(),t=lr(),n=St();Ht();const{isAuthenticated:s,user:i}=Kn(),[a,o]=h.useState(null),[l,c]=h.useState(null),[d,u]=h.useState(null),[m,f]=h.useState(()=>{const G=window.history.state&&window.history.state.usr?window.history.state.usr:null;return G&&G.finishedCourse?100:0}),[p,x]=h.useState([]),[g,b]=h.useState(!0),[w,k]=h.useState(null),[v,N]=h.useState(!0),[C,T]=h.useState("video"),[E,P]=h.useState(!1),[R,y]=h.useState(null),[O,_]=h.useState(!1),L=h.useRef(null),A=h.useRef(null);h.useEffect(()=>{const W=new URLSearchParams(t.search).get("lessonId");W&&console.log("Lesson ID from URL:",W)},[t.search]),h.useEffect(()=>{t.state&&t.state.finishedCourse&&n(t.pathname+t.search,{replace:!0,state:{}}),s||(re.error("Vui lòng đăng nhập để truy cập khóa học"),n("/login",{state:{from:`/courses/${e}/learn`}}))},[s,e,n]);const M=G=>{if(!G)return null;let W={...G};if(typeof W.Requirements=="string")if(W.Requirements.startsWith("["))try{W.Requirements=JSON.parse(W.Requirements)}catch{W.Requirements=W.Requirements?[W.Requirements]:[]}else W.Requirements=W.Requirements?[W.Requirements]:[];if(typeof W.Objectives=="string")if(W.Objectives.startsWith("["))try{W.Objectives=JSON.parse(W.Objectives)}catch{W.Objectives=W.Objectives?[W.Objectives]:[]}else W.Objectives=W.Objectives?[W.Objectives]:[];return Array.isArray(W.Modules)||(W.Modules=[]),W};h.useEffect(()=>{e&&s&&(async()=>{try{if(b(!0),!e){k("ID khóa học không hợp lệ"),b(!1);return}const W=await bt.checkEnrollment(e);if(!W.success||!W.isEnrolled){k("Bạn chưa đăng ký khóa học này"),b(!1),n(`/courses/${e}`);return}const Z=await bt.getCourseDetails(e);if(!Z||!Z.success){k((Z==null?void 0:Z.message)||"Không thể tải thông tin khóa học"),b(!1);return}const Y=M(Z.data);o(Y),document.title=`Học: ${Y.Title} | Campust`;try{const ee=await bt.getUserCourseProgress(e);if(ee&&ee.success){const ae=ee.data;f(ae.overallProgress||0),x(ae.completedLessons||[]);const Re=new URLSearchParams(t.search).get("lessonId");if(Y.Modules&&Y.Modules.length>0)if(Re){let Be=null,Ge=null;for(const et of Y.Modules)if(et.Lessons){const lt=et.Lessons.find(Xe=>Xe.LessonID===Re||Xe.LessonID===parseInt(Re));if(lt){Be=lt,Ge=et;break}}Be&&Ge?(u(Be),c(Ge),T(z(Be))):ie(Y,ae.completedLessons)}else ie(Y,ae.completedLessons)}else{console.warn("Failed to load progress, using empty progress data:",ee==null?void 0:ee.message),f(0),x([]);const de=new URLSearchParams(t.search).get("lessonId");Y.Modules&&Y.Modules.length>0&&(de?X(Y,de):ie(Y,[]))}}catch(ee){console.error("Error loading progress:",ee),f(0),x([]);const de=new URLSearchParams(t.search).get("lessonId");Y.Modules&&Y.Modules.length>0&&(de?X(Y,de):ie(Y,[]))}}catch(W){console.error("Error loading course:",W),k("Có lỗi xảy ra khi tải thông tin khóa học. Vui lòng thử lại sau.")}finally{b(!1)}})()},[e,s,n,t.search]);const z=G=>{if(!G)return"text";const W=(G.Type||"").toString().toLowerCase(),Z=ye(G);return G.CodeExercise||G.codeExercise||G.Exercise,["coding","exercise","practice","code"].includes(W)?(setTimeout(()=>{window.location.href=`/courses/${e}/edit-code/${G.LessonID}`},100),"loading"):W==="video"?Z?"video":"text":W==="quiz"?"quiz":Z?"video":"text"},ie=(G,W=[])=>{if(!G.Modules||G.Modules.length===0)return;for(const Y of G.Modules)if(Y.Lessons&&Y.Lessons.length>0){for(const ee of Y.Lessons)if(!W.includes(ee.LessonID)){c(Y),u(ee),T(z(ee));return}}const Z=G.Modules[0];Z.Lessons&&Z.Lessons.length>0&&(c(Z),u(Z.Lessons[0]),T(z(Z.Lessons[0])))},X=(G,W)=>{let Z=null,Y=null;for(const ee of G.Modules)if(ee.Lessons){const ae=ee.Lessons.find(de=>de.LessonID===W||de.LessonID===parseInt(W));if(ae){Z=ae,Y=ee;break}}Z&&Y?(u(Z),c(Y),T(z(Z))):ie(G,[])},te=async()=>{if(d)try{if(p.includes(d.LessonID)){re.info("Bài học này đã được đánh dấu hoàn thành");return}const G=await bt.markLessonAsComplete(e,d.LessonID);if(G&&G.success){const W=[...p,d.LessonID];if(x(W),a&&a.Modules){let Z=0;a.Modules.forEach(ee=>{Z+=ee.Lessons?ee.Lessons.length:0});const Y=Math.round(W.length/Z*100);f(Y)}re.success("Đã đánh dấu bài học hoàn thành"),B()}else re.error((G==null?void 0:G.message)||"Không thể đánh dấu bài học hoàn thành")}catch(G){console.error("Error marking lesson as complete:",G),re.error("Có lỗi xảy ra khi đánh dấu bài học hoàn thành")}},B=()=>{if(!a||!l||!d)return;const G=a.Modules.findIndex(Z=>Z.ModuleID===l.ModuleID);if(G===-1)return;const W=l.Lessons.findIndex(Z=>Z.LessonID===d.LessonID);if(W!==-1){if(W<l.Lessons.length-1){const Z=l.Lessons[W+1];n(`/courses/${e}/learn?lessonId=${Z.LessonID}`);return}if(G<a.Modules.length-1){const Z=a.Modules[G+1];if(Z.Lessons&&Z.Lessons.length>0){n(`/courses/${e}/learn?lessonId=${Z.Lessons[0].LessonID}`);return}}re.success("Chúc mừng! Bạn đã hoàn thành khóa học.")}},H=()=>{if(!a||!l||!d)return;const G=a.Modules.findIndex(Z=>Z.ModuleID===l.ModuleID);if(G===-1)return;const W=l.Lessons.findIndex(Z=>Z.LessonID===d.LessonID);if(W!==-1){if(W>0){const Z=l.Lessons[W-1];n(`/courses/${e}/learn?lessonId=${Z.LessonID}`);return}if(G>0){const Z=a.Modules[G-1];if(Z.Lessons&&Z.Lessons.length>0){const Y=Z.Lessons[Z.Lessons.length-1];n(`/courses/${e}/learn?lessonId=${Y.LessonID}`);return}}}},K=(G,W)=>{c(G),u(W),T(z(W)),n(`/courses/${e}/learn?lessonId=${W.LessonID}`)},$=()=>{P(!E),E||N(!1)},me=async()=>{var G;if(d){_(!0),y(null);try{const W=d.Content||d.Description||`Video about ${d.Title} from ${a.Title}`,Z=`
        Tôi đang xem một video về: "${d.Title}" 
        từ khóa học "${a.Title}".
        
        Nội dung video:
        ${W}
        
        Vui lòng tạo một bản tóm tắt ngắn gọn, trọng tâm về nội dung video này bằng tiếng Việt.
        Tóm tắt nên bao gồm:
        - Điểm chính của video
        - Các khái niệm quan trọng
        - Kết luận hoặc điểm then chốt
        
        QUAN TRỌNG: Định dạng kết quả theo cú pháp Markdown để dễ đọc, sử dụng:
        - Các tiêu đề (# hoặc ##)
        - Các điểm đánh dấu (-)
        - In đậm (**) cho các từ khóa quan trọng
        - Tạo bảng để tổng hợp thông tin quan trọng, định dạng theo Markdown standard như sau:
          | Tiêu đề 1 | Tiêu đề 2 | Tiêu đề 3 |
          | --------- | --------- | --------- |
          | Nội dung 1 | Nội dung 2 | Nội dung 3 |
      `;console.log("Calling Gemini API with URL:",Iv);const Y=await De.post(Iv,{contents:[{parts:[{text:Z}]}],generationConfig:{temperature:.2,maxOutputTokens:800}},{headers:{"Content-Type":"application/json"}});if(console.log("Gemini API response:",Y.data),Y.data&&Y.data.candidates&&Y.data.candidates.length>0){const ee=Y.data.candidates[0].content.parts[0].text;y(ee)}else console.error("Unexpected Gemini API response format:",Y.data),re.error("Không thể tạo tóm tắt video. Vui lòng thử lại sau.")}catch(W){console.error("Error summarizing with Gemini API:",W),console.error("Error details:",((G=W.response)==null?void 0:G.data)||W.message),re.error("Lỗi khi tạo tóm tắt video. Vui lòng thử lại sau.")}finally{_(!1)}}},ke=G=>{if(!G)return G;try{const W=new URL(G),Z=W.hostname,Y=W.searchParams.get("list");if(Z==="youtu.be"){const ae=W.pathname.slice(1);return Y?`https://www.youtube.com/embed/${ae}?list=${Y}`:`https://www.youtube.com/embed/${ae}`}const ee=W.searchParams.get("v");if(ee)return Y?`https://www.youtube.com/embed/${ee}?list=${Y}`:`https://www.youtube.com/embed/${ee}`;if(W.pathname.startsWith("/shorts/")){const ae=W.pathname.split("/shorts/")[1].split(/[?&]/)[0];return Y?`https://www.youtube.com/embed/${ae}?list=${Y}`:`https://www.youtube.com/embed/${ae}`}return G}catch{return G}},ye=G=>{if(!G)return null;const W=G.VideoUrl||G.videoUrl||G.VideoURL;if(W)return W;if(typeof G.Content=="string"){const Z=G.Content.match(/https?:\/\/(?:www\.)?(?:youtube\.com\/[\w\-?=&%#./]+|youtu\.be\/[\w\-?=&%#./]+)/i);if(Z)return Z[0]}return null};return g?r.jsx("div",{className:"flex justify-center items-center h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):w?r.jsxs("div",{className:"flex flex-col items-center justify-center h-screen px-4",children:[r.jsx("div",{className:"bg-red-100 text-red-700 p-4 rounded-lg mb-4 max-w-md",children:r.jsx("p",{className:"font-medium",children:w})}),r.jsx("button",{onClick:()=>n("/courses"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Quay lại danh sách khóa học"})]}):!a||!l||!d?r.jsxs("div",{className:"flex flex-col items-center justify-center h-screen px-4",children:[r.jsx("div",{className:"bg-yellow-100 text-yellow-700 p-4 rounded-lg mb-4 max-w-md",children:r.jsx("p",{className:"font-medium",children:"Không tìm thấy thông tin bài học"})}),r.jsx("button",{onClick:()=>n(`/courses/${e}`),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Quay lại trang chi tiết khóa học"})]}):r.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[r.jsx("header",{className:`bg-white border-b border-gray-200 px-6 py-3 ${E?"hidden":""}`,children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("button",{onClick:()=>N(!v),className:"mr-4 text-gray-500 hover:text-gray-700 focus:outline-none",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),r.jsx(Ve,{to:"/courses",className:"text-gray-500 hover:text-blue-600 text-sm mr-4",children:"Khóa học"}),r.jsx("span",{className:"text-gray-400 mx-2",children:"/"}),r.jsx(Ve,{to:`/courses/${e}`,className:"text-gray-500 hover:text-blue-600 text-sm",children:a==null?void 0:a.Title})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"hidden md:block",children:r.jsx("div",{className:"bg-blue-50 rounded-full h-2 w-48",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${m}%`}})})}),r.jsxs("div",{className:"text-sm text-gray-600",children:[m,"% hoàn thành"]})]})]})}),r.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[r.jsx("aside",{className:`bg-white w-80 border-r border-gray-200 flex-shrink-0 transition-all duration-300 transform ${v&&!E?"translate-x-0":"-translate-x-full"} md:relative md:translate-x-0 ${E?"hidden md:hidden":""} absolute z-10 h-full`,children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200",children:[r.jsx("h2",{className:"font-bold text-lg truncate",children:a.Title}),r.jsxs("div",{className:"mt-2 flex items-center",children:[r.jsx("div",{className:"mr-4",children:r.jsx("div",{className:"bg-blue-50 rounded-full h-2 w-24",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${m}%`}})})}),r.jsxs("span",{className:"text-sm text-gray-600",children:[m,"%"]})]})]}),r.jsx("div",{className:"overflow-y-auto flex-1 py-2",children:a.Modules.map((G,W)=>r.jsxs("div",{className:"mb-2",children:[r.jsx("div",{className:"px-4 py-2 font-medium text-gray-700 flex items-center",children:r.jsxs("span",{children:[W+1,". ",G.Title]})}),r.jsx("div",{className:"space-y-1",children:G.Lessons&&G.Lessons.map((Z,Y)=>{const ee=d&&d.LessonID===Z.LessonID,ae=p.includes(Z.LessonID),de=Z.CodeExercise&&(Z.Type==="coding"||Z.Type==="exercise");return r.jsxs("button",{onClick:()=>K(G,Z),className:`pl-8 pr-4 py-2 w-full text-left flex items-center ${ee?"bg-blue-50 text-blue-700 border-l-4 border-blue-600 pl-7":"text-gray-600 hover:bg-gray-50"}`,children:[r.jsx("div",{className:"mr-3 flex-shrink-0",children:ae?r.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):r.jsx("div",{className:`w-5 h-5 border-2 rounded-full flex items-center justify-center
                                ${ee?"border-blue-600":"border-gray-300"}`,children:r.jsxs("span",{className:"text-xs",children:[W+1,".",Y+1]})})}),r.jsxs("div",{className:"flex-1 truncate text-sm",children:[Z.Title,r.jsxs("span",{className:"text-xs text-gray-400 ml-1",children:["(",Z.Duration||0," phút)"]})]}),Z.Quiz&&r.jsx("span",{className:"ml-2 flex-shrink-0",children:r.jsx("svg",{className:"w-4 h-4 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),de?r.jsx("span",{className:"ml-2 flex-shrink-0",children:r.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}):Z.CodeExercise?r.jsx("span",{className:"ml-2 flex-shrink-0",children:r.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})})}):null]},Z.LessonID||Y)})})]},G.ModuleID||W))}),r.jsx("div",{className:"p-4 border-t border-gray-200",children:r.jsxs(Ve,{to:`/courses/${e}`,className:"text-gray-500 hover:text-blue-600 flex items-center text-sm",children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 17l-5-5m0 0l5-5m-5 5h12"})}),"Quay lại trang khóa học"]})})]})}),r.jsx("main",{className:`flex-1 overflow-y-auto bg-white ${E?"p-0":""}`,children:r.jsxs("div",{className:`${E?"w-full h-full p-0 max-w-none":"w-full px-4 py-8"}`,children:[!E&&r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 max-w-7xl mx-auto",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold mb-2",children:[d==null?void 0:d.Title,(d==null?void 0:d.Type)==="coding"||(d==null?void 0:d.Type)==="exercise"?r.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Bài thực hành"}):null]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[r.jsxs("span",{children:["Module ",((se=a==null?void 0:a.Modules)==null?void 0:se.findIndex(G=>G.ModuleID===(l==null?void 0:l.ModuleID)))+1,": ",l==null?void 0:l.Title]}),r.jsx("span",{className:"mx-2",children:"•"}),r.jsxs("span",{children:[(d==null?void 0:d.Duration)||0," phút"]}),(d==null?void 0:d.Type)&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"mx-2",children:"•"}),r.jsx("span",{className:"capitalize",children:(d==null?void 0:d.Type)==="video"?"Video":(d==null?void 0:d.Type)==="text"?"Bài đọc":(d==null?void 0:d.Type)==="quiz"?"Trắc nghiệm":(d==null?void 0:d.Type)==="coding"||(d==null?void 0:d.Type)==="exercise"?"Thực hành":(d==null?void 0:d.Type)==="assignment"?"Bài tập":"Bài học"})]})]})]}),r.jsx("div",{className:"mt-4 md:mt-0",children:p.includes(d==null?void 0:d.LessonID)?r.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:[r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Đã hoàn thành"]}):r.jsxs("button",{onClick:te,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none",children:[r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Đánh dấu hoàn thành"]})})]}),r.jsx("div",{className:`${E?"w-full h-full":"w-full bg-white overflow-hidden mb-6"}`,children:r.jsxs("div",{ref:L,className:`${E?"p-0 h-full":"w-full"}`,children:[console.log("Rendering content with type:",C),console.log("Current lesson has CodeExercise:",!!(d!=null&&d.CodeExercise)||!!(d!=null&&d.codeExercise)||!!(d!=null&&d.Exercise)),C==="loading"?r.jsxs("div",{className:"flex justify-center items-center py-10",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"}),r.jsx("p",{className:"ml-3 text-gray-600",children:"Đang chuyển hướng..."})]}):C==="video"&&ye(d)?r.jsxs("div",{className:`${E?"w-full h-full":"w-full aspect-video"} relative mx-auto`,ref:A,children:[r.jsx("iframe",{title:d.Title,src:ke(ye(d)),className:"w-full h-full rounded-lg",frameBorder:"0",allowFullScreen:!0}),r.jsxs("div",{className:"absolute top-4 right-4 flex space-x-2",children:[r.jsx("button",{onClick:$,className:"p-2 bg-black bg-opacity-50 rounded-lg text-white hover:bg-opacity-70 transition-opacity",title:E?"Exit Fullscreen":"Fullscreen",children:E?r.jsx(Em,{className:"h-5 w-5"}):r.jsx(Zf,{className:"h-5 w-5"})}),r.jsx("button",{onClick:me,disabled:O,className:`p-2 bg-black bg-opacity-50 rounded-lg text-white hover:bg-opacity-70 transition-opacity ${O?"opacity-50 cursor-not-allowed":""}`,title:"Tóm tắt video với AI",children:r.jsx(Gs,{className:"h-5 w-5"})})]}),E&&r.jsx("button",{onClick:$,className:"absolute top-4 left-4 p-2 bg-black bg-opacity-50 rounded-lg text-white hover:bg-opacity-70 transition-opacity",children:r.jsx(Em,{className:"h-5 w-5"})})]}):C==="code"?r.jsxs("div",{className:"mb-6",children:[console.log("Rendering code editor with lesson:",d),r.jsx(HQ,{courseId:e,lessonId:d.LessonID,codeExercise:d.CodeExercise||d.codeExercise||d.Exercise,onComplete:()=>{if(!p.includes(d.LessonID)){const G=[...p,d.LessonID];if(x(G),a&&a.Modules){let W=0;a.Modules.forEach(Y=>{W+=Y.Lessons?Y.Lessons.length:0});const Z=Math.round(G.length/W*100);f(Z)}}},showControls:!1})]}):(d!=null&&d.CodeExercise||d!=null&&d.codeExercise||d!=null&&d.Exercise)&&!((d==null?void 0:d.Type)==="coding"||(d==null?void 0:d.Type)==="exercise")?r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-4",children:[r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm text-blue-700 font-medium",children:"Thông tin mã nguồn"}),r.jsx("p",{className:"text-sm text-blue-700 mt-1",children:'Bài học này có mã nguồn mẫu, nhưng không phải là bài thực hành. Trình soạn thảo mã chỉ hiển thị cho các bài được đánh dấu là bài thực hành trong cơ sở dữ liệu (có loại "coding" hoặc "exercise").'})]})]}),r.jsx("div",{className:"mt-3 prose max-w-none",dangerouslySetInnerHTML:{__html:d.Content||"<p>Không có nội dung cho bài học này.</p>"}})]})}):C==="quiz"&&(d!=null&&d.Quiz)?r.jsx("div",{className:"mb-6",children:r.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm text-yellow-700",children:"Tính năng quiz đang được phát triển. Vui lòng quay lại sau."})})]})})}):r.jsx("div",{className:"prose max-w-none mb-6",dangerouslySetInnerHTML:{__html:d.Content||"<p>Không có nội dung cho bài học này.</p>"}}),C==="video"&&!E&&r.jsx("div",{className:"mt-6 max-w-7xl mx-auto",children:O?r.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg flex items-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-500 mr-3"}),r.jsx("p",{children:"Đang tạo tóm tắt video với AI..."})]}):R?r.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[r.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center",children:[r.jsx(Gs,{className:"h-5 w-5 mr-2"}),"Tóm tắt nội dung video"]}),r.jsx("div",{className:"prose prose-sm max-w-none overflow-x-auto",children:r.jsx(ps,{remarkPlugins:[qi],components:{table:({node:G,...W})=>r.jsx("table",{className:$n.table,...W}),thead:({node:G,...W})=>r.jsx("thead",{className:$n.thead,...W}),th:({node:G,...W})=>r.jsx("th",{className:$n.th,...W}),td:({node:G,...W})=>r.jsx("td",{className:$n.td,...W}),ul:({node:G,...W})=>r.jsx("ul",{className:$n.ul,...W}),ol:({node:G,...W})=>r.jsx("ol",{className:$n.ol,...W}),li:({node:G,...W})=>r.jsx("li",{className:$n.li,...W}),h1:({node:G,...W})=>r.jsx("h1",{className:$n.h1,...W}),h2:({node:G,...W})=>r.jsx("h2",{className:$n.h2,...W}),h3:({node:G,...W})=>r.jsx("h3",{className:$n.h3,...W}),p:({node:G,...W})=>r.jsx("p",{className:$n.p,...W}),blockquote:({node:G,...W})=>r.jsx("blockquote",{className:$n.blockquote,...W}),pre:({node:G,...W})=>r.jsx("pre",{className:$n.pre,...W}),code:({inline:G,...W})=>G?r.jsx("code",{className:$n.code,...W}):r.jsx("code",{className:`block ${$n.pre}`,...W})},children:R})}),r.jsx("div",{className:"flex justify-end mt-4",children:r.jsx("button",{onClick:()=>y(null),className:"text-sm text-gray-600 hover:text-gray-800",children:"Ẩn tóm tắt"})})]}):r.jsx("div",{className:"flex justify-center",children:r.jsxs("button",{onClick:me,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none",children:[r.jsx(Gs,{className:"h-5 w-5 mr-2"}),"Tạo tóm tắt video với AI"]})})})]})}),!E&&(d==null?void 0:d.Resources)&&d.Resources.length>0&&r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6 max-w-7xl mx-auto",children:[r.jsx("h2",{className:"text-lg font-bold mb-4",children:"Tài liệu bổ sung"}),r.jsx("ul",{className:"space-y-2",children:d.Resources.map((G,W)=>r.jsxs("li",{className:"flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 text-blue-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("a",{href:G.Url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:G.Title||"Tài liệu"})]},W))})]}),!E&&r.jsxs("div",{className:"flex justify-between mt-8 max-w-7xl mx-auto",children:[r.jsxs("button",{onClick:H,className:"px-4 py-2 border border-gray-300 rounded-md flex items-center text-gray-700 hover:bg-gray-50",children:[r.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"Bài trước"]}),r.jsxs("button",{onClick:B,className:"px-4 py-2 bg-blue-600 text-white rounded-md flex items-center hover:bg-blue-700",children:["Bài tiếp theo",r.jsx("svg",{className:"w-5 h-5 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})]})]})})]}),E&&r.jsx("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-50",children:r.jsxs("button",{onClick:$,className:"px-4 py-2 bg-black bg-opacity-50 rounded-lg text-white flex items-center hover:bg-opacity-70 transition-opacity",children:[r.jsx(Em,{className:"h-5 w-5 mr-2"}),"Thoát chế độ toàn màn hình"]})})]})},HQ=({courseId:e,lessonId:t,codeExercise:n,onComplete:s,showControls:i=!0})=>{console.log("CodeExerciseEditor initialized with:",{courseId:e,lessonId:t,codeExercise:n});const a=n||{};console.log("Exercise data mapping:",a);const o=a.Language||a.language||a.ProgrammingLanguage||"javascript",[l,c]=h.useState(o),d=a.StartingCode||a.initialCode||a.InitialCode||"// Your code here",[u,m]=h.useState(d),[f,p]=h.useState(!1),[x,g]=h.useState(!1),[b,w]=h.useState(null),[k,v]=h.useState(!1);h.useEffect(()=>{if(n){const y=n.StartingCode||n.initialCode||n.InitialCode||"// Your code here",O=n.Language||n.language||n.ProgrammingLanguage||"javascript";m(y),c(O),w(null),console.log("CodeExerciseEditor updated with new exercise data:",{initialCode:y,language:O})}},[n]);const N=async()=>{var y,O;console.log("Running code"),p(!0),w(null);try{const _=n.ExerciseID||n.exerciseId||n.id||null,L=n.TestCases||n.testCases||n.tests||[];console.log("Running code with:",{code:u,language:l,exerciseId:_,testCases:L});const A=await De.post("/api/code-exercises/run",{code:u,language:l,exerciseId:_,tests:L});console.log("Run response:",A.data),w(A.data)}catch(_){console.error("Error running code:",_),w({success:!1,error:((O=(y=_.response)==null?void 0:y.data)==null?void 0:O.message)||"An error occurred while running your code"})}finally{p(!1)}},C=async()=>{var y,O;console.log("Submitting code"),g(!0);try{const _=n.ExerciseID||n.exerciseId||n.id||null;console.log("Submitting solution with:",{code:u,language:l,courseId:e,lessonId:t,exerciseId:_});const L=await De.post("/api/code-exercises/submit",{code:u,language:l,courseId:e,lessonId:t,exerciseId:_});console.log("Submit response:",L.data),L.data.success?(re.success("Exercise completed successfully!"),s&&s()):re.error(L.data.message||"Some tests failed. Please fix your code and try again."),w(L.data)}catch(_){console.error("Error submitting code:",_),re.error(((O=(y=_.response)==null?void 0:y.data)==null?void 0:O.message)||"An error occurred while submitting your code")}finally{g(!1)}},T=y=>{m(y)},E=()=>{v(!k),k||window.scrollTo(0,0)},P=k?{position:"fixed",top:0,left:0,right:0,bottom:0,height:"100vh",width:"100vw",zIndex:9999,margin:0,padding:0,border:"none",borderRadius:0}:{height:"400px",border:"1px solid #ddd",borderRadius:"6px",overflow:"hidden",marginBottom:"24px"},R=k?{backgroundColor:"#fff",padding:0}:{backgroundColor:"white",padding:"24px",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"};return r.jsxs("div",{style:R,children:[((n==null?void 0:n.Title)||(n==null?void 0:n.Description))&&r.jsxs("div",{className:"mb-4",children:[(n==null?void 0:n.Title)&&r.jsx("h3",{className:"text-lg font-semibold mb-2",children:n.Title}),(n==null?void 0:n.Description)&&r.jsx("p",{className:"text-gray-700",children:n.Description})]}),i&&r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"language",className:"block text-sm font-medium text-gray-700 mb-1",children:"Language"}),r.jsxs("select",{id:"language",value:l,onChange:y=>c(y.target.value),className:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[r.jsx("option",{value:"javascript",children:"JavaScript"}),r.jsx("option",{value:"python",children:"Python"}),r.jsx("option",{value:"java",children:"Java"}),r.jsx("option",{value:"csharp",children:"C#"}),r.jsx("option",{value:"cpp",children:"C++"})]})]}),r.jsxs("div",{style:P,children:[r.jsx("div",{className:"absolute top-2 right-2 z-[10000]",children:r.jsx("button",{onClick:E,className:"p-2 bg-black bg-opacity-50 rounded-lg text-white hover:bg-opacity-70 transition-opacity",children:k?r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5v-4m0 4h-4m4 0l-5-5"})})})}),r.jsx(wN,{code:u,language:l,onChange:T})]}),i&&!k&&r.jsxs("div",{className:"flex justify-between mb-6",children:[r.jsx("button",{onClick:N,disabled:f,className:`px-4 py-2 rounded-md text-sm font-medium ${f?"bg-gray-300 text-gray-700 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:f?"Running...":"Run Code"}),r.jsx("button",{onClick:C,disabled:x,className:`px-4 py-2 rounded-md text-sm font-medium ${x?"bg-gray-300 text-gray-700 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:x?"Submitting...":"Submit Solution"})]}),b&&!k&&r.jsxs("div",{className:"mt-4 border-t pt-4",children:[r.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Test Results"}),b.error?r.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4",children:[r.jsx("p",{className:"font-bold",children:"Error"}),r.jsx("p",{children:b.error})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`mb-4 p-4 rounded-md ${b.success?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:r.jsx("p",{className:"font-semibold",children:b.success?"All tests passed! Great job!":"Some tests failed. Review the results below."})}),b.tests&&r.jsx("div",{className:"space-y-3",children:b.tests.map((y,O)=>r.jsxs("div",{className:`p-3 rounded-md ${y.passed?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[r.jsxs("div",{className:"flex items-center",children:[y.passed?r.jsx(Zn,{className:"h-5 w-5 text-green-500 mr-2"}):r.jsx(Zo,{className:"h-5 w-5 text-red-500 mr-2"}),r.jsxs("p",{className:`font-medium ${y.passed?"text-green-800":"text-red-800"}`,children:["Test ",O+1,": ",y.name||"Test case"]})]}),!y.passed&&y.message&&r.jsx("p",{className:"mt-1 text-sm text-red-700",children:y.message}),y.input&&r.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:[r.jsx("span",{className:"font-medium",children:"Input:"})," ",y.input]}),y.expected&&r.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:[r.jsx("span",{className:"font-medium",children:"Expected:"})," ",y.expected]}),y.actual&&r.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:[r.jsx("span",{className:"font-medium",children:"Actual:"})," ",y.actual]})]},O))})]})]})]})},WQ=()=>{var me,ke,ye;const{courseId:e}=or(),t=St(),{isAuthenticated:n,user:s}=Kn(),i=lr(),a=new URLSearchParams(i.search),o=((me=i.state)==null?void 0:me.initialPaymentMethod)||a.get("method")||"vnpay",[l,c]=h.useState(o),[d,u]=h.useState(null),[m,f]=h.useState(!0),[p,x]=h.useState(null),[g,b]=h.useState(!1);h.useRef(null);const[w,k]=h.useState(""),[v,N]=h.useState(null),[C,T]=h.useState(null),[E,P]=h.useState(!1),[R,y]=h.useState(null),[O,_]=h.useState([]),[L,A]=h.useState(!0),M=se=>{if(se==null)return 0;const G=parseFloat(se);return isNaN(G)?0:G};h.useEffect(()=>{(async()=>{try{if(f(!0),!e){x("Không thể xác định khóa học"),f(!1);return}if(!n){t("/login",{state:{from:`/payment/${e}`}});return}const G=await bt.getCourseDetails(e);G.success&&G.data?u(G.data):x(G.message||"Không thể tải thông tin khóa học")}catch(G){x("Lỗi khi tải thông tin khóa học"),console.error("Course fetch error:",G)}finally{f(!1)}})()},[e,n,t]),h.useEffect(()=>{(async()=>{try{const W=await(await fetch("/api/vnpay/banks")).json();W.success?(_(W.data),W.data&&W.data.length>0&&k(W.data[0].code)):console.error("Failed to fetch VNPay banks:",W.message)}catch(G){console.error("Error fetching VNPay bank list:",G)}finally{A(!1)}})()},[]);const z=async()=>{var se,G;try{if(b(!0),l==="vnpay"){const W=await bt.createPayment(e,w);W.data&&W.data.success&&W.data.paymentUrl?(localStorage.setItem("pendingPayment",JSON.stringify({courseId:e,method:"vnpay",timestamp:new Date().getTime()})),window.location.href=W.data.paymentUrl):re.error("Không thể tạo liên kết thanh toán")}else if(l==="vietqr"){const W=await bt.createVietQRPayment(e);if(W&&W.data&&W.data.success&&W.data.data&&W.data.data.vietQRData){const{vietQRData:Z,transactionCode:Y}=W.data.data;t(`/payment/vietqr/${Y}`,{state:{vietQRData:Z,courseId:e,transactionCode:Y}})}else re.error("Không thể tạo thông tin thanh toán VietQR")}else l!=="paypal"&&re.info("Phương thức thanh toán này sẽ được hỗ trợ trong thời gian tới")}catch(W){console.error("Payment error:",W),re.error(((G=(se=W.response)==null?void 0:se.data)==null?void 0:G.message)||"Lỗi xử lý thanh toán")}finally{b(!1)}},ie=async()=>{var se,G;b(!0);try{const Z=(await bt.createPayPalOrder(e)).data.approveUrl;Z?window.location.href=Z:re.error("Không nhận được đường dẫn xác nhận PayPal")}catch(W){console.error("PayPal redirect error:",W),re.error(((G=(se=W.response)==null?void 0:se.data)==null?void 0:G.message)||"Không thể tạo đơn hàng PayPal")}finally{b(!1)}};h.useEffect(()=>()=>{R&&clearInterval(R)},[R]);const X=async()=>{if(!C){re.error("Không có mã giao dịch để xác minh");return}try{P(!0);const se=await bt.verifyVietQRPayment(C);se.data&&se.data.success&&se.data.data&&se.data.data.status==="completed"?(re.success("Thanh toán thành công!"),t(`/courses/${e}`)):re.info("Chưa nhận được thanh toán. Vui lòng thử lại sau.")}catch(se){console.error("Error verifying VietQR payment:",se),re.error("Lỗi xác nhận thanh toán. Vui lòng thử lại.")}finally{P(!1)}};if(m)return r.jsx(Ij,{});if(p||!d)return r.jsxs("div",{className:"text-center py-10",children:[r.jsx("p",{className:"text-red-500 mb-4",children:p||"Không tìm thấy khóa học"}),r.jsx("button",{onClick:()=>t("/courses"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Quay lại danh sách khóa học"})]});const te=M(d.Price),B=M(d.DiscountPrice),H=B>0?B:te,K=te>0&&B>0?te-B:0,$=te>0?Math.round(K/te*100):0;return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-6 flex items-center text-sm text-gray-500",children:[r.jsx(Ve,{to:"/",className:"hover:text-blue-600",children:"Trang chủ"}),r.jsx("span",{className:"mx-2",children:"/"}),r.jsx(Ve,{to:"/courses",className:"hover:text-blue-600",children:"Khóa học"}),r.jsx("span",{className:"mx-2",children:"/"}),r.jsx(Ve,{to:`/courses/${e}`,className:"hover:text-blue-600",children:d.Title}),r.jsx("span",{className:"mx-2",children:"/"}),r.jsx("span",{className:"text-gray-700",children:"Thanh toán"})]}),L?r.jsx("p",{children:"Loading bank list..."}):r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"VNPay Banks:"}),r.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600",children:O.map(se=>r.jsx("li",{className:"mb-1",children:r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"radio",name:"bankCode",value:se.code,checked:w===se.code,onChange:()=>k(se.code),className:"mr-2"}),se.code,": ",se.name]})},se.code))})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[r.jsxs("div",{className:"lg:w-2/3",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Thông tin đơn hàng"}),r.jsxs("div",{className:"flex items-start border-b pb-4 mb-4",children:[d.ImageUrl?r.jsx("img",{src:d.ImageUrl,alt:d.Title,className:"w-24 h-24 object-cover rounded-md mr-4",onError:se=>{se.target.onerror=null,se.target.src="https://placehold.co/600x400?text=Course+Image"}}):r.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-md mr-4 flex items-center justify-center",children:r.jsx("span",{className:"text-gray-500 text-xs",children:"Không có hình ảnh"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-lg mb-1",children:d.Title}),r.jsx("p",{className:"text-gray-600 text-sm mb-2",children:d.ShortDescription||((ke=d.Description)==null?void 0:ke.substring(0,100))||"Không có mô tả"}),r.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[r.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full text-xs mr-2",children:d.Level||"All Levels"}),r.jsxs("span",{children:[d.Duration||0," phút"]})]})]})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Giá gốc:"}),r.jsxs("span",{children:[te.toLocaleString()," VND"]})]}),K>0&&r.jsxs("div",{className:"flex justify-between text-green-600",children:[r.jsxs("span",{children:["Giảm giá (",$,"%):"]}),r.jsxs("span",{children:["- ",K.toLocaleString()," VND"]})]}),r.jsxs("div",{className:"flex justify-between font-bold text-lg pt-2 border-t",children:[r.jsx("span",{children:"Tổng thanh toán:"}),r.jsxs("span",{children:[H.toLocaleString()," VND"]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Phương thức thanh toán"}),r.jsxs("div",{className:"flex justify-center gap-6 mb-6",children:[r.jsxs("div",{className:`relative cursor-pointer p-3 rounded-lg transition-all flex items-center justify-center w-20 h-20 ${l==="vnpay"?"bg-blue-50 border-2 border-blue-500 shadow-md":"bg-white border hover:bg-gray-50"}`,onClick:()=>c("vnpay"),children:[r.jsx("img",{src:"https://cdn.haitrieu.com/wp-content/uploads/2022/10/Logo-VNPAY-QR.png",alt:"VNPAY",className:"max-h-12 max-w-12 object-contain"}),r.jsx("input",{type:"radio",name:"payment-method",value:"vnpay",checked:l==="vnpay",onChange:()=>c("vnpay"),className:"sr-only"}),l==="vnpay"&&r.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-500 rounded-full p-1",children:r.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})]}),r.jsxs("div",{className:`relative cursor-pointer p-3 rounded-lg transition-all flex items-center justify-center w-20 h-20 ${l==="vietqr"?"bg-blue-50 border-2 border-blue-500 shadow-md":"bg-white border hover:bg-gray-50"}`,onClick:()=>c("vietqr"),children:[r.jsx("img",{src:"https://play-lh.googleusercontent.com/22cJzF0otG-EmmQgILMRTWFPnx0wTCSDY9aFaAmOhHs30oNHxi63KcGwUwmbR76Msko",alt:"VietQR",className:"max-h-12 max-w-12 object-contain"}),r.jsx("input",{type:"radio",name:"payment-method",value:"vietqr",checked:l==="vietqr",onChange:()=>c("vietqr"),className:"sr-only"}),l==="vietqr"&&r.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-500 rounded-full p-1",children:r.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})]}),r.jsxs("div",{className:`relative cursor-pointer p-3 rounded-lg transition-all flex items-center justify-center w-20 h-20 ${l==="paypal"?"bg-blue-50 border-2 border-blue-500 shadow-md":"bg-white border hover:bg-gray-50"}`,onClick:()=>c("paypal"),children:[r.jsx("img",{src:"https://www.paypalobjects.com/webstatic/mktg/logo/pp_cc_mark_37x23.jpg",alt:"PayPal",className:"max-h-12 max-w-12 object-contain"}),r.jsx("input",{type:"radio",name:"payment-method",value:"paypal",checked:l==="paypal",onChange:()=>c("paypal"),className:"sr-only"}),l==="paypal"&&r.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-500 rounded-full p-1",children:r.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})]}),r.jsxs("div",{className:`relative cursor-pointer p-3 rounded-lg transition-all flex items-center justify-center w-20 h-20 ${l==="card"?"bg-blue-50 border-2 border-blue-500 shadow-md":"bg-white border hover:bg-gray-50"}`,onClick:()=>c("card"),children:[r.jsx("img",{src:"https://usa.visa.com/dam/VCOM/regional/ve/romania/blogs/hero-image/visa-logo-800x450.jpg",alt:"Visa",className:"max-h-12 max-w-12 object-contain"}),r.jsx("input",{type:"radio",name:"payment-method",value:"card",checked:l==="card",onChange:()=>c("card"),className:"sr-only"}),l==="card"&&r.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-500 rounded-full p-1",children:r.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})]}),r.jsxs("div",{className:`relative cursor-pointer p-3 rounded-lg transition-all flex items-center justify-center w-20 h-20 ${l==="momo"?"bg-blue-50 border-2 border-blue-500 shadow-md":"bg-white border hover:bg-gray-50"}`,onClick:()=>c("momo"),children:[r.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/vi/f/fe/MoMo_Logo.png",alt:"MoMo",className:"max-h-12 max-w-12 object-contain"}),r.jsx("input",{type:"radio",name:"payment-method",value:"momo",checked:l==="momo",onChange:()=>c("momo"),className:"sr-only"}),l==="momo"&&r.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-500 rounded-full p-1",children:r.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[l==="vnpay"&&r.jsx("div",{className:"text-sm text-gray-600",children:r.jsx("p",{children:"Thanh toán bằng VNPAY QR hoặc thẻ ATM/Visa/Mastercard thông qua cổng VNPAY"})}),l==="vietqr"&&r.jsx("div",{className:"text-sm text-gray-600",children:r.jsx("p",{children:"Thanh toán chuyển khoản ngân hàng bằng mã QR của VietQR"})}),l==="paypal"&&r.jsx("div",{className:"text-sm text-gray-600",children:r.jsx("p",{children:"Thanh toán an toàn với PayPal hoặc thẻ tín dụng quốc tế thông qua PayPal"})}),l==="card"&&r.jsx("div",{className:"text-sm text-gray-600",children:r.jsx("p",{children:"Thanh toán bằng thẻ Visa, Mastercard hoặc JCB"})}),l==="momo"&&r.jsx("div",{className:"text-sm text-gray-600",children:r.jsx("p",{children:"Thanh toán qua ví điện tử MoMo"})})]}),l==="vietqr"&&v?r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsxs("div",{className:"mb-4 text-center",children:[r.jsx("h3",{className:"font-semibold mb-2",children:"Quét mã QR để thanh toán"}),r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Sử dụng ứng dụng ngân hàng để quét mã QR và thanh toán"}),r.jsx("div",{className:"p-4 bg-white border rounded-lg shadow-sm",children:r.jsx("img",{src:v.qrImageUrl,alt:"VietQR Payment",className:"max-w-full h-auto"})})]}),r.jsxs("div",{className:"w-full bg-gray-100 p-4 rounded-md mb-4",children:[r.jsx("h4",{className:"font-medium mb-2",children:"Thông tin chuyển khoản"}),r.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Ngân hàng:"}),r.jsx("span",{className:"font-medium",children:v.bankName})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Số tài khoản:"}),r.jsx("span",{className:"font-medium",children:v.bankAccount})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Tên tài khoản:"}),r.jsx("span",{className:"font-medium",children:v.accountName})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Số tiền:"}),r.jsxs("span",{className:"font-medium",children:[(ye=v.amount)==null?void 0:ye.toLocaleString()," VND"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Nội dung chuyển khoản:"}),r.jsx("span",{className:"font-medium",children:v.description})]})]})]}),r.jsx("button",{onClick:X,disabled:E,className:`w-full py-3 text-white rounded-lg ${E?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,children:E?r.jsxs("span",{className:"flex items-center justify-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Đang xác minh thanh toán..."]}):"Tôi đã thanh toán"})]}):l==="paypal"?r.jsx("button",{onClick:ie,disabled:g,className:`w-full py-3 text-white rounded-lg ${g?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:g?r.jsxs("span",{className:"flex items-center justify-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Đang chuyển hướng..."]}):"Thanh toán với PayPal"}):l==="vietqr"&&!v?r.jsx("button",{onClick:z,disabled:g,className:`w-full py-3 text-white rounded-lg ${g?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:g?r.jsxs("span",{className:"flex items-center justify-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Đang tạo mã thanh toán..."]}):"Tạo mã QR để thanh toán"}):r.jsx("button",{onClick:z,disabled:g,className:`w-full py-3 text-white rounded-lg ${g?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:g?r.jsxs("span",{className:"flex items-center justify-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Đang xử lý..."]}):`Thanh toán qua ${l==="vnpay"?"VNPAY":l==="card"?"Thẻ tín dụng":l==="momo"?"MoMo":"Khác"}`})]})]}),r.jsx("div",{className:"lg:w-1/3",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 sticky top-6",children:[r.jsx("h2",{className:"text-lg font-bold mb-4",children:"Thông tin khóa học"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"font-medium text-gray-700 mb-2",children:"Bạn sẽ nhận được:"}),r.jsxs("ul",{className:"space-y-2",children:[r.jsxs("li",{className:"flex items-start",children:[r.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),r.jsx("span",{children:"Truy cập trọn đời vào khóa học"})]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),r.jsx("span",{children:"Học theo tốc độ của riêng bạn"})]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),r.jsx("span",{children:"Giấy chứng nhận hoàn thành"})]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),r.jsx("span",{children:"Hỗ trợ kỹ thuật từ giảng viên"})]})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"font-medium text-gray-700 mb-2",children:"Chính sách hoàn tiền:"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Chúng tôi cam kết hoàn tiền 100% trong vòng 30 ngày nếu bạn không hài lòng với khóa học."})]}),r.jsxs("div",{className:"border-t mt-4 pt-4",children:[r.jsx("h3",{className:"font-medium text-gray-700 mb-2",children:"Cần hỗ trợ?"}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Liên hệ với chúng tôi qua email ",r.jsx("a",{href:"mailto:support@campust.edu.vn",className:"text-blue-600",children:"support@campust.edu.vn"})," hoặc hotline ",r.jsx("span",{className:"text-blue-600",children:"1800-6868"})]})]})]})})]})]})};var Wh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},qh=typeof window>"u"||"Deno"in globalThis;function jr(){}function qQ(e,t){return typeof e=="function"?e(t):e}function KQ(e){return typeof e=="number"&&e>=0&&e!==1/0}function GQ(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ng(e,t){return typeof e=="function"?e(t):e}function XQ(e,t){return typeof e=="function"?e(t):e}function Pv(e,t){const{type:n="all",exact:s,fetchStatus:i,predicate:a,queryKey:o,stale:l}=e;if(o){if(s){if(t.queryHash!==J0(o,t.options))return!1}else if(!Bl(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||i&&i!==t.state.fetchStatus||a&&!a(t))}function Av(e,t){const{exact:n,status:s,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(Ol(t.options.mutationKey)!==Ol(a))return!1}else if(!Bl(t.options.mutationKey,a))return!1}return!(s&&t.state.status!==s||i&&!i(t))}function J0(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ol)(e)}function Ol(e){return JSON.stringify(e,(t,n)=>rg(n)?Object.keys(n).sort().reduce((s,i)=>(s[i]=n[i],s),{}):n)}function Bl(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Bl(e[n],t[n])):!1}function E4(e,t){if(e===t)return e;const n=Rv(e)&&Rv(t);if(n||rg(e)&&rg(t)){const s=n?e:Object.keys(e),i=s.length,a=n?t:Object.keys(t),o=a.length,l=n?[]:{},c=new Set(s);let d=0;for(let u=0;u<o;u++){const m=n?u:a[u];(!n&&c.has(m)||n)&&e[m]===void 0&&t[m]===void 0?(l[m]=void 0,d++):(l[m]=E4(e[m],t[m]),l[m]===e[m]&&e[m]!==void 0&&d++)}return i===o&&d===i?e:l}return t}function Rv(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function rg(e){if(!Lv(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Lv(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Lv(e){return Object.prototype.toString.call(e)==="[object Object]"}function YQ(e){return new Promise(t=>{setTimeout(t,e)})}function QQ(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?E4(e,t):t}function JQ(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function ZQ(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var Z0=Symbol();function T4(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Z0?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Mi,zs,Wa,Nw,eJ=(Nw=class extends Wh{constructor(){super();yt(this,Mi);yt(this,zs);yt(this,Wa);rt(this,Wa,t=>{if(!qh&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){xe(this,zs)||this.setEventListener(xe(this,Wa))}onUnsubscribe(){var t;this.hasListeners()||((t=xe(this,zs))==null||t.call(this),rt(this,zs,void 0))}setEventListener(t){var n;rt(this,Wa,t),(n=xe(this,zs))==null||n.call(this),rt(this,zs,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){xe(this,Mi)!==t&&(rt(this,Mi,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof xe(this,Mi)=="boolean"?xe(this,Mi):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Mi=new WeakMap,zs=new WeakMap,Wa=new WeakMap,Nw),I4=new eJ,qa,Us,Ka,Cw,tJ=(Cw=class extends Wh{constructor(){super();yt(this,qa,!0);yt(this,Us);yt(this,Ka);rt(this,Ka,t=>{if(!qh&&window.addEventListener){const n=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){xe(this,Us)||this.setEventListener(xe(this,Ka))}onUnsubscribe(){var t;this.hasListeners()||((t=xe(this,Us))==null||t.call(this),rt(this,Us,void 0))}setEventListener(t){var n;rt(this,Ka,t),(n=xe(this,Us))==null||n.call(this),rt(this,Us,t(this.setOnline.bind(this)))}setOnline(t){xe(this,qa)!==t&&(rt(this,qa,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return xe(this,qa)}},qa=new WeakMap,Us=new WeakMap,Ka=new WeakMap,Cw),gu=new tJ;function nJ(){let e,t;const n=new Promise((i,a)=>{e=i,t=a});n.status="pending",n.catch(()=>{});function s(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{s({status:"fulfilled",value:i}),e(i)},n.reject=i=>{s({status:"rejected",reason:i}),t(i)},n}function rJ(e){return Math.min(1e3*2**e,3e4)}function P4(e){return(e??"online")==="online"?gu.isOnline():!0}var A4=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function gf(e){return e instanceof A4}function R4(e){let t=!1,n=0,s=!1,i;const a=nJ(),o=g=>{var b;s||(f(new A4(g)),(b=e.abort)==null||b.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>I4.isFocused()&&(e.networkMode==="always"||gu.isOnline())&&e.canRun(),u=()=>P4(e.networkMode)&&e.canRun(),m=g=>{var b;s||(s=!0,(b=e.onSuccess)==null||b.call(e,g),i==null||i(),a.resolve(g))},f=g=>{var b;s||(s=!0,(b=e.onError)==null||b.call(e,g),i==null||i(),a.reject(g))},p=()=>new Promise(g=>{var b;i=w=>{(s||d())&&g(w)},(b=e.onPause)==null||b.call(e)}).then(()=>{var g;i=void 0,s||(g=e.onContinue)==null||g.call(e)}),x=()=>{if(s)return;let g;const b=n===0?e.initialPromise:void 0;try{g=b??e.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(m).catch(w=>{var T;if(s)return;const k=e.retry??(qh?0:3),v=e.retryDelay??rJ,N=typeof v=="function"?v(n,w):v,C=k===!0||typeof k=="number"&&n<k||typeof k=="function"&&k(n,w);if(t||!C){f(w);return}n++,(T=e.onFail)==null||T.call(e,n,w),YQ(N).then(()=>d()?void 0:p()).then(()=>{t?f(w):x()})})};return{promise:a,cancel:o,continue:()=>(i==null||i(),a),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?x():p().then(x),a)}}var sJ=e=>setTimeout(e,0);function iJ(){let e=[],t=0,n=l=>{l()},s=l=>{l()},i=sJ;const a=l=>{t?e.push(l):i(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&i(()=>{s(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{i=l}}}var _n=iJ(),Di,Sw,L4=(Sw=class{constructor(){yt(this,Di)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),KQ(this.gcTime)&&rt(this,Di,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(qh?1/0:5*60*1e3))}clearGcTimeout(){xe(this,Di)&&(clearTimeout(xe(this,Di)),rt(this,Di,void 0))}},Di=new WeakMap,Sw),Ga,$i,mr,Oi,Tn,Kl,Bi,kr,as,Ew,aJ=(Ew=class extends L4{constructor(t){super();yt(this,kr);yt(this,Ga);yt(this,$i);yt(this,mr);yt(this,Oi);yt(this,Tn);yt(this,Kl);yt(this,Bi);rt(this,Bi,!1),rt(this,Kl,t.defaultOptions),this.setOptions(t.options),this.observers=[],rt(this,Oi,t.client),rt(this,mr,xe(this,Oi).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,rt(this,Ga,lJ(this.options)),this.state=t.state??xe(this,Ga),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=xe(this,Tn))==null?void 0:t.promise}setOptions(t){this.options={...xe(this,Kl),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&xe(this,mr).remove(this)}setData(t,n){const s=QQ(this.state.data,t,this.options);return Sn(this,kr,as).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){Sn(this,kr,as).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var s,i;const n=(s=xe(this,Tn))==null?void 0:s.promise;return(i=xe(this,Tn))==null||i.cancel(t),n?n.then(jr).catch(jr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(xe(this,Ga))}isActive(){return this.observers.some(t=>XQ(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Z0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ng(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!GQ(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=xe(this,Tn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=xe(this,Tn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),xe(this,mr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(xe(this,Tn)&&(xe(this,Bi)?xe(this,Tn).cancel({revert:!0}):xe(this,Tn).cancelRetry()),this.scheduleGc()),xe(this,mr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Sn(this,kr,as).call(this,{type:"invalidate"})}fetch(t,n){var d,u,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(xe(this,Tn))return xe(this,Tn).continueRetry(),xe(this,Tn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const s=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(rt(this,Bi,!0),s.signal)})},a=()=>{const f=T4(this.options,n),x=(()=>{const g={client:xe(this,Oi),queryKey:this.queryKey,meta:this.meta};return i(g),g})();return rt(this,Bi,!1),this.options.persister?this.options.persister(f,x,this):f(x)},l=(()=>{const f={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:xe(this,Oi),state:this.state,fetchFn:a};return i(f),f})();(d=this.options.behavior)==null||d.onFetch(l,this),rt(this,$i,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&Sn(this,kr,as).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta});const c=f=>{var p,x,g,b;gf(f)&&f.silent||Sn(this,kr,as).call(this,{type:"error",error:f}),gf(f)||((x=(p=xe(this,mr).config).onError)==null||x.call(p,f,this),(b=(g=xe(this,mr).config).onSettled)==null||b.call(g,this.state.data,f,this)),this.scheduleGc()};return rt(this,Tn,R4({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:f=>{var p,x,g,b;if(f===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(w){c(w);return}(x=(p=xe(this,mr).config).onSuccess)==null||x.call(p,f,this),(b=(g=xe(this,mr).config).onSettled)==null||b.call(g,f,this.state.error,this),this.scheduleGc()},onError:c,onFail:(f,p)=>{Sn(this,kr,as).call(this,{type:"failed",failureCount:f,error:p})},onPause:()=>{Sn(this,kr,as).call(this,{type:"pause"})},onContinue:()=>{Sn(this,kr,as).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),xe(this,Tn).start()}},Ga=new WeakMap,$i=new WeakMap,mr=new WeakMap,Oi=new WeakMap,Tn=new WeakMap,Kl=new WeakMap,Bi=new WeakMap,kr=new WeakSet,as=function(t){const n=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...oJ(s.data,this.options),fetchMeta:t.meta??null};case"success":return rt(this,$i,void 0),{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return gf(i)&&i.revert&&xe(this,$i)?{...xe(this,$i),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),_n.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),xe(this,mr).notify({query:this,type:"updated",action:t})})},Ew);function oJ(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:P4(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function lJ(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Fr,Tw,cJ=(Tw=class extends Wh{constructor(t={}){super();yt(this,Fr);this.config=t,rt(this,Fr,new Map)}build(t,n,s){const i=n.queryKey,a=n.queryHash??J0(i,n);let o=this.get(a);return o||(o=new aJ({client:t,queryKey:i,queryHash:a,options:t.defaultQueryOptions(n),state:s,defaultOptions:t.getQueryDefaults(i)}),this.add(o)),o}add(t){xe(this,Fr).has(t.queryHash)||(xe(this,Fr).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=xe(this,Fr).get(t.queryHash);n&&(t.destroy(),n===t&&xe(this,Fr).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){_n.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return xe(this,Fr).get(t)}getAll(){return[...xe(this,Fr).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(s=>Pv(n,s))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(s=>Pv(t,s)):n}notify(t){_n.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){_n.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){_n.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Fr=new WeakMap,Tw),zr,On,_i,Ur,$s,Iw,dJ=(Iw=class extends L4{constructor(t){super();yt(this,Ur);yt(this,zr);yt(this,On);yt(this,_i);this.mutationId=t.mutationId,rt(this,On,t.mutationCache),rt(this,zr,[]),this.state=t.state||uJ(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){xe(this,zr).includes(t)||(xe(this,zr).push(t),this.clearGcTimeout(),xe(this,On).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){rt(this,zr,xe(this,zr).filter(n=>n!==t)),this.scheduleGc(),xe(this,On).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){xe(this,zr).length||(this.state.status==="pending"?this.scheduleGc():xe(this,On).remove(this))}continue(){var t;return((t=xe(this,_i))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,o,l,c,d,u,m,f,p,x,g,b,w,k,v,N,C,T,E,P;const n=()=>{Sn(this,Ur,$s).call(this,{type:"continue"})};rt(this,_i,R4({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(R,y)=>{Sn(this,Ur,$s).call(this,{type:"failed",failureCount:R,error:y})},onPause:()=>{Sn(this,Ur,$s).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>xe(this,On).canRun(this)}));const s=this.state.status==="pending",i=!xe(this,_i).canStart();try{if(s)n();else{Sn(this,Ur,$s).call(this,{type:"pending",variables:t,isPaused:i}),await((o=(a=xe(this,On).config).onMutate)==null?void 0:o.call(a,t,this));const y=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));y!==this.state.context&&Sn(this,Ur,$s).call(this,{type:"pending",context:y,variables:t,isPaused:i})}const R=await xe(this,_i).start();return await((u=(d=xe(this,On).config).onSuccess)==null?void 0:u.call(d,R,t,this.state.context,this)),await((f=(m=this.options).onSuccess)==null?void 0:f.call(m,R,t,this.state.context)),await((x=(p=xe(this,On).config).onSettled)==null?void 0:x.call(p,R,null,this.state.variables,this.state.context,this)),await((b=(g=this.options).onSettled)==null?void 0:b.call(g,R,null,t,this.state.context)),Sn(this,Ur,$s).call(this,{type:"success",data:R}),R}catch(R){try{throw await((k=(w=xe(this,On).config).onError)==null?void 0:k.call(w,R,t,this.state.context,this)),await((N=(v=this.options).onError)==null?void 0:N.call(v,R,t,this.state.context)),await((T=(C=xe(this,On).config).onSettled)==null?void 0:T.call(C,void 0,R,this.state.variables,this.state.context,this)),await((P=(E=this.options).onSettled)==null?void 0:P.call(E,void 0,R,t,this.state.context)),R}finally{Sn(this,Ur,$s).call(this,{type:"error",error:R})}}finally{xe(this,On).runNext(this)}}},zr=new WeakMap,On=new WeakMap,_i=new WeakMap,Ur=new WeakSet,$s=function(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),_n.batch(()=>{xe(this,zr).forEach(s=>{s.onMutationUpdate(t)}),xe(this,On).notify({mutation:this,type:"updated",action:t})})},Iw);function uJ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var os,Nr,Gl,Pw,hJ=(Pw=class extends Wh{constructor(t={}){super();yt(this,os);yt(this,Nr);yt(this,Gl);this.config=t,rt(this,os,new Set),rt(this,Nr,new Map),rt(this,Gl,0)}build(t,n,s){const i=new dJ({mutationCache:this,mutationId:++jc(this,Gl)._,options:t.defaultMutationOptions(n),state:s});return this.add(i),i}add(t){xe(this,os).add(t);const n=qc(t);if(typeof n=="string"){const s=xe(this,Nr).get(n);s?s.push(t):xe(this,Nr).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(xe(this,os).delete(t)){const n=qc(t);if(typeof n=="string"){const s=xe(this,Nr).get(n);if(s)if(s.length>1){const i=s.indexOf(t);i!==-1&&s.splice(i,1)}else s[0]===t&&xe(this,Nr).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=qc(t);if(typeof n=="string"){const s=xe(this,Nr).get(n),i=s==null?void 0:s.find(a=>a.state.status==="pending");return!i||i===t}else return!0}runNext(t){var s;const n=qc(t);if(typeof n=="string"){const i=(s=xe(this,Nr).get(n))==null?void 0:s.find(a=>a!==t&&a.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){_n.batch(()=>{xe(this,os).forEach(t=>{this.notify({type:"removed",mutation:t})}),xe(this,os).clear(),xe(this,Nr).clear()})}getAll(){return Array.from(xe(this,os))}find(t){const n={exact:!0,...t};return this.getAll().find(s=>Av(n,s))}findAll(t={}){return this.getAll().filter(n=>Av(t,n))}notify(t){_n.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return _n.batch(()=>Promise.all(t.map(n=>n.continue().catch(jr))))}},os=new WeakMap,Nr=new WeakMap,Gl=new WeakMap,Pw);function qc(e){var t;return(t=e.options.scope)==null?void 0:t.id}function Mv(e){return{onFetch:(t,n)=>{var u,m,f,p,x;const s=t.options,i=(f=(m=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:m.fetchMore)==null?void 0:f.direction,a=((p=t.state.data)==null?void 0:p.pages)||[],o=((x=t.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const b=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},w=T4(t.options,t.fetchOptions),k=async(v,N,C)=>{if(g)return Promise.reject();if(N==null&&v.pages.length)return Promise.resolve(v);const E=(()=>{const O={client:t.client,queryKey:t.queryKey,pageParam:N,direction:C?"backward":"forward",meta:t.options.meta};return b(O),O})(),P=await w(E),{maxPages:R}=t.options,y=C?ZQ:JQ;return{pages:y(v.pages,P,R),pageParams:y(v.pageParams,N,R)}};if(i&&a.length){const v=i==="backward",N=v?mJ:Dv,C={pages:a,pageParams:o},T=N(s,C);l=await k(C,T,v)}else{const v=e??a.length;do{const N=c===0?o[0]??s.initialPageParam:Dv(s,l);if(c>0&&N==null)break;l=await k(l,N),c++}while(c<v)}return l};t.options.persister?t.fetchFn=()=>{var g,b;return(b=(g=t.options).persister)==null?void 0:b.call(g,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function Dv(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function mJ(e,{pages:t,pageParams:n}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,n[0],n):void 0}var Zt,Vs,Hs,Xa,Ya,Ws,Qa,Ja,Aw,fJ=(Aw=class{constructor(e={}){yt(this,Zt);yt(this,Vs);yt(this,Hs);yt(this,Xa);yt(this,Ya);yt(this,Ws);yt(this,Qa);yt(this,Ja);rt(this,Zt,e.queryCache||new cJ),rt(this,Vs,e.mutationCache||new hJ),rt(this,Hs,e.defaultOptions||{}),rt(this,Xa,new Map),rt(this,Ya,new Map),rt(this,Ws,0)}mount(){jc(this,Ws)._++,xe(this,Ws)===1&&(rt(this,Qa,I4.subscribe(async e=>{e&&(await this.resumePausedMutations(),xe(this,Zt).onFocus())})),rt(this,Ja,gu.subscribe(async e=>{e&&(await this.resumePausedMutations(),xe(this,Zt).onOnline())})))}unmount(){var e,t;jc(this,Ws)._--,xe(this,Ws)===0&&((e=xe(this,Qa))==null||e.call(this),rt(this,Qa,void 0),(t=xe(this,Ja))==null||t.call(this),rt(this,Ja,void 0))}isFetching(e){return xe(this,Zt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return xe(this,Vs).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=xe(this,Zt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=xe(this,Zt).build(this,t),s=n.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(ng(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return xe(this,Zt).findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),i=xe(this,Zt).get(s.queryHash),a=i==null?void 0:i.state.data,o=qQ(t,a);if(o!==void 0)return xe(this,Zt).build(this,s).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return _n.batch(()=>xe(this,Zt).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=xe(this,Zt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=xe(this,Zt);_n.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=xe(this,Zt);return _n.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},s=_n.batch(()=>xe(this,Zt).findAll(e).map(i=>i.cancel(n)));return Promise.all(s).then(jr).catch(jr)}invalidateQueries(e,t={}){return _n.batch(()=>(xe(this,Zt).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},s=_n.batch(()=>xe(this,Zt).findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,n);return n.throwOnError||(a=a.catch(jr)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(s).then(jr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=xe(this,Zt).build(this,t);return n.isStaleByTime(ng(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(jr).catch(jr)}fetchInfiniteQuery(e){return e.behavior=Mv(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(jr).catch(jr)}ensureInfiniteQueryData(e){return e.behavior=Mv(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return gu.isOnline()?xe(this,Vs).resumePausedMutations():Promise.resolve()}getQueryCache(){return xe(this,Zt)}getMutationCache(){return xe(this,Vs)}getDefaultOptions(){return xe(this,Hs)}setDefaultOptions(e){rt(this,Hs,e)}setQueryDefaults(e,t){xe(this,Xa).set(Ol(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...xe(this,Xa).values()],n={};return t.forEach(s=>{Bl(e,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(e,t){xe(this,Ya).set(Ol(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...xe(this,Ya).values()],n={};return t.forEach(s=>{Bl(e,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...xe(this,Hs).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=J0(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Z0&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...xe(this,Hs).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){xe(this,Zt).clear(),xe(this,Vs).clear()}},Zt=new WeakMap,Vs=new WeakMap,Hs=new WeakMap,Xa=new WeakMap,Ya=new WeakMap,Ws=new WeakMap,Qa=new WeakMap,Ja=new WeakMap,Aw),M4=h.createContext(void 0),pJ=e=>{const t=h.useContext(M4);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},gJ=({client:e,children:t})=>(h.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(M4.Provider,{value:e,children:t})),D4={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},$v=Fe.createContext&&Fe.createContext(D4),xJ=["attr","size","title"];function yJ(e,t){if(e==null)return{};var n=bJ(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function bJ(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function xu(){return xu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},xu.apply(this,arguments)}function Ov(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function yu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ov(Object(n),!0).forEach(function(s){vJ(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ov(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function vJ(e,t,n){return t=wJ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wJ(e){var t=jJ(e,"string");return typeof t=="symbol"?t:t+""}function jJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $4(e){return e&&e.map((t,n)=>Fe.createElement(t.tag,yu({key:n},t.attr),$4(t.child)))}function Ns(e){return t=>Fe.createElement(kJ,xu({attr:yu({},e.attr)},t),$4(e.child))}function kJ(e){var t=n=>{var{attr:s,size:i,title:a}=e,o=yJ(e,xJ),l=i||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),Fe.createElement("svg",xu({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,o,{className:c,style:yu(yu({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&Fe.createElement("title",null,a),e.children)};return $v!==void 0?Fe.createElement($v.Consumer,null,n=>t(n)):t(D4)}function NJ(e){return Ns({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},child:[]}]})(e)}function CJ(e){return Ns({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"},child:[]}]})(e)}function SJ(e){return Ns({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"},child:[]}]})(e)}const xf=()=>{const[e,t]=h.useState(!0),[n,s]=h.useState(null),[i,a]=h.useState(""),[o,l]=h.useState(null),[c,d]=h.useState(""),[u,m]=h.useState(null),f=St(),p=lr(),x=pJ(),g=Ht(),{isAuthenticated:b}=Kn();h.useEffect(()=>{if(!b&&!localStorage.getItem("token")){f("/login",{replace:!0});return}const v=new URLSearchParams(p.search),N=v.get("status"),C=v.get("message"),T=v.get("courseId"),E=v.get("transactionId"),P=v.get("PayerID")||v.get("payerId");s(N),a(C||""),l(T),m(E),(async()=>{try{if(t(!0),N==="success"&&T){try{await bt.processPayPalSuccess({transactionId:E,PayerID:P,courseId:T}),console.log("Backend confirmed PayPal payment success")}catch(y){console.error("Backend confirmation for PayPal success failed:",y),re.error("Không thể xác thực thanh toán. Vui lòng kiểm tra lại lịch sử giao dịch.")}try{await g(yr()).unwrap(),console.log("Successfully fetched enrolled courses after payment")}catch(y){console.error("Error fetching enrolled courses:",y)}try{const y=await bt.getCourseDetails(T);y&&y.success&&(d(y.data.Title||"Khóa học"),g(Ig(y.data)),console.log(`Course ${T} added to enrolled courses list`))}catch(y){console.error("Error fetching course details:",y)}x.invalidateQueries(["enrolledCourses"]),re.success("Đăng ký khóa học thành công!"),setTimeout(()=>{g(yr())},2e3)}else if((N==="cancel"||N==="error")&&E)try{await bt.processPayPalCancel(E),console.log("Backend recorded PayPal cancellation")}catch(y){console.error("Failed to notify backend about cancellation:",y)}}catch(y){console.error("Error processing payment result:",y),a(y.message||"Đã xảy ra lỗi khi xử lý kết quả thanh toán"),N==="success"&&s("error")}finally{t(!1)}})()},[b,p.search,f,g,x]);const w=(v=!1)=>{o&&f(`/courses/${o}`,{state:{paymentSuccess:v,timestamp:Date.now()},replace:!0})},k=()=>{o&&f(`/courses/${o}/learn`)};return h.useEffect(()=>{if(e)return;let v;return n==="success"?v=setTimeout(()=>w(!0),5e3):(n==="cancel"||n==="error"||i!=null&&i.toLowerCase().includes("cancel"))&&(v=setTimeout(()=>{o?w(!1):f("/courses")},5e3)),()=>clearTimeout(v)},[e,n,o,i]),e?r.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-50",children:r.jsxs("div",{className:"w-full max-w-lg bg-white p-8 rounded-lg shadow-lg text-center",children:[r.jsx("div",{className:"animate-spin mx-auto h-12 w-12 border-4 border-blue-500 border-t-transparent rounded-full"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Đang xử lý kết quả thanh toán..."})]})}):r.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-50 py-10",children:r.jsx("div",{className:"w-full max-w-lg bg-white p-8 rounded-lg shadow-lg",children:n==="success"?r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-green-100",children:r.jsx(NJ,{className:"h-10 w-10 text-green-500"})}),r.jsx("h2",{className:"mt-4 text-xl font-bold text-gray-800",children:"Thanh toán thành công"}),r.jsxs("p",{className:"mt-2 text-gray-600",children:['Cảm ơn bạn đã đăng ký khóa học "',c||"Khóa học",'"']}),u&&r.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Mã giao dịch: ",u]}),r.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"Bạn sẽ được chuyển hướng đến trang khóa học đã đăng ký sau 5 giây."}),r.jsxs("div",{className:"mt-6 space-y-3",children:[r.jsxs("button",{onClick:k,className:"w-full flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-blue-600 hover:bg-blue-700",children:["Học ngay",r.jsx(SJ,{className:"ml-2"})]}),r.jsx("button",{onClick:()=>w(!0),className:"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm text-base font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Xem chi tiết khóa học"})]})]}):r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-red-100",children:r.jsx(CJ,{className:"h-10 w-10 text-red-500"})}),r.jsx("h2",{className:"mt-4 text-xl font-bold text-gray-800",children:"Thanh toán không thành công"}),r.jsx("p",{className:"mt-2 text-gray-600",children:i?`Lỗi: ${i.replace(/_/g," ")}`:"Đã xảy ra lỗi trong quá trình thanh toán"}),r.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"Bạn sẽ được chuyển hướng về trang khóa học trong 5 giây."}),r.jsx("div",{className:"mt-6",children:r.jsx("button",{onClick:()=>w(!1),className:"w-full px-4 py-2 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-blue-600 hover:bg-blue-700",children:"Quay lại chi tiết khóa học"})})]})})})},EJ=()=>{const e=St(),{isAuthenticated:t}=Kn(),[n,s]=h.useState([]),[i,a]=h.useState(!0),[o,l]=h.useState(null),[c,d]=h.useState("CreatedAt"),[u,m]=h.useState("desc"),[f,p]=h.useState("all");h.useEffect(()=>{if(!t){re.info("Bạn cần đăng nhập để xem lịch sử thanh toán"),e("/login",{state:{from:"/payment-history"}});return}(async()=>{try{a(!0);const T=await bt.getPaymentHistory();T.data&&T.data.success?s(T.data.data||[]):l("Không thể tải lịch sử thanh toán")}catch(T){console.error("Error fetching payment history:",T),l("Đã xảy ra lỗi khi tải lịch sử thanh toán")}finally{a(!1)}})()},[t,e]);const x=C=>C?new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(C):"0 ₫",g=C=>{if(!C)return"N/A";const T=new Date(C);return new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(T)},b=C=>{const T=(C==null?void 0:C.toLowerCase())||"";return T==="completed"||T==="success"?r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:"Thành công"}):T==="pending"||T==="processing"?r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800",children:"Đang xử lý"}):T==="failed"||T==="error"?r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800",children:"Thất bại"}):T==="cancelled"?r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800",children:"Đã hủy"}):r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800",children:C||"Không xác định"})},w=C=>{c===C?m(u==="asc"?"desc":"asc"):(d(C),m("asc"))},k=C=>c!==C?r.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}):u==="asc"?r.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})}):r.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})}),v=n.filter(C=>{if(f==="all")return!0;const T=(C.PaymentStatus||C.Status||"").toLowerCase();return f==="completed"?T==="completed"||T==="success":f==="pending"?T==="pending"||T==="processing":f==="failed"?T==="failed"||T==="error"||T==="cancelled":!0}).sort((C,T)=>{let E=C[c],P=T[c];return c==="CreatedAt"||c==="UpdatedAt"?(E=new Date(E||0).getTime(),P=new Date(P||0).getTime()):c==="Amount"?(E=parseFloat(E||0),P=parseFloat(P||0)):(E=(E==null?void 0:E.toString())||"",P=(P==null?void 0:P.toString())||""),u==="asc"?E>P?1:-1:E<P?1:-1}),N=()=>r.jsx("div",{className:"animate-pulse space-y-4",children:Array(5).fill(0).map((C,T)=>r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded-md w-1/4 mb-4"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded-md w-1/2 mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded-md w-3/4 mb-2"}),r.jsxs("div",{className:"flex justify-between mt-4",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded-md w-20"}),r.jsx("div",{className:"h-6 bg-gray-200 rounded-md w-28"})]})]},`skeleton-${T}`))});return r.jsxs("div",{className:"bg-gray-50 min-h-screen pb-12",children:[r.jsx("div",{className:"bg-white border-b border-gray-200 mb-6",children:r.jsxs("div",{className:"container mx-auto px-4 py-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Lịch sử thanh toán"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Xem lịch sử thanh toán và đăng ký khóa học của bạn"})]}),r.jsxs("button",{onClick:()=>e("/courses"),className:"flex items-center gap-2 px-4 py-2 text-blue-600 hover:text-blue-800",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Quay lại khóa học"]})]}),r.jsxs("div",{className:"flex flex-wrap gap-3 mt-6",children:[r.jsx("button",{onClick:()=>p("all"),className:`px-4 py-2 rounded-md text-sm font-medium ${f==="all"?"bg-blue-50 text-blue-700 border border-blue-200":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"}`,children:"Tất cả"}),r.jsx("button",{onClick:()=>p("completed"),className:`px-4 py-2 rounded-md text-sm font-medium ${f==="completed"?"bg-green-50 text-green-700 border border-green-200":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"}`,children:"Thành công"}),r.jsx("button",{onClick:()=>p("pending"),className:`px-4 py-2 rounded-md text-sm font-medium ${f==="pending"?"bg-yellow-50 text-yellow-700 border border-yellow-200":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"}`,children:"Đang xử lý"}),r.jsx("button",{onClick:()=>p("failed"),className:`px-4 py-2 rounded-md text-sm font-medium ${f==="failed"?"bg-red-50 text-red-700 border border-red-200":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"}`,children:"Thất bại"})]})]})}),r.jsx("div",{className:"container mx-auto px-4 py-6",children:i?N():o?r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[r.jsx("div",{className:"bg-red-100 p-4 rounded-full inline-flex mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:o}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Thử lại"})]}):v.length===0?r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[r.jsx("div",{className:"bg-blue-100 p-4 rounded-full inline-flex mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Không tìm thấy lịch sử thanh toán"}),r.jsx("p",{className:"text-gray-600",children:f==="all"?"Bạn chưa có giao dịch nào. Hãy đăng ký khóa học để bắt đầu học tập.":"Không tìm thấy giao dịch nào phù hợp với bộ lọc đã chọn."}),r.jsx("button",{onClick:()=>e("/courses"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Khám phá khóa học"})]}):r.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>w("Course.Title"),children:r.jsxs("div",{className:"flex items-center gap-1",children:["Khóa học",k("Course.Title")]})}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>w("Amount"),children:r.jsxs("div",{className:"flex items-center gap-1",children:["Số tiền",k("Amount")]})}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>w("PaymentMethod"),children:r.jsxs("div",{className:"flex items-center gap-1",children:["Phương thức",k("PaymentMethod")]})}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>w("PaymentStatus"),children:r.jsxs("div",{className:"flex items-center gap-1",children:["Trạng thái",k("PaymentStatus")]})}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>w("CreatedAt"),children:r.jsxs("div",{className:"flex items-center gap-1",children:["Ngày",k("CreatedAt")]})}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hành động"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(C=>{var T;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"flex items-center",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:((T=C.Course)==null?void 0:T.Title)||"Không có thông tin khóa học"}),r.jsxs("div",{className:"text-xs text-gray-500",children:["Mã GD: ",C.TransactionCode||C.TransactionID]})]})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:x(C.Amount)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"text-sm text-gray-900",children:[C.PaymentMethod==="vnpay"&&"VNPay",C.PaymentMethod==="credit_card"&&"Thẻ tín dụng",C.PaymentMethod==="paypal"&&"PayPal",C.PaymentMethod==="free"&&"Miễn phí",C.PaymentMethod==="vietqr"&&"VietQR",!C.PaymentMethod&&"Không xác định"]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b(C.PaymentStatus||C.Status)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g(C.CreatedAt)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:C.Course&&r.jsx("button",{onClick:()=>e(`/courses/${C.CourseID}`),className:"text-blue-600 hover:text-blue-900",children:"Xem khóa học"})})]},C.TransactionID)})})]})})})})]})},TJ=({status:e})=>{const t={upcoming:{label:"Sắp diễn ra",class:"bg-white text-blue-700 border border-blue-200 shadow-sm"},ongoing:{label:"Đang diễn ra",class:"bg-white text-purple-700 border border-purple-200 shadow-sm"},completed:{label:"Đã kết thúc",class:"bg-white text-gray-700 border border-gray-200 shadow-sm"},cancelled:{label:"Đã hủy",class:"bg-white text-red-700 border border-red-200 shadow-sm"}},n=t[e]||t.upcoming;return r.jsx("span",{className:`inline-flex px-2.5 py-1 rounded-md text-xs font-medium ${n.class}`,children:n.label})},IJ=()=>r.jsxs("div",{className:"bg-white rounded-xl overflow-hidden animate-pulse border border-gray-100 shadow-sm hover:shadow-md transition-all duration-300 h-full flex flex-col",children:[r.jsx("div",{className:"aspect-video bg-gradient-to-br from-gray-100 to-gray-200 relative"}),r.jsxs("div",{className:"p-5 space-y-3 flex-1 flex flex-col",children:[r.jsx("div",{className:"h-4 bg-gray-100 rounded-md w-1/2 mb-1"}),r.jsx("div",{className:"h-5 bg-gray-200 rounded-md w-4/5"}),r.jsx("div",{className:"h-4 bg-gray-100 rounded-md w-full"}),r.jsx("div",{className:"h-4 bg-gray-100 rounded-md w-2/3"}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx("div",{className:"h-4 w-4 rounded-full bg-gray-200"}),r.jsx("div",{className:"h-3 bg-gray-100 rounded-md w-12"}),r.jsx("div",{className:"h-4 w-4 rounded-full bg-gray-200"}),r.jsx("div",{className:"h-3 bg-gray-100 rounded-md w-16"})]}),r.jsxs("div",{className:"mt-auto pt-4 flex justify-between items-center border-t border-gray-100 mt-3",children:[r.jsx("div",{className:"h-5 bg-gray-200 rounded-md w-16"}),r.jsx("div",{className:"h-8 bg-gray-200 rounded-md w-20"})]})]})]}),Bv=()=>Array(6).fill(0).map((e,t)=>r.jsx(IJ,{},`skeleton-${t}`)),PJ=()=>{const e=St(),t=Ht(),[n,s]=h.useState(!1),[i,a]=h.useState("all"),[o,l]=h.useState(""),[c,d]=h.useState("grid"),[u,m]=h.useState(!1),f=h.useRef(null),p=h.useRef(null),{scrollY:x}=DH();N1(x,[0,100],[1,.95]),N1(x,[0,100],[1,.98]);const{events:g=[],loading:b=!1,error:w=null,filters:k={}}=gn(y=>y.event||{});h.useEffect(()=>{(async()=>{try{const _=await t(Ko(k)).unwrap()}catch(_){console.error("Error loading events:",_)}})();const O=_=>{f.current&&!f.current.contains(_.target)&&s(!1),p.current&&!p.current.contains(_.target)&&m(!1)};return document.addEventListener("mousedown",O),()=>{document.removeEventListener("mousedown",O)}},[t,k]);const v=(y,O)=>{t(qx({[y]:O}))},N=y=>new Date(y).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}),C=Array.isArray(g)?g:[],T=C.filter(y=>i==="all"||y.Category===i).filter(y=>{var O,_;return!o||y.Title.toLowerCase().includes(o.toLowerCase())||((O=y.Organizer)==null?void 0:O.toLowerCase().includes(o.toLowerCase()))||((_=y.Location)==null?void 0:_.toLowerCase().includes(o.toLowerCase()))}),E=y=>{if(!y){console.error("Invalid event ID");return}t(sj()),e(`/events/${y}`)},P=()=>{t(qx({})),a("all"),l("")},R=[...new Set(C.map(y=>y.Category))].filter(Boolean);return b?r.jsxs("div",{className:"bg-gray-50 min-h-screen pb-12",children:[r.jsx("div",{className:"bg-white border-b border-gray-200 mb-6",children:r.jsxs("div",{className:"container mx-auto px-4 py-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Khám phá sự kiện"}),r.jsx("div",{className:"animate-pulse mt-6",children:r.jsx("div",{className:"h-10 bg-gray-200 rounded-md w-full max-w-3xl"})})]})}),r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsxs("div",{className:"mb-8 animate-pulse",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded-md w-1/4 mb-2"}),r.jsx("div",{className:"h-4 bg-gray-100 rounded-md w-16"})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Bv()})]})]}):w?r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx(zt,{className:"w-16 h-16 text-red-500 mb-4"}),r.jsx("h3",{className:"text-xl font-medium text-gray-700 mb-2",children:"Đã xảy ra lỗi"}),r.jsx("p",{className:"text-gray-500 mb-6",children:typeof w=="string"?w:w.message}),r.jsxs("button",{className:"text-purple-600 hover:text-purple-700 flex items-center",onClick:()=>t(Ko(k)),children:[r.jsx(WI,{className:"w-5 h-5 mr-2"}),"Thử lại"]})]})}):r.jsxs("div",{className:"bg-gray-50 min-h-screen pb-12",children:[r.jsx("div",{className:"bg-white border-b border-gray-200 mb-6",children:r.jsxs("div",{className:"container mx-auto px-4 py-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Khám phá sự kiện"}),r.jsxs("div",{className:"flex justify-between items-center mt-6",children:[r.jsxs("div",{className:"flex space-x-6 overflow-x-auto",children:[r.jsx("button",{onClick:()=>a("all"),className:`px-4 py-2 font-medium rounded-md ${i==="all"?"bg-blue-50 text-blue-600":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:"Tất cả"}),R.map(y=>r.jsx("button",{onClick:()=>a(y),className:`px-4 py-2 font-medium rounded-md ${i===y?"bg-blue-50 text-blue-600":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:y},y))]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:k.difficulty||"all",onChange:y=>v("difficulty",y.target.value),className:"px-4 py-2 rounded-md text-sm font-medium border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white appearance-none",children:[r.jsx("option",{value:"all",children:"Mọi độ khó"}),r.jsx("option",{value:"beginner",children:"Beginner"}),r.jsx("option",{value:"intermediate",children:"Intermediate"}),r.jsx("option",{value:"advanced",children:"Advanced"}),r.jsx("option",{value:"expert",children:"Expert"})]}),r.jsx(Jo,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500 pointer-events-none"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",value:o,onChange:y=>l(y.target.value),placeholder:"Tìm kiếm sự kiện...",className:"w-64 px-4 py-2 rounded-md text-sm border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx("svg",{className:"w-4 h-4 text-gray-400 absolute right-3 top-1/2 -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})]})]})}),r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:b?Bv():T.map((y,O)=>r.jsx(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:O*.05},className:`group cursor-pointer ${c==="list"?"flex":""}`,onClick:()=>E(y.EventID),children:r.jsxs("div",{className:"bg-white border border-gray-100 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300 h-full flex flex-col",children:[r.jsx("div",{className:"relative overflow-hidden",children:r.jsx("img",{src:y.ImageUrl||"https://images.unsplash.com/photo-1540575467063-178a50c2df87?auto=format&fit=crop&w=800&q=60",alt:y.Title,className:"w-full aspect-video object-cover object-center group-hover:scale-105 transition-transform duration-500"})}),r.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 leading-snug line-clamp-2",children:y.Title}),r.jsx(TJ,{status:y.Status})]}),r.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:y.Description||"Tham gia sự kiện này để có cơ hội giao lưu học hỏi và mở rộng kiến thức trong lĩnh vực này."}),r.jsxs("div",{className:"text-xs text-gray-500 mt-auto space-y-1",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("span",{children:N(y.EventDate)})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),r.jsx("span",{children:y.Difficulty||"Trung Bình"})]})]})]})]})},y.EventID))}),T.length===0&&r.jsx("div",{className:"col-span-full py-12 text-center",children:r.jsxs("div",{className:"bg-white rounded-xl p-8 max-w-md mx-auto shadow-sm",children:[r.jsx("div",{className:"bg-gray-50 rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",children:r.jsx(o8,{className:"w-10 h-10 text-gray-400"})}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Không tìm thấy sự kiện"}),r.jsx("p",{className:"text-gray-600 mb-6",children:o?`Không có sự kiện nào phù hợp với từ khóa "${o}". Vui lòng thử tìm kiếm với từ khóa khác.`:"Hiện tại chưa có sự kiện nào trong danh mục này. Hãy thử danh mục khác!"}),o?r.jsx("button",{onClick:()=>l(""),className:"px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors shadow-sm",children:"Xóa tìm kiếm"}):r.jsx("button",{onClick:P,className:"px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors shadow-sm",children:"Xóa bộ lọc"})]})})]})]})},AJ={beginner:"bg-green-100 text-green-800",intermediate:"bg-yellow-100 text-yellow-800",advanced:"bg-orange-100 text-orange-800",expert:"bg-red-100 text-red-800"},RJ={upcoming:"bg-blue-100 text-blue-800",ongoing:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"},LJ=()=>{const{eventId:e}=or(),t=St(),n=Ht(),[s,i]=h.useState(!0),[a,o]=h.useState(null),[l,c]=h.useState("description"),{isAuthenticated:d}=Kn(),u=gn(b=>b.event.currentEvent),m=gn(b=>b.event.isRegistered);h.useEffect(()=>((async()=>{var w,k;if(!e){o("Event ID không hợp lệ"),i(!1);return}try{i(!0),o(null),console.log("Fetching event details for ID:",e);const v=await n($a(e)).unwrap();if(console.log("Successfully fetched event details:",v),!v){o("Sự kiện không tồn tại");return}d&&await n(od(e))}catch(v){console.error("Error loading event detail:",v),((w=v.response)==null?void 0:w.status)===404?o("Sự kiện không tồn tại"):((k=v.response)==null?void 0:k.status)===401?o("Vui lòng đăng nhập để xem chi tiết sự kiện"):o(v.message||"Không thể tải thông tin sự kiện")}finally{i(!1)}})(),()=>{n(sj())}),[e,n,d]);const f=b=>{if(!b)return"";try{return new Date(b).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(w){return console.error("Error formatting date:",w),b}},p=b=>{if(!b)return"";try{return b.substring(0,5)}catch(w){return console.error("Error formatting time:",w),b}},x=async()=>{if(!d){t("/login",{state:{returnUrl:`/events/${e}`}});return}try{i(!0),console.log("Registering for event with ID:",e);const w=await n(tj({eventId:e,userData:{teamName:""}})).unwrap();console.log("Registration result:",w),n(bm({isRegistered:!0,registrationInfo:{EventID:e}})),alert(w.message||"Đăng ký tham gia sự kiện thành công!"),await n($a(e)).unwrap()}catch(b){console.error("Registration error:",b),b.message==="Bạn đã đăng ký sự kiện này"&&n(bm({isRegistered:!0,registrationInfo:{EventID:e}})),alert(b.message||"Đăng ký thất bại. Vui lòng thử lại sau.")}finally{i(!1)}},g=async()=>{if(!d){t("/login",{state:{returnUrl:`/events/${e}`}});return}try{i(!0),console.log("Cancelling registration for event with ID:",e);const b=await n(nj(e)).unwrap();console.log("Cancellation result:",b),n(bm({isRegistered:!1,registrationInfo:null})),alert(b.message||"Hủy đăng ký sự kiện thành công!"),await n($a(e)).unwrap()}catch(b){console.error("Cancellation error:",b),alert(b.message||"Hủy đăng ký thất bại. Vui lòng thử lại sau.")}finally{i(!1)}};return s?r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):a?r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:a}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Vui lòng kiểm tra lại đường dẫn hoặc thử lại sau"}),r.jsx("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",onClick:()=>t("/events"),children:"Quay lại danh sách sự kiện"})]})}):u?r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("button",{onClick:()=>t("/events"),className:"flex items-center px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[r.jsx(zd,{className:"h-5 w-5 mr-2"}),r.jsx("span",{children:"Quay lại danh sách sự kiện"})]})}),r.jsxs("div",{className:"relative h-96 rounded-xl overflow-hidden mb-8",children:[r.jsx("img",{src:u.ImageUrl||"/default-event.jpg",alt:u.Title,className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute top-4 right-4",children:r.jsx("span",{className:`px-4 py-2 rounded-full ${RJ[u.Status]||"bg-gray-100 text-gray-800"}`,children:u.Status})})]}),r.jsx("div",{className:"mb-8 border-b border-gray-200",children:r.jsxs("nav",{className:"flex space-x-8","aria-label":"Tabs",children:[r.jsx("button",{onClick:()=>c("description"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="description"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Mô tả sự kiện"}),r.jsx("button",{onClick:()=>c("schedule"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="schedule"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Lịch trình"}),r.jsx("button",{onClick:()=>c("prizes"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="prizes"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Giải thưởng"}),r.jsx("button",{onClick:()=>c("tech"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="tech"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Công nghệ & Ngôn ngữ"})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:u.Title}),l==="description"&&r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[r.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Mô tả sự kiện"}),r.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:u.Description||"Không có mô tả"})]}),l==="schedule"&&r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Lịch trình"}),u.schedule&&u.schedule.length>0?r.jsx("div",{className:"space-y-4",children:u.schedule.map((b,w)=>r.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[r.jsx(ir,{className:"h-6 w-6 text-gray-500 mt-1"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:b.ActivityName}),r.jsxs("p",{className:"text-gray-600",children:[f(b.StartTime)," ",p(b.StartTime)," - ",p(b.EndTime)]}),r.jsx("p",{className:"text-gray-600",children:b.Location}),r.jsx("p",{className:"text-gray-600 mt-2",children:b.Description})]})]},w))}):r.jsx("p",{className:"text-gray-500 italic",children:"Chưa có lịch trình chi tiết cho sự kiện này"})]}),l==="prizes"&&r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Giải thưởng"}),u.prizes&&u.prizes.length>0?r.jsx("div",{className:"space-y-4",children:u.prizes.map((b,w)=>r.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[r.jsx(Hd,{className:"h-6 w-6 text-yellow-500 mt-1"}),r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold",children:["Hạng ",b.Rank]}),r.jsx("p",{className:"text-gray-800 font-medium",children:b.PrizeAmount?`${b.PrizeAmount.toLocaleString("vi-VN")} VND`:""}),r.jsx("p",{className:"text-gray-600 mt-1",children:b.Description})]})]},w))}):r.jsx("p",{className:"text-gray-500 italic",children:"Chưa có thông tin về giải thưởng"})]}),l==="tech"&&r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Công nghệ & Ngôn ngữ lập trình"}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("h3",{className:"text-lg font-medium mb-3 flex items-center",children:[r.jsx(to,{className:"h-5 w-5 mr-2 text-blue-500"}),"Ngôn ngữ lập trình"]}),u.languages&&u.languages.length>0?r.jsx("div",{className:"flex flex-wrap gap-2",children:u.languages.map((b,w)=>r.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:b.Language},w))}):r.jsx("p",{className:"text-gray-500 italic",children:"Chưa có thông tin ngôn ngữ lập trình"})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-medium mb-3 flex items-center",children:[r.jsx(yj,{className:"h-5 w-5 mr-2 text-indigo-500"}),"Công nghệ sử dụng"]}),u.technologies&&u.technologies.length>0?r.jsx("div",{className:"flex flex-wrap gap-2",children:u.technologies.map((b,w)=>r.jsx("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm",children:b.Technology},w))}):r.jsx("p",{className:"text-gray-500 italic",children:"Chưa có thông tin công nghệ"})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Thông tin chi tiết"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Qi,{className:"h-5 w-5 text-gray-500 mr-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Thời gian"}),r.jsxs("p",{className:"font-medium",children:[f(u.EventDate)," ",p(u.EventTime)]})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ui,{className:"h-5 w-5 text-gray-500 mr-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Địa điểm"}),r.jsx("p",{className:"font-medium",children:u.Location||"Chưa cập nhật"})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(vs,{className:"h-5 w-5 text-gray-500 mr-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Số lượng người tham gia"}),r.jsxs("p",{className:"font-medium",children:[u.CurrentAttendees||0,"/",u.MaxAttendees||"Không giới hạn"]})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ks,{className:"h-5 w-5 text-gray-500 mr-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Độ khó"}),r.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${AJ[u.Difficulty]||"bg-gray-100 text-gray-800"}`,children:u.Difficulty||"Chưa xác định"})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(M8,{className:"h-5 w-5 text-gray-500 mr-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Giá vé"}),r.jsx("p",{className:"font-medium",children:u.Price&&u.Price>0?`${u.Price.toLocaleString("vi-VN")} VND`:"Miễn phí"})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(i8,{className:"h-5 w-5 text-gray-500 mr-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Đơn vị tổ chức"}),r.jsx("p",{className:"font-medium",children:u.Organizer||"Chưa cập nhật"})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m?r.jsx("button",{onClick:g,disabled:u.Status!=="upcoming"||s,className:`w-full py-3 px-4 rounded-lg font-medium text-white 
                  ${u.Status==="upcoming"&&!s?"bg-red-600 hover:bg-red-700":"bg-gray-400 cursor-not-allowed"}`,children:s?"Đang xử lý...":"Hủy đăng ký tham gia"}):r.jsx("button",{onClick:x,disabled:u.Status!=="upcoming"||u.CurrentAttendees>=u.MaxAttendees||s,className:`w-full py-3 px-4 rounded-lg font-medium text-white 
                  ${u.Status==="upcoming"&&u.CurrentAttendees<u.MaxAttendees&&!s?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"}`,children:s?"Đang xử lý...":u.Status!=="upcoming"?"Sự kiện không còn nhận đăng ký":u.CurrentAttendees>=u.MaxAttendees?"Đã đủ số lượng người tham gia":"Đăng ký tham gia"}),!d&&r.jsx("p",{className:"text-sm text-gray-500 mt-2 text-center",children:"Bạn cần đăng nhập để đăng ký tham gia"}),m&&r.jsx("p",{className:"text-sm text-green-600 mt-2 text-center",children:"Bạn đã đăng ký tham gia sự kiện này"})]}),r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(hP,{className:"h-5 w-5 text-gray-500 mr-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Danh mục"}),r.jsx("p",{className:"font-medium",children:u.Category||"Chưa phân loại"})]})]})})]})]})]}):r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Không tìm thấy sự kiện"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Sự kiện này có thể đã bị xóa hoặc không tồn tại"}),r.jsx("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",onClick:()=>t("/events"),children:"Quay lại danh sách sự kiện"})]})})},MJ=({onPostCreated:e})=>{var H;const[t,n]=h.useState(""),[s,i]=h.useState(""),[a,o]=h.useState([]),[l,c]=h.useState(!1),[d,u]=h.useState("public"),[m,f]=h.useState(!1),[p,x]=h.useState(null),[g,b]=h.useState(""),[w,k]=h.useState(""),[v,N]=h.useState(null),[C,T]=h.useState(!1),[E,P]=h.useState(""),R=h.useRef(null),[y,O]=h.useState(!1),_=["programming","code","software","developer","web","app","database","cloud","server","frontend","backend","fullstack","javascript","python","java","react","angular","vue","node","php","html","css","api","cybersecurity","ai","machine learning","data science","devops","git","github","docker","kubernetes","aws","azure","google cloud","algorithm","coding","debugging","framework","library","testing","deployment","agile","scrum","network","linux","windows","mac","operating system","mobile development","sql","nosql","mongodb","mysql","postgresql","oracle","sap","flutter","kotlin","swift","objective-c","c++","c#",".net","ruby","rails","go","golang","rust","scala","typescript","jquery","bootstrap","tailwind","sass","less","webpack","babel","eslint","prettier","jest","mocha","chai","cypress","selenium","qa","quality assurance","continuous integration","ci/cd","jenkins","gitlab","bitbucket","jira","confluence","trello","slack","discord","figma","sketch","adobe xd","photoshop","illustrator","ui","ux","user interface","user experience","responsive","mobile first","pwa","seo","analytics","blockchain","cryptocurrency","bitcoin","ethereum","smart contract","nft","security","encryption","firewall","vpn","proxy","cache","cdn","dns","domain","hosting","ssl","tls","https","http","rest","graphql","soap","microservices","serverless","lambda","function as a service","saas","paas","iaas","virtual machine","vm","virtualization","emulator","compiler","interpreter","assembly","low level","high level","bug","patch","version control","svn","mercurial","computer vision","natural language processing","nlp","hardware","software","firmware","computer science","networking","router","switch","modem","bandwidth","latency","ping","big data","hadoop","spark","kafka","elasticsearch","kibana","grafana","prometheus","monitoring","logging","tracing","observability","sre","site reliability","incident management","anomaly detection","machine","deep learning","neural network","tensorflow","pytorch","keras","scikit-learn","pandas","numpy","jupyter","anaconda","data visualization","tableau","power bi","qlik","looker","dax","etl","data warehouse","data lake","datalakehouse","olap","oltp","webrtc","websocket","socket.io","iot","raspberry pi","arduino","esp32","esp8266","microcontroller","edge computing","fog computing","quantum computing","augmented reality","ar","virtual reality","vr","mixed reality","mr","xr","3d modeling","unity","unreal engine","godot","game development","animation","physics engine","shader","webgl","webgpu","vulkan","directx","opengl","cuda","parallel computing","distributed systems","consensus algorithm","peer-to-peer","p2p","defi","nft marketplace","web3","solidity","smart contracts","wallet","metamask","authentication","oauth","openid","saml","sso","two-factor","2fa","mfa","biometric","facial recognition","fingerprint","keylogger","malware","spyware","ransomware","phishing","sql injection","xss","csrf","ddos","zero-day","exploit","vulnerability","penetration testing","pen testing","ethical hacking","red team","blue team","soc","security operations","compliance","gdpr","hipaa","pci dss","iso 27001","nist","embedded systems","real-time systems","rtos","kernel","driver","firmware","bios","uefi","interrupt","process","thread","concurrency","parallelism","multiprocessing","multithreading","async","await","promise","callback","observable","reactive programming","functional programming","object-oriented programming","oop","procedural programming","declarative programming","imperative programming","immutable","mutable","stateful","stateless","idempotent","atomicity","acid","base","cap theorem","eventual consistency","strong consistency","sharding","partitioning","replication","load balancing","reverse proxy","forward proxy","database indexing","query optimization","execution plan","crud","orm","odm","database migration","seeding","polymorphism","inheritance","encapsulation","abstraction","interface","solid principles","design patterns","singleton","factory","observer","strategy","command","decorator","builder","adapter","facade","proxy pattern","lập trình","mã nguồn","phần mềm","phần cứng","ứng dụng","thiết kế web","cơ sở dữ liệu","điện toán đám mây","máy chủ","công nghệ thông tin","hệ điều hành","mạng máy tính","bảo mật","phát triển ứng dụng","trí tuệ nhân tạo","học máy","dữ liệu lớn","thuật toán","mã hóa","giải mã","lỗi phần mềm","giao diện người dùng","trải nghiệm người dùng","chuỗi khối","tiền điện tử","hệ thống quản lý","phần mềm nguồn mở","lập trình viên","đám mây","sao lưu","khôi phục dữ liệu","kiểm thử","tự động hóa","tích hợp","triển khai","máy tính","máy tính xách tay","điện thoại thông minh","thiết bị di động","thiết bị đeo","thực tế ảo","thực tế tăng cường","internet vạn vật","IoT","kiến trúc phần mềm","nền tảng","máy trạm","điều khiển từ xa","đồ họa","phát triển game","cắt lớp","đa nền tảng","tương thích","tối ưu hóa","công cụ phát triển","xử lý song song","tính toán phân tán","quản lý dự án IT","phân tích hệ thống","thiết kế hệ thống","kỹ thuật hệ thống","quản trị mạng","quản trị cơ sở dữ liệu","phân tích dữ liệu","khai phá dữ liệu","quản lý mã nguồn","đánh giá hiệu năng","tuân thủ bảo mật","chứng chỉ bảo mật","tiêu chuẩn IT","tường lửa","mạng riêng ảo","đám mây riêng","mật mã","xác thực","phân quyền","hệ thống tích hợp","trung tâm dữ liệu","hạ tầng IT","máy ảo","ảo hóa","chuyển đổi số","số hóa","kỹ sư phần mềm","kỹ sư hệ thống","nghề IT","CNTT","an toàn thông tin","hack","virus","malware","trojan","mã độc","cổng thông tin","phát triển website","lắp ráp máy tính","cài đặt phần mềm","máy in","máy quét","màn hình","CPU","GPU","RAM","ổ cứng","ổ SSD","VGA","bo mạch chủ","nguồn máy tính","tản nhiệt","lập trình web","framework laravel","excel","word","powerpoint","outlook","photoshop","illustrator","figma","thiết kế đồ họa","xử lý ảnh","biên tập video","đồ họa 3D","render","makefile","biên dịch","dịch ngược","phát hiện lỗi","sửa lỗi","vá lỗi","bảo trì phần mềm","hệ quản trị CSDL","cổng kết nối","giao thức mạng","wifi","bluetooth","cáp mạng","cài win","ghost","driver","Windown","MacOS","Linux","Ubuntu","Fedora","CentOS","Debian","Alpine","distro","kernel","trình biên dịch","thư viện","trang web","dịch vụ web","web service","tiện ích mở rộng","plugin","theme","giao diện","chủ đề","mẫu thiết kế","responsive","tương thích di động","SEO","phần mềm diệt virus","giả lập","emulator","máy chủ ảo","định tuyến","vùng nhớ","vùng địa chỉ IP","domain","tên miền","SSL","chứng chỉ bảo mật","mã nguồn mở","phần mềm thương mại","bản quyền","license","giấy phép","kế hoạch dự phòng","sao lưu dự phòng","UPS","nguồn điện dự phòng","thiết kế giao diện","UI/UX","sprint","kỹ thuật số","thực tế ảo tăng cường","công nghệ thực tế ảo","smartphone","laptop gaming","máy tính bảng","phần mềm ERP","học trực tuyến","e-learning","đào tạo CNTT","tài nguyên số","nội dung số","ứng dụng di động","app mobile","app store","play store","công nghệ blockchain","NFT","tiền mã hóa","crypto","bitcoin","ethereum","smart contract","hợp đồng thông minh","trí tuệ nhân tạo","AI","chatGPT","OpenAI","chatbot","robot","tự động hóa","RPA","tự động hóa quy trình","phân tích dữ liệu","kết nối API","đám mây","điện toán đám mây","dịch vụ đám mây","phân tích big data","dữ liệu lớn","chuyển đổi số","digital transformation","ngôn ngữ lập trình","codebase","repo","repository","commit","pull request","push code","debug","test case","unit test","kiểm thử đơn vị","testing","QA","quản lý chất lượng","tổ chức code","mô hình MVC","mô hình MVVM","nguyên tắc SOLID","clean code","code sạch","mã nguồn rõ ràng","comment code","code review","kiểm tra mã nguồn","tài liệu kỹ thuật"];h.useEffect(()=>{const K=localStorage.getItem("token");if(K){const $=JSON.parse(localStorage.getItem("user")||"{}");$!=null&&$.UserID?x({name:$.FullName||$.username,avatar:$.ProfileImage||"https://i.pravatar.cc/300",username:$.username}):fetch("/api/users/me",{headers:{Authorization:`Bearer ${K}`}}).then(me=>me.json()).then(me=>{x({name:me.FullName||me.username,avatar:me.ProfileImage||"https://i.pravatar.cc/300",username:me.username})}).catch(me=>{console.error("Error fetching user:",me)})}},[]);const L=()=>{const K={title:s,content:t,location:v?JSON.stringify(v):null,savedAt:new Date().toISOString()};localStorage.setItem("postDraft",JSON.stringify(K)),O(!0),setTimeout(()=>O(!1),3e3)};h.useEffect(()=>{const K=localStorage.getItem("postDraft");if(K)try{const $=JSON.parse(K);i($.title||""),n($.content||""),$.location&&N(JSON.parse($.location))}catch($){console.error("Error loading draft:",$)}},[]);const A=()=>{if(P(""),!navigator.geolocation){P("Trình duyệt của bạn không hỗ trợ định vị.");return}T(!0),navigator.geolocation.getCurrentPosition(async K=>{const{latitude:$,longitude:me}=K.coords;try{const ye=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${$}&lon=${me}&zoom=18&addressdetails=1`,{headers:{"Accept-Language":"vi"}})).json();N({latitude:$,longitude:me,displayName:ye.display_name||"Vị trí hiện tại",address:ye.address})}catch(ke){console.error("Error fetching location name:",ke),N({latitude:$,longitude:me,displayName:"Vị trí hiện tại"})}finally{T(!1)}},K=>{T(!1),K.code===1?P("Quyền định vị bị từ chối. Vui lòng bật quyền truy cập vị trí nếu muốn sử dụng chức năng này."):(P("Không thể lấy vị trí của bạn. Vui lòng thử lại sau."),console.error("Error getting location:",K))})},M=()=>{N(null)},z=K=>{if(!K.trim())return!1;const $=K.toLowerCase();return _.some(me=>$.includes(me))},ie=async K=>{if(K.preventDefault(),b(""),k(""),a.length===0){k("Bài viết phải có ít nhất một ảnh hoặc video");return}if(t.trim()&&!z(t)){b("Bài viết phải liên quan đến công nghệ thông tin (IT)");return}c(!0);try{const $=new FormData;if($.append("content",t),$.append("visibility",d),s&&$.append("title",s),a.forEach(ke=>{$.append("media",ke)}),v&&$.append("location",JSON.stringify(v)),!(await fetch("/api/posts",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:$})).ok)throw new Error("Không thể tạo bài viết");n(""),i(""),o([]),N(null),localStorage.removeItem("postDraft"),e&&e()}catch($){console.error("Create post error:",$),alert("Có lỗi xảy ra khi đăng bài. Vui lòng thử lại sau.")}finally{c(!1)}},X=K=>{const $=Array.from(K.target.files);$.length>0&&(o([...a,...$]),k(""))},te=K=>{const $=a.filter((me,ke)=>ke!==K);o($),$.length===0&&k("Bài viết phải có ít nhất một ảnh hoặc video")},B=[{id:"public",label:"Công khai",description:"Mọi người đều có thể xem",icon:Oa},{id:"friends",label:"Bạn bè",description:"Chỉ bạn bè có thể xem",icon:vs},{id:"private",label:"Riêng tư",description:"Chỉ bạn có thể xem",icon:Xr}];return r.jsxs("div",{className:"flex flex-col w-full max-w-full",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[r.jsxs("div",{className:"p-4 md:px-8 border-b flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"font-bold text-xl",children:"Tạo bài viết mới"}),r.jsx("div",{className:"text-sm text-gray-500",children:"Chia sẻ ý tưởng, câu hỏi, hoặc kiến thức về IT của bạn"})]}),r.jsx("button",{onClick:L,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Lưu bản nháp"})]}),p&&r.jsxs("div",{className:"flex items-center p-4 md:px-8 border-b",children:[r.jsx("img",{src:p.avatar,alt:p.name,className:"w-10 h-10 rounded-full mr-3"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:p.name}),r.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[r.jsxs("button",{type:"button",onClick:()=>f(!m),className:"flex items-center space-x-1 py-1 px-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",children:[(()=>{var $;const K=($=B.find(me=>me.id===d))==null?void 0:$.icon;return r.jsx(K,{className:"w-3 h-3 mr-1"})})(),r.jsx("span",{children:(H=B.find(K=>K.id===d))==null?void 0:H.label}),r.jsx("svg",{className:"w-3 h-3 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),m&&r.jsx("div",{className:"absolute mt-2 top-full left-0 bg-white border border-gray-200 rounded-lg shadow-lg p-2 z-10 w-64",children:B.map(K=>{const $=K.icon;return r.jsx("button",{type:"button",className:`w-full text-left p-2 rounded-md hover:bg-gray-50 transition-colors ${d===K.id?"bg-blue-50 text-blue-600":"text-gray-700"}`,onClick:()=>{u(K.id),f(!1)},children:r.jsxs("div",{className:"flex items-center",children:[r.jsx($,{className:"w-4 h-4 mr-2"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-sm",children:K.label}),r.jsx("div",{className:"text-xs text-gray-500",children:K.description})]})]})},K.id)})})]})]})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row w-full",children:[r.jsx("div",{className:"lg:w-3/5 p-4 md:p-8 lg:border-r lg:border-gray-200",children:r.jsxs("form",{onSubmit:ie,children:[r.jsx("div",{className:"mb-4",children:r.jsx("input",{type:"text",id:"title",placeholder:"Tiêu đề bài viết",className:"w-full p-3 text-lg font-medium border-0 focus:ring-0 focus:outline-none",value:s,onChange:K=>i(K.target.value)})}),r.jsxs("div",{className:"mb-6",children:[r.jsx("textarea",{id:"content",className:"w-full p-3 border-0 focus:ring-0 focus:outline-none min-h-[300px] text-gray-700 placeholder-gray-400 resize-none",placeholder:`Chia sẻ ý tưởng, câu hỏi, hoặc kiến thức về IT của bạn...

Bạn có thể sử dụng Markdown để định dạng văn bản:
- Danh sách
- **In đậm** hoặc *in nghiêng*
- Code blocks \`\`\`
- Và nhiều tính năng khác`,value:t,onChange:K=>{n(K.target.value),g&&b("")}}),g&&r.jsx("div",{className:"mt-2 text-red-500 text-sm",children:g})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("div",{className:"text-sm font-medium flex items-center",children:[r.jsx("span",{children:"Hình ảnh/Video"}),r.jsx("span",{className:"text-red-500 ml-1",children:"*"}),r.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Bắt buộc)"})]}),r.jsx("button",{type:"button",onClick:()=>R.current.click(),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Thêm file"})]}),a.length===0?r.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 flex flex-col items-center justify-center cursor-pointer hover:border-gray-400 transition-colors ${w?"border-red-300 bg-red-50":"border-gray-300"}`,onClick:()=>R.current.click(),children:[r.jsx("div",{className:`rounded-full p-3 mb-2 ${w?"bg-red-100":"bg-gray-100"}`,children:r.jsx(Vd,{className:`h-8 w-8 ${w?"text-red-500":"text-gray-500"}`})}),r.jsx("div",{className:"font-medium",children:"Thêm ảnh hoặc video"}),r.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Nhấn để chọn hoặc kéo thả file"}),w&&r.jsx("div",{className:"text-red-500 text-sm mt-2",children:w})]}):r.jsxs("div",{className:"border-t border-b py-4",children:[r.jsxs("div",{className:"text-sm font-medium mb-2",children:["Media đính kèm (",a.length,")"]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2",children:a.map((K,$)=>r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"h-32 bg-gray-100 rounded-lg overflow-hidden",children:K.type.startsWith("image/")?r.jsx("img",{src:URL.createObjectURL(K),alt:"Preview",className:"w-full h-full object-cover"}):K.type.startsWith("video/")?r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx(Ba,{className:"h-10 w-10 text-gray-500"})}):r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx(jj,{className:"h-10 w-10 text-gray-500"})})}),r.jsx("button",{type:"button",onClick:()=>te($),className:"absolute top-1 right-1 bg-black bg-opacity-60 rounded-full p-1 text-white opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(zt,{className:"w-4 h-4"})})]},$))})]}),r.jsx("input",{ref:R,type:"file",hidden:!0,accept:"image/*,video/*",multiple:!0,onChange:X})]}),v&&r.jsxs("div",{className:"mb-4 flex items-center bg-blue-50 text-blue-700 px-4 py-2 rounded-lg text-sm",children:[r.jsx(Ui,{className:"h-4 w-4 mr-2 flex-shrink-0"}),r.jsx("div",{className:"flex-1 truncate",children:r.jsx("span",{className:"font-medium",children:v.displayName})}),r.jsx("button",{type:"button",onClick:M,className:"ml-2 text-blue-500 hover:text-blue-700",children:r.jsx(zt,{className:"h-5 w-5"})})]}),E&&r.jsx("div",{className:"mb-4 text-red-500 text-sm",children:E}),r.jsxs("div",{className:"flex flex-wrap items-center border-t pt-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 mr-auto",children:[r.jsx("button",{type:"button",onClick:()=>R.current.click(),className:"flex items-center p-2 rounded-full hover:bg-gray-100 text-gray-700",title:"Thêm ảnh/video",children:r.jsx(Vd,{className:"h-6 w-6"})}),r.jsx("button",{type:"button",onClick:A,className:"flex items-center p-2 rounded-full hover:bg-gray-100 text-gray-700",title:"Thêm vị trí",disabled:C||v!==null,children:C?r.jsxs("svg",{className:"animate-spin h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):r.jsx(Ui,{className:"h-6 w-6"})}),r.jsx("div",{className:"text-xs text-blue-600 bg-blue-50 rounded-full px-3 py-1",children:"Hỗ trợ định dạng Markdown"})]}),r.jsx("button",{type:"submit",disabled:l||a.length===0,className:`px-8 py-2 rounded-full font-medium transition-all duration-300 ${l||a.length===0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:l?r.jsxs("div",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{children:"Đang đăng..."})]}):"Đăng bài"})]})]})}),r.jsx("div",{className:"lg:w-2/5 bg-gray-50 p-4 md:p-8",children:r.jsxs("div",{className:"sticky top-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"font-medium",children:"Xem trước"}),r.jsx("div",{className:"text-xs text-gray-500",children:"Bài viết của bạn sẽ hiển thị như sau"})]}),r.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[s&&r.jsx("h2",{className:"text-xl font-bold mb-4",children:s}),r.jsx("div",{className:"prose prose-sm max-w-none mb-4",children:t?r.jsx(ps,{remarkPlugins:[qi],children:t}):r.jsx("p",{className:"text-gray-400 italic",children:"Chưa có nội dung"})}),a.length>0&&a.length<=2&&r.jsx("div",{className:"mb-4",children:a.map((K,$)=>r.jsx("div",{className:"mb-2",children:K.type.startsWith("image/")?r.jsx("img",{src:URL.createObjectURL(K),alt:`Preview ${$+1}`,className:"max-h-[300px] object-contain rounded-lg mx-auto"}):r.jsx("div",{className:"flex items-center justify-center h-40 bg-gray-100 rounded-lg",children:r.jsx(Ba,{className:"h-12 w-12 text-gray-400"})})},$))}),a.length>2&&r.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:a.slice(0,4).map((K,$)=>r.jsxs("div",{className:`relative rounded-lg overflow-hidden ${$===3&&a.length>4?"relative":""}`,children:[K.type.startsWith("image/")?r.jsx("img",{src:URL.createObjectURL(K),alt:`Preview ${$+1}`,className:"w-full h-32 object-cover"}):r.jsx("div",{className:"flex items-center justify-center h-32 bg-gray-100",children:r.jsx(Ba,{className:"h-8 w-8 text-gray-400"})}),$===3&&a.length>4&&r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center",children:r.jsxs("div",{className:"text-white font-bold text-xl",children:["+",a.length-4]})})]},$))}),v&&r.jsxs("div",{className:"flex items-center text-sm text-blue-600 mb-4",children:[r.jsx(Ui,{className:"h-4 w-4 mr-1"}),r.jsx("span",{children:v.displayName})]}),r.jsx("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"p-1 rounded-full hover:bg-gray-50",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})})}),r.jsx("button",{className:"p-1 rounded-full hover:bg-gray-50",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),r.jsx("button",{className:"p-1 rounded-full hover:bg-gray-50",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})})]})})]})]})})]})]}),y&&r.jsx("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded shadow-lg z-50",children:"Đã lưu bản nháp!"})]})},xi={table:"min-w-full border border-gray-300 border-collapse my-4",thead:"bg-gray-50",th:"border border-gray-300 px-4 py-2 font-semibold text-left",td:"border border-gray-300 px-4 py-2",ul:"list-disc pl-6 space-y-1 my-4",ol:"list-decimal pl-6 space-y-1 my-4",li:"pl-1"},_v={table:({node:e,...t})=>r.jsx("table",{className:xi.table,...t}),thead:({node:e,...t})=>r.jsx("thead",{className:xi.thead,...t}),th:({node:e,...t})=>r.jsx("th",{className:xi.th,...t}),td:({node:e,...t})=>r.jsx("td",{className:xi.td,...t}),ul:({node:e,...t})=>r.jsx("ul",{className:xi.ul,...t}),ol:({node:e,...t})=>r.jsx("ol",{className:xi.ol,...t}),li:({node:e,...t})=>r.jsx("li",{className:xi.li,...t})},DJ=({isOpen:e,media:t,currentIndex:n,onClose:s,onNext:i,onPrev:a})=>{if(!e||!t||t.length===0)return null;const o=t[n],l=o.MediaType==="video",c=u=>{u.key==="Escape"&&s(),u.key==="ArrowRight"&&i(),u.key==="ArrowLeft"&&a()};h.useEffect(()=>(e&&(window.addEventListener("keydown",c),document.body.style.overflow="hidden"),()=>{window.removeEventListener("keydown",c),document.body.style.overflow="auto"}),[e,n]);let d="";try{o.MediaUrl?o.MediaUrl.startsWith("http")?d=o.MediaUrl:d=`/uploads/${o.MediaUrl.replace(/^\/uploads\//,"").replace(/^uploads\//,"")}`:d="/placeholder-image.svg"}catch(u){console.error("Error processing media URL:",u),d="/placeholder-image.svg"}return r.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center",onClick:s,children:[r.jsx("div",{className:"absolute top-4 right-4 z-10",children:r.jsx("button",{onClick:s,className:"p-2 bg-black bg-opacity-60 rounded-full text-white hover:bg-opacity-80 transition-opacity",children:r.jsx(zt,{className:"w-6 h-6"})})}),r.jsxs("div",{className:"absolute top-4 left-4 z-10 text-white bg-black bg-opacity-60 px-3 py-1 rounded-full text-sm",children:[n+1," / ",t.length]}),r.jsx("div",{className:"max-w-screen-lg max-h-screen p-4 relative",onClick:u=>u.stopPropagation(),children:l?r.jsx("video",{className:"max-h-[85vh] max-w-full mx-auto",src:d,controls:!0,autoPlay:!0,onError:u=>{console.error("Video failed to load:",d),u.target.onerror=null,u.target.src="/placeholder-video.svg"}}):r.jsx("img",{className:"max-h-[85vh] max-w-full mx-auto object-contain",src:d,alt:`Media item ${n+1}`,onError:u=>{console.error("Image failed to load:",d),u.target.onerror=null,u.target.src="/placeholder-image.svg"}})}),t.length>1&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:u=>{u.stopPropagation(),a()},className:"absolute left-4 top-1/2 transform -translate-y-1/2 p-2 bg-black bg-opacity-60 rounded-full text-white hover:bg-opacity-80 transition-opacity",children:r.jsx(y8,{className:"w-6 h-6"})}),r.jsx("button",{onClick:u=>{u.stopPropagation(),i()},className:"absolute right-4 top-1/2 transform -translate-y-1/2 p-2 bg-black bg-opacity-60 rounded-full text-white hover:bg-opacity-80 transition-opacity",children:r.jsx(xd,{className:"w-6 h-6"})})]})]})},Fv=({initialPosts:e,onLike:t,onComment:n,onShare:s,onEdit:i,onRefreshMedia:a,onLocationFilter:o,onBookmark:l,onReport:c})=>{const[d,u]=h.useState(e||[]),[m,f]=h.useState(null);h.useEffect(()=>{e&&u(e)},[e]);const p=async w=>{try{const k=localStorage.getItem("token");if(!(await fetch(`/api/posts/${w}`,{method:"DELETE",headers:{Authorization:`Bearer ${k}`}})).ok)throw new Error("Failed to delete post");const N=d.filter(C=>C.PostID!==w);u(N)}catch(k){console.error("Error deleting post:",k)}},x=async(w,k)=>{try{if(c)return await c(w,k);const v=localStorage.getItem("token");if(!(await fetch("/api/reports",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({targetId:w,...k})})).ok)throw new Error("Failed to report post");return alert("Báo cáo đã được gửi thành công!"),!0}catch(v){return console.error("Error reporting post:",v),alert("Có lỗi xảy ra khi gửi báo cáo. Vui lòng thử lại sau."),!1}},g=async(w,k)=>{try{const v=localStorage.getItem("token");if(!(await fetch(`/api/posts/${w}/share`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify(k)})).ok)throw new Error("Failed to share post");const C=d.map(T=>T.PostID===w?{...T,SharesCount:(T.SharesCount||0)+1}:T);return u(C),!0}catch(v){throw console.error("Error sharing post:",v),v}},b=async(w,k)=>{try{const v=localStorage.getItem("token");if(!(await fetch(`/api/posts/${w}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({content:k})})).ok)throw new Error("Failed to update post");const C=d.map(T=>T.PostID===w?{...T,Content:k,IsEdited:!0}:T);return u(C),f(null),!0}catch(v){throw console.error("Error updating post:",v),v}};return!Array.isArray(d)||d.length===0?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full mx-auto flex items-center justify-center mb-4",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Không có bài viết nào"}),r.jsx("p",{className:"text-gray-500",children:"Hãy là người đầu tiên chia sẻ bài viết với cộng đồng!"})]}):r.jsx("div",{className:"space-y-6",children:d.map(w=>r.jsx($J,{post:w,onLike:t,onComment:n,onShare:g,onDelete:p,onReport:x,onEdit:b,onRefreshMedia:a,onLocationFilter:o,onBookmark:l,isEditing:m===w.PostID,setEditing:k=>f(k?w.PostID:null)},w.PostID))})},$J=({post:e,onLike:t,onComment:n,onShare:s,onDelete:i,onReport:a,onEdit:o,onRefreshMedia:l,onLocationFilter:c,onBookmark:d,isEditing:u,setEditing:m})=>{const[f,p]=h.useState(e.IsLiked===1),[x,g]=h.useState(!1),[b,w]=h.useState(e.IsBookmarked===1),[k,v]=h.useState(!1),[N,C]=h.useState([]),[T,E]=h.useState(!1),[P,R]=h.useState(null),[y,O]=h.useState(""),[_,L]=h.useState(!1),[A,M]=h.useState(e.Content),[z,ie]=h.useState(!1),[X,te]=h.useState(e.media||[]),[B,H]=h.useState([]),[K,$]=h.useState(!1),[me,ke]=h.useState(!1),[ye,se]=h.useState(null),[G,W]=h.useState(!1),[Z,Y]=h.useState(!1),[ee,ae]=h.useState(0),de=h.useRef(null),[Re,Be]=h.useState(!1),[Ge,et]=h.useState("Báo cáo bài viết vi phạm"),[lt,Xe]=h.useState(""),[He,Pe]=h.useState("CONTENT"),[vt,Ye]=h.useState(!1),ce=()=>{p(!f),t(e.PostID)},V=async()=>{try{const ne=localStorage.getItem("token");if(!(await fetch(`/api/posts/${e.PostID}/bookmark`,{method:"POST",headers:{Authorization:`Bearer ${ne}`}})).ok)throw new Error("Failed to bookmark post");w(!b),d&&d(e.PostID)}catch(ne){console.error("Error bookmarking post:",ne)}},I=ne=>{const ve=new Date(ne),Ue=Math.floor((new Date-ve)/1e3);if(Ue<60)return"Vừa xong";const pt=Math.floor(Ue/60);if(pt<60)return`${pt} phút trước`;const nn=Math.floor(pt/60);if(nn<24)return`${nn} giờ trước`;const Ct=Math.floor(nn/24);return Ct<7?`${Ct} ngày trước`:ve.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"})},j=()=>{switch(e.Visibility){case"private":return r.jsx(Xr,{className:"w-3.5 h-3.5 text-gray-500"});case"friends":return r.jsx(vs,{className:"w-3.5 h-3.5 text-gray-500"});default:return r.jsx(Oa,{className:"w-3.5 h-3.5 text-gray-500"})}},S=()=>{v(!k),!k&&N.length===0&&F()},F=async()=>{E(!0),R(null);try{const ne=localStorage.getItem("token"),ve=await fetch(`/api/posts/${e.PostID}/comments`,{headers:{Authorization:`Bearer ${ne}`}});if(!ve.ok)throw new Error("Could not load comments");const $e=await ve.json();C($e.comments||[])}catch(ne){console.error("Error fetching comments:",ne),R("Failed to load comments")}finally{E(!1)}},U=async ne=>{if(ne.preventDefault(),!!y.trim()){L(!0);try{const ve=localStorage.getItem("token"),$e=await fetch(`/api/posts/${e.PostID}/comments`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ve}`},body:JSON.stringify({content:y})});if(!$e.ok)throw new Error("Failed to add comment");const Ue=await $e.json();C([Ue.comment,...N]),O(""),n&&n(e.PostID)}catch(ve){console.error("Error adding comment:",ve),R("Failed to post your comment")}finally{L(!1)}}},q=async ne=>{try{const ve=localStorage.getItem("token");if(!(await fetch(`/api/posts/comments/${ne}/like`,{method:"POST",headers:{Authorization:`Bearer ${ve}`}})).ok)throw new Error("Failed to like comment");C(N.map(Ue=>Ue.CommentID===ne?{...Ue,LikesCount:Ue.IsLiked?Ue.LikesCount-1:Ue.LikesCount+1,IsLiked:!Ue.IsLiked}:Ue))}catch(ve){console.error("Error liking comment:",ve)}},Q=async ne=>{try{const ve=localStorage.getItem("token");if(!(await fetch(`/api/posts/comments/${ne}`,{method:"DELETE",headers:{Authorization:`Bearer ${ve}`}})).ok)throw new Error("Failed to delete comment");C(N.filter(Ue=>Ue.CommentID!==ne)),n&&n(e.PostID,-1)}catch(ve){console.error("Error deleting comment:",ve)}},be=async()=>{if(!(!A.trim()&&X.length===0&&B.length===0)){ie(!0);try{if(await o(e.PostID,A),B.length>0){const ne=localStorage.getItem("token"),ve=new FormData;if(B.forEach(Ue=>{ve.append("media",Ue)}),$(!0),!(await fetch(`/api/posts/${e.PostID}/media`,{method:"POST",headers:{Authorization:`Bearer ${ne}`},body:ve})).ok)throw new Error("Failed to upload media");l&&await l(e.PostID),H([])}m(!1)}catch(ne){console.error("Failed to update post:",ne)}finally{ie(!1),$(!1)}}},ge=()=>{M(e.Content),te(e.media||[]),H([]),m(!1)},oe=ne=>{if(ne.target.files&&ne.target.files.length>0){const ve=Array.from(ne.target.files);H([...B,...ve])}},he=ne=>{H(B.filter((ve,$e)=>$e!==ne))},fe=async ne=>{try{const ve=localStorage.getItem("token");if(!(await fetch(`/api/posts/${e.PostID}/media/${ne}`,{method:"DELETE",headers:{Authorization:`Bearer ${ve}`}})).ok)throw new Error("Failed to delete media");te(X.filter(Ue=>Ue.MediaID!==ne)),l&&await l(e.PostID)}catch(ve){console.error("Error removing media:",ve)}};let ze=null;if(e.Location)if(typeof e.Location=="string")try{ze=JSON.parse(e.Location)}catch{ze={displayName:e.Location}}else ze=e.Location;const Me=ne=>{var ve,$e,Ue,pt;if(c&&ne){let nn="";if(typeof ne=="string")try{const Ct=JSON.parse(ne);nn=((ve=Ct.address)==null?void 0:ve.state)||(($e=Ct.address)==null?void 0:$e.city)||Ct.displayName||ne}catch{nn=ne}else nn=((Ue=ne.address)==null?void 0:Ue.state)||((pt=ne.address)==null?void 0:pt.city)||ne.displayName||"";nn&&c(nn)}},Ze=async()=>{if(!(!e.Content||G)){W(!0);try{const ne=localStorage.getItem("token"),ve=await fetch("/api/ai/gemini/summarize",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ne}`},body:JSON.stringify({content:e.Content,maxWords:150,language:"vi"})});if(!ve.ok)throw new Error("Failed to generate summary");const $e=await ve.json();se($e.summary)}catch(ne){console.error("Error generating AI summary:",ne),se("Không thể tạo tóm tắt. Vui lòng thử lại sau.")}finally{W(!1)}}},Nt=ne=>{ae(ne),Y(!0)},Xt=()=>{var ve;const ne=((ve=e.media)==null?void 0:ve.length)||0;ae($e=>($e+1)%ne)},J=()=>{var ve;const ne=((ve=e.media)==null?void 0:ve.length)||0;ae($e=>($e-1+ne)%ne)},Ce=async()=>{if(lt.trim()){Ye(!0);try{await a(e.PostID,{title:Ge,content:lt,category:He,targetType:"POST"}),Be(!1),Xe("")}catch(ne){console.error("Error submitting report:",ne)}finally{Ye(!1)}}};return r.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-md transition-shadow duration-300",children:[r.jsxs("div",{className:"p-4 flex justify-between items-start",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Tt,{src:e.UserImage||e.avatar||e.profileImage,name:e.FullName||e.fullName||e.username,alt:e.FullName||e.fullName||e.username,size:"small",className:"mr-2"}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("h3",{className:"font-medium text-gray-900",children:e.FullName||e.fullName||e.username}),ze&&!u&&r.jsxs("div",{className:"flex items-center text-xs text-blue-700 hover:underline cursor-pointer",onClick:()=>Me(ze),title:"Lọc bài viết theo vị trí này",children:[r.jsx(Ui,{className:"h-3 w-3 mr-1 flex-shrink-0"}),r.jsxs("span",{className:"truncate",children:["đang ở ",ze.displayName]})]}),j(),e.IsEdited&&r.jsx("span",{className:"text-xs text-gray-500",children:"(đã chỉnh sửa)"})]}),r.jsx("p",{className:"text-sm text-gray-500",children:I(e.CreatedAt)})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>g(!x),className:"p-1 rounded-full hover:bg-gray-100",children:r.jsx(U8,{className:"w-5 h-5 text-gray-500"})}),x&&r.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10",children:(()=>{const ne=JSON.parse(localStorage.getItem("user")||"{}");return ne.UserID===e.UserID||ne.id===e.UserID?r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>{m(!0),g(!1)},className:"w-full text-left px-4 py-2 text-sm text-blue-600 hover:bg-gray-100 flex items-center",children:[r.jsx(Lg,{className:"w-4 h-4 mr-2"}),"Chỉnh sửa bài viết"]}),r.jsx("button",{onClick:()=>{i(e.PostID),g(!1)},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Xóa bài viết"})]}):r.jsx("button",{onClick:()=>{Be(!0),g(!1)},className:"w-full text-left px-4 py-2 text-sm text-yellow-600 hover:bg-gray-100",children:"Báo cáo bài viết"})})()})]})]}),r.jsx("div",{className:"px-4 pb-3",children:u?r.jsxs("div",{className:"mb-4",children:[r.jsx("textarea",{className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 min-h-[150px]",value:A,onChange:ne=>M(ne.target.value),placeholder:"Viết nội dung bài viết..."}),X.length>0&&r.jsxs("div",{className:"mt-4",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Media hiện tại"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:X.map(ne=>r.jsxs("div",{className:"relative group",children:[ne.MediaType==="image"?r.jsx("img",{src:ne.MediaUrl.startsWith("http")?ne.MediaUrl:`/uploads/${ne.MediaUrl.replace(/^\/uploads\//,"").replace(/^uploads\//,"")}`,alt:"Media",className:"w-full h-24 object-cover rounded-lg border border-gray-200"}):r.jsx("div",{className:"w-full h-24 bg-gray-800 rounded-lg flex items-center justify-center",children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),r.jsx("button",{type:"button",onClick:()=>fe(ne.MediaID),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(zt,{className:"h-4 w-4"})})]},ne.MediaID))})]}),B.length>0&&r.jsxs("div",{className:"mt-4",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Media mới"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:B.map((ne,ve)=>r.jsxs("div",{className:"relative group",children:[ne.type.startsWith("image/")?r.jsx("img",{src:URL.createObjectURL(ne),alt:"Preview",className:"w-full h-24 object-cover rounded-lg border border-gray-200"}):ne.type.startsWith("video/")?r.jsx("div",{className:"w-full h-24 bg-gray-800 rounded-lg flex items-center justify-center",children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}):r.jsx("div",{className:"w-full h-24 bg-gray-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),r.jsx("button",{type:"button",onClick:()=>he(ve),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(zt,{className:"h-4 w-4"})})]},ve))})]}),r.jsxs("div",{className:"flex items-center mt-4",children:[r.jsxs("button",{type:"button",onClick:()=>{var ne;return(ne=de.current)==null?void 0:ne.click()},className:"flex items-center text-blue-600 hover:text-blue-800 text-sm",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Thêm ảnh/video"]}),r.jsx("input",{type:"file",ref:de,className:"hidden",accept:"image/*,video/*",multiple:!0,onChange:oe})]}),r.jsxs("div",{className:"flex justify-end mt-4 space-x-2",children:[r.jsx("button",{onClick:ge,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",disabled:z||K,children:"Hủy"}),r.jsx("button",{onClick:be,className:"px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 flex items-center",disabled:z||K,children:z||K?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),K?"Đang tải lên...":"Đang lưu..."]}):"Lưu thay đổi"})]})]}):e.Content&&r.jsxs("div",{className:"prose max-w-none mb-4",children:[e.Content.trim().split(/\s+/).length>500&&!ye&&!G&&r.jsx("div",{className:"flex justify-end mb-3",children:r.jsxs("button",{onClick:Ze,title:"Tóm tắt bằng AI Gemini",className:"flex items-center space-x-1 bg-gradient-to-r from-blue-500 to-purple-500 text-white px-3 py-1.5 rounded-md hover:opacity-90 transition-opacity",children:[r.jsx(Vi,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs font-medium",children:"AI Gemini"})]})}),G&&r.jsx("div",{className:"mb-4 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-purple-100",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("svg",{className:"animate-spin h-5 w-5 text-purple-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"text-sm text-gray-700",children:"Gemini đang tóm tắt nội dung..."})]})}),ye&&r.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-purple-100",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("div",{className:"flex items-center",children:r.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 font-medium flex items-center",children:[r.jsx(Vi,{className:"w-5 h-5 mr-1.5 text-purple-500"}),"Tóm tắt bởi Gemini AI"]})}),r.jsx("button",{onClick:()=>se(null),className:"text-gray-400 hover:text-gray-600",title:"Đóng tóm tắt",children:r.jsx(zt,{className:"w-5 h-5"})})]}),r.jsx("p",{className:"text-gray-700 text-sm",children:ye}),!me&&r.jsxs("button",{onClick:()=>ke(!0),className:"mt-2 text-purple-600 hover:text-purple-800 text-xs flex items-center",children:["Đọc bài viết đầy đủ",r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),r.jsx("div",{className:"prose prose-sm max-w-none overflow-x-auto",children:r.jsx(ps,{remarkPlugins:[qi],components:_v,children:e.Content.trim().split(/\s+/).length>200&&!me||ye&&!me?e.Content.trim().split(/\s+/).slice(0,200).join(" ")+"...":e.Content})}),e.Content.trim().split(/\s+/).length>200&&r.jsxs("button",{onClick:()=>ke(!me),className:"text-blue-600 hover:text-blue-800 font-medium text-sm mt-2 flex items-center",children:[me?"Thu gọn":"Xem thêm",!me&&r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),me&&r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]})]})}),!u&&e.media&&e.media.length>0&&r.jsx("div",{className:`${e.media.length===1?"":"grid grid-cols-2 gap-1"} mb-2`,children:e.media.map((ne,ve)=>{let $e="";try{ne.MediaUrl?ne.MediaUrl.startsWith("http")?$e=ne.MediaUrl:$e=`/uploads/${ne.MediaUrl.replace(/^\/uploads\//,"").replace(/^uploads\//,"")}`:(console.error("MediaUrl is missing for media:",ne),$e="/placeholder-image.svg")}catch(Ue){console.error("Error processing media URL:",Ue),$e="/placeholder-image.svg"}return r.jsx("div",{className:`overflow-hidden ${e.media.length===1?"max-h-[500px]":"max-h-[300px]"} relative group cursor-pointer`,onClick:()=>Nt(ve),children:ne.MediaType==="image"?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:$e,alt:`Hình ảnh ${ve+1}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",onError:Ue=>{Ue.target.onerror=null,Ue.target.src="/placeholder-image.svg",Ue.target.classList.add("bg-gray-100")}}),r.jsx("div",{className:"absolute inset-0 bg-black opacity-0 group-hover:opacity-20 transition-opacity",children:r.jsx("div",{className:"absolute top-2 right-2 bg-black bg-opacity-50 rounded-full p-1.5 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(Zf,{className:"h-4 w-4 text-white"})})})]}):r.jsxs(r.Fragment,{children:[r.jsx("video",{src:$e,className:"w-full h-full object-cover",onError:Ue=>{Ue.target.onerror=null,Ue.target.classList.add("hidden"),Ue.target.parentNode.innerHTML+='<div class="flex items-center justify-center h-full bg-gray-100 text-gray-500 text-sm">Không thể tải video</div>'}}),r.jsxs("div",{className:"absolute inset-0 bg-black opacity-0 group-hover:opacity-20 transition-opacity flex items-center justify-center",children:[r.jsx("div",{className:"absolute top-2 right-2 bg-black bg-opacity-50 rounded-full p-1.5 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(Zf,{className:"h-4 w-4 text-white"})}),r.jsx("div",{className:"rounded-full bg-black bg-opacity-50 p-3 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})})]})]})},ve)})}),r.jsx(DJ,{isOpen:Z,media:e.media||[],currentIndex:ee,onClose:()=>Y(!1),onNext:Xt,onPrev:J}),(e.LikesCount>0||e.CommentsCount>0)&&r.jsxs("div",{className:"px-4 py-2 flex justify-between text-sm text-gray-500 border-t border-gray-100",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-500 flex items-center justify-center",children:r.jsx(Wd,{className:"w-3 h-3 text-white"})}),r.jsx("span",{children:e.LikesCount})]}),e.CommentsCount>0&&r.jsxs("button",{className:"hover:underline",children:[e.CommentsCount," bình luận"]})]}),r.jsxs("div",{className:"px-4 py-2 flex items-center justify-between border-t border-gray-100",children:[r.jsxs("button",{onClick:ce,className:`flex items-center justify-center space-x-2 p-2 rounded-lg hover:bg-gray-100 flex-1 ${f?"text-blue-500":"text-gray-500"}`,children:[f?r.jsx(Wd,{className:"w-5 h-5"}):r.jsx(np,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium",children:"Thích"})]}),r.jsxs("button",{onClick:S,className:`flex items-center justify-center space-x-2 p-2 rounded-lg hover:bg-gray-100 flex-1 ${k?"text-blue-500":"text-gray-500"}`,children:[k?r.jsx(t7,{className:"w-5 h-5"}):r.jsx(xj,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium",children:"Bình luận"})]}),r.jsxs("button",{onClick:()=>{console.log("Share button clicked for post:",e.PostID),s?s(e.PostID):console.error("onShare function is not provided")},className:"flex items-center justify-center space-x-2 p-2 rounded-lg hover:bg-gray-100 text-gray-500 flex-1",children:[r.jsx(Cj,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium",children:"Chia sẻ"})]}),r.jsx("button",{onClick:V,className:`flex items-center justify-center p-2 rounded-lg hover:bg-gray-100 ${b?"text-blue-500":"text-gray-500"}`,title:b?"Bỏ lưu bài viết":"Lưu bài viết",children:b?r.jsx(ap,{className:"w-5 h-5"}):r.jsx(vl,{className:"w-5 h-5"})})]}),k&&r.jsxs("div",{className:"border-t border-gray-100 px-4 py-3",children:[r.jsxs("form",{onSubmit:U,className:"flex items-center space-x-2 mb-4",children:[r.jsx(Tt,{src:(()=>{const ne=JSON.parse(localStorage.getItem("user")||"{}");return ne.ProfileImage||ne.profileImage||ne.avatar||ne.avatarUrl})(),name:(()=>{const ne=JSON.parse(localStorage.getItem("user")||"{}");return ne.FullName||ne.fullName||ne.username||"User"})(),alt:"Your profile",size:"small"}),r.jsxs("div",{className:"flex-1 relative",children:[r.jsx("input",{type:"text",className:"w-full py-2 px-3 border border-gray-300 rounded-full bg-gray-100 focus:bg-white focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Viết bình luận...",value:y,onChange:ne=>O(ne.target.value),disabled:_}),r.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-blue-500 disabled:text-gray-400",disabled:_||!y.trim(),children:_?r.jsx("div",{className:"w-6 h-6 border-2 border-t-blue-500 border-r-transparent border-b-transparent border-l-transparent rounded-full animate-spin"}):r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]}),T?r.jsx("div",{className:"flex justify-center py-4",children:r.jsx("div",{className:"w-8 h-8 border-2 border-gray-200 border-t-blue-500 rounded-full animate-spin"})}):P?r.jsx("div",{className:"text-center py-4 text-red-500 text-sm",children:P}):N.length===0?r.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"Chưa có bình luận nào. Hãy là người đầu tiên bình luận!"}):r.jsx("div",{className:"space-y-4",children:N.map(ne=>r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(Tt,{src:ne.UserImage||ne.avatar||ne.profileImage,name:ne.FullName||ne.fullName||ne.username,alt:ne.FullName||ne.fullName||ne.username,size:"small"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"bg-gray-100 rounded-lg px-3 py-2",children:[r.jsx("div",{className:"font-medium text-sm",children:ne.FullName||ne.fullName||ne.username}),r.jsx("div",{className:"text-sm prose prose-sm max-w-none overflow-x-auto",children:r.jsx(ps,{remarkPlugins:[qi],components:_v,children:ne.Content})})]}),r.jsxs("div",{className:"flex items-center mt-1 text-xs text-gray-500 space-x-3",children:[r.jsx("span",{children:I(ne.CreatedAt)}),r.jsxs("button",{className:`font-medium ${ne.IsLiked?"text-blue-500":""}`,onClick:()=>q(ne.CommentID),children:["Thích (",ne.LikesCount,")"]}),ne.UserID===JSON.parse(localStorage.getItem("user")||"{}").UserID&&r.jsx("button",{className:"font-medium text-red-500",onClick:()=>Q(ne.CommentID),children:"Xóa"})]})]})]},ne.CommentID))})]}),Re&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md mx-4",children:[r.jsx("h3",{className:"text-lg font-medium mb-4",children:"Báo cáo bài viết"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-1",children:"Loại báo cáo"}),r.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:He,onChange:ne=>Pe(ne.target.value),children:[r.jsx("option",{value:"CONTENT",children:"Nội dung không phù hợp"}),r.jsx("option",{value:"HARASSMENT",children:"Quấy rối"}),r.jsx("option",{value:"VIOLENCE",children:"Bạo lực"}),r.jsx("option",{value:"SPAM",children:"Spam"}),r.jsx("option",{value:"OTHER",children:"Khác"})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-gray-700 text-sm font-medium mb-1",children:"Chi tiết báo cáo"}),r.jsx("textarea",{className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 h-32",value:lt,onChange:ne=>Xe(ne.target.value),placeholder:"Vui lòng mô tả chi tiết nội dung vi phạm..."})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx("button",{onClick:()=>Be(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",disabled:vt,children:"Hủy"}),r.jsx("button",{onClick:Ce,className:"px-4 py-2 text-white bg-yellow-600 rounded-lg hover:bg-yellow-700 flex items-center",disabled:!lt.trim()||vt,children:vt?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Đang gửi..."]}):"Gửi báo cáo"})]})]})})]})};var O4={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var a="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(a=i(a,s(l)))}return a}function s(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var o="";for(var l in a)t.call(a,l)&&a[l]&&(o=i(o,l));return o}function i(a,o){return o?a?a+" "+o:a+o:a}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(O4);var OJ=O4.exports;const B4=wu(OJ);var sg={exports:{}},ig={exports:{}},_l=1e3,Fl=_l*60,zl=Fl*60,Ul=zl*24,BJ=Ul*365.25,_J=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return FJ(e);if(n==="number"&&isNaN(e)===!1)return t.long?UJ(e):zJ(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function FJ(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),s=(t[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return n*BJ;case"days":case"day":case"d":return n*Ul;case"hours":case"hour":case"hrs":case"hr":case"h":return n*zl;case"minutes":case"minute":case"mins":case"min":case"m":return n*Fl;case"seconds":case"second":case"secs":case"sec":case"s":return n*_l;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function zJ(e){return e>=Ul?Math.round(e/Ul)+"d":e>=zl?Math.round(e/zl)+"h":e>=Fl?Math.round(e/Fl)+"m":e>=_l?Math.round(e/_l)+"s":e+"ms"}function UJ(e){return Kc(e,Ul,"day")||Kc(e,zl,"hour")||Kc(e,Fl,"minute")||Kc(e,_l,"second")||e+" ms"}function Kc(e,t,n){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}(function(e,t){t=e.exports=i.debug=i.default=i,t.coerce=c,t.disable=o,t.enable=a,t.enabled=l,t.humanize=_J,t.names=[],t.skips=[],t.formatters={};var n;function s(d){var u=0,m;for(m in d)u=(u<<5)-u+d.charCodeAt(m),u|=0;return t.colors[Math.abs(u)%t.colors.length]}function i(d){function u(){if(u.enabled){var m=u,f=+new Date,p=f-(n||f);m.diff=p,m.prev=n,m.curr=f,n=f;for(var x=new Array(arguments.length),g=0;g<x.length;g++)x[g]=arguments[g];x[0]=t.coerce(x[0]),typeof x[0]!="string"&&x.unshift("%O");var b=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,function(k,v){if(k==="%%")return k;b++;var N=t.formatters[v];if(typeof N=="function"){var C=x[b];k=N.call(m,C),x.splice(b,1),b--}return k}),t.formatArgs.call(m,x);var w=u.log||t.log||console.log.bind(console);w.apply(m,x)}}return u.namespace=d,u.enabled=t.enabled(d),u.useColors=t.useColors(),u.color=s(d),typeof t.init=="function"&&t.init(u),u}function a(d){t.save(d),t.names=[],t.skips=[];for(var u=(typeof d=="string"?d:"").split(/[\s,]+/),m=u.length,f=0;f<m;f++)u[f]&&(d=u[f].replace(/\*/g,".*?"),d[0]==="-"?t.skips.push(new RegExp("^"+d.substr(1)+"$")):t.names.push(new RegExp("^"+d+"$")))}function o(){t.enable("")}function l(d){var u,m;for(u=0,m=t.skips.length;u<m;u++)if(t.skips[u].test(d))return!1;for(u=0,m=t.names.length;u<m;u++)if(t.names[u].test(d))return!0;return!1}function c(d){return d instanceof Error?d.stack||d.message:d}})(ig,ig.exports);var VJ=ig.exports;(function(e,t){var n={};t=e.exports=VJ,t.log=a,t.formatArgs=i,t.save=o,t.load=l,t.useColors=s,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:c(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function s(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(d){try{return JSON.stringify(d)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}};function i(d){var u=this.useColors;if(d[0]=(u?"%c":"")+this.namespace+(u?" %c":" ")+d[0]+(u?"%c ":" ")+"+"+t.humanize(this.diff),!!u){var m="color: "+this.color;d.splice(1,0,m,"color: inherit");var f=0,p=0;d[0].replace(/%[a-zA-Z%]/g,function(x){x!=="%%"&&(f++,x==="%c"&&(p=f))}),d.splice(p,0,m)}}function a(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(d){try{d==null?t.storage.removeItem("debug"):t.storage.debug=d}catch{}}function l(){var d;try{d=t.storage.debug}catch{}return!d&&typeof process<"u"&&"env"in process&&(d=n.DEBUG),d}t.enable(l());function c(){try{return window.localStorage}catch{}}})(sg,sg.exports);var HJ=sg.exports,zv=HJ("jsonp"),WJ=GJ,qJ=0;function KJ(){}function GJ(e,t,n){typeof t=="function"&&(n=t,t={}),t||(t={});var s=t.prefix||"__jp",i=t.name||s+qJ++,a=t.param||"callback",o=t.timeout!=null?t.timeout:6e4,l=encodeURIComponent,c=document.getElementsByTagName("script")[0]||document.head,d,u;o&&(u=setTimeout(function(){m(),n&&n(new Error("Timeout"))},o));function m(){d.parentNode&&d.parentNode.removeChild(d),window[i]=KJ,u&&clearTimeout(u)}function f(){window[i]&&m()}return window[i]=function(p){zv("jsonp got",p),m(),n&&n(null,p)},e+=(~e.indexOf("?")?"&":"?")+a+"="+l(i),e=e.replace("?&","?"),zv('jsonp req "%s"',e),d=document.createElement("script"),d.src=e,c.parentNode.insertBefore(d,c),f}const ca=wu(WJ);var XJ=Object.defineProperty,YJ=Object.defineProperties,QJ=Object.getOwnPropertyDescriptors,bu=Object.getOwnPropertySymbols,_4=Object.prototype.hasOwnProperty,F4=Object.prototype.propertyIsEnumerable,Uv=(e,t,n)=>t in e?XJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jn=(e,t)=>{for(var n in t||(t={}))_4.call(t,n)&&Uv(e,n,t[n]);if(bu)for(var n of bu(t))F4.call(t,n)&&Uv(e,n,t[n]);return e},Kh=(e,t)=>YJ(e,QJ(t)),Gh=(e,t)=>{var n={};for(var s in e)_4.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&bu)for(var s of bu(e))t.indexOf(s)<0&&F4.call(e,s)&&(n[s]=e[s]);return n};function Xh(e){return n=>{var s=n,{bgStyle:i={},borderRadius:a=0,iconFillColor:o="white",round:l=!1,size:c=64}=s,d=Gh(s,["bgStyle","borderRadius","iconFillColor","round","size"]);return r.jsxs("svg",Kh(Jn({viewBox:"0 0 64 64",width:c,height:c},d),{children:[l?r.jsx("circle",{cx:"32",cy:"32",r:"32",fill:e.color,style:i}):r.jsx("rect",{width:"64",height:"64",rx:a,ry:a,fill:e.color,style:i}),r.jsx("path",{d:e.path,fill:o})]}))}}class JJ extends Error{constructor(t){super(t),this.name="AssertionError"}}function Vt(e,t){if(!e)throw new JJ(t)}function Lt(e){const t=Object.entries(e).filter(([,n])=>n!=null).map(([n,s])=>`${encodeURIComponent(n)}=${encodeURIComponent(String(s))}`);return t.length>0?`?${t.join("&")}`:""}const ZJ=e=>!!e&&(typeof e=="object"||typeof e=="function")&&"then"in e&&typeof e.then=="function",eZ=(e,t)=>({left:window.outerWidth/2+(window.screenX||window.screenLeft||0)-e/2,top:window.outerHeight/2+(window.screenY||window.screenTop||0)-t/2}),tZ=(e,t)=>({top:(window.screen.height-t)/2,left:(window.screen.width-e)/2});function nZ(e,t,n){var s=t,{height:i,width:a}=s,o=Gh(s,["height","width"]);const l=Jn({height:i,width:a,location:"no",toolbar:"no",status:"no",directories:"no",menubar:"no",scrollbars:"yes",resizable:"no",centerscreen:"yes",chrome:"yes"},o),c=window.open(e,"",Object.keys(l).map(d=>`${d}=${l[d]}`).join(", "));if(n){const d=window.setInterval(()=>{try{(c===null||c.closed)&&(window.clearInterval(d),n(c))}catch(u){console.error(u)}},1e3)}return c}function rZ(e){var t=e,{beforeOnClick:n,children:s,className:i,disabled:a,disabledStyle:o={opacity:.6},forwardedRef:l,htmlTitle:c,networkLink:d,networkName:u,onClick:m,onShareWindowClose:f,openShareDialogOnClick:p=!0,opts:x,resetButtonStyle:g=!0,style:b,title:w,url:k,windowHeight:v=400,windowPosition:N="windowCenter",windowWidth:C=550}=t,T=Gh(t,["beforeOnClick","children","className","disabled","disabledStyle","forwardedRef","htmlTitle","networkLink","networkName","onClick","onShareWindowClose","openShareDialogOnClick","opts","resetButtonStyle","style","title","url","windowHeight","windowPosition","windowWidth"]);const E=async y=>{const O=d(k,x);if(!a){if(y.preventDefault(),n){const _=n();ZJ(_)&&await _}if(p){const _=Jn({height:v,width:C},N==="windowCenter"?eZ(C,v):tZ(C,v));nZ(O,_,f)}m&&m(y,O)}},P=B4("react-share__ShareButton",{"react-share__ShareButton--disabled":!!a,disabled:!!a},i),R=Jn(Jn(g?{backgroundColor:"transparent",border:"none",padding:0,font:"inherit",color:"inherit",cursor:"pointer"}:{},b),a&&o);return r.jsx("button",Kh(Jn({},T),{className:P,onClick:E,ref:l,style:R,title:c,children:s}))}function Kt(e,t,n,s){const i=(a,o)=>{const l=n(a),c=Jn({},a);return Object.keys(l).forEach(u=>{delete c[u]}),r.jsx(rZ,Kh(Jn(Jn({},s),c),{forwardedRef:o,networkName:e,networkLink:t,opts:l}))};return i.displayName=`ShareButton-${e}`,h.forwardRef(i)}function sZ(e,{title:t,separator:n}){return Vt(e,"bluesky.url"),"https://bsky.app/intent/compose"+Lt({text:t?t+n+e:e})}Kt("bluesky",sZ,e=>({title:e.title,separator:e.separator||" "}),{windowWidth:660,windowHeight:460,windowPosition:"windowCenter"});function iZ(e,{subject:t,body:n,separator:s}){return"mailto:"+Lt({subject:t,body:n?n+s+e:e})}Kt("email",iZ,e=>({subject:e.subject,body:e.body,separator:e.separator||" "}),{openShareDialogOnClick:!1,onClick:(e,t)=>{window.location.href=t}});const aZ=Xh({color:"#0965FE",path:"M34.1,47V33.3h4.6l0.7-5.3h-5.3v-3.4c0-1.5,0.4-2.6,2.6-2.6l2.8,0v-4.8c-0.5-0.1-2.2-0.2-4.1-0.2 c-4.1,0-6.9,2.5-6.9,7V28H24v5.3h4.6V47H34.1z"});function oZ(e,{appId:t,redirectUri:n,to:s}){return"https://www.facebook.com/dialog/send"+Lt({link:e,redirect_uri:n||e,app_id:t,to:s})}Kt("facebookmessenger",oZ,e=>({appId:e.appId,redirectUri:e.redirectUri,to:e.to}),{windowWidth:1e3,windowHeight:820});function lZ(e,{hashtag:t}){return Vt(e,"facebook.url"),"https://www.facebook.com/sharer/sharer.php"+Lt({u:e,hashtag:t})}const cZ=Kt("facebook",lZ,e=>({hashtag:e.hashtag}),{windowWidth:550,windowHeight:400});function dZ(){const e=h.useRef(!1);return h.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),h.useCallback(()=>e.current,[])}function uZ(e){var t=e,{children:n=f=>f,className:s,getCount:i,url:a}=t,o=Gh(t,["children","className","getCount","url"]);const l=dZ(),[c,d]=h.useState(void 0),[u,m]=h.useState(!1);return h.useEffect(()=>{m(!0),i(a,f=>{l()&&(d(f),m(!1))})},[a]),r.jsx("span",Kh(Jn({className:B4("react-share__ShareCount",s)},o),{children:!u&&c!==void 0&&n(c)}))}function da(e){const t=n=>r.jsx(uZ,Jn({getCount:e},n));return t.displayName=`ShareCount(${e.name})`,t}function hZ(e,t){const n=`https://graph.facebook.com/?id=${e}&fields=og_object{engagement}`;ca(n,(s,i)=>{t(!s&&i&&i.og_object&&i.og_object.engagement?i.og_object.engagement.count:void 0)})}da(hZ);function mZ(e,{title:t}){return Vt(e,"hatena.url"),`http://b.hatena.ne.jp/add?mode=confirm&url=${e}&title=${t}`}Kt("hatena",mZ,e=>({title:e.title}),{windowWidth:660,windowHeight:460,windowPosition:"windowCenter"});function fZ(e,t){ca("https://bookmark.hatenaapis.com/count/entry"+Lt({url:e}),(s,i)=>{t(i??void 0)})}da(fZ);function pZ(e,{title:t,description:n}){return Vt(e,"instapaper.url"),"http://www.instapaper.com/hello2"+Lt({url:e,title:t,description:n})}Kt("instapaper",pZ,e=>({title:e.title,description:e.description}),{windowWidth:500,windowHeight:500,windowPosition:"windowCenter"});function gZ(e,{title:t}){return Vt(e,"line.url"),"https://social-plugins.line.me/lineit/share"+Lt({url:e,text:t})}Kt("line",gZ,e=>({title:e.title}),{windowWidth:500,windowHeight:500});const xZ=Xh({color:"#0077B5",path:"M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z"});function yZ(e,{title:t,summary:n,source:s}){return Vt(e,"linkedin.url"),"https://linkedin.com/shareArticle"+Lt({url:e,mini:"true",title:t,summary:n,source:s})}const bZ=Kt("linkedin",yZ,({title:e,summary:t,source:n})=>({title:e,summary:t,source:n}),{windowWidth:750,windowHeight:600});function vZ(e,{title:t,description:n}){return Vt(e,"livejournal.url"),"https://www.livejournal.com/update.bml"+Lt({subject:t,event:n})}Kt("livejournal",vZ,e=>({title:e.title,description:e.description}),{windowWidth:660,windowHeight:460});function wZ(e,{title:t,description:n,imageUrl:s}){return Vt(e,"mailru.url"),"https://connect.mail.ru/share"+Lt({url:e,title:t,description:n,image_url:s})}Kt("mailru",wZ,e=>({title:e.title,description:e.description,imageUrl:e.imageUrl}),{windowWidth:660,windowHeight:460});function jZ(e,{title:t,description:n,image:s}){return Vt(e,"ok.url"),"https://connect.ok.ru/offer"+Lt({url:e,title:t,description:n,imageUrl:s})}Kt("ok",jZ,e=>({title:e.title,description:e.description,image:e.image}),{windowWidth:588,windowHeight:480,windowPosition:"screenCenter"});function kZ(e,t){window.OK||(window.OK={Share:{count:function(a,o){var l,c;(c=(l=window.OK.callbacks)[a])==null||c.call(l,o)}},callbacks:[]});const n="https://connect.ok.ru/dk",s=window.OK.callbacks.length;return window.ODKL={updateCount(i,a){var o,l;const c=i===""?0:parseInt(i.replace("react-share-",""),10);(l=(o=window.OK.callbacks)[c])==null||l.call(o,a===""?void 0:parseInt(a,10))}},window.OK.callbacks.push(t),ca(n+Lt({"st.cmd":"extLike",uid:`react-share-${s}`,ref:e}))}da(kZ);function NZ(e,{media:t,description:n,pinId:s}){return s?`https://pinterest.com/pin/${s}/repin/x/`:(Vt(e,"pinterest.url"),Vt(t,"pinterest.media"),"https://pinterest.com/pin/create/button/"+Lt({url:e,media:t,description:n}))}Kt("pinterest",NZ,e=>({media:e.media,description:e.description,pinId:e.pinId}),{windowWidth:1e3,windowHeight:730});function CZ(e,t){ca("https://api.pinterest.com/v1/urls/count.json"+Lt({url:e}),(s,i)=>{t(i?i.count:void 0)})}da(CZ);function SZ(e,{title:t}){return Vt(e,"pocket.url"),"https://getpocket.com/save"+Lt({url:e,title:t})}Kt("pocket",SZ,e=>({title:e.title}),{windowWidth:500,windowHeight:500});function EZ(e,{title:t}){return Vt(e,"reddit.url"),"https://www.reddit.com/web/submit"+Lt({url:e,title:t})}Kt("reddit",EZ,e=>({title:e.title}),{windowWidth:660,windowHeight:460,windowPosition:"windowCenter"});function TZ(e,{title:t}){return Vt(e,"gab.url"),"https://gab.com/compose"+Lt({url:e,text:t})}Kt("gab",TZ,e=>({title:e.title}),{windowWidth:660,windowHeight:640,windowPosition:"windowCenter"});function IZ(e,t){const n=`https://www.reddit.com/api/info.json?limit=1&url=${e}`;ca(n,{param:"jsonp"},(s,i)=>{t(!s&&i&&i.data&&i.data.children.length>0&&i.data.children[0].data.score?i.data.children[0].data.score:void 0)})}da(IZ);function PZ(e,{title:t}){return Vt(e,"telegram.url"),"https://telegram.me/share/url"+Lt({url:e,text:t})}Kt("telegram",PZ,e=>({title:e.title}),{windowWidth:550,windowHeight:400});function AZ(e,{title:t}){return Vt(e,"threads.url"),"https://threads.net/intent/post"+Lt({url:e,text:t})}Kt("threads",AZ,e=>({title:e.title}),{windowWidth:550,windowHeight:600});function RZ(e,{title:t,caption:n,tags:s,posttype:i}){return Vt(e,"tumblr.url"),"https://www.tumblr.com/widgets/share/tool"+Lt({canonicalUrl:e,title:t,caption:n,tags:s,posttype:i})}Kt("tumblr",RZ,e=>({title:e.title,tags:(e.tags||[]).join(","),caption:e.caption,posttype:e.posttype||"link"}),{windowWidth:660,windowHeight:460});function LZ(e,t){return ca("https://api.tumblr.com/v2/share/stats"+Lt({url:e}),(s,i)=>{t(!s&&i&&i.response?i.response.note_count:void 0)})}da(LZ);const MZ=Xh({color:"#00aced",path:"M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z"});function DZ(e,{title:t,via:n,hashtags:s=[],related:i=[]}){return Vt(e,"twitter.url"),Vt(Array.isArray(s),"twitter.hashtags is not an array"),Vt(Array.isArray(i),"twitter.related is not an array"),"https://twitter.com/intent/tweet"+Lt({url:e,text:t,via:n,hashtags:s.length>0?s.join(","):void 0,related:i.length>0?i.join(","):void 0})}const $Z=Kt("twitter",DZ,e=>({hashtags:e.hashtags,title:e.title,via:e.via,related:e.related}),{windowWidth:550,windowHeight:400});function OZ(e,{title:t,separator:n}){return Vt(e,"viber.url"),"viber://forward"+Lt({text:t?t+n+e:e})}Kt("viber",OZ,e=>({title:e.title,separator:e.separator||" "}),{windowWidth:660,windowHeight:460});function BZ(e,{title:t,image:n,noParse:s,noVkLinks:i}){return Vt(e,"vk.url"),"https://vk.com/share.php"+Lt({url:e,title:t,image:n,noparse:s?1:0,no_vk_links:i?1:0})}Kt("vk",BZ,e=>({title:e.title,image:e.image,noParse:e.noParse,noVkLinks:e.noVkLinks}),{windowWidth:660,windowHeight:460});function _Z(e,t){window.VK||(window.VK={}),window.VK.Share={count:(i,a)=>{var o,l;return(l=(o=window.VK.callbacks)==null?void 0:o[i])==null?void 0:l.call(o,a)}},window.VK.callbacks=[];const n="https://vk.com/share.php",s=window.VK.callbacks.length;return window.VK.callbacks.push(t),ca(n+Lt({act:"count",index:s,url:e}))}da(_Z);function FZ(e,{title:t,image:n}){return Vt(e,"weibo.url"),"http://service.weibo.com/share/share.php"+Lt({url:e,title:t,pic:n})}Kt("weibo",FZ,e=>({title:e.title,image:e.image}),{windowWidth:660,windowHeight:550,windowPosition:"screenCenter"});const zZ=Xh({color:"#25D366",path:"m42.32286,33.93287c-0.5178,-0.2589 -3.04726,-1.49644 -3.52105,-1.66732c-0.4712,-0.17346 -0.81554,-0.2589 -1.15987,0.2589c-0.34175,0.51004 -1.33075,1.66474 -1.63108,2.00648c-0.30032,0.33658 -0.60064,0.36247 -1.11327,0.12945c-0.5178,-0.2589 -2.17994,-0.80259 -4.14759,-2.56312c-1.53269,-1.37217 -2.56312,-3.05503 -2.86603,-3.57283c-0.30033,-0.5178 -0.03366,-0.80259 0.22524,-1.06149c0.23301,-0.23301 0.5178,-0.59547 0.7767,-0.90616c0.25372,-0.31068 0.33657,-0.5178 0.51262,-0.85437c0.17088,-0.36246 0.08544,-0.64725 -0.04402,-0.90615c-0.12945,-0.2589 -1.15987,-2.79613 -1.58964,-3.80584c-0.41424,-1.00971 -0.84142,-0.88027 -1.15987,-0.88027c-0.29773,-0.02588 -0.64208,-0.02588 -0.98382,-0.02588c-0.34693,0 -0.90616,0.12945 -1.37736,0.62136c-0.4712,0.5178 -1.80194,1.76053 -1.80194,4.27186c0,2.51134 1.84596,4.945 2.10227,5.30747c0.2589,0.33657 3.63497,5.51458 8.80262,7.74113c1.23237,0.5178 2.1903,0.82848 2.94111,1.08738c1.23237,0.38836 2.35599,0.33657 3.24402,0.20712c0.99159,-0.15534 3.04985,-1.24272 3.47963,-2.45956c0.44013,-1.21683 0.44013,-2.22654 0.31068,-2.45955c-0.12945,-0.23301 -0.46601,-0.36247 -0.98382,-0.59548m-9.40068,12.84407l-0.02589,0c-3.05503,0 -6.08417,-0.82849 -8.72495,-2.38189l-0.62136,-0.37023l-6.47252,1.68286l1.73463,-6.29129l-0.41424,-0.64725c-1.70875,-2.71846 -2.6149,-5.85116 -2.6149,-9.07706c0,-9.39809 7.68934,-17.06155 17.15993,-17.06155c4.58253,0 8.88029,1.78642 12.11655,5.02268c3.23625,3.21036 5.02267,7.50812 5.02267,12.06476c-0.0078,9.3981 -7.69712,17.06155 -17.14699,17.06155m14.58906,-31.58846c-3.93529,-3.80584 -9.1133,-5.95471 -14.62789,-5.95471c-11.36055,0 -20.60848,9.2065 -20.61625,20.52564c0,3.61684 0.94757,7.14565 2.75211,10.26282l-2.92557,10.63564l10.93337,-2.85309c3.0136,1.63108 6.4052,2.4958 9.85634,2.49839l0.01037,0c11.36574,0 20.61884,-9.2091 20.62403,-20.53082c0,-5.48093 -2.14111,-10.64081 -6.03239,-14.51915"});function UZ(){return/(android|iphone|ipad|mobile)/i.test(navigator.userAgent)}function VZ(e,{title:t,separator:n}){return Vt(e,"whatsapp.url"),"https://"+(UZ()?"api":"web")+".whatsapp.com/send"+Lt({text:t?t+n+e:e})}const HZ=Kt("whatsapp",VZ,e=>({title:e.title,separator:e.separator||" "}),{windowWidth:550,windowHeight:400});function WZ(e,{quote:t,hashtag:n}){return Vt(e,"workplace.url"),"https://work.facebook.com/sharer.php"+Lt({u:e,quote:t,hashtag:n})}Kt("workplace",WZ,e=>({quote:e.quote,hashtag:e.hashtag}),{windowWidth:550,windowHeight:400});const qZ=({post:e,onClose:t,onShare:n})=>{const[s,i]=h.useState(!1),a=`${window.location.origin}/posts/${e.PostID}`,o=e.Title||"Chia sẻ bài viết",l=async()=>{try{await navigator.clipboard.writeText(a),i(!0),setTimeout(()=>i(!1),2e3)}catch(c){console.error("Failed to copy:",c)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Chia sẻ bài viết"}),r.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:r.jsx(zt,{className:"h-6 w-6"})})]}),r.jsxs("div",{className:"border rounded-lg p-4 mb-4",children:[r.jsx("h3",{className:"font-medium mb-2",children:e.Title}),r.jsx("p",{className:"text-gray-600 text-sm line-clamp-2",children:e.Content})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[r.jsx(cZ,{url:a,quote:o,children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx(aZ,{size:40,round:!0}),r.jsx("span",{className:"text-xs mt-1",children:"Facebook"})]})}),r.jsx($Z,{url:a,title:o,children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx(MZ,{size:40,round:!0}),r.jsx("span",{className:"text-xs mt-1",children:"Twitter"})]})}),r.jsx(bZ,{url:a,title:o,children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx(xZ,{size:40,round:!0}),r.jsx("span",{className:"text-xs mt-1",children:"LinkedIn"})]})}),r.jsx(HZ,{url:a,title:o,children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx(zZ,{size:40,round:!0}),r.jsx("span",{className:"text-xs mt-1",children:"WhatsApp"})]})})]}),r.jsxs("div",{className:"flex items-center justify-between border rounded-lg p-3",children:[r.jsx("span",{className:"text-sm text-gray-600 truncate flex-1 mr-2",children:a}),r.jsxs("button",{onClick:l,className:"flex items-center text-blue-600 hover:text-blue-700",children:[r.jsx(j8,{className:"h-5 w-5 mr-1"}),r.jsx("span",{className:"text-sm",children:s?"Đã sao chép":"Sao chép"})]})]})]})})},yi={table:"min-w-full border border-gray-300 border-collapse my-4",thead:"bg-gray-50",th:"border border-gray-300 px-4 py-2 font-semibold text-left",td:"border border-gray-300 px-4 py-2",ul:"list-disc pl-6 space-y-1 my-4",ol:"list-decimal pl-6 space-y-1 my-4",li:"pl-1"},Vv={table:({node:e,...t})=>r.jsx("table",{className:yi.table,...t}),thead:({node:e,...t})=>r.jsx("thead",{className:yi.thead,...t}),th:({node:e,...t})=>r.jsx("th",{className:yi.th,...t}),td:({node:e,...t})=>r.jsx("td",{className:yi.td,...t}),ul:({node:e,...t})=>r.jsx("ul",{className:yi.ul,...t}),ol:({node:e,...t})=>r.jsx("ol",{className:yi.ol,...t}),li:({node:e,...t})=>r.jsx("li",{className:yi.li,...t})},KZ=()=>{var Me,Ze,Nt,Xt;const[e,t]=h.useState([]),[n,s]=h.useState(!0),[i,a]=h.useState("latest"),[o,l]=h.useState(!1),[c,d]=h.useState(null),[u,m]=h.useState(null),[f,p]=h.useState(""),[x,g]=h.useState([]),[b,w]=h.useState(!1),[k,v]=h.useState(0),[N,C]=h.useState([]),[T,E]=h.useState(!0),[P,R]=h.useState(null),[y,O]=h.useState(null),[_,L]=h.useState([]),[A,M]=h.useState(!1),[z,ie]=h.useState(null),[X,te]=h.useState(""),[B,H]=h.useState(!1),[K,$]=h.useState(!1),[me,ke]=h.useState(!1),[ye,se]=h.useState(!1),[G,W]=h.useState(""),[Z,Y]=h.useState("CONTENT"),[ee,ae]=h.useState(null),[de,Re]=h.useState(!1),[Be,Ge]=h.useState({}),et=St(),lt=lr();h.useEffect(()=>{const J=new URLSearchParams(lt.search),Ce=J.get("postId"),ne=J.get("commentId");Ce&&(d(Ce),ne&&m(ne)),He()},[i,lt.search]),h.useEffect(()=>{if(f.trim()==="")g(e);else{const J=f.toLowerCase(),Ce=e.filter(ne=>{const ve=(ne==null?void 0:ne.Content)||"",$e=(ne==null?void 0:ne.Title)||"",Ue=(ne==null?void 0:ne.AuthorName)||"";return ve.toLowerCase().includes(J)||$e.toLowerCase().includes(J)||Ue.toLowerCase().includes(J)});g(Ce)}},[f,e]);const Xe=J=>{const Ce=new Date().getTime(),ne=new Date(J.CreatedAt).getTime(),ve=(Ce-ne)/(1e3*60*60*24),$e=1,Ue=1.5,pt=2,nn=1.2,Ct=1/Math.log(ve+2),ua=(J.LikesCount||0)*$e+(J.CommentsCount||0)*Ue+(J.BookmarksCount||0)*pt+(J.SharesCount||0)*nn,Jh=.9+Math.random()*.2;return ua*Ct*Jh},He=async()=>{try{console.log("Fetching posts from API server...");try{const $e=await fetch("http://localhost:5001/api/posts",{method:"HEAD",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log("API server ping response:",$e.status)}catch($e){console.warn("API server ping failed:",$e)}const J=await fetch("http://localhost:5001/api/posts?limit=1000",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(console.log("API response status:",J.status),!J.ok)throw console.error("API Error:",J.status,J.statusText),new Error("Không thể tải bài viết");const Ce=await J.json();console.log("Posts data received:",Ce);const ne=Ce.posts||[];let ve=[...ne];i==="trending"?(ve.forEach($e=>$e._score=Xe($e)),ve.sort(($e,Ue)=>Ue._score-$e._score)):i==="latest"&&ve.sort(($e,Ue)=>{const pt=new Date($e.CreatedAt).setHours(0,0,0,0),nn=new Date(Ue.CreatedAt).setHours(0,0,0,0);return pt===nn?Xe(Ue)-Xe($e):new Date(Ue.CreatedAt)-new Date($e.CreatedAt)}),t(ve),g(ve),c&&(ne.some(Ue=>Ue.PostID.toString()===c.toString())||Pe(c)),!y&&ve.length>0&&O(ve[0])}catch(J){console.error("Fetch posts error:",J)}finally{s(!1)}},Pe=async J=>{try{const Ce=await fetch(`/api/posts/${J}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!Ce.ok)throw new Error("Không thể tải bài viết");const ne=await Ce.json();ne.post&&t(ve=>ve.some($e=>$e.PostID.toString()===J.toString())?ve:[ne.post,...ve])}catch(Ce){console.error("Fetch single post error:",Ce)}},vt=()=>{He(),$(!0),l(!1),setTimeout(()=>$(!1),3e3)},Ye=async J=>{try{if(!(await fetch(`/api/posts/${J}/like`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Không thể thích bài viết");He()}catch(Ce){console.error("Like post error:",Ce)}},ce=async(J,Ce=1)=>{try{t(e.map(ne=>ne.PostID===J?{...ne,CommentsCount:Math.max(0,ne.CommentsCount+Ce)}:ne))}catch(ne){console.error("Comment update error:",ne),He()}},V=[{id:"latest",name:"Mới nhất",icon:ir},{id:"trending",name:"Xu hướng",icon:Y8}],I=()=>{const J=k+1;J<e.length?v(J):w(!1)},j=()=>{const J=k-1;J>=0&&v(J)};h.useEffect(()=>{(async()=>{try{E(!0);const Ce=await bt.getAllCourses();if(Ce.data&&Ce.data.success){const ne=Ce.data.data||[];C(ne.slice(0,3))}}catch(Ce){console.error("Error fetching featured courses:",Ce)}finally{E(!1)}})()},[]);const S=J=>{const Ce=e.find(ne=>ne.PostID===J);Ce?(console.log("Setting post for share:",Ce),R(Ce)):console.error("Post not found for sharing:",J)},F=J=>{t(e.map(Ce=>Ce.PostID===J?{...Ce,SharesCount:(Ce.SharesCount||0)+1}:Ce))},U=J=>{O(J),et(`/posts?postId=${J.PostID}`)},q=async J=>{try{const Ce=localStorage.getItem("token");if(!(await fetch(`/api/posts/${J}/bookmark`,{method:"POST",headers:{Authorization:`Bearer ${Ce}`}})).ok)throw new Error("Failed to bookmark post");t(ve=>ve.map($e=>$e.PostID===J?{...$e,IsBookmarked:!$e.IsBookmarked}:$e))}catch(Ce){console.error("Error bookmarking post:",Ce)}},Q=async J=>{if(J){M(!0),ie(null);try{const Ce=localStorage.getItem("token"),ne=await fetch(`/api/posts/${J}/comments`,{headers:{Authorization:`Bearer ${Ce}`}});if(!ne.ok)throw new Error("Could not load comments");const ve=await ne.json();L(ve.comments||[])}catch(Ce){console.error("Error fetching comments:",Ce),ie("Failed to load comments")}finally{M(!1)}}};h.useEffect(()=>{y&&Q(y.PostID)},[y]);const be=async J=>{if(J.preventDefault(),!(!X.trim()||!y)){H(!0);try{const Ce=localStorage.getItem("token"),ne=await fetch(`/api/posts/${y.PostID}/comments`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ce}`},body:JSON.stringify({content:X})});if(!ne.ok)throw new Error("Failed to add comment");const ve=await ne.json();L([ve.comment,..._]),te(""),ce(y.PostID)}catch(Ce){console.error("Error adding comment:",Ce),ie("Failed to post your comment")}finally{H(!1)}}},ge=async J=>{try{const Ce=localStorage.getItem("token");if(!(await fetch(`/api/posts/comments/${J}/like`,{method:"POST",headers:{Authorization:`Bearer ${Ce}`}})).ok)throw new Error("Failed to like comment");L(_.map(ve=>ve.CommentID===J?{...ve,LikesCount:ve.IsLiked?ve.LikesCount-1:ve.LikesCount+1,IsLiked:!ve.IsLiked}:ve))}catch(Ce){console.error("Error liking comment:",Ce)}},oe=async J=>{try{const Ce=localStorage.getItem("token");if(!(await fetch(`/api/posts/comments/${J}`,{method:"DELETE",headers:{Authorization:`Bearer ${Ce}`}})).ok)throw new Error("Failed to delete comment");L(_.filter(ve=>ve.CommentID!==J)),y&&ce(y.PostID,-1)}catch(Ce){console.error("Error deleting comment:",Ce)}},he=J=>{const Ce=new Date(J),ve=Math.floor((new Date-Ce)/1e3);if(ve<60)return"Vừa xong";const $e=Math.floor(ve/60);if($e<60)return`${$e} phút trước`;const Ue=Math.floor($e/60);if(Ue<24)return`${Ue} giờ trước`;const pt=Math.floor(Ue/24);return pt<7?`${pt} ngày trước`:Ce.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"})},fe=async(J,Ce)=>{try{const ne=localStorage.getItem("token");if(!(await fetch("/api/reports",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ne}`},body:JSON.stringify({targetId:J,...Ce})})).ok)throw new Error("Failed to report post");return ke(!0),setTimeout(()=>ke(!1),3e3),!0}catch(ne){return console.error("Error reporting post:",ne),!1}},ze=(J,Ce)=>{const ne=document.createElement("video");ne.crossOrigin="anonymous";const ve=J.startsWith("http")?J:`/uploads/${J.replace(/^\/uploads\//,"").replace(/^uploads\//,"")}`;ne.src=ve,ne.muted=!0,ne.playsInline=!0,ne.addEventListener("loadeddata",()=>{ne.currentTime=Math.min(1,ne.duration||1)}),ne.addEventListener("seeked",()=>{const $e=document.createElement("canvas");$e.width=ne.videoWidth,$e.height=ne.videoHeight,$e.getContext("2d").drawImage(ne,0,0,$e.width,$e.height);try{const pt=$e.toDataURL("image/jpeg");Ge(nn=>({...nn,[Ce]:pt}))}catch(pt){console.error("Error generating thumbnail:",pt)}ne.remove()}),ne.load()};return h.useEffect(()=>{e.length>0&&e.forEach(J=>{J.media&&J.media.length>0&&J.media[0].MediaType==="video"&&!Be[J.PostID]&&ze(J.media[0].MediaUrl,J.PostID)})},[e]),r.jsxs("div",{className:"w-full min-h-screen bg-gray-50",children:[K&&r.jsxs("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded shadow-lg z-50 flex items-center justify-between",children:[r.jsx("span",{children:"Đăng bài thành công!"}),r.jsx("button",{onClick:()=>$(!1),className:"ml-4 text-green-700",children:"×"})]}),me&&r.jsxs("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded shadow-lg z-50 flex items-center justify-between",children:[r.jsx("span",{children:"Báo cáo đã được gửi thành công!"}),r.jsx("button",{onClick:()=>ke(!1),className:"ml-4 text-yellow-700",children:"×"})]}),r.jsx("button",{onClick:()=>l(!0),className:"fixed bottom-6 right-6 bg-blue-600 text-white rounded-full p-4 shadow-lg hover:bg-blue-700 transition-colors z-30",children:r.jsx(Lg,{className:"h-6 w-6"})}),o&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-40 p-4 md:p-0",children:r.jsx("div",{className:"w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>l(!1),className:"absolute -top-4 -right-4 bg-white rounded-full w-8 h-8 flex items-center justify-center shadow-md z-10",children:"×"}),r.jsx(MJ,{onPostCreated:vt})]})})}),b&&r.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex items-center justify-center",onClick:J=>{J.target===J.currentTarget&&w(!1)},children:[r.jsx("button",{className:"absolute top-4 right-4 text-white z-10",onClick:()=>w(!1),children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),r.jsx("button",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white z-10",onClick:j,children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),r.jsx("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-white z-10",onClick:I,children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})}),r.jsx("div",{className:"w-full h-full flex items-center justify-center",onClick:J=>J.stopPropagation(),children:r.jsxs("div",{className:"relative w-full max-w-2xl h-full",children:[r.jsx("div",{className:"absolute top-4 left-4 right-4 h-1 bg-gray-700 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-white transition-all duration-300",style:{width:`${(k+1)*100/e.length}%`}})}),r.jsx("img",{src:(Me=e[k])==null?void 0:Me.media,alt:"Story",className:"w-full h-full object-contain"}),r.jsxs("div",{className:"absolute bottom-4 left-4 right-4 text-white",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("img",{src:(Ze=e[k])==null?void 0:Ze.avatar,alt:"Avatar",className:"w-8 h-8 rounded-full"}),r.jsx("span",{className:"font-semibold",children:(Nt=e[k])==null?void 0:Nt.username})]}),r.jsx("p",{className:"mt-2",children:(Xt=e[k])==null?void 0:Xt.text})]})]})})]}),P&&r.jsx(qZ,{post:P,onClose:()=>{console.log("Closing share modal"),R(null)},onShare:F}),r.jsxs("div",{className:"w-full mx-auto py-6 px-4",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center space-x-2",children:V.map(J=>{const Ce=J.icon;return r.jsxs("button",{onClick:()=>a(J.id),className:`flex items-center space-x-1 px-4 py-2 rounded-lg ${i===J.id?"bg-blue-100 text-blue-700 border border-blue-300":"text-gray-700 hover:bg-gray-100"}`,children:[r.jsx(Ce,{className:"w-4 h-4"}),r.jsx("span",{children:J.name})]},J.id)})}),r.jsxs("div",{className:"relative max-w-xs",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Rg,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Tìm kiếm bài viết...",value:f,onChange:J=>p(J.target.value)})]})]})}),r.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[r.jsx("div",{className:"lg:w-2/3",children:n?r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 flex justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):y?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[y.media&&y.media.length>0&&r.jsx("div",{className:"w-full bg-black flex items-center justify-center",children:y.media[0].MediaType==="video"?r.jsx("video",{className:"w-full max-h-[500px] object-contain",src:y.media[0].MediaUrl.startsWith("http")?y.media[0].MediaUrl:`/uploads/${y.media[0].MediaUrl.replace(/^\/uploads\//,"").replace(/^uploads\//,"")}`,controls:!0,autoPlay:!0}):r.jsx("img",{className:"w-full max-h-[500px] object-contain",src:y.media[0].MediaUrl.startsWith("http")?y.media[0].MediaUrl:`/uploads/${y.media[0].MediaUrl.replace(/^\/uploads\//,"").replace(/^uploads\//,"")}`,alt:y.Title||"Post media"})}),r.jsx("div",{className:"p-4",children:r.jsxs("div",{className:"flex justify-between items-center mt-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Tt,{src:y.UserImage,name:y.FullName,alt:y.FullName||"User",size:"small"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:y.FullName||"Unknown User"}),r.jsx("p",{className:"text-sm text-gray-500",children:y.CreatedAt&&he(y.CreatedAt)})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("button",{onClick:()=>Ye(y.PostID),className:`flex items-center space-x-1 px-3 py-1.5 rounded-full ${y.IsLiked?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,title:y.IsLiked?"Bỏ thích":"Thích",children:[y.IsLiked?r.jsx(Wd,{className:"h-5 w-5"}):r.jsx(np,{className:"h-5 w-5"}),r.jsx("span",{children:y.LikesCount||0})]}),r.jsxs("button",{onClick:()=>S(y.PostID),className:"flex items-center space-x-1 px-3 py-1.5 rounded-full bg-gray-100 text-gray-700 hover:bg-gray-200",title:"Chia sẻ",children:[r.jsx(Cj,{className:"h-5 w-5"}),r.jsx("span",{children:"Chia sẻ"})]}),r.jsx("button",{onClick:()=>q(y.PostID),className:`flex items-center justify-center p-2 rounded-full ${y.IsBookmarked?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,title:y.IsBookmarked?"Bỏ lưu bài viết":"Lưu bài viết",children:y.IsBookmarked?r.jsx(ap,{className:"h-5 w-5"}):r.jsx(vl,{className:"h-5 w-5"})}),(()=>{const J=JSON.parse(localStorage.getItem("user")||"{}");return!(J.UserID===y.UserID||J.id===y.UserID)&&r.jsx("button",{onClick:()=>fe(y.PostID,{title:"Báo cáo bài viết vi phạm",content:"Bài viết này có nội dung vi phạm tiêu chuẩn cộng đồng",category:"CONTENT",targetType:"POST"}),className:"flex items-center space-x-1 px-3 py-1.5 rounded-full bg-gray-100 text-yellow-600 hover:bg-gray-200",title:"Báo cáo bài viết",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})})()]})]})}),r.jsx("div",{className:"border-t border-gray-100 p-4",children:r.jsx("div",{className:"prose prose-sm max-w-none overflow-x-auto",children:r.jsx(ps,{remarkPlugins:[qi],components:Vv,children:y.Content||""})})}),r.jsxs("div",{className:"border-t border-gray-100 p-4",children:[r.jsxs("h3",{className:"font-medium mb-4",children:[y.CommentsCount||0," bình luận"]}),r.jsxs("form",{onSubmit:be,className:"flex items-center space-x-2 mb-6",children:[r.jsx(Tt,{src:JSON.parse(localStorage.getItem("user")||"{}").ProfileImage||JSON.parse(localStorage.getItem("user")||"{}").avatar,name:JSON.parse(localStorage.getItem("user")||"{}").FullName,alt:"Your profile",size:"small"}),r.jsxs("div",{className:"flex-1 relative",children:[r.jsx("input",{type:"text",className:"w-full py-2 px-3 border border-gray-300 rounded-full bg-gray-100 focus:bg-white focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Viết bình luận...",value:X,onChange:J=>te(J.target.value),disabled:B}),r.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-blue-500 disabled:text-gray-400",disabled:B||!X.trim(),children:B?r.jsx("div",{className:"w-6 h-6 border-2 border-t-blue-500 border-r-transparent border-b-transparent border-l-transparent rounded-full animate-spin"}):r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]}),A?r.jsx("div",{className:"flex justify-center py-4",children:r.jsx("div",{className:"w-8 h-8 border-2 border-gray-200 border-t-blue-500 rounded-full animate-spin"})}):z?r.jsx("div",{className:"text-center py-4 text-red-500 text-sm",children:z}):_.length===0?r.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"Chưa có bình luận nào. Hãy là người đầu tiên bình luận!"}):r.jsx("div",{className:"space-y-4 max-h-[400px] overflow-y-auto pr-2",children:_.map(J=>r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(Tt,{src:J.UserImage,name:J.FullName,alt:J.FullName,size:"small"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"bg-gray-100 rounded-lg px-3 py-2",children:[r.jsx("div",{className:"font-medium text-sm",children:J.FullName}),r.jsx("div",{className:"text-sm prose prose-sm max-w-none overflow-x-auto",children:r.jsx(ps,{remarkPlugins:[qi],components:Vv,children:J.Content})})]}),r.jsxs("div",{className:"flex items-center mt-1 text-xs text-gray-500 space-x-3",children:[r.jsx("span",{children:he(J.CreatedAt)}),r.jsxs("button",{className:`font-medium ${J.IsLiked?"text-blue-500":""}`,onClick:()=>ge(J.CommentID),children:["Thích (",J.LikesCount||0,")"]}),J.UserID===JSON.parse(localStorage.getItem("user")||"{}").UserID&&r.jsx("button",{className:"font-medium text-red-500",onClick:()=>oe(J.CommentID),children:"Xóa"})]})]})]},J.CommentID))})]})]}):r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:r.jsx("p",{className:"text-gray-500",children:"Không có bài viết nào được chọn"})})}),r.jsx("div",{className:"lg:w-1/3",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[r.jsx("div",{className:"p-4 border-b border-gray-100",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg font-medium",children:"Bài viết gợi ý"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{className:`px-3 py-1 rounded ${i==="latest"?"bg-blue-100 text-blue-600":"text-gray-500 hover:bg-gray-100"}`,onClick:()=>a("latest"),children:"Mới nhất"}),r.jsx("button",{className:`px-3 py-1 rounded ${i==="trending"?"bg-blue-100 text-blue-600":"text-gray-500 hover:bg-gray-100"}`,onClick:()=>a("trending"),children:"Phổ biến"})]})]})}),r.jsx("div",{className:"overflow-y-auto max-h-[600px]",children:x.map(J=>{var Ce;return r.jsxs("div",{className:`p-3 flex gap-3 cursor-pointer hover:bg-gray-50 ${(y==null?void 0:y.PostID)===J.PostID?"bg-blue-50":""}`,onClick:()=>U(J),children:[r.jsx("div",{className:"w-1/3",children:J.media&&J.media.length>0?r.jsx("div",{className:"relative pb-[56.25%] h-0",children:J.media[0].MediaType==="video"?r.jsxs("div",{className:"absolute inset-0 flex items-center justify-center bg-black",children:[r.jsx("img",{src:Be[J.PostID]||J.media[0].ThumbnailUrl||J.media[0].MediaUrl.startsWith("http")?Be[J.PostID]||J.media[0].ThumbnailUrl||J.media[0].MediaUrl:`/uploads/${J.media[0].MediaUrl.replace(/^\/uploads\//,"").replace(/^uploads\//,"")}`,alt:"Video thumbnail",className:"w-full h-full object-cover",onError:ne=>{ne.target.onerror=null,ne.target.src="https://via.placeholder.com/100x100/eee/999?text=Video+Preview"}}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("div",{className:"w-8 h-8 bg-black bg-opacity-60 rounded-full flex items-center justify-center",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})})})]}):r.jsx("img",{src:J.media[0].MediaUrl.startsWith("http")?J.media[0].MediaUrl:`/uploads/${J.media[0].MediaUrl.replace(/^\/uploads\//,"").replace(/^uploads\//,"")}`,alt:"Post media",className:"absolute inset-0 w-full h-full object-cover rounded-lg",onError:ne=>{ne.target.onerror=null,ne.target.src="https://via.placeholder.com/100x100/eee/999?text=Image"}})}):r.jsx("div",{className:"bg-gray-200 rounded-lg w-full pb-[56.25%] relative",children:r.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-500",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})})}),r.jsxs("div",{className:"w-2/3",children:[r.jsx("p",{className:"text-xs text-gray-500",children:J.FullName||"Unknown User"}),r.jsx("div",{className:"font-medium text-sm line-clamp-2 mb-1 prose prose-sm",children:r.jsx(ps,{remarkPlugins:[qi],children:J.Title||((Ce=J.Content)==null?void 0:Ce.substring(0,60))||"Không có tiêu đề"})}),r.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[r.jsx("div",{className:"flex items-center mr-2",children:r.jsxs("button",{onClick:ne=>{ne.stopPropagation(),Ye(J.PostID)},className:`flex items-center focus:outline-none ${J.IsLiked?"text-blue-600":"text-gray-500 hover:text-gray-700"}`,"aria-label":J.IsLiked?"Bỏ thích":"Thích",children:[J.IsLiked?r.jsx(Wd,{className:"h-4 w-4 mr-1 text-blue-600"}):r.jsx(np,{className:"h-4 w-4 mr-1"}),r.jsx("span",{className:J.IsLiked?"text-blue-600":"",children:J.LikesCount||0})]})}),r.jsxs("div",{className:"flex items-center mx-2",children:[r.jsx(xj,{className:"h-4 w-4 mr-1 text-gray-500"}),r.jsx("span",{children:J.CommentsCount||0})]}),r.jsx("div",{className:"flex items-center mx-2",children:r.jsxs("button",{onClick:ne=>{ne.stopPropagation(),q(J.PostID)},className:`flex items-center focus:outline-none ${J.IsBookmarked?"text-blue-600":"text-gray-500 hover:text-gray-700"}`,"aria-label":J.IsBookmarked?"Bỏ lưu":"Lưu bài viết",children:[J.IsBookmarked?r.jsx(ap,{className:"h-4 w-4 mr-1 text-blue-600"}):r.jsx(vl,{className:"h-4 w-4 mr-1"}),r.jsx("span",{className:J.IsBookmarked?"text-blue-600":"",children:J.BookmarksCount||0})]})}),r.jsx("span",{className:"mx-2 text-gray-400",children:"•"}),r.jsx("span",{children:new Date(J.CreatedAt).toLocaleDateString()})]})]})]},J.PostID)})})]})})]})]})]})},GZ=()=>{const e=Ht(),{notifications:t,loading:n}=gn(c=>c.notifications),[s,i]=h.useState(!1);h.useEffect(()=>{e(Go())},[e]);const a=c=>{switch(c){case"comment":return r.jsx(wl,{className:"h-6 w-6"});case"reply":return r.jsx(Fs,{className:"h-6 w-6"});case"reaction":return r.jsx(Tj,{className:"h-6 w-6 text-red-500"});case"message":return r.jsx(Fs,{className:"h-6 w-6"});default:return r.jsx(Qo,{className:"h-6 w-6"})}},o=c=>{const d=new Date(c),m=Math.floor((new Date-d)/1e3);return m<60?"Vừa xong":m<3600?`${Math.floor(m/60)} phút trước`:m<86400?`${Math.floor(m/3600)} giờ trước`:`${Math.floor(m/86400)} ngày trước`},l=async()=>{try{i(!0);const c="http://localhost:5001",d=localStorage.getItem("token");await fetch(`${c}/api/notifications/read-all`,{method:"PUT",headers:{Authorization:`Bearer ${d}`}}),e(Go())}catch(c){console.error("Lỗi khi đánh dấu đã đọc tất cả:",c)}finally{i(!1)}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Thông báo"}),t&&t.some(c=>!c.IsRead)&&r.jsx("button",{onClick:l,disabled:s,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm transition-colors disabled:opacity-50",children:s?"Đang xử lý...":"Đánh dấu tất cả đã đọc"})]}),r.jsx("div",{className:"bg-white rounded-lg shadow",children:n?r.jsxs("div",{className:"text-center p-10",children:[r.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-500",children:"Đang tải thông báo..."})]}):t&&t.length>0?r.jsx("div",{className:"divide-y",children:t.map(c=>r.jsx("div",{className:`p-4 hover:bg-gray-50 ${c.IsRead?"":"bg-blue-50"}`,children:r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:`flex-shrink-0 h-10 w-10 rounded-full flex items-center justify-center ${c.IsRead?"bg-gray-100 text-gray-500":"bg-blue-100 text-blue-600"}`,children:a(c.Type)}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`font-medium ${c.IsRead?"text-gray-700":"text-gray-900"}`,children:c.Title}),r.jsx("p",{className:"text-gray-600 text-sm mt-1",children:c.Content}),r.jsx("p",{className:"text-gray-400 text-xs mt-2",children:o(c.CreatedAt)})]}),!c.IsRead&&r.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full"})]})},c.NotificationID))}):r.jsxs("div",{className:"text-center p-10",children:[r.jsx("div",{className:"text-gray-400 text-5xl mb-4",children:"🔔"}),r.jsx("p",{className:"text-gray-500",children:"Bạn không có thông báo nào"})]})})]})},XZ=({tier:e})=>{const t={MASTER:"bg-purple-100 text-purple-800",DIAMOND:"bg-blue-100 text-blue-800",PLATINUM:"bg-gray-100 text-gray-800",GOLD:"bg-yellow-100 text-yellow-800",SILVER:"bg-gray-300 text-gray-800",BRONZE:"bg-amber-100 text-amber-800"}[e]||"bg-gray-100 text-gray-600";return r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${t}`,children:e})},YZ=()=>{const e=Ht(),{rankings:t,loading:n,timeRange:s,category:i}=gn(f=>f.ranking),{user:a}=gn(f=>f.auth),[o,l]=h.useState(s),[c,d]=h.useState(i);h.useEffect(()=>{e(ld({timeRange:s,category:i})),a!=null&&a.id&&e(cd(a.id))},[e,s,i,a==null?void 0:a.id]);const u=f=>{const p=f.target.value;l(p),e(AT(p))},m=f=>{const p=f.target.value;d(p),e(RT(p))};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl p-8 text-white",children:[r.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Bảng Xếp Hạng"}),r.jsx("p",{className:"text-blue-100",children:"Theo dõi và cạnh tranh với các học viên khác"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 flex flex-wrap gap-4",children:[r.jsxs("select",{value:o,onChange:u,className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"week",children:"Tuần này"}),r.jsx("option",{value:"month",children:"Tháng này"}),r.jsx("option",{value:"all",children:"Tất cả thời gian"})]}),r.jsxs("select",{value:c,onChange:m,className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"Tất cả"}),r.jsx("option",{value:"courses",children:"Khóa học"})]})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:n?r.jsx("div",{className:"flex justify-center items-center p-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-500",children:"Hạng"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-500",children:"Học viên"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-500",children:"Cấp bậc"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-500",children:"Điểm số"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-gray-500",children:"Khóa học"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map((f,p)=>r.jsxs("tr",{className:`${p<3?"bg-blue-50/50":""} ${(a==null?void 0:a.id)===f.id?"bg-yellow-50":""}`,children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:`flex items-center ${p<3?"text-yellow-600 font-bold":"text-gray-500"}`,children:[p<3?r.jsx(Hd,{className:"w-5 h-5 mr-1"}):null,"#",p+1]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Tt,{src:f.avatar,name:f.name,alt:f.name,size:"small"}),r.jsxs("div",{className:"ml-4",children:[r.jsx("div",{className:"font-medium text-gray-900",children:f.name}),(a==null?void 0:a.id)===f.id&&r.jsx("div",{className:"text-xs text-blue-600",children:"Bạn"})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx(XZ,{tier:f.tier})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-xl font-bold text-blue-600",children:f.points}),r.jsx("div",{className:"text-sm text-gray-500",children:"điểm"})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ks,{className:"w-5 h-5 text-green-500 mr-2"}),f.completedCourses||0]})})]},f.id))})]})})]})};var Hv;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(Hv||(Hv={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wv;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(Wv||(Wv={}));var qv;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(qv||(qv={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=["user","model","function","system"];var Gv;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Gv||(Gv={}));var Xv;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Xv||(Xv={}));var Yv;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Yv||(Yv={}));var Qv;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(Qv||(Qv={}));var ml;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(ml||(ml={}));var Jv;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(Jv||(Jv={}));var Zv;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(Zv||(Zv={}));var ew;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(ew||(ew={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class ka extends An{constructor(t,n){super(t),this.response=n}}class z4 extends An{constructor(t,n,s,i){super(t),this.status=n,this.statusText=s,this.errorDetails=i}}class Ys extends An{}class U4 extends An{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QZ="https://generativelanguage.googleapis.com",JZ="v1beta",ZZ="0.24.1",eee="genai-js";var sa;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(sa||(sa={}));class tee{constructor(t,n,s,i,a){this.model=t,this.task=n,this.apiKey=s,this.stream=i,this.requestOptions=a}toString(){var t,n;const s=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||JZ;let a=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||QZ}/${s}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function nee(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${eee}/${ZZ}`),t.join(" ")}async function ree(e){var t;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",nee(e.requestOptions)),n.append("x-goog-api-key",e.apiKey);let s=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(i){throw new Ys(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${i.message}`)}for(const[i,a]of s.entries()){if(i==="x-goog-api-key")throw new Ys(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new Ys(`Header name ${i} can only be set using the apiClient field`);n.append(i,a)}}return n}async function see(e,t,n,s,i,a){const o=new tee(e,t,n,s,a);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},lee(a)),{method:"POST",headers:await ree(o),body:i})}}async function bc(e,t,n,s,i,a={},o=fetch){const{url:l,fetchOptions:c}=await see(e,t,n,s,i,a);return iee(l,c,o)}async function iee(e,t,n=fetch){let s;try{s=await n(e,t)}catch(i){aee(i,e)}return s.ok||await oee(s,e),s}function aee(e,t){let n=e;throw n.name==="AbortError"?(n=new U4(`Request aborted when fetching ${t.toString()}: ${e.message}`),n.stack=e.stack):e instanceof z4||e instanceof Ys||(n=new An(`Error fetching from ${t.toString()}: ${e.message}`),n.stack=e.stack),n}async function oee(e,t){let n="",s;try{const i=await e.json();n=i.error.message,i.error.details&&(n+=` ${JSON.stringify(i.error.details)}`,s=i.error.details)}catch{}throw new z4(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${n}`,e.status,e.statusText,s)}function lee(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const n=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>n.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{n.abort()}),t.signal=n.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Pd(e.candidates[0]))throw new ka(`${Bs(e)}`,e);return cee(e)}else if(e.promptFeedback)throw new ka(`Text not available. ${Bs(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Pd(e.candidates[0]))throw new ka(`${Bs(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),tw(e)[0]}else if(e.promptFeedback)throw new ka(`Function call not available. ${Bs(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Pd(e.candidates[0]))throw new ka(`${Bs(e)}`,e);return tw(e)}else if(e.promptFeedback)throw new ka(`Function call not available. ${Bs(e)}`,e)},e}function cee(e){var t,n,s,i;const a=[];if(!((n=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const o of(i=(s=e.candidates)===null||s===void 0?void 0:s[0].content)===null||i===void 0?void 0:i.parts)o.text&&a.push(o.text),o.executableCode&&a.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&a.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function tw(e){var t,n,s,i;const a=[];if(!((n=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0)&&n.parts)for(const o of(i=(s=e.candidates)===null||s===void 0?void 0:s[0].content)===null||i===void 0?void 0:i.parts)o.functionCall&&a.push(o.functionCall);if(a.length>0)return a}const dee=[ml.RECITATION,ml.SAFETY,ml.LANGUAGE];function Pd(e){return!!e.finishReason&&dee.includes(e.finishReason)}function Bs(e){var t,n,s;let i="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)i+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(i+=` due to ${e.promptFeedback.blockReason}`),!((n=e.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(i+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((s=e.candidates)===null||s===void 0)&&s[0]){const a=e.candidates[0];Pd(a)&&(i+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(i+=`: ${a.finishMessage}`))}return i}function Vl(e){return this instanceof Vl?(this.v=e,this):new Vl(e)}function uee(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(e,t||[]),i,a=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(f){s[f]&&(i[f]=function(p){return new Promise(function(x,g){a.push([f,p,x,g])>1||l(f,p)})})}function l(f,p){try{c(s[f](p))}catch(x){m(a[0][3],x)}}function c(f){f.value instanceof Vl?Promise.resolve(f.value.v).then(d,u):m(a[0][2],f)}function d(f){l("next",f)}function u(f){l("throw",f)}function m(f,p){f(p),a.shift(),a.length&&l(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function hee(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=pee(t),[s,i]=n.tee();return{stream:fee(s),response:mee(i)}}async function mee(e){const t=[],n=e.getReader();for(;;){const{done:s,value:i}=await n.read();if(s)return ex(gee(t));t.push(i)}}function fee(e){return uee(this,arguments,function*(){const n=e.getReader();for(;;){const{value:s,done:i}=yield Vl(n.read());if(i)break;yield yield Vl(ex(s))}})}function pee(e){const t=e.getReader();return new ReadableStream({start(s){let i="";return a();function a(){return t.read().then(({value:o,done:l})=>{if(l){if(i.trim()){s.error(new An("Failed to parse stream"));return}s.close();return}i+=o;let c=i.match(nw),d;for(;c;){try{d=JSON.parse(c[1])}catch{s.error(new An(`Error parsing JSON response: "${c[1]}"`));return}s.enqueue(d),i=i.substring(c[0].length),c=i.match(nw)}return a()}).catch(o=>{let l=o;throw l.stack=o.stack,l.name==="AbortError"?l=new U4("Request aborted when reading from the stream"):l=new An("Error reading from the stream"),l})}}})}function gee(e){const t=e[e.length-1],n={promptFeedback:t==null?void 0:t.promptFeedback};for(const s of e){if(s.candidates){let i=0;for(const a of s.candidates)if(n.candidates||(n.candidates=[]),n.candidates[i]||(n.candidates[i]={index:i}),n.candidates[i].citationMetadata=a.citationMetadata,n.candidates[i].groundingMetadata=a.groundingMetadata,n.candidates[i].finishReason=a.finishReason,n.candidates[i].finishMessage=a.finishMessage,n.candidates[i].safetyRatings=a.safetyRatings,a.content&&a.content.parts){n.candidates[i].content||(n.candidates[i].content={role:a.content.role||"user",parts:[]});const o={};for(const l of a.content.parts)l.text&&(o.text=l.text),l.functionCall&&(o.functionCall=l.functionCall),l.executableCode&&(o.executableCode=l.executableCode),l.codeExecutionResult&&(o.codeExecutionResult=l.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),n.candidates[i].content.parts.push(o)}i++}s.usageMetadata&&(n.usageMetadata=s.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V4(e,t,n,s){const i=await bc(t,sa.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),s);return hee(i)}async function H4(e,t,n,s){const a=await(await bc(t,sa.GENERATE_CONTENT,e,!1,JSON.stringify(n),s)).json();return{response:ex(a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function Hl(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const n of e)typeof n=="string"?t.push({text:n}):t.push(n);return xee(t)}function xee(e){const t={role:"user",parts:[]},n={role:"function",parts:[]};let s=!1,i=!1;for(const a of e)"functionResponse"in a?(n.parts.push(a),i=!0):(t.parts.push(a),s=!0);if(s&&i)throw new An("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!i)throw new An("No content is provided for sending chat message.");return s?t:n}function yee(e,t){var n;let s={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(n=t==null?void 0:t.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const i=e.generateContentRequest!=null;if(e.contents){if(i)throw new Ys("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=e.contents}else if(i)s=Object.assign(Object.assign({},s),e.generateContentRequest);else{const a=Hl(e);s.contents=[a]}return{generateContentRequest:s}}function rw(e){let t;return e.contents?t=e:t={contents:[Hl(e)]},e.systemInstruction&&(t.systemInstruction=W4(e.systemInstruction)),t}function bee(e){return typeof e=="string"||Array.isArray(e)?{content:Hl(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],vee={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function wee(e){let t=!1;for(const n of e){const{role:s,parts:i}=n;if(!t&&s!=="user")throw new An(`First content should be with role 'user', got ${s}`);if(!Kv.includes(s))throw new An(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(Kv)}`);if(!Array.isArray(i))throw new An("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new An("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const l of i)for(const c of sw)c in l&&(a[c]+=1);const o=vee[s];for(const l of sw)if(!o.includes(l)&&a[l]>0)throw new An(`Content with role '${s}' can't contain '${l}' part`);t=!0}}function iw(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const s of n.parts)if(s===void 0||Object.keys(s).length===0||s.text!==void 0&&s.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="SILENT_ERROR";class jee{constructor(t,n,s,i={}){this.model=n,this.params=s,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,s!=null&&s.history&&(wee(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,n={}){var s,i,a,o,l,c;await this._sendPromise;const d=Hl(t),u={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,d]},m=Object.assign(Object.assign({},this._requestOptions),n);let f;return this._sendPromise=this._sendPromise.then(()=>H4(this._apiKey,this.model,u,m)).then(p=>{var x;if(iw(p.response)){this._history.push(d);const g=Object.assign({parts:[],role:"model"},(x=p.response.candidates)===null||x===void 0?void 0:x[0].content);this._history.push(g)}else{const g=Bs(p.response);g&&console.warn(`sendMessage() was unsuccessful. ${g}. Inspect response object for details.`)}f=p}).catch(p=>{throw this._sendPromise=Promise.resolve(),p}),await this._sendPromise,f}async sendMessageStream(t,n={}){var s,i,a,o,l,c;await this._sendPromise;const d=Hl(t),u={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,d]},m=Object.assign(Object.assign({},this._requestOptions),n),f=V4(this._apiKey,this.model,u,m);return this._sendPromise=this._sendPromise.then(()=>f).catch(p=>{throw new Error(aw)}).then(p=>p.response).then(p=>{if(iw(p)){this._history.push(d);const x=Object.assign({},p.candidates[0].content);x.role||(x.role="model"),this._history.push(x)}else{const x=Bs(p);x&&console.warn(`sendMessageStream() was unsuccessful. ${x}. Inspect response object for details.`)}}).catch(p=>{p.message!==aw&&console.error(p)}),f}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kee(e,t,n,s){return(await bc(t,sa.COUNT_TOKENS,e,!1,JSON.stringify(n),s)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nee(e,t,n,s){return(await bc(t,sa.EMBED_CONTENT,e,!1,JSON.stringify(n),s)).json()}async function Cee(e,t,n,s){const i=n.requests.map(o=>Object.assign(Object.assign({},o),{model:t}));return(await bc(t,sa.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:i}),s)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(t,n,s={}){this.apiKey=t,this._requestOptions=s,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=W4(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(t,n={}){var s;const i=rw(t),a=Object.assign(Object.assign({},this._requestOptions),n);return H4(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},i),a)}async generateContentStream(t,n={}){var s;const i=rw(t),a=Object.assign(Object.assign({},this._requestOptions),n);return V4(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},i),a)}startChat(t){var n;return new jee(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},t),this._requestOptions)}async countTokens(t,n={}){const s=yee(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),n);return kee(this.apiKey,this.model,s,i)}async embedContent(t,n={}){const s=bee(t),i=Object.assign(Object.assign({},this._requestOptions),n);return Nee(this.apiKey,this.model,s,i)}async batchEmbedContents(t,n={}){const s=Object.assign(Object.assign({},this._requestOptions),n);return Cee(this.apiKey,this.model,t,s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class See{constructor(t){this.apiKey=t}getGenerativeModel(t,n){if(!t.model)throw new An("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new ow(this.apiKey,t,n)}getGenerativeModelFromCachedContent(t,n,s){if(!t.name)throw new Ys("Cached content must contain a `name` field.");if(!t.model)throw new Ys("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const o of i)if(n!=null&&n[o]&&t[o]&&(n==null?void 0:n[o])!==t[o]){if(o==="model"){const l=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,c=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(l===c)continue}throw new Ys(`Different value for "${o}" specified in modelParams (${n[o]}) and cachedContent (${t[o]})`)}const a=Object.assign(Object.assign({},n),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new ow(this.apiKey,a,s)}}const ag="AIzaSyBXdIkHE464_FWkMj5cUtwkDg7xNkR8pu4",q4=new See(ag),og={temperature:.7,topK:40,topP:.95,maxOutputTokens:2048},Eee=[],lg=[{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"}],K4=`Bạn là trợ lý AI chuyên về lĩnh vực IT và công nghệ. 
Chỉ trả lời những câu hỏi liên quan đến lập trình, phát triển phần mềm, mạng máy tính, bảo mật, 
trí tuệ nhân tạo, và các lĩnh vực công nghệ thông tin khác.

Với các câu hỏi không liên quan đến IT hoặc công nghệ, hãy từ chối nhẹ nhàng và 
đề nghị người dùng hỏi về các chủ đề liên quan đến IT.

Xin nhớ:
- Chỉ trả lời về IT/công nghệ
- Từ chối lịch sự với các chủ đề khác
- Trả lời ngắn gọn, súc tích và dễ hiểu
- Ưu tiên đưa ra ví dụ thực tế khi giải thích
`,Tee=e=>{const t=["lập trình","coding","code","program","chương trình","development","phát triển","debug","debugging","gỡ lỗi","bug","lỗi","error","exception","ngoại lệ","compiler","trình biên dịch","interpreter","biên dịch","syntax","cú pháp","algorithm","thuật toán","data structure","cấu trúc dữ liệu","logic","lôgic","phần mềm","software","web","app","ứng dụng","application","system","hệ thống","plugin","extension","tiện ích mở rộng","module","mô-đun","component","thành phần","interface","giao diện","library","thư viện","ui","ux","user interface","user experience","database","dữ liệu","data","sql","nosql","cơ sở dữ liệu","mysql","postgresql","mongodb","oracle","redis","cassandra","elasticsearch","cơ sở dữ liệu quan hệ","relational database","data warehouse","kho dữ liệu","data mining","khai phá dữ liệu","data science","khoa học dữ liệu","big data","dữ liệu lớn","data analytics","phân tích dữ liệu","mạng","network","server","máy chủ","bảo mật","security","firewall","tường lửa","protocol","giao thức","tcp/ip","http","https","ftp","dns","dhcp","vpn","mạng riêng ảo","ethernet","wifi","router","bộ định tuyến","lan","wan","mạng cục bộ","mạng diện rộng","encryption","mã hóa","cryptography","mật mã học","cyber security","an ninh mạng","javascript","python","java","c++","c#","php","ruby","swift","kotlin","go","golang","typescript","html","css","rust","perl","r","scala","dart","lua","shell","bash","powershell","assembly","hợp ngữ","cobol","fortran","lisp","prolog","ngôn ngữ lập trình","frontend","front-end","giao diện người dùng","backend","back-end","phía máy chủ","fullstack","full-stack","web development","phát triển web","responsive","tương thích","dom","spa","single page application","ứng dụng một trang","seo","tối ưu hóa công cụ tìm kiếm","web browser","trình duyệt web","web server","máy chủ web","web api","web service","dịch vụ web","viết mã","react","angular","vue","svelte","jquery","bootstrap","tailwind","express","django","flask","spring","laravel","symfony","rails","node.js","next.js","nuxt.js","flutter","xamarin","ionic","framework","thư viện","library","platform","nền tảng","sdk","api","cloud","điện toán đám mây","aws","azure","gcp","google cloud","cloud computing","git","github","gitlab","bitbucket","devops","ci/cd","continuous integration","tích hợp liên tục","docker","container","kubernetes","k8s","microservice","vi dịch vụ","serverless","không máy chủ","infrastructure","cơ sở hạ tầng","iaas","paas","saas","deployment","triển khai","agile","scrum","kanban","waterfall","mô hình thác nước","lean","extreme programming","xp","test driven development","tdd","phát triển hướng kiểm thử","bdd","behavior driven development","clean code","mã sạch","refactoring","tái cấu trúc","code review","đánh giá mã","testing","kiểm thử","qa","quality assurance","đảm bảo chất lượng","unit test","kiểm thử đơn vị","integration test","kiểm thử tích hợp","e2e","end-to-end","manual testing","kiểm thử thủ công","automated testing","kiểm thử tự động","regression","hồi quy","performance test","load test","ai","artificial intelligence","trí tuệ nhân tạo","machine learning","học máy","deep learning","học sâu","neural network","mạng nơ-ron","nlp","xử lý ngôn ngữ tự nhiên","computer vision","thị giác máy tính","chatbot","bot trò chuyện","expert system","hệ chuyên gia","oop","object oriented","hướng đối tượng","functional programming","lập trình hàm","design pattern","mẫu thiết kế","mvc","mvvm","solid","dry","kiss","yagni","architecture","kiến trúc","microservices","vi dịch vụ","monolith","đơn khối","rest","restful","graphql","soap","api design","thiết kế api","computer","máy tính","hardware","phần cứng","cpu","gpu","ram","memory","bộ nhớ","storage","lưu trữ","ssd","hdd","ổ cứng","operating system","hệ điều hành","windows","linux","unix","mac","macos","ios","android","embedded","nhúng","iot","internet of things","internet vạn vật","raspberry pi","arduino","version control","kiểm soát phiên bản","git","svn","mercurial","repository","kho lưu trữ","commit","branch","nhánh","merge","trộn","conflict","xung đột","pull request","yêu cầu kéo","hosting","lưu trữ","web hosting","domain","tên miền","dns","server","máy chủ","vps","dedicated server","shared hosting","cloud hosting","deployment","triển khai","mobile","di động","android","ios","react native","flutter","mobile app","ứng dụng di động","native app","hybrid app","ứng dụng lai","pwa","progressive web app","swift","kotlin","it","công nghệ thông tin","information technology","tech","công nghệ","digital","số hóa","innovation","đổi mới","startup","khởi nghiệp","fintech","edtech","healthtech","cybersecurity","blockchain","cryptocurrency","tiền điện tử"],n=e.toLowerCase();return t.some(s=>n.includes(s))},lw=async()=>{try{return q4.getGenerativeModel({model:"gemini-2.0-flash",generationConfig:og,safetySettings:lg,systemInstruction:K4}).startChat({history:Eee,generationConfig:og,safetySettings:lg})}catch(e){throw console.error("Error initializing chat:",e),e}},Iee=async(e,t,n=null)=>{try{if(n)try{const a=q4.getGenerativeModel({model:"gemini-pro-vision",generationConfig:og,safetySettings:lg,systemInstruction:K4}),[o,l]=n.split(","),c=o.match(/:(.*?);/),d=c?c[1]:"image/jpeg",u={inlineData:{data:l,mimeType:d}},m=t||"Phân tích hình ảnh này và giải thích nội dung liên quan đến IT";return(await a.generateContent([m,u])).response.text()}catch(a){return console.error("Vision model error:",a),String(a).includes("429")?"Dịch vụ AI đang quá tải hoặc vượt quá giới hạn miễn phí. Vui lòng thử lại sau ít phút hoặc nâng cấp gói dịch vụ.":"Xin lỗi, tôi không thể xử lý hình ảnh này. Vui lòng thử lại sau."}if(!Tee(t))return"Xin lỗi, tôi chỉ có thể trả lời các câu hỏi liên quan đến IT và công nghệ. Vui lòng đặt câu hỏi về lập trình, phát triển phần mềm, cơ sở dữ liệu, mạng máy tính, bảo mật hoặc các chủ đề IT khác.";if(!e)throw new Error("Chat chưa được khởi tạo");return(await e.sendMessage(t)).response.text()}catch(s){return console.error("Error sending message:",s),s.message.includes("API key")||s.toString().includes("API_KEY_INVALID")?"Lỗi xác thực API key. Vui lòng kiểm tra cấu hình API key trong tệp .env":s.message.includes("Chat chưa được khởi tạo")?"Lỗi kết nối với dịch vụ AI. Vui lòng làm mới trang và thử lại.":s.toString().includes("503")||s.toString().includes("overloaded")?"Dịch vụ AI đang tạm thời quá tải. Vui lòng thử lại sau ít phút.":"Xin lỗi, tôi không thể trả lời câu hỏi này. Có lỗi xảy ra: "+(s.message||"Không xác định")}},Pee=()=>{const[e,t]=h.useState([]),[n,s]=h.useState(""),[i,a]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,m]=h.useState(!0),[f,p]=h.useState([]),[x,g]=h.useState(null),[b,w]=h.useState(!0),[k,v]=h.useState(!1),[N,C]=h.useState(null),[T,E]=h.useState(!1),P=h.useRef(null),R=h.useRef(null),y=h.useRef(null),O=h.useRef(null),_=[{category:"Lập Trình",questions:["Giải thích về nguyên tắc SOLID trong lập trình hướng đối tượng?","So sánh giữa JavaScript và TypeScript?","Cách tối ưu hiệu suất cho ứng dụng React?","Phân biệt giữa REST API và GraphQL?"]},{category:"Công Nghệ",questions:["Machine Learning là gì và ứng dụng thực tế?","Blockchain hoạt động như thế nào?","Cách bảo mật website từ các cuộc tấn công XSS?","Docker và Kubernetes khác nhau như thế nào?"]},{category:"Mạng & Hệ Thống",questions:["Cách khắc phục lỗi mất kết nối Internet?","Cài đặt mạng VPN riêng như thế nào?","So sánh giữa IPv4 và IPv6?","Cấu hình tường lửa cơ bản cho server?"]}];h.useEffect(()=>{try{const Y=JSON.parse(localStorage.getItem("chatConversations"))||[];p(Y);const ee=localStorage.getItem("activeConversationId");ee&&Y.find(ae=>ae.id===ee)&&(g(ee),w(!1))}catch(Y){console.error("Error loading conversations from localStorage:",Y)}},[]),h.useEffect(()=>{(async()=>{try{const ee=await lw();if(d(ee),x&&!b){const ae=f.find(de=>de.id===x);if(ae){t(ae.messages||[]);return}}t([{role:"assistant",content:"Xin chào! Tôi là trợ lý AI chuyên về IT của CampusT. Tôi sẽ giúp bạn trả lời các câu hỏi về lập trình, công nghệ và thông tin. Hãy đặt câu hỏi về lĩnh vực công nghệ thông tin để tôi có thể hỗ trợ tốt nhất."}]),w(!0)}catch(ee){console.error("Failed to initialize chat:",ee),l("Không thể kết nối đến AI. Vui lòng kiểm tra API key và thử lại sau.")}finally{m(!1),setTimeout(()=>{var ee;(ee=R.current)==null||ee.focus()},100)}})()},[x,f]),h.useEffect(()=>{localStorage.setItem("chatConversations",JSON.stringify(f))},[f]),h.useEffect(()=>{x?localStorage.setItem("activeConversationId",x):localStorage.setItem("activeConversationId","")},[x]),h.useEffect(()=>{b||!x||!e.length||u||p(Y=>Y.map(ae=>ae.id===x?{...ae,messages:e,updatedAt:new Date().toISOString(),title:L(e)}:ae))},[e,x,b]);const L=Y=>{if(!Y.length)return"New Chat";const ee=Y.find(de=>de.role==="user");if(!ee)return"New Chat";const ae=ee.content.substring(0,30);return ae.length<ee.content.length?`${ae}...`:ae},A=Y=>{const ee=Y||e;if(ee.length<=1||!ee.find(Re=>Re.role==="user"))return;const ae={id:Date.now().toString(),title:L(ee),messages:[...ee],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},de=[ae,...f];return p(de),g(ae.id),w(!1),ae.id},M=()=>{t([{role:"assistant",content:"Xin chào! Tôi là trợ lý AI chuyên về IT của CampusT. Tôi sẽ giúp bạn trả lời các câu hỏi về lập trình, công nghệ và thông tin. Hãy đặt câu hỏi về lĩnh vực công nghệ thông tin để tôi có thể hỗ trợ tốt nhất."}]),g(null),w(!0)},z=Y=>{const ee=f.filter(ae=>ae.id!==Y);p(ee),Y===x&&M()},ie=()=>{window.confirm("Bạn có chắc chắn muốn xóa tất cả lịch sử trò chuyện? Hành động này không thể hoàn tác.")&&(p([]),localStorage.setItem("chatConversations",JSON.stringify([])),localStorage.setItem("activeConversationId",""),M())},X=Y=>{if(Y===x)return;b&&e.length>1&&e.some(ae=>ae.role==="user")&&A();const ee=f.find(ae=>ae.id===Y);ee&&(t(ee.messages||[]),g(Y),w(!1))},te=Y=>{s(Y),setTimeout(()=>{var ee;(ee=R.current)==null||ee.focus()},100)};h.useEffect(()=>{var Y;(Y=P.current)==null||Y.scrollIntoView({behavior:"smooth"})},[e]);const B=async Y=>{if(Y.preventDefault(),!n.trim()&&!N)return;if(!c){l("Chưa kết nối được với AI. Vui lòng tải lại trang.");return}const ee=n.trim();s("");let ae=ee;N&&(ae=ee||"Phân tích ảnh này");const de={role:"user",content:ae,image:N},Re=[...e,de];t(Re),a(!0);const Be=N;C(null),E(!1);try{b&&A(Re);const Ge=await Iee(c,ee,Be),et=[...Re,{role:"assistant",content:Ge}];t(et),b||p(lt=>{const Xe=lt.map(He=>He.id===x?{...He,messages:et,updatedAt:new Date().toISOString(),title:He.title||L(et)}:He);return localStorage.setItem("chatConversations",JSON.stringify(Xe)),Xe})}catch(Ge){console.error("Error sending message:",Ge),l("Có lỗi xảy ra khi gửi tin nhắn. Vui lòng thử lại sau.")}finally{a(!1)}},H=async()=>{try{m(!0);const Y=await lw();d(Y),M(),l(null)}catch(Y){console.error("Failed to reset chat:",Y),l("Không thể khởi tạo lại cuộc trò chuyện. Vui lòng tải lại trang.")}finally{m(!1),setTimeout(()=>{var Y;(Y=R.current)==null||Y.focus()},100)}},K=e.length===1&&e[0].role==="assistant"&&e[0].content==="Xin chào! Tôi là trợ lý AI chuyên về IT của CampusT. Tôi sẽ giúp bạn trả lời các câu hỏi về lập trình, công nghệ và thông tin. Hãy đặt câu hỏi về lĩnh vực công nghệ thông tin để tôi có thể hỗ trợ tốt nhất.",$=[{icon:"🎨",label:"Tạo hình ảnh"},{icon:"📋",label:"Lập kế hoạch"},{icon:"📄",label:"Tóm tắt văn bản"},{icon:"💡",label:"Brainstorm ý tưởng"}],me=()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window))return console.error("Speech recognition not supported in this browser"),null;const Y=window.SpeechRecognition||window.webkitSpeechRecognition,ee=new Y;return ee.lang="vi-VN",ee.continuous=!1,ee.interimResults=!1,ee.maxAlternatives=1,ee.onresult=ae=>{const de=ae.results[0][0].transcript;s(Re=>Re+" "+de.trim()),ye()},ee.onerror=ae=>{console.error("Speech recognition error",ae.error),ye()},ee.onend=()=>{v(!1)},ee},ke=()=>{if(y.current||(y.current=me()),y.current)try{y.current.start(),v(!0)}catch(Y){console.error("Speech recognition error:",Y)}},ye=()=>{y.current&&(y.current.stop(),v(!1))},se=()=>{k?ye():ke()};h.useEffect(()=>{b||!x||e.length},[e,x,b,u,i]);const G=()=>{b&&e.some(Y=>Y.role==="user")&&A(),H()},W=Y=>{const ee=Y.target.files[0];if(!ee)return;if(ee.size>5*1024*1024){l("Kích thước ảnh không được vượt quá 5MB");return}if(!ee.type.startsWith("image/")){l("Chỉ chấp nhận file hình ảnh");return}const ae=new FileReader;ae.onloadend=()=>{C(ae.result),E(!0)},ae.readAsDataURL(ee)},Z=()=>{C(null),E(!1),O.current.value=""};return r.jsxs("div",{className:"h-[calc(100vh-84px)] bg-white text-gray-950 overflow-hidden flex",children:[r.jsx("div",{className:"w-80 bg-white border-r border-gray-200 overflow-y-auto",children:r.jsxs("div",{className:"p-3 h-full flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"text-base font-semibold text-gray-800 dark:text-gray-200",children:"Lịch sử"}),r.jsxs("div",{className:"flex items-center gap-2",children:[f.length>0&&r.jsx("button",{onClick:ie,className:"text-xs text-red-500 hover:text-red-600",children:"Xóa tất cả"}),r.jsx("button",{onClick:G,className:"flex items-center justify-center w-7 h-7 text-white bg-theme-primary hover:bg-theme-hover rounded-full transition-colors",title:"Tạo cuộc trò chuyện mới",children:r.jsx(Tr,{className:"h-5 w-5"})})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto space-y-0.5",children:f.length===0?r.jsx("p",{className:"text-sm text-gray-500",children:"Chưa có cuộc trò chuyện"}):f.map(Y=>r.jsxs("div",{className:`flex items-center justify-between p-2 rounded hover:bg-gray-50 ${Y.id===x?"bg-gray-100":""}`,children:[r.jsx("button",{className:`truncate text-left flex-1 text-sm ${Y.id===x?"font-medium text-theme-primary":"text-gray-700 dark:text-gray-300"}`,onClick:()=>X(Y.id),children:Y.title}),r.jsx("button",{onClick:()=>z(Y.id),className:"p-0.5 text-gray-400 hover:text-gray-600",children:r.jsx(bs,{className:"h-2.5 w-2.5"})})]},Y.id))})]})}),r.jsxs("div",{className:"flex-1 flex flex-col h-full relative bg-gray-50 overflow-hidden",children:[o&&r.jsx("div",{className:"absolute top-3 left-1/2 transform -translate-x-1/2 z-10 bg-red-50 border-l-4 border-red-400 p-2 rounded-lg shadow-sm text-sm animate-fadeIn max-w-md",children:r.jsx("p",{className:"text-red-700",children:o})}),u?r.jsx("div",{className:"flex-1 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-9 w-9 border-2 border-gray-600 border-t-transparent"})}):r.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[r.jsx("div",{className:`flex-1 overflow-y-auto min-h-0 ${K?"flex items-center justify-center":""}`,children:K?r.jsx("div",{className:"text-center p-5 -mt-24",children:r.jsx("h1",{className:"text-2xl font-medium text-gray-800 mb-4",children:"Hãy đặt câu hỏi liên quan đến IT."})}):r.jsxs("div",{className:"py-2 px-4 max-w-3xl mx-auto",children:[e.map((Y,ee)=>r.jsx("div",{className:`flex mb-2 px-3 ${Y.role==="user"?"justify-end":"justify-start"}`,children:r.jsx("div",{className:`max-w-[90%] ${Y.role==="assistant"?"whitespace-pre-wrap":""}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[Y.role==="assistant"?r.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-700 text-white flex items-center justify-center flex-shrink-0 mt-1 text-xs",children:r.jsx("span",{children:"AI"})}):r.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-500 text-white flex items-center justify-center flex-shrink-0 mt-1 text-xs",children:r.jsx("span",{children:"U"})}),r.jsxs("div",{className:`text-sm ${Y.role==="user"?"":"prose prose-sm max-w-none dark:prose-invert prose-headings:font-medium prose-headings:text-gray-900 dark:prose-headings:text-white prose-h1:text-lg prose-h2:text-base prose-h3:text-sm prose-p:text-gray-700 dark:prose-p:text-gray-300 prose-pre:bg-gray-50 dark:prose-pre:bg-gray-800 prose-pre:border prose-pre:border-gray-200 dark:prose-pre:border-gray-700 prose-code:text-gray-800 dark:prose-code:text-gray-200 prose-strong:text-gray-900 dark:prose-strong:text-white prose-ul:my-1 prose-li:my-0.5 prose-li:marker:text-gray-400 prose-a:text-theme-primary hover:prose-a:text-theme-hover"}`,children:[Y.image&&Y.role==="user"&&r.jsx("div",{className:"mb-2",children:r.jsx("img",{src:Y.image,alt:"Uploaded content",className:"max-h-48 rounded-lg shadow-sm border border-gray-200"})}),Y.role==="user"?r.jsx("p",{children:Y.content}):r.jsx(ps,{components:{pre:({node:ae,...de})=>r.jsx("div",{className:"relative group",children:r.jsx("pre",{...de,className:"rounded-lg p-3 overflow-x-auto"})}),code:({node:ae,inline:de,...Re})=>de?r.jsx("code",{...Re,className:"bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded text-sm"}):r.jsx("code",{...Re}),ul:({node:ae,...de})=>r.jsx("ul",{...de,className:"list-disc pl-4"}),ol:({node:ae,...de})=>r.jsx("ol",{...de,className:"list-decimal pl-4"}),li:({node:ae,...de})=>r.jsx("li",{...de,className:"marker:text-gray-400"})},children:Y.content})]})]})})},ee)),i&&r.jsx("div",{className:"flex mb-2 px-3",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-700 text-white flex items-center justify-center flex-shrink-0 mt-1 text-xs",children:r.jsx("span",{children:"AI"})}),r.jsxs("div",{className:"flex space-x-1 items-center",children:[r.jsx("div",{className:"h-1.5 w-1.5 bg-gray-400 rounded-full animate-bounce"}),r.jsx("div",{className:"h-1.5 w-1.5 bg-gray-400 rounded-full animate-bounce delay-75"}),r.jsx("div",{className:"h-1.5 w-1.5 bg-gray-400 rounded-full animate-bounce delay-150"})]})]})}),r.jsx("div",{ref:P})]})}),r.jsxs("div",{className:`flex-shrink-0 px-4 pb-3 pt-1 bg-gray-50 ${K?"absolute bottom-0 left-0 right-0":""}`,children:[r.jsx("div",{className:"flex justify-center space-x-2 mb-1.5",children:$.map((Y,ee)=>r.jsxs("button",{className:"flex items-center gap-1 px-2.5 py-0.5 bg-white border border-gray-200 rounded-lg text-xs hover:bg-gray-50 transition-colors",onClick:()=>s(Y.label),children:[r.jsx("span",{children:Y.icon}),r.jsx("span",{children:Y.label})]},ee))}),r.jsx("div",{className:"max-w-3xl mx-auto relative",children:r.jsxs("form",{onSubmit:B,className:"relative",children:[r.jsx("button",{type:"button",onClick:G,className:"absolute left-3 top-1/2 transform -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 z-10",title:"Tạo cuộc trò chuyện mới",children:r.jsx(Tr,{className:"h-4 w-4"})}),T&&N&&r.jsxs("div",{className:"absolute bottom-full left-0 p-2 mb-2 bg-white rounded-lg shadow-md border border-gray-200 flex items-start gap-2",children:[r.jsx("img",{src:N,alt:"Preview",className:"h-16 rounded-md"}),r.jsx("button",{type:"button",onClick:Z,className:"p-1 bg-red-50 rounded-full text-red-500 hover:bg-red-100",children:r.jsx(zt,{className:"h-3 w-3"})})]}),r.jsx("input",{ref:R,type:"text",value:n,onChange:Y=>s(Y.target.value),placeholder:"Hỏi bất cứ điều gì về IT...",className:"w-full py-2 pl-10 pr-24 border border-gray-200 rounded-lg shadow-sm focus:outline-none focus:border-gray-300 focus:ring-0 text-sm bg-white",disabled:i||u}),r.jsxs("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex items-center",children:[r.jsx("input",{type:"file",accept:"image/*",onChange:W,className:"hidden",id:"image-upload",ref:O,disabled:i||u}),r.jsx("label",{htmlFor:"image-upload",className:`p-1 text-gray-400 hover:text-gray-600 cursor-pointer mr-1 ${N?"text-theme-primary":""}`,title:"Tải lên hình ảnh",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})})}),r.jsx("button",{type:"button",onClick:se,className:`p-1 ${k?"text-red-500 hover:text-red-600":"text-gray-400 hover:text-gray-500"} mr-1`,title:k?"Dừng ghi âm":"Ghi âm giọng nói (Tiếng Việt)",children:k?r.jsx(Sj,{className:"h-4 w-4"}):r.jsx(xP,{className:"h-4 w-4"})}),r.jsx("button",{type:"submit",disabled:i||u||!n.trim()&&!N,className:"p-1 text-gray-400 hover:text-gray-600 disabled:text-gray-300 disabled:hover:text-gray-300",children:r.jsx(Ud,{className:"h-4 w-4"})})]})]})})]})]})]}),r.jsx("div",{className:"w-80 bg-white border-l border-gray-200 overflow-y-auto",children:r.jsxs("div",{className:"p-3",children:[r.jsxs("div",{className:"flex items-center mb-3",children:[r.jsx(Ag,{className:"h-5 w-5 text-yellow-500 mr-2"}),r.jsx("h3",{className:"text-base font-semibold text-gray-800 dark:text-gray-200",children:"Câu hỏi gợi ý"})]}),_.map((Y,ee)=>r.jsxs("div",{className:"mb-4",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:Y.category}),r.jsx("div",{className:"space-y-2",children:Y.questions.map((ae,de)=>r.jsx("button",{onClick:()=>te(ae),className:"w-full text-left p-2 text-sm bg-gray-50 hover:bg-gray-100 rounded-md transition-colors text-gray-700 dark:text-gray-300",children:ae},de))})]},ee))]})})]})},Aee=()=>r.jsxs(Lw,{children:[r.jsx(Ut,{path:"/",element:r.jsx(oR,{})}),r.jsx(Ut,{path:"/upcoming",element:r.jsx(z_,{})}),r.jsx(Ut,{path:"/:examId",element:r.jsx(O_,{})}),r.jsx(Ut,{path:"/:examId/session",element:r.jsx(__,{})}),r.jsx(Ut,{path:"/results/:participantId",element:r.jsx(F_,{})}),r.jsx(Ut,{path:"/:examId/history",element:r.jsx(U_,{})})]}),Ree=()=>{const[e,t]=h.useState([{id:1,title:"Tiếng Anh cho IT",description:"Khóa học tiếng Anh chuyên ngành cho lập trình viên",instructor:"John Doe",duration:"40 giờ",level:"Trung cấp",category:"language",thumbnail:"/course-thumbnails/english.jpg"},{id:2,title:"Kỹ năng mềm cho Developer",description:"Phát triển kỹ năng giao tiếp và làm việc nhóm",instructor:"Jane Smith",duration:"20 giờ",level:"Cơ bản",category:"soft-skills",thumbnail:"/course-thumbnails/soft-skills.jpg"}]),[n,s]=h.useState({category:"all",level:"all",search:""}),i=e.filter(a=>{const o=n.category==="all"||a.category===n.category,l=n.level==="all"||a.level===n.level,c=a.title.toLowerCase().includes(n.search.toLowerCase())||a.description.toLowerCase().includes(n.search.toLowerCase());return o&&l&&c});return r.jsxs("div",{className:"space-y-6",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Các khóa học khác"}),r.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Danh mục"}),r.jsxs("select",{value:n.category,onChange:a=>s({...n,category:a.target.value}),className:"w-full p-2 border rounded",children:[r.jsx("option",{value:"all",children:"Tất cả"}),r.jsx("option",{value:"language",children:"Ngoại ngữ"}),r.jsx("option",{value:"soft-skills",children:"Kỹ năng mềm"}),r.jsx("option",{value:"business",children:"Kinh doanh"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trình độ"}),r.jsxs("select",{value:n.level,onChange:a=>s({...n,level:a.target.value}),className:"w-full p-2 border rounded",children:[r.jsx("option",{value:"all",children:"Tất cả"}),r.jsx("option",{value:"Cơ bản",children:"Cơ bản"}),r.jsx("option",{value:"Trung cấp",children:"Trung cấp"}),r.jsx("option",{value:"Nâng cao",children:"Nâng cao"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tìm kiếm"}),r.jsx("input",{type:"text",value:n.search,onChange:a=>s({...n,search:a.target.value}),placeholder:"Tìm kiếm khóa học...",className:"w-full p-2 border rounded"})]})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(a=>r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsx("div",{className:"h-48 bg-gray-200",children:a.thumbnail&&r.jsx("img",{src:a.thumbnail,alt:a.title,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"p-4",children:[r.jsx("h3",{className:"font-semibold text-lg mb-2",children:a.title}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:a.description}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Giảng viên:"})," ",a.instructor]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Thời lượng:"})," ",a.duration]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Trình độ:"})," ",a.level]})]}),r.jsx("button",{className:"mt-4 w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Đăng ký học"})]})]},a.id))}),i.length===0&&r.jsx("div",{className:"text-center py-8 text-gray-500",children:"Không tìm thấy khóa học nào phù hợp với điều kiện tìm kiếm"})]})};function Lee(e){return Ns({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M633.82 458.1l-157.8-121.96C488.61 312.13 496 285.01 496 256v-48c0-8.84-7.16-16-16-16h-16c-8.84 0-16 7.16-16 16v48c0 17.92-3.96 34.8-10.72 50.2l-26.55-20.52c3.1-9.4 5.28-19.22 5.28-29.67V96c0-53.02-42.98-96-96-96s-96 42.98-96 96v45.36L45.47 3.37C38.49-2.05 28.43-.8 23.01 6.18L3.37 31.45C-2.05 38.42-.8 48.47 6.18 53.9l588.36 454.73c6.98 5.43 17.03 4.17 22.46-2.81l19.64-25.27c5.41-6.97 4.16-17.02-2.82-22.45zM400 464h-56v-33.77c11.66-1.6 22.85-4.54 33.67-8.31l-50.11-38.73c-6.71.4-13.41.87-20.35.2-55.85-5.45-98.74-48.63-111.18-101.85L144 241.31v6.85c0 89.64 63.97 169.55 152 181.69V464h-56c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16z"},child:[]}]})(e)}function Mee(e){return Ns({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M176 352c53.02 0 96-42.98 96-96V96c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96zm160-160h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16z"},child:[]}]})(e)}function yf(e){return Ns({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M268.2 381.4l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48c-10.7 4.6-16.5 16.1-13.9 27.5l24 104c2.5 10.8 12.1 18.6 23.4 18.6 100.7 0 193.7-32.4 269.7-86.9l-80-61.8c-10.9 6.5-22.1 12.7-33.6 18.1zm365.6 76.7L475.1 335.5C537.9 256.4 576 156.9 576 48c0-11.2-7.7-20.9-18.6-23.4l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-12.2 26.1-27.9 50.3-46 72.8L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4l588.4 454.7c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.4-6.8 4.1-16.9-2.9-22.3z"},child:[]}]})(e)}function Dee(e){return Ns({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"},child:[]}]})(e)}function $ee(e){return Ns({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M633.8 458.1l-55-42.5c15.4-1.4 29.2-13.7 29.2-31.1v-257c0-25.5-29.1-40.4-50.4-25.8L448 177.3v137.2l-32-24.7v-178c0-26.4-21.4-47.8-47.8-47.8H123.9L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4L42.7 82 416 370.6l178.5 138c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.5-6.9 4.2-17-2.8-22.4zM32 400.2c0 26.4 21.4 47.8 47.8 47.8h288.4c11.2 0 21.4-4 29.6-10.5L32 154.7v245.5z"},child:[]}]})(e)}function Oee(e){return Ns({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"},child:[]}]})(e)}const Ti=De.create({baseURL:Qn,timeout:1e4});Ti.interceptors.response.use(e=>e,e=>{var t;return((t=e.response)==null?void 0:t.status)===404?{data:{message:"Route not found",error:{status:404,message:"Route not found"}}}:Promise.reject(e)});const Na={initiateCall:async(e,t)=>{var n;try{return(await Ti.post("/calls/initiate",{receiverId:e,type:t})).data}catch(s){throw((n=s.response)==null?void 0:n.data)||{message:"Failed to initiate call"}}},answerCall:async e=>{var t;try{return(await Ti.post("/calls/answer",{callId:e})).data}catch(n){throw((t=n.response)==null?void 0:t.data)||{message:"Failed to answer call"}}},endCall:async e=>{var t;try{return(await Ti.post("/calls/end",{callId:e})).data}catch(n){throw((t=n.response)==null?void 0:t.data)||{message:"Failed to end call"}}},rejectCall:async e=>{var t;try{return(await Ti.post("/calls/reject",{callId:e})).data}catch(n){throw((t=n.response)==null?void 0:t.data)||{message:"Failed to reject call"}}},getCallHistory:async(e=10,t=0)=>{try{return(await Ti.get("/calls/history",{params:{limit:e,offset:t}})).data}catch{return{calls:[],total:0}}},getActiveCall:async()=>{var e,t,n;try{return(await Ti.get("/calls/active")).data}catch(s){if((e=s.response)==null||e.status,((t=s.response)==null?void 0:t.status)===404)return{hasActiveCall:!1,call:null};throw((n=s.response)==null?void 0:n.data)||{message:"Failed to get active call"}}},isServiceAvailable:async()=>{try{const e=await BE(`${Qn}/calls/active`);return e.status!==404&&e.ok}catch{return!1}}},G4=h.createContext(),Bee=({children:e})=>{const{socket:t,user:n}=zE(),[s,i]=h.useState(null),[a,o]=h.useState(null),[l,c]=h.useState(null),[d,u]=h.useState(!1),[m,f]=h.useState(!1),[p,x]=h.useState([]),[g,b]=h.useState(null),[w,k]=h.useState(null),[v,N]=h.useState(!0),[C,T]=h.useState(!0),[E,P]=h.useState(0),[R,y]=h.useState(!0),O=h.useRef(),_=h.useRef(),L=h.useRef(),A=h.useRef();h.useEffect(()=>(n&&R&&(async()=>{var G,W,Z,Y;try{const{hasActiveCall:ee,call:ae}=await Na.getActiveCall();ee&&(i(ae),o("ongoing"),c(ae.Type),await M({callId:ae.CallID})),y(!0)}catch(ee){(((G=ee.response)==null?void 0:G.status)===404||(W=ee.message)!=null&&W.includes("404")||(Z=ee.message)!=null&&Z.includes("not found"))&&y(!1),(Y=ee.response)==null||Y.status}})(),()=>{te(),L.current&&L.current.close(),A.current&&clearInterval(A.current)}),[n,R]),h.useEffect(()=>{if(!t||!R)return;const se=async ee=>{console.log("Incoming call:",ee),i(ee),c(ee.type),o("ringing"),u(!0)},G=async ee=>{console.log("Call answered:",ee),o("ongoing"),z()},W=ee=>{console.log("Call ended:",ee),dt.success(`Call ended. Duration: ${ie(ee.duration)}`),X()},Z=ee=>{console.log("Call rejected:",ee),dt.error("Call was rejected"),X()},Y=async ee=>{try{console.log("Received signaling data:",ee.signal.type,ee),L.current||(console.log("Setting up new peer connection for incoming call/signal"),await M({isReceivingCall:!0,fromUserId:ee.fromUserId}));const{type:ae,sdp:de,candidate:Re}=ee.signal;if(ae==="offer"){console.log("Setting remote description (offer)"),await L.current.setRemoteDescription(new RTCSessionDescription({type:ae,sdp:de})),console.log("Creating answer");const Be=await L.current.createAnswer();console.log("Setting local description (answer)"),await L.current.setLocalDescription(Be),console.log("Sending answer to:",ee.fromUserId),t.emit("call-signal",{userId:ee.fromUserId,signal:{type:"answer",sdp:L.current.localDescription.sdp}})}else if(ae==="answer")console.log("Setting remote description (answer)"),await L.current.setRemoteDescription(new RTCSessionDescription({type:ae,sdp:de})),console.log("Connection should be establishing now");else if(ae==="candidate")try{console.log("Adding ICE candidate"),await L.current.addIceCandidate(new RTCIceCandidate(Re))}catch{}}catch{dt.error("Failed to establish connection")}};return R&&(t.on("incoming-call",se),t.on("call-answered",G),t.on("call-ended",W),t.on("call-rejected",Z),t.on("call-signal",Y)),()=>{t&&(t.off("incoming-call",se),t.off("call-answered",G),t.off("call-ended",W),t.off("call-rejected",Z),t.off("call-signal",Y))}},[t,n,R]);const M=async({callId:se,isReceivingCall:G,fromUserId:W})=>{try{const Z={audio:!0,video:l==="video"},Y=await navigator.mediaDevices.getUserMedia(Z);b(Y),O.current&&(O.current.srcObject=Y);const ee={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"}],iceCandidatePoolSize:10,bundlePolicy:"max-bundle"},ae=new RTCPeerConnection(ee);if(L.current=ae,Y.getTracks().forEach(de=>{ae.addTrack(de,Y)}),ae.ontrack=de=>{console.log("Got remote track:",de.streams[0]),k(de.streams[0]),_.current&&(_.current.srcObject=de.streams[0])},ae.onicecandidate=de=>{de.candidate?(console.log("Generated new ICE candidate:",de.candidate.candidate),t.emit("call-signal",{userId:W||s.initiatorId||s.receiverId,signal:{type:"candidate",candidate:de.candidate}})):console.log("ICE candidate generation complete")},ae.oniceconnectionstatechange=()=>{console.log("ICE connection state change:",ae.iceConnectionState)},ae.onicegatheringstatechange=()=>{console.log("ICE gathering state change:",ae.iceGatheringState)},!G){const de=await ae.createOffer();await ae.setLocalDescription(de),t.emit("call-signal",{userId:W||s.receiverId,signal:{type:"offer",sdp:ae.localDescription.sdp}})}return se&&t.emit("join-call-room",se),ae.onconnectionstatechange=de=>{console.log("Connection state change:",ae.connectionState),(ae.connectionState==="disconnected"||ae.connectionState==="failed")&&(dt.error("Call connection lost"),K())},ae}catch(Z){throw console.error("Error setting up media and connection:",Z),Z.name==="NotAllowedError"?dt.error("Please allow camera and microphone access"):dt.error("Failed to setup call: "+Z.message),Z}},z=()=>{P(0),A.current=setInterval(()=>{P(se=>se+1)},1e3)},ie=se=>{const G=Math.floor(se/60),W=se%60;return`${G.toString().padStart(2,"0")}:${W.toString().padStart(2,"0")}`},X=()=>{i(null),o(null),c(null),u(!1),f(!1),te(),L.current&&(L.current.close(),L.current=null),A.current&&(clearInterval(A.current),A.current=null)},te=()=>{g&&(g.getTracks().forEach(se=>se.stop()),b(null)),k(null)},B=async(se,G="video")=>{try{f(!0),c(G);const W=await Na.initiateCall(se,G);return i(W.call),o("ringing"),await M({callId:W.call.callId,isReceivingCall:!1}),W.call}catch(W){throw console.error("Error initiating call:",W),dt.error(W.message||"Failed to initiate call"),X(),W}},H=async()=>{try{if(!s)return;const se=await Na.answerCall(s.callId);return o("ongoing"),u(!1),await M({callId:s.callId,isReceivingCall:!0,fromUserId:s.initiatorId}),z(),se}catch(se){throw console.error("Error answering call:",se),dt.error(se.message||"Failed to answer call"),X(),se}},K=async()=>{try{if(!s)return;await Na.endCall(s.callId),t&&t.emit("leave-call-room",s.callId),X()}catch(se){throw console.error("Error ending call:",se),dt.error(se.message||"Failed to end call"),X(),se}},$=async()=>{try{if(!s)return;await Na.rejectCall(s.callId),X()}catch(se){throw console.error("Error rejecting call:",se),dt.error(se.message||"Failed to reject call"),X(),se}},me=()=>{if(g){const se=!v;return g.getAudioTracks().forEach(G=>{G.enabled=se}),N(se),t&&s&&t.emit("toggle-media",{callId:s.callId,type:"audio",enabled:se}),se}return v},ke=()=>{if(g){const se=!C;return g.getVideoTracks().forEach(G=>{G.enabled=se}),T(se),t&&s&&t.emit("toggle-media",{callId:s.callId,type:"video",enabled:se}),se}return C},ye=async(se=10,G=0)=>{try{const W=await Na.getCallHistory(se,G);return x(W.calls),W.calls}catch(W){throw console.error("Error loading call history:",W),dt.error(W.message||"Failed to load call history"),W}};return r.jsx(G4.Provider,{value:{call:s,callStatus:a,callType:l,isReceivingCall:d,isMakingCall:m,callHistory:p,localStream:g,remoteStream:w,isAudioEnabled:v,isVideoEnabled:C,callDuration:E,localVideoRef:O,remoteVideoRef:_,initiateCall:B,answerCall:H,endCall:K,rejectCall:$,toggleAudio:me,toggleVideo:ke,loadCallHistory:ye,formatCallDuration:ie},children:e})},X4=()=>h.useContext(G4),Y4=()=>{const{call:e,callStatus:t,callType:n,isReceivingCall:s,isMakingCall:i,callDuration:a,isAudioEnabled:o,isVideoEnabled:l,localVideoRef:c,remoteVideoRef:d,answerCall:u,endCall:m,rejectCall:f,toggleAudio:p,toggleVideo:x,formatCallDuration:g}=X4();if(h.useEffect(()=>{c.current&&(c.current.muted=!0)},[]),!e)return null;const b=()=>r.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[r.jsxs("h2",{className:"text-xl font-semibold mb-2",children:["Incoming ",n," Call"]}),r.jsxs("p",{className:"text-lg mb-6",children:["From: ",e.initiatorName||"Unknown"]}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("button",{onClick:f,className:"bg-red-500 hover:bg-red-600 text-white p-4 rounded-full",children:r.jsx(yf,{className:"text-2xl"})}),r.jsx("button",{onClick:u,className:"bg-green-500 hover:bg-green-600 text-white p-4 rounded-full",children:r.jsx(Dee,{className:"text-2xl"})})]})]}),w=()=>r.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Calling..."}),r.jsx("p",{className:"text-lg mb-6",children:e.receiverName||"Unknown"}),r.jsx("button",{onClick:m,className:"bg-red-500 hover:bg-red-600 text-white p-4 rounded-full",children:r.jsx(yf,{className:"text-2xl"})})]}),k=()=>{var v,N;return r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"flex-1 relative",children:[n==="video"&&r.jsx("div",{className:"absolute inset-0 bg-gray-900",children:r.jsx("video",{ref:d,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"})}),n==="audio"&&r.jsx("div",{className:"absolute inset-0 bg-gray-900 flex items-center justify-center",children:r.jsx("div",{className:"w-24 h-24 rounded-full bg-blue-500 flex items-center justify-center",children:r.jsx("span",{className:"text-4xl text-white font-bold",children:((v=e.receiverName)==null?void 0:v[0])||((N=e.initiatorName)==null?void 0:N[0])||"?"})})}),n==="video"&&r.jsx("div",{className:"absolute bottom-4 right-4 w-1/4 h-1/4 max-w-[160px] max-h-[160px] rounded-lg overflow-hidden border-2 border-white shadow-lg",children:r.jsx("video",{ref:c,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"})}),r.jsx("div",{className:"absolute top-4 left-4 bg-black bg-opacity-50 text-white py-1 px-3 rounded-full",children:g(a)})]}),r.jsxs("div",{className:"bg-gray-800 p-4 flex justify-center space-x-6",children:[r.jsx("button",{onClick:p,className:`p-3 rounded-full ${o?"bg-gray-600":"bg-red-500"}`,children:o?r.jsx(Mee,{className:"text-white text-xl"}):r.jsx(Lee,{className:"text-white text-xl"})}),n==="video"&&r.jsx("button",{onClick:x,className:`p-3 rounded-full ${l?"bg-gray-600":"bg-red-500"}`,children:l?r.jsx(Oee,{className:"text-white text-xl"}):r.jsx($ee,{className:"text-white text-xl"})}),r.jsx("button",{onClick:m,className:"bg-red-500 hover:bg-red-600 p-3 rounded-full",children:r.jsx(yf,{className:"text-white text-xl"})})]})]})};return r.jsx(R0,{children:r.jsx(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl overflow-hidden w-full max-w-3xl h-[80vh]",children:[s&&t==="ringing"&&b(),i&&t==="ringing"&&w(),t==="ongoing"&&k()]})})})},_ee=()=>{var dx,ux,hx;const[e,t]=h.useState([]),[n,s]=h.useState(""),[i,a]=h.useState(null),[o,l]=h.useState(null),[c,d]=h.useState([]),u=h.useRef({}),[m,f]=h.useState(""),[p,x]=h.useState([]),[g,b]=h.useState(null),[w,k]=h.useState(!1),[v,N]=h.useState(null),[C,T]=h.useState(!1),[E,P]=h.useState(""),[R,y]=h.useState([]),[O,_]=h.useState([]),[L,A]=h.useState(""),[M,z]=h.useState(!1),[ie,X]=h.useState([]),[te,B]=h.useState(!1),[H,K]=h.useState(null),[$,me]=h.useState(!1),[ke,ye]=h.useState(null),[se,G]=h.useState(null),[W,Z]=h.useState(1),Y=h.useRef(null),ee=h.useRef(),ae=h.useRef(),de=h.useRef(!1),Re=St(),Be=lr(),{initiateCall:Ge}=X4(),[et,lt]=h.useState(!1),[Xe,He]=h.useState(!1),[Pe,vt]=h.useState(!1),[Ye,ce]=h.useState(!1),[V,I]=h.useState([]),[j,S]=h.useState(!1),[F,U]=h.useState([]),[q,Q]=h.useState(""),[be,ge]=h.useState([]),[oe,he]=h.useState(!1),[fe,ze]=h.useState(!1),[Me,Ze]=h.useState("members"),[Nt,Xt]=h.useState(""),[J,Ce]=h.useState(!1),[ne,ve]=h.useState(null),[$e,Ue]=h.useState(null),[pt,nn]=h.useState(""),[Ct,ua]=h.useState(!1),Jh=(dx=i==null?void 0:i.Participants)==null?void 0:dx.some(D=>{var le;return(D.UserID||D.id)===((g==null?void 0:g.UserID)||(g==null?void 0:g.id))&&((le=D.ConversationParticipant)==null?void 0:le.Role)==="admin"}),Zh=async D=>{try{const le=await Dn.getConversationById(D);I(le.Participants||[])}catch(le){console.error("Error fetching group members:",le),_t("Không thể tải danh sách thành viên nhóm")}};h.useEffect(()=>{Ye||I([]),j||(U([]),ge([]),Q(""))},[Ye,j]),h.useEffect(()=>{Ye&&i&&(Xt(i.Title||""),nn(i.Description||""),ve(null),Ue(null))},[Ye,i]);const nx=(D,le)=>{try{Ge(D,"audio")}catch(we){_t(we.message||"Failed to start audio call")}},rx=(D,le)=>{try{Ge(D,"video")}catch(we){_t(we.message||"Failed to start video call")}},dC=()=>{lt(!1),He(!1)};h.useEffect(()=>{(async()=>{try{B(!0),K(null);const le=await De.get("http://localhost:5001/api/events?limit=5",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});X(le.data.events||[])}catch(le){console.error("Error fetching events:",le),K("Không thể tải danh sách sự kiện")}finally{B(!1)}})()},[]);const uC=D=>{if(!D)return"";try{return new Date(D).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(le){return console.error("Error formatting date:",le),D}},hC=D=>{if(!D)return"";try{return D.substring(0,5)}catch(le){return console.error("Error formatting time:",le),D}},sx=D=>{if(!D){_t("ID sự kiện không hợp lệ");return}Re(`/events/${D}`)};h.useEffect(()=>{if(!localStorage.getItem("token")){Re("/login");return}},[Re]);const mC=async D=>{try{if(!g||!g.UserID){console.error("Current user data not loaded yet"),_t("Không thể tạo cuộc trò chuyện. Vui lòng thử lại sau khi tải dữ liệu người dùng.");return}console.log("Handling user from profile:",D);const le=D.UserID||D.id;if(!le){console.error("Invalid user from profile - missing ID:",D),_t("Không thể tìm thấy ID người dùng đã chọn.");return}const we=g.UserID||g.id;if(!we){console.error("Invalid current user - missing ID:",g),_t("Không thể tìm thấy ID người dùng hiện tại.");return}if(Number(le)===Number(we)){console.error("Cannot create conversation with yourself"),_t("Không thể tạo cuộc trò chuyện với chính bạn.");return}if(console.log(`Looking for existing conversation between user ${we} and ${le}`),!e||e.length===0){console.log("No conversations loaded yet, fetching them first");try{await wo()}catch(Oe){console.error("Failed to fetch conversations:",Oe),_t("Không thể tải danh sách cuộc trò chuyện.");return}}const Ie=localStorage.getItem(`conversation_created_${le}`);if(Ie)if(new Date().getTime()-parseInt(Ie)<6e4){console.log("This conversation was recently created, skipping recreation");const Wt=e.find(ln=>ln.Type!=="group"&&ln.Participants&&ln.Participants.some(jo=>Number(jo.UserID)===Number(le)||Number(jo.id)===Number(le)));if(Wt){console.log("Found recently created conversation, selecting it"),di(Wt);return}}else localStorage.removeItem(`conversation_created_${le}`);let Ae=e.find(Oe=>Oe.Type==="group"?!1:Oe.Participants&&Oe.Participants.some(Qe=>Number(Qe.UserID)===Number(le)||Number(Qe.id)===Number(le)));if(Ae){console.log("Found existing conversation:",Ae.ConversationID),di(Ae);return}console.log("No existing conversation found, creating new one");try{const Oe=await Dn.createConversation({title:null,type:"private",createdBy:we,participants:[Number(le)]});console.log("New conversation created:",Oe),localStorage.setItem(`conversation_created_${le}`,new Date().getTime().toString());const Qe={...Oe,Participants:[{UserID:we,Username:g.Username,FullName:g.FullName,Image:g.Image||g.Avatar},{UserID:le,Username:D.Username,FullName:D.FullName||D.Username,Image:D.Image||D.Avatar}],Messages:[]};t(Wt=>[Qe,...Wt]),a(Qe),localStorage.setItem("currentConversationId",Qe.ConversationID),D&&l({...D,UserID:le,FullName:D.FullName||D.Username,Image:D.Image||D.Avatar}),setTimeout(()=>{wo(0,!0).catch(Wt=>{console.log("Failed to refresh conversations after creation:",Wt)})},500)}catch(Oe){console.error("Error creating new conversation:",Oe),e&&e.length>0&&(console.log("Using first conversation as fallback"),di(e[0])),_t("Không thể tạo cuộc trò chuyện mới. Hiển thị danh sách trò chuyện hiện có.")}}catch(le){console.error("Error in handleUserFromProfile:",le),_t("Đã xảy ra lỗi khi xử lý hồ sơ người dùng.")}};h.useEffect(()=>{if(g)return ee.current||(console.log("Initializing socket connection..."),ee.current=Wo("http://localhost:5001",{auth:{token:localStorage.getItem("token")},transports:["websocket","polling"],reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5}),ee.current.on("connect",()=>{console.log("Socket connected successfully")}),ee.current.on("connect_error",D=>{console.error("Socket connection error:",D.message)}),ee.current.on("disconnect",D=>{console.log("Socket disconnected:",D)}),ee.current.on("getUsers",D=>{x(D)}),ee.current.on("new-message",D=>{i&&D.ConversationID===i.ConversationID&&d(we=>{const Ie=[...we,D];return u.current[i.ConversationID]=Ie,Ie}),new Audio("/sounds/message.mp3").play().catch(we=>console.log("Error playing sound:",we))}),ee.current.on("conversation-updated",({conversationId:D,lastMessage:le})=>{t(we=>{const Ie=we.findIndex(Qe=>Qe.ConversationID===D);if(Ie===-1)return wo(0,!0),we;const Ae=we[Ie];return[{...Ae,LastMessageAt:new Date().toISOString(),Messages:[le,...(Ae.Messages||[]).slice(1)]},...we.filter(Qe=>Qe.ConversationID!==D)]})})),()=>{ee.current&&(console.log("Component unmounting, cleaning up socket connection"),ee.current.disconnect(),ee.current=null)}},[g]),h.useEffect(()=>{let D=!0;const le=async()=>{var we,Ie;try{const Ae=localStorage.getItem("token");if(!Ae){console.log("No token found, redirecting to login"),Re("/login");return}const Oe=await De.get("http://localhost:5001/api/users/me",{headers:{Authorization:`Bearer ${Ae}`},timeout:8e3});if(!D)return;if(!Oe.data){console.log("Invalid user data response"),Re("/login");return}if(b(Oe.data),(we=Be.state)!=null&&we.selectedUser){console.log("User navigated from profile page with:",Be.state.selectedUser),mC(Be.state.selectedUser);return}k(!1)}catch(Ae){console.error("Error fetching user:",Ae),D&&(((Ie=Ae.response)==null?void 0:Ie.status)===401?Re("/login"):(N("Failed to load user data. Please refresh the page."),k(!1)))}};return k(!1),le(),()=>{D=!1}},[Re,Be.state]);const wo=async(D=0,le=!1)=>{if(!g||!g.UserID)return console.log("Delaying conversation fetch: user not loaded yet"),Promise.reject(new Error("User not loaded yet"));if($)return console.log("Already refreshing conversations, skipping duplicate fetch"),Promise.resolve(e);me(!0),k(!0);try{console.log("Fetching conversations...");const we=new AbortController,Ie=setTimeout(()=>we.abort(),15e3),Ae=localStorage.getItem("conversationsEtag"),Oe={Authorization:`Bearer ${localStorage.getItem("token")}`};!le&&Ae&&(Oe["If-None-Match"]=Ae);const Qe=await De.get("http://localhost:5001/api/chat/conversations",{headers:Oe,signal:we.signal,validateStatus:function(ln){return ln>=200&&ln<300||ln===304}});if(clearTimeout(Ie),Qe.status===304)return console.log("Server returned 304 Not Modified, using cached conversations"),localStorage.setItem("lastConversationsRefresh",Date.now().toString()),e.length===0&&!de.current&&(de.current=!0,T(!0)),k(!1),e;const Wt=Qe.headers.etag;if(Wt&&localStorage.setItem("conversationsEtag",Wt),Qe.data&&Array.isArray(Qe.data)){console.log(`Loaded ${Qe.data.length} conversations`);const ln=[...Qe.data].sort((jo,mx)=>{const NC=jo.LastMessageAt?new Date(jo.LastMessageAt):new Date(0);return(mx.LastMessageAt?new Date(mx.LastMessageAt):new Date(0))-NC});return t(ln),localStorage.setItem("lastConversationsRefresh",Date.now().toString()),ln.length===0&&!de.current&&(de.current=!0,setTimeout(()=>T(!0),100)),de.current=!0,k(!1),ln}else return console.error("Invalid conversations data format:",Qe.data),k(!1),e.length>0?e:[]}catch(we){if(console.error("Error fetching conversations:",we),k(!1),we.name==="AbortError")console.log("Fetch conversations timed out");else if(we.response&&we.response.status===401)return console.log("Unauthorized, redirecting to login..."),Re("/login"),[];if(D<2){const Ie=Math.pow(2,D)*1e3;return console.log(`Retrying fetch conversations in ${Ie}ms (attempt ${D+1}/3)...`),await new Promise(Ae=>setTimeout(Ae,Ie)),me(!1),wo(D+1)}return e.length>0?e:[]}finally{me(!1)}};h.useEffect(()=>{let D;return g&&!$&&(clearTimeout(D),D=setTimeout(()=>{const le=localStorage.getItem("lastConversationsRefresh"),we=Date.now();(!le||we-parseInt(le)>3e4)&&wo().then(Ae=>{if(!de.current&&(de.current=!0,Ae.length===0)){T(!0);return}const Oe=localStorage.getItem("currentConversationId");if(Oe&&!i){const Qe=Ae.find(Wt=>Wt.ConversationID===parseInt(Oe));Qe?(console.log("Restoring previously selected conversation:",Qe.ConversationID),di(Qe)):Ae.length>0&&(console.log("Saved conversation not found, selecting first conversation"),localStorage.removeItem("currentConversationId"),di(Ae[0]))}else Ae.length>0&&!i&&di(Ae[0])}).catch(Ae=>{console.error("Failed to fetch conversations:",Ae),e.length===0&&!de.current&&(de.current=!0,T(!0))})},100)),()=>{clearTimeout(D)}},[g,$,i]);const fC=async D=>{if(D.preventDefault(),!m.trim()||!i)return;const le=m.trim(),we=`msg_${Date.now()}`;f("");const Ie={MessageID:we,ConversationID:i.ConversationID,Content:le,CreatedAt:new Date().toISOString(),Sender:{UserID:g.UserID||g.id,Username:g.Username,FullName:g.FullName,Image:g.Image},isPending:!0};d(Ae=>{const Oe=[...Ae,Ie];return u.current[i.ConversationID]=Oe,Oe});try{const Ae=await Dn.sendMessage(i.ConversationID,{content:le});d(Qe=>{const Wt=Qe.map(ln=>ln.MessageID===we?{...Ae,Sender:Ie.Sender}:ln);return u.current[i.ConversationID]=Wt,Wt});const Oe={...i,LastMessageAt:new Date().toISOString(),Messages:[{...Ae,Sender:{UserID:g.UserID||g.id,Username:g.Username,FullName:g.FullName,Image:g.Image}},...(i.Messages||[]).slice(1)]};t(Qe=>[Oe,...Qe.filter(Wt=>Wt.ConversationID!==i.ConversationID)]),a(Oe),localStorage.setItem("lastConversationsRefresh",Date.now().toString()),ee.current&&ee.current.emit("message-sent",{conversationId:i.ConversationID,message:Ae})}catch(Ae){console.error("Error sending message:",Ae),d(Oe=>Oe.map(Qe=>Qe.MessageID===we?{...Qe,isError:!0,isPending:!1}:Qe)),_t("Không thể gửi tin nhắn. Vui lòng thử lại sau.")}},di=async D=>{const le=D.ConversationID,we=u.current[le];if(we)d(we);else{const Ae=localStorage.getItem(`chat_messages_${le}`);if(Ae)try{const Oe=JSON.parse(Ae);Array.isArray(Oe)&&(d(Oe),u.current[le]=Oe)}catch(Oe){console.error("Error parsing localStorage messages:",Oe),D.Messages&&D.Messages.length>0?d(D.Messages):d([])}else D.Messages&&D.Messages.length>0?d(D.Messages):d([])}console.log("Selecting conversation:",D.ConversationID);let Ie=D;if(D.Type==="group")try{Ie=await Dn.getConversationById(D.ConversationID)}catch(Ae){console.error("Error loading full group conversation:",Ae)}if(a(Ie),localStorage.setItem("currentConversationId",Ie.ConversationID),Ie.Type!=="group"){const Ae=Yt(Ie);if(Ae.length>0){const Oe=Ae[0];l({...Oe,UserID:Oe.UserID||Oe.id,FullName:Oe.FullName||Oe.Username,Email:Oe.Email,Phone:Oe.Phone,Bio:Oe.Bio,Image:Ss(Oe)})}else l(null)}else l(null)},Yt=D=>{if(!(D!=null&&D.Participants)||!g)return[];const le=g.UserID||g.id;return D.Participants.filter(we=>(we.UserID||we.id)!==le)},wc=D=>{var we,Ie;if(!D)return"";if(D.Type==="group"&&D.Title)return D.Title;const le=Yt(D);if(le.length===0){if(((we=D.Messages)==null?void 0:we.length)>0&&D.Messages[0].Sender)return D.Messages[0].Sender.FullName||D.Messages[0].Sender.Username;if(D.CreatedBy===(g==null?void 0:g.UserID))return"New Conversation";const Ae=(Ie=D.Participants)==null?void 0:Ie.find(Oe=>Oe.UserID===D.CreatedBy);return Ae?Ae.FullName||Ae.Username:"New Conversation"}return le.map(Ae=>Ae.FullName||Ae.Username).join(", ")},Ss=D=>D?D.Image||D.Avatar||D.avatar||D.profileImage||D.profile_image:null,ha=D=>{var Ie,Ae;if(!D)return{src:null,name:""};if(D.Type==="group")return{src:null,name:D.Title||"Group Chat"};const le=Yt(D);if(le.length===0){if(((Ie=D.Messages)==null?void 0:Ie.length)>0&&D.Messages[0].Sender){const Qe=D.Messages[0].Sender;return{src:Ss(Qe),name:Qe.FullName||Qe.Username}}const Oe=(Ae=D.Participants)==null?void 0:Ae.find(Qe=>Qe.UserID===D.CreatedBy);return Oe?{src:Ss(Oe),name:Oe.FullName||Oe.Username}:{src:null,name:"New Conversation"}}const we=le[0];return{src:Ss(we),name:we.FullName||we.Username}},ma=D=>!D||!p?!1:p.some(le=>(le==null?void 0:le.UserID)===D||(le==null?void 0:le.id)===D);h.useEffect(()=>{let D;return(async()=>{if(!i)return;const we=i.ConversationID,Ie=u.current[we];if(Ie)d(Ie);else{const Ae=localStorage.getItem(`chat_messages_${we}`);if(Ae)try{const Oe=JSON.parse(Ae);Array.isArray(Oe)&&(d(Oe),u.current[we]=Oe)}catch(Oe){console.error("Error parsing localStorage messages:",Oe)}}D=new AbortController;try{const Ae=await De.get(`http://localhost:5001/api/chat/messages/${i.ConversationID}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},signal:D.signal});d(Ae.data),u.current[i.ConversationID]=Ae.data}catch(Ae){if(Ae.name==="AbortError")return;console.error("Error fetching messages:",Ae)}})(),()=>{D==null||D.abort()}},[i]),h.useEffect(()=>{if(i!=null&&i.ConversationID&&Array.isArray(c))try{localStorage.setItem(`chat_messages_${i.ConversationID}`,JSON.stringify(c))}catch(D){console.error("Error saving messages to localStorage:",D)}},[c,i]),h.useEffect(()=>{var D;(D=ae.current)==null||D.scrollIntoView({behavior:"smooth"})},[c]);const ix=e.filter(D=>{var Ie,Ae,Oe;const le=wc(D).toLowerCase(),we=((Oe=(Ae=(Ie=D.Messages)==null?void 0:Ie[0])==null?void 0:Ae.Content)==null?void 0:Oe.toLowerCase())||"";return le.includes(n.toLowerCase())||we.includes(n.toLowerCase())}),_t=D=>{N(D),setTimeout(()=>N(null),5e3)},ax=D=>{if(!D)return"";try{const le=new Date(D);return isNaN(le.getTime())?"":Yr(le,"HH:mm")}catch(le){return console.error("Error formatting date:",le),""}},Dr=async(D,le=!1)=>{A(D),z(!0);const we=le?W+1:1;try{let Ie=[];!D||D.length<2?Ie=await Dn.getSuggestedUsers(20,we):Ie=await Dn.searchUsers(D,30,we);const Ae=Ie.filter(Oe=>Oe.UserID!==(g==null?void 0:g.UserID)&&Oe.UserID!==(g==null?void 0:g.id)&&!R.some(Qe=>Qe.UserID===Oe.UserID||Qe.UserID===Oe.id));Z(we),(D===L||!D)&&_(le?Oe=>{const Qe=new Set(Oe.map(ln=>ln.UserID||ln.id)),Wt=Ae.filter(ln=>!Qe.has(ln.UserID||ln.id));return[...Oe,...Wt]}:Ae)}catch(Ie){console.error("Error searching/suggesting users:",Ie)}finally{z(!1)}},pC=D=>{const le=D.target.files[0];if(!le)return;if(!le.type.match("image.*")){_t("Vui lòng chọn một tệp hình ảnh.");return}if(le.size>5*1024*1024){_t("Kích thước ảnh quá lớn. Vui lòng chọn ảnh nhỏ hơn 5MB.");return}const we=new FileReader;we.onload=Ie=>{G(Ie.target.result)},we.readAsDataURL(le),ye(le)},gC=()=>{ye(null),G(null),Y.current&&(Y.current.value="")},ox=D=>{const le=[...R,D];y(le),localStorage.setItem("chat_create_group_selectedUsers",JSON.stringify(le)),_(O.filter(we=>we.UserID!==D.UserID)),A(""),Dr("")},xC=D=>{const le=R.filter(we=>we.UserID!==D);y(le),localStorage.setItem("chat_create_group_selectedUsers",JSON.stringify(le)),Dr(L)};h.useEffect(()=>{if(C){const D=localStorage.getItem("chat_create_group_selectedUsers");if(D)try{y(JSON.parse(D))}catch{}Dr("")}else y([]),localStorage.removeItem("chat_create_group_selectedUsers")},[C]);const yC=async()=>{if(!(!E.trim()||R.length===0))try{k(!0);const D=(g==null?void 0:g.UserID)||(g==null?void 0:g.id);if(!D){_t("Không thể tạo nhóm. Vui lòng đăng nhập lại.");return}const le=[...R.map(Ie=>Ie.UserID||Ie.id),D],we={title:E,type:"group",participants:le};try{const Ie=await Dn.createConversation(we);if(ke)try{const Ae=new FormData;Ae.append("image",ke),Ae.append("conversationId",Ie.ConversationID),await De.post(`http://localhost:5001/api/chat/conversations/${Ie.ConversationID}/image`,Ae,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("token")}`}}),Ie.ImageUrl&&(Ie.ImageUrl=`http://localhost:5001/uploads/groups/${Ie.ConversationID}.jpg`)}catch(Ae){console.error("Error uploading group image:",Ae)}t([Ie,...e]),a(Ie),P(""),y([]),ye(null),G(null),T(!1)}catch(Ie){console.error("Error creating group:",Ie),Ie.data&&Ie.data.message?Ie.data.message.includes("Validation error")||Ie.data.message.includes("duplicate")||Ie.data.message.includes("unique constraint")||Ie.data.message.includes("already exists")?_t("Nhóm chat với thành viên này đã tồn tại hoặc có lỗi dữ liệu. Vui lòng thử lại với thành viên khác."):_t(`Không thể tạo nhóm: ${Ie.data.message}`):_t("Không thể tạo nhóm. Vui lòng thử lại sau.")}}catch(D){console.error("Error in group creation process:",D),_t("Không thể tạo nhóm. Vui lòng thử lại.")}finally{k(!1)}};if(w)return r.jsx("div",{className:"flex h-screen items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})});const lx=D=>{D&&Re(`/profile/${D}`)},cx=async D=>{try{Q(D);let le=[];!D||D.length<2?le=await Dn.getSuggestedUsers(20,1):le=await Dn.searchUsers(D,30,1);const we=V.map(Ae=>Ae.UserID||Ae.id),Ie=le.filter(Ae=>!we.includes(Ae.UserID||Ae.id));U(Ie)}catch(le){console.error("Error searching for users:",le),_t("Không thể tìm kiếm người dùng")}},bC=async()=>{if(!(!be.length||!i)){he(!0);try{const D=await Dn.addGroupParticipants(i.ConversationID,be.map(le=>le.UserID||le.id));D.conversation&&a(D.conversation),S(!1),await Zh(i.ConversationID),ge([]),U([])}catch(D){console.error("Failed to add members:",D),_t(D.message||"Không thể thêm thành viên vào nhóm")}finally{he(!1)}}},vC=async D=>{if(!(!i||fe)){ze(!0);try{await Dn.removeGroupParticipant(i.ConversationID,D),I(le=>le.filter(we=>(we.UserID||we.id)!==D)),i&&i.Participants&&a(le=>({...le,Participants:le.Participants.filter(we=>(we.UserID||we.id)!==D)}))}catch(le){console.error("Failed to remove member:",le),_t(le.message||"Không thể xóa thành viên khỏi nhóm")}finally{ze(!1)}}},wC=async()=>{if(!(!i||fe)&&confirm("Bạn có chắc chắn muốn rời khỏi nhóm này?")){ze(!0);try{await Dn.leaveGroup(i.ConversationID),t(D=>D.filter(le=>le.ConversationID!==i.ConversationID)),a(null),ce(!1)}catch(D){console.error("Failed to leave group:",D),_t(D.message||"Không thể rời khỏi nhóm")}finally{ze(!1)}}},jC=D=>{const le=D.target.files[0];if(!le)return;if(!le.type.match("image.*")){_t("Vui lòng chọn một tệp hình ảnh.");return}if(le.size>5*1024*1024){_t("Kích thước ảnh quá lớn. Vui lòng chọn ảnh nhỏ hơn 5MB.");return}const we=new FileReader;we.onload=Ie=>{Ue(Ie.target.result)},we.readAsDataURL(le),ve(le)},kC=async()=>{if(!(!i||!Nt.trim())){ua(!0);try{const D={title:Nt.trim(),description:pt.trim()};if(await Dn.updateConversation(i.ConversationID,D),ne){const Ie=new FormData;Ie.append("image",ne),await De.post(`http://localhost:5001/api/chat/conversations/${i.ConversationID}/image`,Ie,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("token")}`}})}a(Ie=>({...Ie,Title:Nt.trim()}));const le=`${g.FullName||g.Username} đã cập nhật thông tin nhóm.`;await Dn.sendMessage(i.ConversationID,{content:le,type:"system"}),Ce(!1),ve(null),Ue(null);const we=await Dn.getConversationById(i.ConversationID);a(we)}catch(D){console.error("Failed to update group info:",D),_t(D.message||"Không thể cập nhật thông tin nhóm")}finally{ua(!1)}}};return r.jsxs("div",{className:"flex h-[93vh] bg-gray-100 w-full rounded-xl shadow-lg",children:[r.jsx(Y4,{}),v&&r.jsx("div",{className:"absolute top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-md",children:v}),r.jsxs("div",{className:"w-1/5 bg-white border-r overflow-hidden flex flex-col h-full rounded-l-xl",children:[r.jsxs("div",{className:"p-3 border-b",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Trò chuyện"}),r.jsx("button",{onClick:()=>{T(!0),Dr("")},className:"p-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition focus:outline-none focus:ring-2 focus:ring-blue-300",title:"Tạo nhóm mới",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",placeholder:"Tìm kiếm cuộc trò chuyện...",value:n,onChange:D=>s(D.target.value),className:"w-full p-2.5 pl-10 text-sm border rounded-lg focus:outline-none focus:border-blue-500 bg-gray-50"}),r.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),C&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg w-full max-w-5xl p-6 shadow-xl h-[85vh] flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-xl font-bold",children:"Tạo nhóm mới"}),r.jsx("button",{onClick:()=>T(!1),className:"text-gray-600 hover:text-gray-800",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"flex-1 flex gap-6 overflow-hidden",children:[r.jsxs("div",{className:"w-2/5 flex flex-col overflow-hidden",children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Thông tin nhóm"}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border mb-4",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tên nhóm"}),r.jsx("input",{type:"text",value:E,onChange:D=>P(D.target.value),placeholder:"Nhập tên nhóm",className:"w-full p-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ảnh nhóm (tùy chọn)"}),se?r.jsxs("div",{className:"relative w-32 h-32 mx-auto",children:[r.jsx("img",{src:se,alt:"Group Preview",className:"w-full h-full object-cover rounded-lg border"}),r.jsx("button",{onClick:gC,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>{var D;return(D=Y.current)==null?void 0:D.click()},children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Kéo thả ảnh hoặc bấm để tải lên"}),r.jsx("input",{type:"file",ref:Y,accept:"image/*",className:"hidden",onChange:pC})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mô tả nhóm (tùy chọn)"}),r.jsx("textarea",{placeholder:"Mô tả ngắn về nhóm",rows:3,className:"w-full p-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),r.jsxs("div",{className:"mt-2 flex-1 overflow-hidden flex flex-col",children:[r.jsxs("h4",{className:"font-medium text-gray-700 mb-2",children:["Thành viên đã chọn (",R.length,")"]}),r.jsx("div",{className:"bg-gray-50 rounded-lg border flex-1 overflow-y-auto p-2",children:R.length>0?r.jsx("div",{className:"flex flex-wrap gap-2 p-2",children:R.map(D=>r.jsxs("div",{className:"bg-blue-100 text-blue-800 px-3 py-1.5 rounded-full flex items-center",children:[r.jsx(Tt,{src:D.Image||D.Avatar,name:D.FullName||D.Username,size:"tiny",className:"mr-2"}),r.jsx("span",{className:"text-sm",children:D.FullName||D.Username}),r.jsx("button",{onClick:()=>xC(D.UserID||D.id),className:"ml-2 text-blue-600 hover:text-blue-800",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},D.UserID||D.id))}):r.jsx("div",{className:"p-4 text-center text-gray-500",children:"Chưa có thành viên nào được chọn"})})]})]}),r.jsxs("div",{className:"w-3/5 flex flex-col overflow-hidden",children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Thêm thành viên"}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border flex-1 flex flex-col overflow-hidden",children:[r.jsxs("div",{className:"relative mb-4",children:[r.jsx("input",{type:"text",value:L,onChange:D=>Dr(D.target.value),onFocus:()=>{!O.length&&!M&&Dr("")},placeholder:"Tìm kiếm người dùng...",className:"w-full p-2.5 pl-10 pr-10 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 absolute left-3 top-2.5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),L&&r.jsx("button",{onClick:()=>{A(""),Dr("")},className:"absolute right-10 top-2.5 text-gray-400 hover:text-gray-600",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),M&&r.jsx("div",{className:"absolute right-3 top-2.5 animate-spin h-5 w-5 border-2 border-blue-500 border-t-transparent rounded-full"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:M?r.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-gray-500",children:[r.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-2 border-blue-500 border-t-transparent mb-2"}),r.jsx("p",{children:L?"Đang tìm kiếm...":"Đang tải danh sách người dùng..."})]}):O.length>0?r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:O.map(D=>r.jsxs("div",{className:"p-3 bg-white hover:bg-blue-50 rounded-md cursor-pointer flex items-center justify-between transition-colors border",onClick:()=>ox(D),children:[r.jsxs("div",{className:"flex items-center overflow-hidden",children:[r.jsx(Tt,{src:D.Image||D.Avatar,name:D.FullName||D.Username,size:"small",className:"flex-shrink-0 mr-3"}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"font-medium truncate",children:D.FullName||D.Username}),r.jsx("p",{className:"text-xs text-gray-500 truncate",children:D.Email||`@${D.Username}`})]})]}),r.jsx("button",{className:"ml-2 p-1 bg-blue-100 text-blue-600 rounded-full hover:bg-blue-200 flex-shrink-0",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]},D.UserID||D.id))}),O.length>=20&&r.jsx("div",{className:"flex justify-center pt-2",children:r.jsx("button",{onClick:()=>{Dr(L||"",!0)},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-sm",disabled:M,children:M?"Đang tải...":"Tải thêm người dùng"})})]}):L&&L.length>1?r.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-gray-500",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-300 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})}),r.jsxs("p",{children:['Không tìm thấy người dùng phù hợp với "',L,'"']}),r.jsx("button",{onClick:()=>Dr(""),className:"mt-2 text-blue-500 hover:text-blue-700 text-sm",children:"Xem danh sách gợi ý"})]}):r.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-gray-500",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-300 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),r.jsx("p",{children:"Không thể tải danh sách người dùng gợi ý"}),r.jsx("button",{onClick:()=>Dr(""),className:"mt-2 text-blue-500 hover:text-blue-700 text-sm",children:"Thử lại"})]})}),r.jsxs("div",{className:"mt-4",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Người dùng đang online"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:p.slice(0,8).map(D=>!D||g&&(D.UserID===g.UserID||D.id===g.id)||R.some(le=>le.UserID===D.UserID||le.UserID===D.id)?null:r.jsxs("div",{className:"p-2 bg-white rounded-md border cursor-pointer flex items-center gap-2",onClick:()=>{const le={UserID:D.UserID||D.id,Username:D.Username,FullName:D.FullName,Image:D.Image||D.Avatar};R.some(we=>we.UserID===le.UserID)||ox(le)},children:[r.jsxs("div",{className:"relative",children:[r.jsx(Tt,{src:D.Image||D.Avatar,name:D.FullName||D.Username,size:"tiny"}),r.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-2 h-2 bg-green-500 rounded-full border border-white"})]}),r.jsx("span",{className:"text-xs truncate",children:D.FullName||D.Username})]},D.UserID||D.id))})]})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t",children:[r.jsx("button",{onClick:()=>T(!1),className:"px-4 py-2 text-gray-700 hover:text-gray-900 rounded-lg transition-colors",children:"Hủy"}),r.jsx("button",{onClick:yC,className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:bg-blue-300 disabled:cursor-not-allowed",disabled:!E.trim()||R.length===0,children:"Tạo nhóm"})]})]})}),r.jsx("div",{className:"overflow-y-auto flex-1",children:e.length===0&&!w?r.jsxs("div",{className:"flex flex-col items-center justify-center h-64 p-4",children:[r.jsx("div",{className:"rounded-full bg-blue-100 p-3 mb-4",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),r.jsx("p",{className:"text-gray-600 text-center mb-2",children:"Chưa có cuộc trò chuyện nào"}),r.jsx("p",{className:"text-gray-500 text-sm text-center",children:"Bạn có thể bắt đầu một cuộc trò chuyện mới bằng cách tạo nhóm hoặc tìm người dùng khác để nhắn tin."}),r.jsx("button",{onClick:()=>T(!0),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition",children:"Tạo nhóm mới"})]}):r.jsx(r.Fragment,{children:w&&e.length===0?r.jsx(r.Fragment,{children:[1,2,3,4,5].map(D=>r.jsx("div",{className:"p-3 border-b animate-pulse",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full mr-3"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]})},D))}):r.jsxs(r.Fragment,{children:[ix.map(D=>{var le,we;return r.jsx("div",{className:`p-3 cursor-pointer hover:bg-gray-50 transition-colors ${(i==null?void 0:i.ConversationID)===D.ConversationID?"bg-blue-50 border-l-4 border-blue-500":""}`,onClick:()=>di(D),children:r.jsxs("div",{className:"flex items-center",children:[r.jsxs("div",{className:"flex-shrink-0 mr-3 relative",children:[r.jsx(Tt,{src:ha(D).src,name:ha(D).name,size:"medium"}),D.Type==="group"&&r.jsx("div",{className:"absolute -bottom-1 -right-1 bg-purple-500 rounded-full p-1",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"font-medium text-base truncate flex items-center",children:[wc(D),D.Type==="private"&&Yt(D).length>0&&r.jsxs("div",{className:"flex ml-2",children:[r.jsx("button",{className:"p-1 rounded-full hover:bg-gray-200 transition-colors mr-1",title:"Audio Call",onClick:Ie=>{var Oe,Qe,Wt;Ie.stopPropagation();const Ae=(Oe=Yt(D)[0])==null?void 0:Oe.UserID;(Qe=Yt(D)[0])!=null&&Qe.Username||((Wt=Yt(D)[0])==null||Wt.FullName),nx(Ae)},children:r.jsx(sp,{className:"h-3 w-3 text-gray-600"})}),r.jsx("button",{className:"p-1 rounded-full hover:bg-gray-200 transition-colors",title:"Video Call",onClick:Ie=>{var Oe,Qe,Wt;Ie.stopPropagation();const Ae=(Oe=Yt(D)[0])==null?void 0:Oe.UserID;(Qe=Yt(D)[0])!=null&&Qe.Username||((Wt=Yt(D)[0])==null||Wt.FullName),rx(Ae)},children:r.jsx(Ba,{className:"h-3 w-3 text-gray-600"})})]})]}),r.jsx("div",{className:"text-sm text-gray-500 truncate",children:D.Messages&&D.Messages.length>0?`${((le=D.Messages[0].Sender)==null?void 0:le.Username)||"Không xác định"}: ${D.Messages[0].Content}`:"Chưa có tin nhắn"})]}),r.jsxs("div",{className:"flex flex-col items-end ml-3",children:[D.Type==="private"&&Yt(D).length>0&&ma((we=Yt(D)[0])==null?void 0:we.UserID)&&r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),D.Messages&&D.Messages.length>0&&D.Messages[0].CreatedAt&&r.jsx("div",{className:"text-xs text-gray-400 mt-1",children:ax(D.Messages[0].CreatedAt)})]})]})},D.ConversationID)}),ix.length===0&&r.jsx("div",{className:"text-center p-4 text-gray-500",children:n?`Không tìm thấy cuộc trò chuyện nào với từ khóa "${n}"`:"Đang tải danh sách trò chuyện..."})]})})})]}),r.jsx("div",{className:"flex-1 flex flex-col bg-gray-50 h-full",children:i?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"p-4 border-b bg-white shadow-sm",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Tt,{src:i.Type==="private"&&o?o.Image||o.Avatar:ha(i).src,name:i.Type==="private"&&o?o.FullName||o.Username:ha(i).name,size:"large",className:i.Type==="group"?"cursor-pointer":"",onClick:async D=>{i.Type==="group"&&(D.stopPropagation(),await Zh(i.ConversationID),ce(!0))}}),i.Type==="group"&&r.jsx("div",{className:"absolute -bottom-1 -right-1 bg-purple-500 rounded-full p-1",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})]}),r.jsxs("div",{className:"ml-3",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("h3",{className:"text-lg font-semibold",children:i.Type==="private"&&o?o.FullName||o.Username:wc(i)}),i.Type==="private"&&Yt(i).length>0&&r.jsxs("div",{className:"flex ml-3",children:[r.jsx("button",{className:"p-1.5 bg-green-500 text-white rounded-full hover:bg-green-600 transition-colors mr-2",title:"Audio Call",onClick:()=>{var le,we,Ie;const D=(le=Yt(i)[0])==null?void 0:le.UserID;(we=Yt(i)[0])!=null&&we.Username||((Ie=Yt(i)[0])==null||Ie.FullName),nx(D)},children:r.jsx(sp,{className:"h-3.5 w-3.5"})}),r.jsx("button",{className:"p-1.5 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-colors",title:"Video Call",onClick:()=>{var le,we,Ie;const D=(le=Yt(i)[0])==null?void 0:le.UserID;(we=Yt(i)[0])!=null&&we.Username||((Ie=Yt(i)[0])==null||Ie.FullName),rx(D)},children:r.jsx(Ba,{className:"h-3.5 w-3.5"})})]})]}),i.Type==="group"&&i.Participants&&r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("div",{className:"text-sm text-gray-500",children:[i.Participants.length," thành viên"]}),r.jsxs("div",{className:"flex items-center mt-1",children:[r.jsxs("div",{className:"flex -space-x-2 mr-2",children:[i.Participants.slice(0,3).map(D=>r.jsx(Tt,{src:Ss(D),name:D.FullName||D.Username,size:"tiny",className:"border border-white",onClick:le=>{le.stopPropagation(),lx(D.UserID||D.id)}},D.UserID||D.id)),i.Participants.length>3&&r.jsxs("div",{className:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center text-xs text-gray-600 border border-white",children:["+",i.Participants.length-3]})]}),r.jsx("button",{className:"text-xs text-blue-600 hover:underline",onClick:async D=>{D.stopPropagation(),await Zh(i.ConversationID),ce(!0)},children:"Xem tất cả"})]})]}),i.Type==="private"&&Yt(i).length>0&&r.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[r.jsx("span",{className:`w-2 h-2 rounded-full mr-1.5 ${ma((ux=Yt(i)[0])==null?void 0:ux.UserID)?"bg-green-500":"bg-gray-400"}`}),ma((hx=Yt(i)[0])==null?void 0:hx.UserID)?"Đang trực tuyến":"Ngoại tuyến"]})]})]})})}),et&&r.jsx("div",{className:"absolute inset-0 bg-gray-900 bg-opacity-80 z-50 flex flex-col items-center justify-center text-white p-6 rounded-xl",children:r.jsxs("div",{className:"text-center mb-8",children:[Xe?r.jsxs("div",{className:"relative mb-6",children:[r.jsx("div",{className:"w-64 h-64 rounded-xl bg-gray-800 flex items-center justify-center mb-4",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),r.jsx("div",{className:"absolute bottom-0 right-0 w-24 h-24 rounded-lg bg-gray-700 border-2 border-gray-600",children:r.jsx(Tt,{src:(g==null?void 0:g.Image)||(g==null?void 0:g.Avatar),name:(g==null?void 0:g.FullName)||(g==null?void 0:g.Username)||"Bạn",size:"large"})})]}):r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-700 mx-auto mb-4 flex items-center justify-center",children:r.jsx(Tt,{src:ha(i).src,name:ha(i).name,size:"xxl"})}),r.jsx("div",{className:"text-xl font-medium",children:wc(i)}),r.jsx("div",{className:"text-green-400 mt-2",children:"Đang gọi..."})]}),r.jsxs("div",{className:"flex justify-center space-x-4",children:[r.jsx("button",{onClick:dC,className:"p-4 bg-red-600 hover:bg-red-700 rounded-full transition focus:outline-none",title:"Kết thúc cuộc gọi",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 8l8 8-8 8M8 8L0 16l8 8"})})}),Xe&&r.jsx("button",{className:"p-4 bg-gray-600 hover:bg-gray-700 rounded-full transition focus:outline-none",title:"Bật/tắt camera",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),r.jsx("button",{className:"p-4 bg-gray-600 hover:bg-gray-700 rounded-full transition focus:outline-none",title:"Bật/tắt âm thanh",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})})]})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50",children:w?r.jsx(r.Fragment,{children:[1,2,3].map(D=>r.jsxs("div",{className:`flex mb-4 ${D%2===0?"justify-end":"justify-start"}`,children:[D%2!==0&&r.jsx("div",{className:"flex-shrink-0 mr-2",children:r.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full"})}),r.jsxs("div",{className:`max-w-[70%] p-3 rounded-lg animate-pulse ${D%2===0?"bg-blue-200":"bg-gray-200"}`,children:[r.jsx("div",{className:"h-3 bg-gray-300 rounded w-full mb-2"}),r.jsx("div",{className:"h-3 bg-gray-300 rounded w-3/4"})]})]},D))}):c.length===0?r.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"Bắt đầu cuộc trò chuyện bằng cách gửi tin nhắn"}):r.jsx(r.Fragment,{children:c.map((D,le)=>{var we,Ie;return r.jsxs("div",{ref:ae,className:`flex mb-3 ${D.SenderID===(g==null?void 0:g.UserID)||D.SenderID===(g==null?void 0:g.id)?"justify-end":"justify-start"}`,children:[D.SenderID!==(g==null?void 0:g.UserID)&&D.SenderID!==(g==null?void 0:g.id)&&r.jsx("div",{className:"flex-shrink-0 mr-2",children:r.jsx(Tt,{src:Ss(D.Sender),name:((we=D.Sender)==null?void 0:we.FullName)||((Ie=D.Sender)==null?void 0:Ie.Username)||"Người dùng",size:"small"})}),r.jsxs("div",{className:`max-w-[70%] p-3 rounded-lg shadow-sm ${D.SenderID===(g==null?void 0:g.UserID)||D.SenderID===(g==null?void 0:g.id)?"bg-blue-600 text-white":"bg-white"}`,children:[D.SenderID!==(g==null?void 0:g.UserID)&&D.SenderID!==(g==null?void 0:g.id)&&i.Type==="group"&&D.Sender&&r.jsx("div",{className:`text-xs font-medium mb-1 ${D.SenderID===(g==null?void 0:g.UserID)||D.SenderID===(g==null?void 0:g.id)?"text-blue-200":"text-blue-600"}`,children:D.Sender.FullName||D.Sender.Username||"Người dùng"}),r.jsx("p",{className:"text-sm",children:D.Content}),r.jsx("span",{className:`text-xs mt-1 block text-right ${D.SenderID===(g==null?void 0:g.UserID)||D.SenderID===(g==null?void 0:g.id)?"text-blue-100":"text-gray-500"}`,children:ax(D.CreatedAt)})]})]},D.MessageID||le)})})}),r.jsx("form",{onSubmit:fC,className:"p-3 border-t bg-white",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx("input",{type:"text",value:m,onChange:D=>f(D.target.value),placeholder:"Nhập tin nhắn...",className:"flex-1 p-3 text-sm border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50"}),r.jsx("button",{type:"submit",disabled:!m.trim(),className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors disabled:bg-blue-300 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]}):r.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-500 p-6",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-gray-300 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),r.jsx("h3",{className:"text-xl font-medium mb-2",children:"Tin nhắn của bạn"}),r.jsx("p",{className:"text-center max-w-xs",children:"Chọn một cuộc trò chuyện để bắt đầu hoặc tạo nhóm mới với nút +"})]})}),r.jsxs("div",{className:"w-1/4 bg-white border-l overflow-hidden flex flex-col h-full rounded-r-xl",children:[r.jsx("div",{className:"p-4 border-b bg-white",children:r.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Sự kiện sắp diễn ra"})}),r.jsx("div",{className:"overflow-y-auto flex-1 p-4",children:te?r.jsx("div",{className:"flex justify-center items-center h-full",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):H?r.jsxs("div",{className:"text-center p-4 text-red-500",children:[r.jsx("p",{children:H}),r.jsx("button",{onClick:()=>{B(!0),De.get("http://localhost:5001/api/events?limit=5",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(D=>{X(D.data.events||[]),K(null)}).catch(D=>{console.error("Error fetching events:",D),K("Không thể tải danh sách sự kiện")}).finally(()=>B(!1))},className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded-lg text-sm hover:bg-blue-600",children:"Thử lại"})]}):ie.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[r.jsx(Qi,{className:"h-16 w-16 text-gray-300 mb-4"}),r.jsx("h3",{className:"text-lg font-medium mb-1",children:"Không có sự kiện nào"}),r.jsx("p",{className:"text-center max-w-xs",children:"Hiện tại chưa có sự kiện nào sắp diễn ra"})]}):r.jsxs("div",{className:"space-y-4",children:[ie.map(D=>r.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-100 overflow-hidden hover:shadow-md transition-shadow cursor-pointer",onClick:()=>sx(D.EventID),children:[r.jsxs("div",{className:"relative h-32",children:[r.jsx("img",{src:D.ImageUrl||"/default-event.jpg",alt:D.Title,className:"w-full h-full object-cover",onError:le=>{le.target.src="/default-event.jpg"}}),r.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:D.Status||"Sắp diễn ra"})]}),r.jsxs("div",{className:"p-3",children:[r.jsx("h3",{className:"text-md font-semibold text-gray-900 line-clamp-2 mb-2",children:D.Title||"Sự kiện không tên"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center text-gray-600 text-xs",children:[r.jsx(Qi,{className:"h-3 w-3 mr-1"}),r.jsxs("span",{children:[D.EventDate?uC(D.EventDate):"TBA",D.EventTime?` ${hC(D.EventTime)}`:""]})]}),r.jsxs("div",{className:"flex items-center text-gray-600 text-xs",children:[r.jsx(Ui,{className:"h-3 w-3 mr-1"}),r.jsx("span",{className:"truncate",children:D.Location||"TBA"})]}),r.jsxs("div",{className:"flex items-center text-gray-600 text-xs",children:[r.jsx(vs,{className:"h-3 w-3 mr-1"}),r.jsxs("span",{children:[D.CurrentAttendees||0,"/",D.MaxAttendees||"N/A"]})]})]}),r.jsx("div",{className:"mt-3 text-right",children:r.jsx("button",{onClick:le=>{le.stopPropagation(),sx(D.EventID)},className:"text-xs px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Xem chi tiết"})})]})]},D.EventID)),r.jsx("div",{className:"text-center pt-2",children:r.jsx("button",{onClick:()=>Re("/events"),className:"text-sm text-blue-600 hover:text-blue-800 hover:underline",children:"Xem tất cả sự kiện"})})]})})]}),Ye&&i&&i.Type==="group"&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg w-full max-w-5xl p-6 shadow-xl max-h-[85vh] flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h3",{className:"text-xl font-bold",children:["Nhóm: ",i.Title]}),r.jsx("button",{onClick:()=>ce(!1),className:"text-gray-600 hover:text-gray-800",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"border-b mb-4",children:r.jsxs("div",{className:"flex space-x-6",children:[r.jsxs("button",{className:`py-3 px-1 font-medium text-sm border-b-2 transition-colors ${Me==="members"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>Ze("members"),children:["Thành viên (",V.length,")"]}),r.jsx("button",{className:`py-3 px-1 font-medium text-sm border-b-2 transition-colors ${Me==="info"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,onClick:()=>Ze("info"),children:"Thông tin nhóm"})]})}),Me==="members"&&r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("span",{className:"text-sm text-gray-500",children:[V.length," thành viên"]}),r.jsxs("button",{onClick:()=>{S(!0),ce(!1),cx("")},className:"px-3 py-1.5 bg-blue-500 text-white text-sm rounded-lg hover:bg-blue-600 transition flex items-center",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Thêm thành viên"]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:V.map(D=>{var le;return r.jsxs("div",{className:"p-3 bg-gray-50 hover:bg-gray-100 rounded-lg cursor-pointer flex items-center justify-between transition-colors",onClick:()=>{ce(!1),lx(D.UserID||D.id)},children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Tt,{src:Ss(D),name:D.FullName||D.Username,size:"medium",className:"mr-3"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:D.FullName||D.Username}),r.jsx("p",{className:"text-xs text-gray-500",children:D.Email||`@${D.Username}`})]})]}),r.jsxs("div",{className:"flex items-center",children:[((le=D.ConversationParticipant)==null?void 0:le.Role)==="admin"&&r.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs mr-2",children:"Admin"}),r.jsx("span",{className:`w-2 h-2 rounded-full ${ma(D.UserID||D.id)?"bg-green-500":"bg-gray-400"}`}),Jh&&(D.UserID||D.id)!==((g==null?void 0:g.UserID)||(g==null?void 0:g.id))&&r.jsx("button",{onClick:we=>{we.stopPropagation(),confirm(`Bạn có chắc chắn muốn xóa ${D.FullName||D.Username} khỏi nhóm?`)&&vC(D.UserID||D.id)},className:"ml-2 p-1 text-red-500 hover:bg-red-100 rounded-full transition-colors",title:"Xóa khỏi nhóm",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},D.UserID||D.id)})})})]}),Me==="info"&&r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Thông tin nhóm"}),r.jsx("button",{onClick:()=>Ce(!J),className:`px-3 py-1.5 ${J?"bg-gray-500":"bg-blue-500"} text-white text-sm rounded-lg hover:${J?"bg-gray-600":"bg-blue-600"} transition flex items-center`,children:J?r.jsxs(r.Fragment,{children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Hủy chỉnh sửa"]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),"Chỉnh sửa"]})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:J?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsxs("div",{className:"relative mb-3",children:[$e?r.jsx("img",{src:$e,alt:"Group Preview",className:"w-32 h-32 object-cover rounded-lg border"}):i.ImageUrl?r.jsx("img",{src:i.ImageUrl,alt:"Group",className:"w-32 h-32 object-cover rounded-lg border"}):r.jsx("div",{className:"w-32 h-32 bg-gray-200 rounded-lg flex items-center justify-center",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),$e&&r.jsx("button",{onClick:()=>{ve(null),Ue(null),Y.current&&(Y.current.value="")},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("label",{className:"px-4 py-2 bg-blue-500 text-white text-sm rounded-lg hover:bg-blue-600 cursor-pointer",children:[r.jsx("input",{type:"file",ref:Y,className:"hidden",accept:"image/*",onChange:jC}),"Chọn ảnh nhóm"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tên nhóm"}),r.jsx("input",{type:"text",value:Nt,onChange:D=>Xt(D.target.value),placeholder:"Nhập tên nhóm",className:"w-full p-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mô tả nhóm"}),r.jsx("textarea",{value:pt,onChange:D=>nn(D.target.value),placeholder:"Mô tả ngắn về nhóm",rows:3,className:"w-full p-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:kC,disabled:!Nt.trim()||Ct,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:bg-blue-300 flex items-center",children:[Ct&&r.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Lưu thay đổi"]})})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex justify-center",children:i.ImageUrl?r.jsx("img",{src:i.ImageUrl,alt:"Group",className:"w-40 h-40 object-cover rounded-lg border"}):r.jsx("div",{className:"w-40 h-40 bg-gray-200 rounded-lg flex items-center justify-center",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-20 w-20 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"text-xl font-bold",children:i.Title}),r.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["Tạo bởi ",i.CreatedBy]})]}),i.Description&&r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Mô tả"}),r.jsx("p",{className:"text-gray-600",children:i.Description})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:V.length}),r.jsx("div",{className:"text-xs text-blue-700 mt-1",children:"Thành viên"})]}),r.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:V.filter(D=>ma(D.UserID||D.id)).length}),r.jsx("div",{className:"text-xs text-green-700 mt-1",children:"Đang online"})]}),r.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:c.length}),r.jsx("div",{className:"text-xs text-purple-700 mt-1",children:"Tin nhắn"})]})]})]})})]}),r.jsx("div",{className:"pt-4 mt-4 border-t",children:r.jsxs("button",{onClick:wC,className:"w-full py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors flex items-center justify-center",disabled:fe,children:[fe?r.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full mr-2"}):r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Rời khỏi nhóm"]})})]})}),j&&i&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl p-6 shadow-xl max-h-[80vh] flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-xl font-bold",children:"Thêm thành viên"}),r.jsx("button",{onClick:()=>S(!1),className:"text-gray-600 hover:text-gray-800",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"mb-4",children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",value:q,onChange:D=>cx(D.target.value),placeholder:"Tìm kiếm người dùng...",className:"w-full p-2.5 pl-10 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 absolute left-3 top-2.5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),be.length>0&&r.jsxs("div",{className:"mb-4",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:["Đã chọn (",be.length,")"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:be.map(D=>r.jsxs("div",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full flex items-center text-sm",children:[r.jsx("span",{children:D.FullName||D.Username}),r.jsx("button",{onClick:()=>ge(le=>le.filter(we=>(we.UserID||we.id)!==(D.UserID||D.id))),className:"ml-1 text-blue-600 hover:text-blue-800",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},D.UserID||D.id))})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto mb-4",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Kết quả tìm kiếm"}),F.length>0?r.jsx("div",{className:"space-y-2",children:F.map(D=>r.jsxs("div",{className:"p-2 bg-gray-50 hover:bg-gray-100 rounded-lg flex items-center justify-between cursor-pointer transition-colors",onClick:()=>{be.some(le=>(le.UserID||le.id)===(D.UserID||D.id))||ge(le=>[...le,D])},children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Tt,{src:Ss(D),name:D.FullName||D.Username,size:"small",className:"mr-2"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:D.FullName||D.Username}),r.jsx("p",{className:"text-xs text-gray-500",children:D.Email||`@${D.Username}`})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:`w-2 h-2 rounded-full ${ma(D.UserID||D.id)?"bg-green-500":"bg-gray-400"} mr-2`}),r.jsx("button",{className:"p-1 bg-blue-100 text-blue-600 rounded-full hover:bg-blue-200",onClick:le=>{le.stopPropagation(),be.some(we=>(we.UserID||we.id)===(D.UserID||D.id))||ge(we=>[...we,D])},children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]})]},D.UserID||D.id))}):r.jsx("div",{className:"text-center py-4 text-gray-500",children:q?"Không tìm thấy người dùng phù hợp":"Tìm kiếm người dùng để thêm vào nhóm"})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[r.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 text-gray-700 hover:text-gray-900 rounded-lg transition-colors",children:"Hủy"}),r.jsxs("button",{onClick:bC,className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:bg-blue-300 disabled:cursor-not-allowed flex items-center",disabled:be.length===0||oe,children:[oe&&r.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Thêm thành viên"]})]})]})})]})},bf={getMyReports:async(e="all")=>{try{const t="/api/reports/me"+(e!=="all"?`?status=${e.toUpperCase()}`:"");return console.log("Fetching reports from URL:",t),(await sn.get(t)).data}catch(t){throw console.error("Error fetching reports:",t),t}},createReport:async e=>{try{return(await sn.post("/api/reports",e)).data}catch(t){throw console.error("Error creating report:",t),t}},cancelReport:async e=>{try{return(await sn.post(`/api/reports/${e}/cancel`)).data}catch(t){throw console.error(`Error canceling report ${e}:`,t),t}},getReportDetails:async e=>{try{return(await sn.get(`/api/reports/me/${e}`)).data}catch(t){throw console.error(`Error fetching report details ${e}:`,t),t}},getReportCategories:async()=>{try{return(await sn.get("/api/reports/categories")).data}catch(e){return console.error("Error fetching report categories:",e),{success:!0,categories:[{value:"USER",label:"Người dùng vi phạm"},{value:"CONTENT",label:"Nội dung vi phạm"},{value:"COURSE",label:"Khóa học có vấn đề"},{value:"EVENT",label:"Sự kiện vi phạm"},{value:"COMMENT",label:"Bình luận xúc phạm"}]}}}},Fee=()=>{const[e,t]=h.useState([]),[n,s]=h.useState(!0),[i,a]=h.useState(null),[o,l]=h.useState("all"),[c,d]=h.useState(!1),[u,m]=h.useState(!1),[f,p]=h.useState(null),[x,g]=h.useState({title:"",content:"",category:"",targetId:"",targetType:"CONTENT"});h.useEffect(()=>{b()},[o]);const b=async()=>{var _,L;s(!0);try{if(!localStorage.getItem("token")){a("Bạn cần đăng nhập để xem báo cáo của mình"),s(!1);return}console.log("Fetching reports with status:",o);const M=await bf.getMyReports(o);if(!M||!M.success)throw new Error((M==null?void 0:M.message)||"Có lỗi xảy ra khi tải báo cáo");t(M.reports||[]),a(null)}catch(A){console.error("Error fetching reports:",A),A.response&&(console.error("Error response status:",A.response.status),console.error("Error response data:",A.response.data)),((_=A.response)==null?void 0:_.status)===403?a("Bạn không có quyền truy cập. Vui lòng đăng nhập lại."):((L=A.response)==null?void 0:L.status)===401?a("Phiên đăng nhập đã hết hạn. Vui lòng đăng nhập lại."):a(A.message||"Không thể tải danh sách báo cáo của bạn"),t([])}finally{s(!1)}},w=async _=>{if(_.preventDefault(),!x.title.trim()||!x.content.trim()||!x.category){alert("Vui lòng điền đầy đủ thông tin bắt buộc!");return}m(!0);try{if(!localStorage.getItem("token")){alert("Bạn cần đăng nhập để gửi báo cáo"),m(!1);return}const A={...x,targetId:x.targetId||"1",targetType:x.targetType||"CONTENT"};await bf.createReport(A),d(!1),g({title:"",content:"",category:"",targetId:"",targetType:"CONTENT"}),b(),alert("Báo cáo đã được gửi thành công! Hệ thống sẽ xử lý yêu cầu của bạn trong thời gian sớm nhất.")}catch(L){console.error("Error creating report:",L),L.status===403?alert("Bạn không có quyền gửi báo cáo. Vui lòng đăng nhập lại."):L.status===401?alert("Phiên đăng nhập đã hết hạn. Vui lòng đăng nhập lại."):alert(L.message||"Có lỗi xảy ra khi gửi báo cáo. Vui lòng thử lại sau.")}finally{m(!1)}},k=_=>{const{name:L,value:A}=_.target;g(M=>({...M,[L]:A}))},v=async(_,L)=>{if(L.stopPropagation(),!!window.confirm("Bạn có chắc chắn muốn hủy báo cáo này?"))try{await bf.cancelReport(_),b(),alert("Đã hủy báo cáo thành công")}catch(A){console.error("Error canceling report:",A),alert(A.message||"Không thể hủy báo cáo. Vui lòng thử lại sau.")}},N=_=>{switch(_){case"RESOLVED":return"text-green-600";case"PENDING":return"text-amber-600";case"REJECTED":return"text-red-600";default:return"text-gray-600"}},C=_=>{switch(_){case"RESOLVED":return"Đã giải quyết";case"PENDING":return"Đang xử lý";case"REJECTED":return"Đã từ chối";default:return"Không xác định"}},T=_=>{switch(_){case"RESOLVED":return"bg-green-100";case"PENDING":return"bg-amber-100";case"REJECTED":return"bg-red-100";default:return"bg-gray-100"}},E=_=>{switch(_){case"RESOLVED":return r.jsx(Zn,{className:"w-5 h-5 text-green-600"});case"PENDING":return r.jsx(ir,{className:"w-5 h-5 text-amber-600"});case"REJECTED":return r.jsx(Zo,{className:"w-5 h-5 text-red-600"});default:return r.jsx(jl,{className:"w-5 h-5 text-gray-600"})}},P=_=>_?new Date(_).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",R=_=>{switch(_){case"USER":return"Người dùng";case"CONTENT":return"Nội dung";case"COURSE":return"Khóa học";case"EVENT":return"Sự kiện";case"COMMENT":return"Bình luận";default:return _}},y=_=>{switch(_){case"USER":return r.jsx(Nl,{className:"w-5 h-5"});case"CONTENT":return r.jsx(Gs,{className:"w-5 h-5"});case"COURSE":return r.jsx(ho,{className:"w-5 h-5"});case"EVENT":return r.jsx(Qi,{className:"w-5 h-5"});case"COMMENT":return r.jsx(Fs,{className:"w-5 h-5"});default:return r.jsx(ey,{className:"w-5 h-5"})}},O=_=>{switch(_){case"USER":return"bg-red-500";case"CONTENT":return"bg-blue-500";case"COURSE":return"bg-green-500";case"EVENT":return"bg-purple-500";case"COMMENT":return"bg-yellow-500";default:return"bg-gray-500"}};return r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 pt-8 pb-6",children:r.jsxs("div",{className:"px-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/20 text-white text-sm font-medium mb-3",children:[r.jsx(ey,{className:"h-4 w-4"}),r.jsx("span",{children:"Hệ thống báo cáo"})]}),r.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-white",children:"Theo dõi trạng thái báo cáo"}),r.jsx("p",{className:"text-blue-100 mt-2",children:"Tại đây, bạn có thể theo dõi trạng thái xử lý các báo cáo và gửi báo cáo mới"})]}),r.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 px-4 py-2.5 bg-white text-blue-600 rounded-lg font-medium hover:bg-blue-50 transition-all duration-200 shadow-md",children:[r.jsx(Ud,{className:"h-5 w-5 rotate-90"}),"Gửi báo cáo mới"]})]}),r.jsxs("div",{className:"flex items-center gap-2 mt-6",children:[r.jsx("button",{onClick:()=>l("all"),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${o==="all"?"bg-white text-blue-600":"text-white hover:bg-white/10"}`,children:"Tất cả"}),r.jsx("button",{onClick:()=>l("pending"),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${o==="pending"?"bg-white text-amber-600":"text-white hover:bg-white/10"}`,children:r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(ir,{className:"h-4 w-4"}),"Đang xử lý"]})}),r.jsx("button",{onClick:()=>l("resolved"),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${o==="resolved"?"bg-white text-green-600":"text-white hover:bg-white/10"}`,children:r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(Zn,{className:"h-4 w-4"}),"Đã giải quyết"]})}),r.jsx("button",{onClick:()=>l("rejected"),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${o==="rejected"?"bg-white text-red-600":"text-white hover:bg-white/10"}`,children:r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(Zo,{className:"h-4 w-4"}),"Đã từ chối"]})})]})]})}),r.jsx("div",{className:"flex-1 overflow-auto bg-gray-50",children:r.jsxs("div",{className:"px-6 py-6",children:[r.jsx("div",{className:"mb-4",children:r.jsxs("p",{className:"text-sm text-gray-500",children:["Hiển thị ",e.length," báo cáo"]})}),n?r.jsx("div",{className:"grid grid-cols-1 gap-6",children:[1,2,3].map(_=>r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden animate-pulse",children:r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})},_))}):i?r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[r.jsx(jl,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Đã xảy ra lỗi"}),r.jsx("p",{className:"text-gray-600 mb-4",children:i}),r.jsxs("button",{onClick:b,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(kn,{className:"h-5 w-5"}),"Thử lại"]})]}):e.length===0?r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center",children:[r.jsx(Gs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Chưa có báo cáo nào"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Bạn chưa gửi báo cáo nào hoặc không có báo cáo phù hợp với bộ lọc."}),r.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Ud,{className:"h-5 w-5 rotate-90"}),"Tạo báo cáo mới"]})]}):r.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.map(_=>r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden hover:border-blue-300 hover:shadow-lg transition-all duration-200",children:r.jsxs("div",{className:"flex flex-col md:flex-row",children:[r.jsxs("div",{className:"w-full md:w-64 p-6 bg-gray-50 flex flex-col justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-lg ${O(_.Category)} bg-opacity-10 mb-3`,children:[y(_.Category),r.jsx("span",{className:"text-sm font-medium",children:R(_.Category)})]}),r.jsxs("div",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg ${T(_.Status)} ${N(_.Status)}`,children:[E(_.Status),r.jsx("span",{className:"text-sm font-medium",children:C(_.Status)})]})]}),r.jsxs("div",{className:"text-sm text-gray-500 mt-4",children:["#",_.ReportID]})]}),r.jsxs("div",{className:"flex-1 p-6 flex flex-col",children:[r.jsx("h3",{className:"font-semibold text-lg mb-2",children:_.Title}),r.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:_.Content}),_.Notes&&r.jsx("div",{className:"mt-auto p-3 bg-blue-50 rounded-lg",children:r.jsx("p",{className:"text-sm text-gray-700",children:_.Notes})}),r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 flex items-center justify-between",children:[r.jsx("div",{className:"text-sm text-gray-500",children:P(_.CreatedAt)}),_.Status==="PENDING"&&r.jsxs("button",{onClick:L=>v(_.ReportID,L),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors text-sm font-medium",children:[r.jsx(Zo,{className:"h-4 w-4"}),"Hủy báo cáo"]})]})]})]})},_.ReportID))})]})}),c&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fadeIn",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto animate-slideUp",onClick:_=>_.stopPropagation(),children:[r.jsxs("div",{className:"flex justify-between items-center px-6 py-4 border-b",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Gửi báo cáo mới"}),r.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-full p-2 transition-colors",children:r.jsx(zt,{className:"h-5 w-5"})})]}),r.jsxs("form",{onSubmit:w,className:"p-6",children:[r.jsxs("div",{className:"mb-5",children:[r.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:["Tiêu đề báo cáo ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"title",name:"title",value:x.title,onChange:k,disabled:u,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 shadow-sm",required:!0,placeholder:"Mô tả ngắn gọn vấn đề"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 mb-5",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:["Loại báo cáo ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"category",name:"category",value:x.category,onChange:k,disabled:u,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 shadow-sm",required:!0,children:[r.jsx("option",{value:"",children:"Chọn loại báo cáo"}),r.jsx("option",{value:"CONTENT",children:"Nội dung không phù hợp"}),r.jsx("option",{value:"USER",children:"Người dùng vi phạm"}),r.jsx("option",{value:"COMMENT",children:"Bình luận vi phạm"}),r.jsx("option",{value:"COURSE",children:"Khóa học có vấn đề"}),r.jsx("option",{value:"EVENT",children:"Sự kiện vi phạm"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"targetType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Đối tượng báo cáo"}),r.jsxs("select",{id:"targetType",name:"targetType",value:x.targetType,onChange:k,disabled:u,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 shadow-sm",children:[r.jsx("option",{value:"CONTENT",children:"Bài viết"}),r.jsx("option",{value:"USER",children:"Người dùng"}),r.jsx("option",{value:"COMMENT",children:"Bình luận"}),r.jsx("option",{value:"COURSE",children:"Khóa học"}),r.jsx("option",{value:"EVENT",children:"Sự kiện"})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-1",children:["Nội dung chi tiết ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{id:"content",name:"content",rows:"5",value:x.content,onChange:k,disabled:u,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 shadow-sm",required:!0,placeholder:"Mô tả chi tiết vấn đề bạn gặp phải..."})]}),r.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 mb-6",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(wj,{className:"h-5 w-5 text-blue-500 flex-shrink-0 mt-0.5 mr-3"}),r.jsx("p",{className:"text-sm text-blue-700",children:"Báo cáo của bạn sẽ được xử lý trong thời gian sớm nhất. Vui lòng cung cấp đầy đủ thông tin để hỗ trợ việc xử lý hiệu quả."})]})}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx("button",{type:"button",onClick:()=>d(!1),disabled:u,className:"px-4 py-2.5 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Hủy"}),r.jsx("button",{type:"submit",disabled:u||!x.title||!x.content||!x.category,className:"px-4 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-blue-300 transition-all duration-300 shadow-sm",children:u?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-5 h-5 border-2 border-t-white border-r-transparent border-b-transparent border-l-transparent rounded-full animate-spin"}),r.jsx("span",{children:"Đang gửi..."})]}):"Gửi báo cáo"})]})]})]})})]})},zee=({onClose:e})=>{const[t,n]=h.useState("request"),[s,i]=h.useState(["","","","","",""]),[a,o]=h.useState(!1),[l,c]=h.useState(""),[d,u]=h.useState(""),[m,f]=h.useState(""),[p,x]=h.useState(0),[g,b]=h.useState(!1),w=h.useRef([]);h.useEffect(()=>{k()},[]),h.useEffect(()=>{if(p>0){const P=setTimeout(()=>{x(R=>R-1)},1e3);return()=>clearTimeout(P)}},[p]);const k=async()=>{try{o(!0),c("");const P=localStorage.getItem("token");if(!P){c("Phiên đăng nhập hết hạn. Vui lòng đăng nhập lại.");return}const R=await fetch("/api/verification/email/send-otp",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${P}`}}),y=await R.json();if(!R.ok)throw new Error(y.message||"Không thể gửi mã xác thực.");f(y.email),n("verify"),x(60),u("Mã xác thực đã được gửi đến email của bạn."),setTimeout(()=>{w.current[0]&&w.current[0].focus()},100)}catch(P){console.error("Error requesting OTP:",P),c(P.message)}finally{o(!1)}},v=async()=>{if(!(p>0))try{b(!0),c("");const P=localStorage.getItem("token");if(!P){c("Phiên đăng nhập hết hạn. Vui lòng đăng nhập lại.");return}const R=await fetch("/api/verification/email/resend-otp",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${P}`}}),y=await R.json();if(!R.ok)throw new Error(y.message||"Không thể gửi lại mã xác thực.");x(60),u("Mã xác thực mới đã được gửi đến email của bạn.")}catch(P){console.error("Error resending OTP:",P),c(P.message)}finally{b(!1)}},N=async()=>{if(s.some(P=>P==="")){c("Vui lòng nhập đầy đủ mã xác thực.");return}try{o(!0),c("");const P=localStorage.getItem("token");if(!P){c("Phiên đăng nhập hết hạn. Vui lòng đăng nhập lại.");return}const R=await fetch("/api/verification/email/verify",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${P}`},body:JSON.stringify({otp:s.join("")})}),y=await R.json();if(!R.ok)throw new Error(y.message||"Không thể xác thực email.");n("success"),u("Email của bạn đã được xác thực thành công!");try{const O=JSON.parse(localStorage.getItem("user")||"{}");O.EmailVerified=!0,localStorage.setItem("user",JSON.stringify(O)),window.dispatchEvent(new CustomEvent("userUpdated",{detail:{user:O}}))}catch(O){console.error("Error updating user in localStorage:",O)}setTimeout(()=>{e&&e(!0)},2e3)}catch(P){console.error("Error verifying OTP:",P),c(P.message)}finally{o(!1)}},C=(P,R)=>{if(R.length>1){const y=R.split(""),O=[...s];for(let L=0;L<y.length&&P+L<6;L++)/^\d$/.test(y[L])&&(O[P+L]=y[L]);i(O);const _=Math.min(P+y.length,5);w.current[_]&&w.current[_].focus()}else if(/^\d$/.test(R)||R===""){const y=[...s];y[P]=R,i(y),R!==""&&P<5&&w.current[P+1].focus()}},T=(P,R)=>{R.key==="Backspace"&&s[P]===""&&P>0&&w.current[P-1].focus(),R.key==="ArrowLeft"&&P>0&&w.current[P-1].focus(),R.key==="ArrowRight"&&P<5&&w.current[P+1].focus()},E=P=>{P.preventDefault();const R=P.clipboardData.getData("text");if(/^\d{6}$/.test(R)){const y=R.split("");i(y),w.current[5].focus()}};return r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md max-w-md mx-auto",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"mx-auto h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center mb-4",children:t==="success"?r.jsx(Zn,{className:"h-8 w-8 text-green-600"}):r.jsx(mo,{className:"h-6 w-6 text-blue-600"})}),r.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:[t==="request"&&"Xác thực Email",t==="verify"&&"Nhập mã xác thực",t==="success"&&"Xác thực thành công",t==="error"&&"Xác thực thất bại"]}),t!=="success"&&r.jsxs("p",{className:"mt-2 text-gray-600",children:[t==="request"&&"Chúng tôi sẽ gửi mã xác thực đến email của bạn.",t==="verify"&&`Vui lòng nhập mã 6 số đã được gửi đến ${m}`,t==="error"&&"Đã có lỗi xảy ra trong quá trình xác thực."]})]}),d&&r.jsxs("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 text-green-700 rounded-md flex items-start",children:[r.jsx(Zn,{className:"h-5 w-5 mr-2 mt-0.5 flex-shrink-0"}),r.jsx("span",{children:d})]}),l&&r.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-md flex items-start",children:[r.jsx(Zo,{className:"h-5 w-5 mr-2 mt-0.5 flex-shrink-0"}),r.jsx("span",{children:l})]}),t==="verify"&&r.jsxs("div",{className:"my-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mã xác thực"}),r.jsx("div",{className:"flex gap-2 justify-center",onPaste:E,children:s.map((P,R)=>r.jsx("input",{type:"text",inputMode:"numeric",ref:y=>w.current[R]=y,value:P,onChange:y=>C(R,y.target.value),onKeyDown:y=>T(R,y),className:"w-10 h-12 border border-gray-300 rounded-md text-center text-xl font-semibold focus:ring-2 focus:ring-blue-500 focus:border-blue-500",maxLength:1,disabled:a},R))}),r.jsx("div",{className:"mt-4 text-center",children:r.jsx("button",{type:"button",onClick:v,disabled:p>0||a||g,className:`text-sm ${p>0?"text-gray-400":"text-blue-600 hover:text-blue-800"} flex items-center justify-center mx-auto`,children:g?r.jsx(kn,{className:"h-4 w-4 mr-1 animate-spin"}):p>0?`Gửi lại sau (${p}s)`:"Gửi lại mã"})})]}),t==="success"&&r.jsxs("div",{className:"my-6 text-center",children:[r.jsx("div",{className:"flex items-center justify-center mx-auto mb-4",children:r.jsx(ei,{className:"h-16 w-16 text-green-500"})}),r.jsx("p",{className:"text-gray-700",children:"Email của bạn đã được xác thực thành công. Bạn có thể tiếp tục sử dụng đầy đủ tính năng của hệ thống."})]}),r.jsxs("div",{className:"mt-6 flex justify-center",children:[t==="verify"&&r.jsx("button",{type:"button",onClick:N,disabled:a||s.some(P=>P===""),className:`w-full py-2 px-4 rounded-md font-medium ${a||s.some(P=>P==="")?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"} flex items-center justify-center`,children:a?r.jsxs(r.Fragment,{children:[r.jsx(kn,{className:"h-5 w-5 mr-2 animate-spin"}),"Đang xác thực..."]}):"Xác thực"}),t==="request"&&r.jsx("button",{type:"button",onClick:k,disabled:a,className:`w-full py-2 px-4 rounded-md font-medium ${a?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"} flex items-center justify-center`,children:a?r.jsxs(r.Fragment,{children:[r.jsx(kn,{className:"h-5 w-5 mr-2 animate-spin"}),"Đang gửi..."]}):"Gửi mã xác thực"}),t==="success"&&r.jsx("button",{type:"button",onClick:()=>e&&e(!0),className:"w-full py-2 px-4 bg-green-600 text-white rounded-md font-medium hover:bg-green-700",children:"Đóng"}),t==="error"&&r.jsx("button",{type:"button",onClick:()=>n("request"),className:"w-full py-2 px-4 bg-blue-600 text-white rounded-md font-medium hover:bg-blue-700",children:"Thử lại"})]})]})},cw=()=>{var ge;const e=St(),t=Ht(),{userId:n}=or(),[s,i]=h.useState(null),[a,o]=h.useState(!0),[l,c]=h.useState(null),[d,u]=h.useState(!1),[m,f]=h.useState(null),[p,x]=h.useState(!1),[g,b]=h.useState({}),[w,k]=h.useState(!1),[v,N]=h.useState([]),[C,T]=h.useState(!0),[E,P]=h.useState(null),R=h.useRef(null),[y,O]=h.useState(!1),[_,L]=h.useState(null),[A,M]=h.useState([]),[z,ie]=h.useState(!1),[X,te]=h.useState(null),[B,H]=h.useState(null),[K,$]=h.useState(!1),[me,ke]=h.useState(null),[ye,se]=h.useState([]),[G,W]=h.useState(!1),[Z,Y]=h.useState(null),[ee,ae]=h.useState("all"),[de,Re]=h.useState(!1);h.useEffect(()=>{(async()=>{try{const he=localStorage.getItem("token");if(!he){e("/login");return}let fe;n?fe=`/api/users/${n}`:(fe="/api/auth/me",k(!0));const ze=await fetch(fe,{headers:{Authorization:`Bearer ${he}`,Accept:"application/json"}});if(ze.status===401){localStorage.removeItem("token"),localStorage.removeItem("user"),e("/login",{state:{message:"Phiên đăng nhập đã hết hạn, vui lòng đăng nhập lại"}});return}if(!ze.ok){const Ze=await ze.json();throw new Error(Ze.message||"Không thể tải thông tin người dùng")}const Me=await ze.json();if(Me.DateOfBirth&&(Me.DateOfBirth=new Date(Me.DateOfBirth).toISOString()),Me.CreatedAt&&(Me.CreatedAt=new Date(Me.CreatedAt).toISOString()),Me.LastLoginAt&&(Me.LastLoginAt=new Date(Me.LastLoginAt).toISOString()),i(Me),!n)k(!0);else{const Ze=JSON.parse(localStorage.getItem("user")||"{}");k(Ze.UserID===parseInt(n)||Ze.id===parseInt(n)),Ze.UserID===parseInt(n)||Ze.id===parseInt(n)||Be(n)}}catch(he){console.error("Error fetching user data:",he),c(he.message)}finally{o(!1)}})()},[e,n]);const Be=async oe=>{try{const he=localStorage.getItem("token");if(!he)return;const fe=await fetch(`/api/friendships/status/${oe}`,{headers:{Authorization:`Bearer ${he}`,Accept:"application/json"}});if(!fe.ok){if(fe.status===404){H(null);return}throw new Error("Could not fetch friendship status")}const ze=await fe.json();H(ze.status)}catch(he){console.error("Error fetching friendship status:",he),H(null)}},Ge=async()=>{try{$(!0);const oe=localStorage.getItem("token");if(!oe)return;const he=n||(s==null?void 0:s.UserID);if(!he)return;if(!(await fetch("/api/friendships",{method:"POST",headers:{Authorization:`Bearer ${oe}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({friendId:he})})).ok)throw new Error("Could not send friend request");H("pending"),ke("Đã gửi lời mời kết bạn"),setTimeout(()=>ke(null),3e3)}catch(oe){console.error("Error sending friend request:",oe),L("Không thể gửi lời mời kết bạn")}finally{$(!1)}},et=async()=>{try{$(!0);const oe=localStorage.getItem("token");if(!oe)return;const he=n||(s==null?void 0:s.UserID);if(!he)return;if(!(await fetch(`/api/friendships/${he}/accept`,{method:"PUT",headers:{Authorization:`Bearer ${oe}`,Accept:"application/json"}})).ok)throw new Error("Could not accept friend request");H("accepted"),ke("Đã chấp nhận lời mời kết bạn"),setTimeout(()=>ke(null),3e3)}catch(oe){console.error("Error accepting friend request:",oe),L("Không thể chấp nhận lời mời kết bạn")}finally{$(!1)}},lt=async()=>{try{$(!0);const oe=localStorage.getItem("token");if(!oe)return;const he=n||(s==null?void 0:s.UserID);if(!he)return;if(!(await fetch(`/api/friendships/${he}`,{method:"DELETE",headers:{Authorization:`Bearer ${oe}`,Accept:"application/json"}})).ok)throw new Error("Could not remove friend");H(null),ke("Đã hủy kết bạn"),setTimeout(()=>ke(null),3e3)}catch(oe){console.error("Error removing friend:",oe),L("Không thể hủy kết bạn")}finally{$(!1)}};h.useEffect(()=>{(s||n)&&(async()=>{try{T(!0);const he=localStorage.getItem("token");if(!he)return;const fe=n||(s==null?void 0:s.UserID);if(!fe)return;const ze=await fetch(`/api/posts/user/${fe}?limit=1000`,{headers:{Authorization:`Bearer ${he}`,Accept:"application/json"}});if(!ze.ok)throw new Error("Could not fetch user posts");const Me=await ze.json();N(Me.posts||[])}catch(he){console.error("Error fetching user posts:",he),P(he.message)}finally{T(!1)}})()},[s,n]);const Xe=()=>{f({...s,DateOfBirth:s.DateOfBirth?s.DateOfBirth.split("T")[0]:""}),u(!0)},He=()=>{f(null),u(!1)},Pe=oe=>{const{name:he,value:fe}=oe.target;f(ze=>({...ze,[he]:fe}))},vt=async oe=>{oe.preventDefault(),c(null),b({});const he=/^[0-9]{10,11}$/;if(m.PhoneNumber&&!he.test(m.PhoneNumber)){b(fe=>({...fe,PhoneNumber:"Số điện thoại không hợp lệ"}));return}if(m.DateOfBirth&&new Date(m.DateOfBirth)>new Date){b(Me=>({...Me,DateOfBirth:"Ngày sinh không hợp lệ"}));return}try{const fe=localStorage.getItem("token"),ze={PhoneNumber:m.PhoneNumber,DateOfBirth:m.DateOfBirth,School:m.School,Address:m.Address,City:m.City},Me=await fetch("/api/users/update",{method:"PUT",headers:{Authorization:`Bearer ${fe}`,"Content-Type":"application/json"},body:JSON.stringify(ze)});if(Me.status===401){localStorage.removeItem("token"),localStorage.removeItem("user"),e("/login",{state:{message:"Phiên đăng nhập đã hết hạn, vui lòng đăng nhập lại"}});return}if(!Me.ok){const Nt=await Me.json();throw new Error(Nt.message||"Không thể cập nhật thông tin")}const Ze=await Me.json();Ze.DateOfBirth&&(Ze.DateOfBirth=new Date(Ze.DateOfBirth).toISOString()),Ze.CreatedAt&&(Ze.CreatedAt=new Date(Ze.CreatedAt).toISOString()),Ze.LastLoginAt&&(Ze.LastLoginAt=new Date(Ze.LastLoginAt).toISOString()),i(Ze),u(!1),x(!0),setTimeout(()=>x(!1),3e3)}catch(fe){console.error("Error updating user:",fe),c(fe.message)}},Ye=async oe=>{try{if(!(await fetch(`/api/posts/${oe}/like`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Could not like post");N(v.map(fe=>fe.PostID===oe?{...fe,IsLiked:!fe.IsLiked,LikesCount:fe.IsLiked?fe.LikesCount-1:fe.LikesCount+1}:fe))}catch(he){console.error("Error liking post:",he)}},ce=async(oe,he=1)=>{try{N(v.map(fe=>fe.PostID===oe?{...fe,CommentsCount:Math.max(0,fe.CommentsCount+he)}:fe))}catch(fe){console.error("Comment update error:",fe)}},V=async(oe,he)=>{try{const fe=localStorage.getItem("token");if(!(await fetch(`/api/posts/${oe}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${fe}`},body:JSON.stringify({content:he})})).ok)throw new Error("Could not update post");return N(v.map(Me=>Me.PostID===oe?{...Me,Content:he,IsEdited:!0}:Me)),!0}catch(fe){return console.error("Error editing post:",fe),!1}},I=async oe=>{try{const he=localStorage.getItem("token"),fe=await fetch(`/api/posts/${oe}`,{headers:{Authorization:`Bearer ${he}`}});if(!fe.ok)throw new Error("Could not fetch updated post");const ze=await fe.json();return N(v.map(Me=>Me.PostID===oe?{...Me,media:ze.media,IsEdited:!0}:Me)),!0}catch(he){return console.error("Error refreshing post media:",he),!1}},j=()=>{w&&R.current&&R.current.click()},S=async oe=>{if(!oe.target.files||oe.target.files.length===0)return;const he=oe.target.files[0];if(!["image/jpeg","image/png","image/gif"].includes(he.type)){L("Only JPG, PNG, and GIF files are allowed");return}const ze=new FormData;ze.append("image",he);try{O(!0),L(null);const Me=localStorage.getItem("token"),Ze=await fetch("/api/settings/profile-picture",{method:"POST",headers:{Authorization:`Bearer ${Me}`},body:ze});if(!Ze.ok){const Xt=await Ze.json();throw new Error(Xt.message||"Failed to upload profile picture")}const Nt=await Ze.json();i(Xt=>({...Xt,Image:Nt.profileImage}));try{const Xt=JSON.parse(localStorage.getItem("user")||"{}");Xt.Image=Nt.profileImage,Xt.avatar&&(Xt.avatar=Nt.profileImage),localStorage.setItem("user",JSON.stringify(Xt)),t(Vf(Nt.profileImage)),window.dispatchEvent(new CustomEvent("profileUpdated",{detail:{profileImage:Nt.profileImage}}))}catch(Xt){console.error("Error updating user in localStorage:",Xt)}x(!0),setTimeout(()=>x(!1),3e3)}catch(Me){console.error("Error uploading profile picture:",Me),L(Me.message)}finally{O(!1),R.current&&(R.current.value="")}},F=()=>{try{if(!s){console.error("No user data available"),showToast("error","Không thể bắt đầu chat: Dữ liệu người dùng không có sẵn");return}const oe=s.UserID||s.id;if(!oe){console.error("User ID is missing"),showToast("error","Không thể bắt đầu chat: ID người dùng bị thiếu");return}const he={UserID:oe,id:oe,FullName:s.FullName||s.Username,Username:s.Username,Email:s.Email,Image:s.Image||s.Avatar};console.log("Starting chat with user:",he),localStorage.setItem("selectedUserFromProfile",JSON.stringify(he)),e("/chat",{state:{selectedUser:he,source:"profile"}})}catch(oe){console.error("Error starting chat:",oe),showToast("error","Đã xảy ra lỗi khi bắt đầu cuộc trò chuyện")}},U=async()=>{try{W(!0);const oe=localStorage.getItem("token");if(!oe)return;const he=n||(s==null?void 0:s.UserID);if(!he)return;let fe=`/api/friendships/user/${he}`;!n&&w&&(fe="/api/friendships");const ze=await fetch(fe,{headers:{Authorization:`Bearer ${oe}`,Accept:"application/json"}});if(!ze.ok)throw new Error("Could not fetch friends");const Me=await ze.json();Array.isArray(Me)?se(Me):Me.friends&&se(Me.friends)}catch(oe){console.error("Error fetching friends:",oe),Y(oe.message)}finally{W(!1)}};h.useEffect(()=>{(s!=null&&s.UserID||n)&&U()},[s,n,w]);const q=async()=>{if(w)try{ie(!0);const oe=localStorage.getItem("token");if(!oe)return;const he=await fetch("/api/posts/bookmarks",{headers:{Authorization:`Bearer ${oe}`,Accept:"application/json"}});if(!he.ok)throw new Error("Could not fetch bookmarked posts");const fe=await he.json();M(fe.posts||[])}catch(oe){console.error("Error fetching bookmarked posts:",oe),te(oe.message)}finally{ie(!1)}};h.useEffect(()=>{ee==="saved"&&w&&A.length===0&&!z&&q()},[ee,w]);const Q=async oe=>{try{const he=localStorage.getItem("token");if(!(await fetch(`/api/posts/${oe}/bookmark`,{method:"POST",headers:{Authorization:`Bearer ${he}`}})).ok)throw new Error("Failed to toggle bookmark");ee==="saved"&&M(ze=>ze.filter(Me=>Me.PostID!==oe))}catch(he){console.error("Error toggling bookmark:",he)}};if(a)return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(l)return r.jsx("div",{className:"text-center p-6",children:r.jsx("p",{className:"text-red-600",children:l})});const be=oe=>oe?new Date(oe).toLocaleDateString("vi-VN"):"Chưa cập nhật";return r.jsxs("div",{className:"w-full min-h-screen bg-gray-50",children:[p&&r.jsxs("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded shadow-lg z-50 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(gd,{className:"h-5 w-5 mr-2"}),r.jsx("span",{children:"Cập nhật thông tin thành công!"})]}),r.jsx("button",{onClick:()=>x(!1),className:"ml-4 text-green-700",children:r.jsx(zt,{className:"h-5 w-5"})})]}),me&&r.jsxs("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded shadow-lg z-50 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(gd,{className:"h-5 w-5 mr-2"}),r.jsx("span",{children:me})]}),r.jsx("button",{onClick:()=>ke(null),className:"ml-4 text-green-700",children:r.jsx(zt,{className:"h-5 w-5"})})]}),_&&r.jsxs("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded shadow-lg z-50 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(zt,{className:"h-5 w-5 mr-2"}),r.jsx("span",{children:_})]}),r.jsx("button",{onClick:()=>L(null),className:"ml-4 text-red-700",children:r.jsx(zt,{className:"h-5 w-5"})})]}),de&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center",children:[r.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:()=>Re(!1)}),r.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[r.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:r.jsxs("button",{type:"button",className:"bg-white rounded-md text-gray-400 hover:text-gray-500",onClick:()=>Re(!1),children:[r.jsx("span",{className:"sr-only",children:"Close"}),r.jsx(zt,{className:"h-6 w-6","aria-hidden":"true"})]})}),r.jsx(zee,{onClose:oe=>{Re(!1),oe&&i(he=>({...he,EmailVerified:!0}))}})]})]})}),r.jsxs("div",{className:"flex w-full",children:[r.jsx("div",{className:"w-[35%] h-screen p-4 overflow-y-auto",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden h-fit sticky top-4",children:[r.jsx("div",{className:"bg-blue-600 h-32 md:h-40 relative",children:r.jsx("div",{className:"absolute -bottom-16 md:-bottom-20 left-8",children:r.jsxs("div",{className:"h-32 w-32 md:h-40 md:w-40 rounded-full bg-white p-1 relative flex items-center justify-center overflow-hidden",children:[w&&r.jsx("input",{type:"file",ref:R,onChange:S,className:"hidden",accept:"image/*"}),r.jsx(Tt,{src:s==null?void 0:s.Image,name:s==null?void 0:s.FullName,alt:s==null?void 0:s.FullName,size:"xxl",className:"border-2 border-white w-full h-full object-cover",onClick:w?j:void 0,style:{width:"100%",height:"100%"}}),w&&r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity rounded-full cursor-pointer",onClick:j,children:y?r.jsx(kn,{className:"h-8 w-8 text-white animate-spin"}):r.jsx(d8,{className:"h-8 w-8 text-white"})})]})})}),r.jsxs("div",{className:"pt-20 md:pt-24 px-6 md:px-8 pb-8",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start mb-6 gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:d?r.jsx("input",{type:"text",name:"FullName",value:m.FullName,onChange:Pe,className:"border-b border-gray-300 focus:border-blue-500 focus:outline-none"}):s==null?void 0:s.FullName}),r.jsx("p",{className:"text-gray-600",children:(s==null?void 0:s.Role)==="STUDENT"?"Học sinh":(s==null?void 0:s.Role)==="TEACHER"?"Giáo viên":"Quản trị viên"})]}),r.jsxs("div",{className:"flex space-x-2",children:[!w&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:F,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center space-x-2",children:[r.jsx(wl,{className:"h-5 w-5"}),r.jsx("span",{children:"Chat"})]}),B===null&&r.jsxs("button",{onClick:Ge,disabled:K,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition flex items-center space-x-2",children:[K?r.jsx(kn,{className:"h-5 w-5 animate-spin"}):r.jsx(Ej,{className:"h-5 w-5"}),r.jsx("span",{children:"Kết bạn"})]}),B==="pending"&&r.jsxs("button",{onClick:et,disabled:K,className:"px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition flex items-center space-x-2",children:[K?r.jsx(kn,{className:"h-5 w-5 animate-spin"}):r.jsx(ir,{className:"h-5 w-5"}),r.jsx("span",{children:"Chấp nhận"})]}),B==="accepted"&&r.jsxs("button",{onClick:lt,disabled:K,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition flex items-center space-x-2",children:[K?r.jsx(kn,{className:"h-5 w-5 animate-spin"}):r.jsx(VP,{className:"h-5 w-5"}),r.jsx("span",{children:"Hủy kết bạn"})]})]}),w&&(d?r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:vt,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition",children:[r.jsx(gd,{className:"h-5 w-5 mr-1"}),"Lưu"]}),r.jsxs("button",{onClick:He,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition",children:[r.jsx(zt,{className:"h-5 w-5 mr-1"}),"Hủy"]})]}):r.jsx("button",{onClick:Xe,className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition border border-gray-300",title:"Chỉnh sửa thông tin",children:r.jsx(Lg,{className:"h-5 w-5 text-gray-600"})}))]})]}),r.jsxs("form",{onSubmit:vt,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(oP,{className:"h-5 w-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Tên đăng nhập"}),r.jsx("p",{className:"text-gray-900",children:s==null?void 0:s.Username})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(mo,{className:"h-5 w-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),r.jsx("div",{className:"flex items-center",children:(s==null?void 0:s.EmailVerified)===!0||(s==null?void 0:s.emailVerified)===!0?r.jsx("p",{className:"text-gray-900",children:(s==null?void 0:s.Email)||(s==null?void 0:s.email)||"Chưa cập nhật"}):r.jsx("p",{className:"text-red-600 cursor-pointer hover:underline",onClick:()=>w&&Re(!0),children:(s==null?void 0:s.Email)||(s==null?void 0:s.email)||"Chưa cập nhật"})})]})]}),r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(sp,{className:"h-5 w-5 text-gray-400"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Số điện thoại"}),d?r.jsx("input",{type:"tel",name:"PhoneNumber",value:m.PhoneNumber||"",onChange:Pe,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",placeholder:"Nhập số điện thoại"}):r.jsx("p",{className:"text-gray-900",children:(s==null?void 0:s.PhoneNumber)||"Chưa cập nhật"})]})]})}),r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Qi,{className:"h-5 w-5 text-gray-400"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Ngày sinh"}),d?r.jsx("input",{type:"date",name:"DateOfBirth",value:m.DateOfBirth||"",onChange:Pe,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}):r.jsx("p",{className:"text-gray-900",children:be(s==null?void 0:s.DateOfBirth)})]})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(r8,{className:"h-5 w-5 text-gray-400"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Trường học"}),d?r.jsx("input",{type:"text",name:"School",value:m.School||"",onChange:Pe,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",placeholder:"Nhập tên trường"}):r.jsx("p",{className:"text-gray-900",children:(s==null?void 0:s.School)||"Chưa cập nhật"})]})]})}),r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ui,{className:"h-5 w-5 text-gray-400"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Địa chỉ"}),d?r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"text",name:"Address",value:m.Address||"",onChange:Pe,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",placeholder:"Nhập địa chỉ"}),r.jsx("input",{type:"text",name:"City",value:m.City||"",onChange:Pe,className:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",placeholder:"Nhập thành phố"})]}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-gray-900",children:(s==null?void 0:s.Address)||"Chưa cập nhật"}),r.jsx("p",{className:"text-gray-600",children:[s==null?void 0:s.City,s==null?void 0:s.Country].filter(Boolean).join(", ")||"Chưa cập nhật"})]})]})]})})]})]}),d&&r.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsx("button",{type:"button",onClick:He,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Hủy"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Lưu thay đổi"})]})]}),r.jsxs("div",{className:"border-t pt-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Thông tin tài khoản"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Ngày tham gia"}),r.jsx("p",{className:"text-gray-900",children:be(s==null?void 0:s.CreatedAt)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Đăng nhập gần nhất"}),r.jsx("p",{className:"text-gray-900",children:be(s==null?void 0:s.LastLoginAt)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Trạng thái tài khoản"}),r.jsx("p",{className:`font-medium ${(s==null?void 0:s.AccountStatus)==="ACTIVE"?"text-green-600":"text-red-600"}`,children:(s==null?void 0:s.AccountStatus)==="ACTIVE"?"Đang hoạt động":"Đã khóa"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500",children:"Xác thực email"}),r.jsx("p",{className:`font-medium ${(s==null?void 0:s.EmailVerified)===!0||(s==null?void 0:s.emailVerified)===!0?"text-green-600":"text-yellow-600"}`,children:(s==null?void 0:s.EmailVerified)===!0||(s==null?void 0:s.emailVerified)===!0?"Đã xác thực":"Chưa xác thực"})]})]})]}),r.jsxs("div",{className:"border-t pt-6 mt-6",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(vs,{className:"h-5 w-5 mr-2 text-blue-600"}),"Bạn bè (",ye.length,")"]}),G?r.jsx("div",{className:"flex justify-center py-4",children:r.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-blue-600"})}):Z?r.jsx("div",{className:"text-center py-4 text-red-500",children:"Không thể tải danh sách bạn bè"}):ye.length===0?r.jsx("div",{className:"text-center py-4 text-gray-500",children:w?"Bạn chưa có kết bạn với ai.":`${(s==null?void 0:s.FullName)||"Người dùng này"} chưa có kết bạn với ai.`}):r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:[ye.slice(0,8).map(oe=>r.jsxs("div",{className:"flex flex-col items-center p-2 border border-gray-100 rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>e(`/profile/${oe.UserID||oe.FriendID}`),children:[r.jsx(Tt,{src:oe.Image||oe.FriendProfilePicture,name:oe.FullName||oe.FriendFullName,size:"md",className:"mb-2"}),r.jsx("p",{className:"text-sm font-medium text-center truncate w-full",children:oe.FullName||oe.FriendFullName}),r.jsxs("p",{className:"text-xs text-gray-500 truncate w-full text-center",children:["@",oe.Username||oe.FriendUsername]})]},oe.UserID||oe.FriendID)),ye.length>8&&r.jsxs("div",{className:"flex flex-col items-center justify-center p-2 border border-gray-100 rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>e(w?"/friends":`/friends?userId=${n}`),children:[r.jsx("div",{className:"bg-gray-100 rounded-full p-2 mb-2",children:r.jsx(kn,{className:"h-6 w-6 text-gray-500"})}),r.jsxs("p",{className:"text-sm font-medium text-blue-600 text-center",children:["Xem tất cả (",ye.length,")"]})]})]})]})]})]})}),r.jsx("div",{className:"w-[65%] h-screen p-4 overflow-y-auto",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[r.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center sticky top-4 bg-white py-4 z-10",children:[r.jsx(Gs,{className:"h-6 w-6 text-blue-600 mr-2"}),"Bài viết của ",w?"tôi":(ge=s==null?void 0:s.FullName)==null?void 0:ge.split(" ").pop()]}),r.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[r.jsx("button",{className:`px-4 py-2 rounded-lg font-medium transition-colors duration-200 ${ee==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,onClick:()=>ae("all"),children:"Tất cả bài viết"}),r.jsx("button",{className:`px-4 py-2 rounded-lg font-medium transition-colors duration-200 ${ee==="image"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,onClick:()=>ae("image"),children:"Ảnh"}),r.jsx("button",{className:`px-4 py-2 rounded-lg font-medium transition-colors duration-200 ${ee==="video"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,onClick:()=>ae("video"),children:"Video"}),w&&r.jsxs("button",{className:`px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center ${ee==="saved"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,onClick:()=>ae("saved"),children:[r.jsx(vl,{className:"w-4 h-4 mr-1"}),"Đã lưu"]})]}),ee==="saved"?z?r.jsxs("div",{className:"text-center py-10",children:[r.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Đang tải bài viết đã lưu..."})]}):X?r.jsx("div",{className:"text-center py-10",children:r.jsxs("p",{className:"text-red-600",children:["Không thể tải bài viết đã lưu: ",X]})}):A.length===0?r.jsxs("div",{className:"text-center py-10 bg-gray-50 rounded-lg",children:[r.jsx(vl,{className:"h-12 w-12 mx-auto text-gray-400 mb-3"}),r.jsx("p",{className:"text-gray-600",children:"Bạn chưa lưu bài viết nào."}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Bài viết đã lưu sẽ hiển thị tại đây."}),r.jsx("button",{onClick:()=>e("/posts"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Khám phá bài viết"})]}):r.jsx("div",{className:"space-y-6",children:r.jsx(Fv,{initialPosts:A,onLike:Ye,onComment:ce,onShare:oe=>console.log("Share:",oe),onEdit:V,onRefreshMedia:I,onBookmark:Q})}):C?r.jsxs("div",{className:"text-center py-10",children:[r.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Đang tải bài viết..."})]}):E?r.jsx("div",{className:"text-center py-10",children:r.jsxs("p",{className:"text-red-600",children:["Không thể tải bài viết: ",E]})}):dw(v,ee).length===0?r.jsxs("div",{className:"text-center py-10 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-gray-600",children:w?"Bạn chưa có bài viết nào. Hãy chia sẻ điều gì đó với cộng đồng!":`${s==null?void 0:s.FullName} chưa có bài viết nào.`}),w&&r.jsx("button",{onClick:()=>e("/posts"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Tạo bài viết"})]}):r.jsx("div",{className:"space-y-6",children:r.jsx(Fv,{initialPosts:dw(v,ee),onLike:Ye,onComment:ce,onShare:oe=>console.log("Share:",oe),onEdit:V,onRefreshMedia:I,onBookmark:Q})})]})})]})]})};function dw(e,t){return Array.isArray(e)?t==="all"?e:t==="image"?e.filter(n=>Array.isArray(n.media)&&n.media.some(s=>s.MediaType==="image")):t==="video"?e.filter(n=>Array.isArray(n.media)&&n.media.some(s=>s.MediaType==="video")):e:[]}const Uee=()=>{const e=St(),t=lr(),s=new URLSearchParams(t.search).get("userId"),[i,a]=h.useState(()=>sessionStorage.getItem("friendsActiveTab")||"all"),[o,l]=h.useState(()=>{const V=sessionStorage.getItem("friends");return V?JSON.parse(V):[]}),[c,d]=h.useState(()=>{const V=sessionStorage.getItem("pendingRequests");return V?JSON.parse(V):[]}),[u,m]=h.useState(()=>{const V=sessionStorage.getItem("sentRequests");return V?JSON.parse(V):[]}),[f,p]=h.useState(!1),[x,g]=h.useState(null),[b,w]=h.useState(!1),[k,v]=h.useState({type:null,message:null}),[N,C]=h.useState(null),[T,E]=h.useState(!0),[P,R]=h.useState([]),[y,O]=h.useState(!1),[_,L]=h.useState(""),[A,M]=h.useState(!1),[z,ie]=h.useState(0),[X,te]=h.useState(0),[B,H]=h.useState(null),[K,$]=h.useState(navigator.onLine),me=h.useCallback(async()=>{try{p(!0);const V=localStorage.getItem("token");if(!V){e("/login");return}if(!K){const F=sessionStorage.getItem("friends"),U=sessionStorage.getItem("pendingRequests"),q=sessionStorage.getItem("sentRequests");F&&l(JSON.parse(F)),U&&d(JSON.parse(U)),q&&m(JSON.parse(q)),Be("error","Không có kết nối mạng. Hiển thị dữ liệu đã lưu."),p(!1);return}let I="/api/friendships";s&&(I=`/api/friendships/user/${s}`);const j=new AbortController,S=setTimeout(()=>j.abort(),1e4);try{const F=await fetch(I,{headers:{Authorization:`Bearer ${V}`,Accept:"application/json"},signal:j.signal});if(clearTimeout(S),F.status===401){localStorage.removeItem("token"),localStorage.removeItem("user"),e("/login",{state:{message:"Phiên đăng nhập đã hết hạn, vui lòng đăng nhập lại"}});return}if(!F.ok)throw new Error("Không thể tải danh sách bạn bè");const U=await F.json();console.log("API response data:",U),s?l(U):(l(U.friends||[]),d(U.pendingRequests||[]),U.sentRequests&&Array.isArray(U.sentRequests)?(console.log("Setting sent requests from API:",U.sentRequests),m(U.sentRequests)):console.warn("No sentRequests array in API response or invalid format:",U.sentRequests),console.log("Setting sent requests:",U.sentRequests||[]),sessionStorage.setItem("friends",JSON.stringify(U.friends||[])),sessionStorage.setItem("pendingRequests",JSON.stringify(U.pendingRequests||[])),sessionStorage.setItem("sentRequests",JSON.stringify(U.sentRequests||[])),sessionStorage.setItem("friendsLastFetched",Date.now().toString()))}catch(F){F.name==="AbortError"?Be("error","Không thể kết nối đến máy chủ. Vui lòng thử lại sau."):(console.error("Error fetching friendships:",F),g(F.message));const U=sessionStorage.getItem("friends"),q=sessionStorage.getItem("pendingRequests"),Q=sessionStorage.getItem("sentRequests");U&&l(JSON.parse(U)),q&&d(JSON.parse(q)),Q&&m(JSON.parse(Q))}finally{p(!1)}}catch(V){console.error("Error in fetchFriendships:",V),p(!1)}},[s,e,K]);h.useEffect(()=>{s?(ye(),E(!1),a("all")):E(!0),me()},[s,me]),h.useEffect(()=>{i==="suggestions"&&T&&P.length===0&&se()},[i,T]),h.useEffect(()=>{i==="pending"&&T&&me()},[i,T,me]),h.useEffect(()=>{i==="sent"&&(console.log("Current sent requests:",u),console.log("Sent requests from sessionStorage:",JSON.parse(sessionStorage.getItem("sentRequests")||"[]")))},[i,u]),h.useEffect(()=>{i==="sent"&&T&&(console.log("Fetching sent requests from API..."),(async()=>{try{const I=localStorage.getItem("token");if(!I)return;p(!0);const j=await fetch("/api/friendships",{headers:{Authorization:`Bearer ${I}`,Accept:"application/json"}});if(!j.ok)throw new Error("Failed to fetch sent requests");const S=await j.json();console.log("Fresh API data for sent requests:",S),S&&S.sentRequests&&(m(S.sentRequests),sessionStorage.setItem("sentRequests",JSON.stringify(S.sentRequests)))}catch(I){console.error("Error fetching sent requests:",I)}finally{p(!1)}})())},[i,T]);const ke=async()=>{try{console.log("Fetching just sent requests...");const V=localStorage.getItem("token");if(!V)return[];const I=await fetch("/api/friendships",{headers:{Authorization:`Bearer ${V}`,Accept:"application/json"}});if(!I.ok)throw new Error("Failed to fetch sent requests");const j=await I.json();return console.log("API data for direct sent requests fetch:",j),j.sentRequests||[]}catch(V){return console.error("Error fetching sent requests directly:",V),[]}};h.useEffect(()=>{(()=>{try{if(s)me();else{const I=sessionStorage.getItem("friendsLastFetched"),j=Date.now();if(I&&j-parseInt(I)<5*60*1e3){const F=sessionStorage.getItem("friends"),U=sessionStorage.getItem("pendingRequests"),q=sessionStorage.getItem("sentRequests");F&&l(JSON.parse(F)),U&&d(JSON.parse(U)),q&&m(JSON.parse(q)),me()}else me()}}catch(I){console.error("Error restoring session data:",I),me()}})()},[s,me]);const ye=async()=>{try{const V=localStorage.getItem("token");if(!V){e("/login");return}const I=await fetch(`/api/users/${s}`,{headers:{Authorization:`Bearer ${V}`,Accept:"application/json"}});if(!I.ok)throw new Error("Không thể tải thông tin người dùng");const j=await I.json();C(j)}catch(V){console.error("Error fetching user info:",V),g(V.message)}},se=async()=>{try{O(!0);const V=localStorage.getItem("token");if(!V){e("/login");return}const I=await fetch("/api/friendships/suggestions/random",{headers:{Authorization:`Bearer ${V}`,Accept:"application/json"}});if(I.status===401){localStorage.removeItem("token"),localStorage.removeItem("user"),e("/login",{state:{message:"Phiên đăng nhập đã hết hạn, vui lòng đăng nhập lại"}});return}if(!I.ok)throw new Error("Không thể tải gợi ý kết bạn");const j=await I.json();R(j)}catch(V){console.error("Error fetching friend suggestions:",V),g(V.message)}finally{O(!1)}},G=async()=>{try{O(!0);const V=localStorage.getItem("token");if(!V){e("/login");return}const I=await fetch("/api/friendships/suggestions/random",{headers:{Authorization:`Bearer ${V}`,Accept:"application/json"}});if(!I.ok)throw new Error("Không thể tải thêm gợi ý kết bạn");const j=await I.json();R(j)}catch(V){console.error("Error loading more suggestions:",V),g(V.message)}finally{O(!1)}},W=async V=>{try{w(!0);const I=localStorage.getItem("token");if(!I)return;if(!c.some(U=>U.UserID===V)){Be("error","Lời mời kết bạn không còn tồn tại");return}if(!(await fetch(`/api/friendships/${V}/accept`,{method:"PUT",headers:{Authorization:`Bearer ${I}`,Accept:"application/json"}})).ok)throw new Error("Could not accept friend request");const F=c.find(U=>U.UserID===V);if(F){const U=[...o,F],q=c.filter(Q=>Q.UserID!==V);l(U),d(q),sessionStorage.setItem("friends",JSON.stringify(U)),sessionStorage.setItem("pendingRequests",JSON.stringify(q)),sessionStorage.setItem("friendsLastFetched",Date.now().toString())}Be("success","Đã chấp nhận lời mời kết bạn")}catch(I){console.error("Error accepting friend request:",I),Be("error","Không thể chấp nhận lời mời kết bạn")}finally{w(!1)}},Z=async V=>{try{w(!0);const I=localStorage.getItem("token");if(!I)return;if(!c.some(U=>U.UserID===V)){Be("error","Lời mời kết bạn không còn tồn tại");return}if(!(await fetch(`/api/friendships/${V}/reject`,{method:"PUT",headers:{Authorization:`Bearer ${I}`,Accept:"application/json"}})).ok)throw new Error("Could not reject friend request");const F=c.filter(U=>U.UserID!==V);d(F),sessionStorage.setItem("pendingRequests",JSON.stringify(F)),sessionStorage.setItem("friendsLastFetched",Date.now().toString()),Be("success","Đã từ chối lời mời kết bạn")}catch(I){console.error("Error rejecting friend request:",I),Be("error","Không thể từ chối lời mời kết bạn")}finally{w(!1)}},Y=async V=>{try{w(!0);const I=localStorage.getItem("token");if(!I)return;if(!u.some(U=>U.UserID===V)){Be("error","Lời mời kết bạn không còn tồn tại");return}if(!(await fetch(`/api/friendships/${V}`,{method:"DELETE",headers:{Authorization:`Bearer ${I}`,Accept:"application/json"}})).ok)throw new Error("Could not cancel friend request");const F=u.filter(U=>U.UserID!==V);m(F),sessionStorage.setItem("sentRequests",JSON.stringify(F)),sessionStorage.setItem("friendsLastFetched",Date.now().toString()),Be("success","Đã hủy lời mời kết bạn")}catch(I){console.error("Error canceling friend request:",I),Be("error","Không thể hủy lời mời kết bạn")}finally{w(!1)}},ee=async V=>{try{w(!0);const I=localStorage.getItem("token");if(!I)return;if(!(await fetch(`/api/friendships/${V}`,{method:"DELETE",headers:{Authorization:`Bearer ${I}`,Accept:"application/json"}})).ok)throw new Error("Could not remove friend");const S=o.filter(F=>F.UserID!==V);l(S),sessionStorage.setItem("friends",JSON.stringify(S)),sessionStorage.setItem("friendsLastFetched",Date.now().toString()),Be("success","Đã hủy kết bạn")}catch(I){console.error("Error removing friend:",I),Be("error","Không thể hủy kết bạn")}finally{w(!1)}},ae=async V=>{try{w(!0);const I=localStorage.getItem("token");if(!I)return;if(u.some(Q=>Q.UserID===V)){Be("error","Bạn đã gửi lời mời kết bạn cho người này");return}console.log("Sending friend request to user ID:",V);const S=await fetch("/api/friendships",{method:"POST",headers:{Authorization:`Bearer ${I}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({addresseeId:V})});if(!S.ok)throw new Error("Không thể gửi lời mời kết bạn");const F=await S.json();console.log("Friend request sent successfully, API response:",F);const U=P.find(Q=>Q.UserID===V);if(U){const Q=[...u,{...U,FriendshipID:F.friendship.FriendshipID,Status:"pending",CreatedAt:F.friendship.RequestedAt}];console.log("Adding to sent requests:",Q),m(Q);const be=P.filter(ge=>ge.UserID!==V);R(be),sessionStorage.setItem("sentRequests",JSON.stringify(Q)),sessionStorage.setItem("friendsLastFetched",Date.now().toString())}setTimeout(async()=>{try{const Q=await ke();console.log("Updated sent requests after direct API call:",Q),Q&&Q.length>0&&(m(Q),sessionStorage.setItem("sentRequests",JSON.stringify(Q)))}catch(Q){console.error("Error fetching updated sent requests:",Q)}},1e3),setTimeout(()=>{try{fetch("/api/friendships",{headers:{Authorization:`Bearer ${I}`,Accept:"application/json"}}).then(Q=>{if(Q.ok)return Q.json();throw new Error("Failed to fetch updated sent requests")}).then(Q=>{Q&&Q.sentRequests&&(console.log("Updated sent requests from API after sending:",Q.sentRequests),m(Q.sentRequests),sessionStorage.setItem("sentRequests",JSON.stringify(Q.sentRequests)))}).catch(Q=>{console.error("Error fetching updated sent requests:",Q)})}catch(Q){console.error("Error in fetch updated requests:",Q)}},1e3),Be("success","Đã gửi lời mời kết bạn")}catch(I){console.error("Error sending friend request:",I),Be("error","Không thể gửi lời mời kết bạn")}finally{w(!1)}},de=V=>{e(`/profile/${V}`)},Re=V=>{const I={UserID:V.UserID,id:V.UserID,FullName:V.FullName||V.Username,Username:V.Username,Email:V.Email,Image:V.Image||V.Avatar};e("/chat",{state:{selectedUser:I,source:"friends"}})},Be=(V,I)=>{v({type:V,message:I}),setTimeout(()=>{v({type:null,message:null})},3e3)},Ge=()=>{e(s?`/profile/${s}`:"/profile")},et=V=>_.trim()?V.filter(I=>I.FullName&&I.FullName.toLowerCase().includes(_.toLowerCase())||I.Username&&I.Username.toLowerCase().includes(_.toLowerCase())||I.School&&I.School.toLowerCase().includes(_.toLowerCase())):V;h.useEffect(()=>{const V=S=>{window.scrollY===0&&ie(S.touches[0].clientY)},I=S=>{if(z>0&&window.scrollY===0){const F=S.touches[0].clientY-z;F>0&&te(Math.min(F,100))}},j=()=>{X>70&&lt(),ie(0),te(0)};return window.addEventListener("touchstart",V),window.addEventListener("touchmove",I),window.addEventListener("touchend",j),()=>{window.removeEventListener("touchstart",V),window.removeEventListener("touchmove",I),window.removeEventListener("touchend",j)}},[z,X]);const lt=async()=>{M(!0),await me(),i==="suggestions"&&await se(),M(!1),H(new Date)},Xe=()=>k.message?r.jsxs("div",{className:`fixed top-4 right-4 ${k.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"} px-6 py-4 rounded-xl shadow-lg z-50 flex items-center justify-between transition-all duration-300 ease-in-out backdrop-blur-sm border border-white/50 max-w-md`,children:[r.jsxs("div",{className:"flex items-center",children:[k.type==="success"?r.jsx(gd,{className:"h-5 w-5 mr-3 text-green-500"}):r.jsx(Ji,{className:"h-5 w-5 mr-3 text-red-500"}),r.jsx("span",{className:"font-medium",children:k.message})]}),r.jsx("button",{onClick:()=>v({type:null,message:null}),className:"ml-4",children:r.jsx(zt,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}):null;h.useEffect(()=>{const V=()=>$(!0),I=()=>$(!1);return window.addEventListener("online",V),window.addEventListener("offline",I),()=>{window.removeEventListener("online",V),window.removeEventListener("offline",I)}},[]),h.useEffect(()=>{if(!T||i!=="pending"||!K)return;const V=async()=>{try{const j=localStorage.getItem("token");if(!j)return;const S=await fetch("/api/friendships",{headers:{Authorization:`Bearer ${j}`,Accept:"application/json"}});if(!S.ok)return;const U=(await S.json()).pendingRequests||[];if(U.length>c.length){d(U),sessionStorage.setItem("pendingRequests",JSON.stringify(U));const q=U.length-c.length;q>0&&Be("success",`Bạn có ${q} lời mời kết bạn mới`)}}catch(j){console.error("Error checking for new requests:",j)}};V();const I=setInterval(V,3e4);return()=>clearInterval(I)},[i,T,K,c.length]);const He=()=>K?null:r.jsxs("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-red-50 text-red-700 px-4 py-2 rounded-full text-sm shadow-md border border-red-100 z-50 flex items-center",children:[r.jsx(Ji,{className:"h-5 w-5 mr-2"}),r.jsx("span",{children:"Không có kết nối mạng - Đang hiển thị dữ liệu đã lưu"})]}),Pe=i==="sent"&&f;if(h.useEffect(()=>{sessionStorage.setItem("friendsActiveTab",i)},[i]),f&&o.length===0&&c.length===0&&u.length===0)return r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:r.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"}),r.jsx("p",{className:"text-gray-600 font-medium",children:"Đang tải..."})]})});const vt=i==="all"?o:i==="pending"?c:i==="suggestions"?P:u,Ye=et(vt);console.log("Active tab:",i),console.log("Displayed users:",vt),console.log("Filtered users:",Ye);const ce=i==="suggestions"&&y;return r.jsxs("div",{className:"w-full min-h-screen bg-gray-50/50",children:[He(),X>0&&r.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 flex justify-center items-center bg-white border-b border-gray-200",style:{height:`${X}px`,opacity:X/100},children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(kn,{className:`h-5 w-5 mr-2 text-gray-600 ${A?"animate-spin":""}`,style:{transform:`rotate(${X*3.6}deg)`}}),r.jsx("span",{className:"text-sm text-gray-600",children:X>70?"Thả để làm mới":"Kéo xuống để làm mới"})]})}),Xe(),B&&!A&&r.jsxs("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-white/80 backdrop-blur-sm px-3 py-1 rounded-full text-xs text-gray-500 shadow-sm border border-gray-100 z-40",children:["Cập nhật lần cuối: ",B.toLocaleTimeString()]}),r.jsxs("div",{className:"flex h-screen",children:[r.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col h-full relative",children:[A&&r.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-blue-500 overflow-hidden",children:r.jsx("div",{className:"h-full bg-blue-300 animate-pulse",style:{width:"30%"}})}),r.jsxs("div",{className:"p-6 border-b border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("button",{onClick:Ge,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-xl transition-all",children:r.jsx(zd,{className:"h-5 w-5"})}),r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Bạn bè"}),r.jsx("button",{onClick:lt,disabled:A,className:`p-2 text-gray-600 hover:bg-gray-100 rounded-xl transition-all ${A?"opacity-50":""}`,children:r.jsx(kn,{className:`h-5 w-5 ${A?"animate-spin":""}`})})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Rg,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{type:"text",className:"block w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 bg-gray-50/50 transition-all",placeholder:"Tìm kiếm...",value:_,onChange:V=>L(V.target.value)})]})]}),T&&r.jsx("div",{className:"p-3",children:r.jsx("nav",{className:"space-y-1",children:[{id:"all",icon:KP,label:"Tất cả bạn bè",count:o.length},{id:"pending",icon:ir,label:"Lời mời nhận",count:c.length},{id:"sent",icon:Ej,label:"Đã gửi",count:u.length},{id:"suggestions",icon:Vi,label:"Gợi ý",count:null}].map(V=>r.jsxs("button",{className:`w-full px-4 py-3 rounded-xl font-medium flex items-center justify-between ${i===V.id?"bg-blue-50 text-blue-600":"text-gray-600 hover:bg-gray-50"} transition-all duration-200`,onClick:()=>a(V.id),children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(V.icon,{className:`h-5 w-5 ${i===V.id?"text-blue-600":"text-gray-400"} mr-3`}),r.jsx("span",{children:V.label})]}),V.count!==null&&r.jsx("span",{className:`px-2.5 py-1 rounded-lg text-xs ${i===V.id?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:V.count})]},V.id))})})]}),r.jsxs("div",{className:"flex-1 overflow-auto",children:[A&&r.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-blue-500 overflow-hidden",children:r.jsx("div",{className:"h-full bg-blue-300 animate-pulse",style:{width:"30%"}})}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:[i==="all"&&"Tất cả bạn bè",i==="pending"&&"Lời mời kết bạn",i==="sent"&&"Lời mời đã gửi",i==="suggestions"&&"Gợi ý kết bạn"]}),i==="suggestions"&&r.jsxs("button",{onClick:G,className:"flex items-center px-4 py-2 text-sm text-gray-600 bg-white border border-gray-200 rounded-xl hover:bg-gray-50",children:[r.jsx(kn,{className:"h-4 w-4 mr-2"}),"Tải thêm gợi ý"]}),i==="sent"&&r.jsxs("button",{onClick:()=>{p(!0),me().finally(()=>p(!1))},className:"flex items-center px-4 py-2 text-sm text-gray-600 bg-white border border-gray-200 rounded-xl hover:bg-gray-50",children:[r.jsx(kn,{className:"h-4 w-4 mr-2"}),"Làm mới danh sách"]})]}),(ce||Pe)&&r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-[3px] border-blue-600 border-t-transparent"}),r.jsx("p",{className:"text-gray-500 font-medium",children:"Đang tải..."})]})}),!ce&&!Pe&&Ye.length>0&&r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4",children:Ye.map(V=>r.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-200 hover:shadow-md transition-all group",children:r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Tt,{src:V.Image||V.Avatar,name:V.FullName||V.Username,size:"lg",className:"rounded-xl"}),r.jsx("div",{className:`absolute -bottom-1 -right-1 h-4 w-4 rounded-full border-2 border-white ${V.Status==="ONLINE"?"bg-green-500":"bg-gray-300"}`})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"cursor-pointer",onClick:()=>de(V.UserID),children:[r.jsx("h3",{className:"font-semibold text-gray-900 group-hover:text-blue-600 transition-colors truncate",children:V.FullName||V.Username}),r.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["@",V.Username]}),V.School&&r.jsx("p",{className:"text-sm text-gray-500 mt-1 truncate",children:V.School})]}),r.jsx("div",{className:"mt-4 flex items-center space-x-2",children:T&&r.jsxs(r.Fragment,{children:[i==="all"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>Re(V),className:"flex-1 px-3 py-2 text-sm bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors",children:"Nhắn tin"}),r.jsx("button",{onClick:()=>ee(V.UserID),className:"px-3 py-2 text-sm text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:"Hủy kết bạn"})]}),i==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>W(V.UserID),className:"flex-1 px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Đồng ý"}),r.jsx("button",{onClick:()=>Z(V.UserID),className:"flex-1 px-3 py-2 text-sm border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Từ chối"})]}),i==="sent"&&r.jsx("button",{onClick:()=>Y(V.UserID),className:"flex-1 px-3 py-2 text-sm border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Hủy lời mời"}),i==="suggestions"&&r.jsx("button",{onClick:()=>ae(V.UserID),className:"flex-1 px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Kết bạn"})]})})]})]})},V.UserID))}),!ce&&!Pe&&Ye.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"bg-gray-50 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(ip,{className:"h-8 w-8 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:i==="all"?"Chưa có bạn bè nào":i==="pending"?"Không có lời mời kết bạn nào":i==="suggestions"?"Chưa có gợi ý bạn bè":"Chưa gửi lời mời nào"}),r.jsx("p",{className:"text-gray-500 max-w-sm mx-auto",children:i==="all"?"Hãy kết bạn với nhiều người để mở rộng mạng lưới của bạn.":i==="pending"?"Bạn không có lời mời kết bạn nào vào lúc này.":i==="suggestions"?"Chúng tôi sẽ gợi ý những người phù hợp để bạn kết bạn.":"Bạn chưa gửi lời mời kết bạn cho ai."}),i==="sent"&&r.jsx("button",{onClick:()=>{p(!0),me().finally(()=>p(!1))},className:"mt-4 px-4 py-2 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition",children:"Làm mới danh sách"})]})]})]})]})]})},Vee=()=>{const e=Ht(),{profileInfo:t,extendedProfile:n,loading:s,error:i,success:a,message:o}=gn(A=>A.user),[l,c]=h.useState(!1),[d,u]=h.useState(!1),[m,f]=h.useState([]),[p,x]=h.useState({fullName:"",bio:"",school:"",pronouns:"",url:"",orcidId:"",email:"",location:"",education:[],workExperience:[],skills:[],interests:[]});h.useEffect(()=>{a&&o&&re.success(o),i&&re.error(i)},[a,i,o]),h.useEffect(()=>{e(dd())},[e]),h.useEffect(()=>{if(n)try{const A=X=>{if(!X)return[];if(typeof X=="string")try{return JSON.parse(X)}catch{return[]}return X},M=X=>{if(!X)return{};if(typeof X=="string")try{return JSON.parse(X)}catch{return{}}return X},z=A(n.Education),ie=A(n.WorkExperience);x({fullName:n.FullName||"",bio:n.Bio||"",school:n.School||"",pronouns:n.Pronouns||"",url:n.Url||"",orcidId:n.OrcidId||"",email:n.Email||"",education:z,workExperience:ie,skills:A(n.Skills),interests:A(n.Interests),socialLinks:M(n.SocialLinks)})}catch(A){console.error("Error parsing profile data:",A),re.error("Có lỗi khi tải dữ liệu hồ sơ")}else t&&x(A=>({...A,fullName:t.fullName||"",email:t.email||"",school:t.school||""}))},[n,t]),h.useEffect(()=>{rn.getEmails().then(A=>{const z=(A.data.emails||[]).filter(ie=>ie.IsVerified===1||ie.IsVerified===!0);if(f(z),!p.email&&z.length){const ie=z.find(X=>X.IsPrimary===1||X.IsPrimary===!0)||z[0];x(X=>({...X,email:ie.Email}))}}).catch(A=>console.error("Error fetch verified emails",A))},[]);const g=(A,M)=>{x(z=>({...z,[A]:M}))},b=A=>{A.preventDefault();const M={fullName:p.fullName,bio:p.bio,school:p.school,pronouns:p.pronouns,education:p.education,workExperience:p.workExperience,skills:p.skills||[],interests:p.interests||[],socialLinks:p.socialLinks||{},orcidId:p.orcidId,url:p.url};e(ud(M))},w=()=>{const A={id:Date.now(),school:"",degree:"",field:"",startDate:"",endDate:"",current:!1,description:""};x(M=>({...M,education:[...M.education||[],A]}))},k=(A,M,z)=>{x(ie=>({...ie,education:ie.education.map(X=>X.id===A?{...X,[M]:z}:X)}))},v=A=>{x(M=>({...M,education:M.education.filter(z=>z.id!==A)}))},N=()=>{const A={id:Date.now(),company:"",position:"",location:"",startDate:"",endDate:"",current:!1,description:""};x(M=>({...M,workExperience:[...M.workExperience||[],A]}))},C=(A,M,z)=>{x(ie=>({...ie,workExperience:ie.workExperience.map(X=>X.id===A?{...X,[M]:z}:X)}))},T=A=>{x(M=>({...M,workExperience:M.workExperience.filter(z=>z.id!==A)}))},E=A=>{var M;!A||(M=p.skills)!=null&&M.includes(A)||x(z=>({...z,skills:[...z.skills||[],A]}))},P=A=>{x(M=>({...M,skills:M.skills.filter(z=>z!==A)}))},R=A=>{var M;!A||(M=p.interests)!=null&&M.includes(A)||x(z=>({...z,interests:[...z.interests||[],A]}))},y=A=>{x(M=>({...M,interests:M.interests.filter(z=>z!==A)}))},O=(A,M)=>{if(A.key==="Enter"){A.preventDefault();const z=A.target.value.trim();z&&(M==="skill"?E(z):M==="interest"&&R(z),A.target.value="")}},_=async()=>{try{c(!0),await rn.updateEducation(p.education),re.success("Thông tin học vấn đã được cập nhật!")}catch(A){console.error("Error saving education:",A),re.error("Có lỗi khi lưu thông tin học vấn")}finally{c(!1)}},L=async()=>{try{u(!0),await rn.updateWorkExperience(p.workExperience),re.success("Thông tin kinh nghiệm làm việc đã được cập nhật!")}catch(A){console.error("Error saving work experience:",A),re.error("Có lỗi khi lưu thông tin kinh nghiệm làm việc")}finally{u(!1)}};return r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800 border-b pb-2",children:"Hồ sơ cá nhân"}),r.jsxs("form",{onSubmit:b,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Tên"}),r.jsx("input",{type:"text",id:"name",name:"name",value:p.fullName,onChange:A=>g("fullName",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Tên của bạn có thể xuất hiện khi bạn đóng góp hoặc được đề cập. Bạn có thể xóa nó bất cứ lúc nào."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email công khai"}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{id:"email",value:p.email||"",onChange:A=>g("email",A.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Chọn email đã xác thực để hiển thị"}),m.map(A=>r.jsxs("option",{value:A.Email,children:[A.Email,A.IsPrimary?" (Chính)":""]},A.Email))]}),r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:r.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Bạn đã đặt địa chỉ email ở chế độ riêng tư. Để chuyển đổi quyền riêng tư email, hãy vào ",r.jsx("span",{className:"text-blue-500",children:"cài đặt email"}),' và bỏ chọn "Giữ địa chỉ email riêng tư."']})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700",children:"Tiểu sử"}),r.jsx("textarea",{id:"bio",name:"bio",rows:"4",value:p.bio||"",onChange:A=>g("bio",A.target.value),placeholder:"Hãy cho chúng tôi biết một chút về bạn",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Bạn có thể @đề cập đến người dùng và tổ chức khác để liên kết đến họ."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"school",className:"block text-sm font-medium text-gray-700",children:"Trường học"}),r.jsx("input",{type:"text",id:"school",name:"school",value:p.school||"",onChange:A=>g("school",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Tên trường học của bạn"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"pronouns",className:"block text-sm font-medium text-gray-700",children:"Đại từ nhân xưng"}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{id:"pronouns",value:p.pronouns||"",onChange:A=>g("pronouns",A.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Không chỉ định"}),r.jsx("option",{value:"he/him",children:"anh/của anh"}),r.jsx("option",{value:"she/her",children:"chị/của chị"}),r.jsx("option",{value:"they/them",children:"họ/của họ"})]}),r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:r.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),r.jsxs("div",{className:"space-y-4 border-t pt-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Học vấn"}),r.jsxs("button",{type:"button",onClick:w,className:"px-3 py-1 bg-blue-50 text-blue-600 rounded-md text-sm hover:bg-blue-100 flex items-center",children:[r.jsx(Tr,{className:"h-4 w-4 mr-1"}),"Thêm học vấn"]})]}),p.education&&p.education.length>0?p.education.map((A,M)=>r.jsxs("div",{className:"p-4 border rounded-md bg-gray-50",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("h4",{className:"font-medium",children:["Học vấn ",M+1]}),r.jsx("button",{type:"button",onClick:()=>v(A.id),className:"text-red-500 hover:text-red-700",children:r.jsx(zt,{className:"h-5 w-5"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Trường học"}),r.jsx("input",{type:"text",value:A.school||"",onChange:z=>k(A.id,"school",z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bằng cấp"}),r.jsx("input",{type:"text",value:A.degree||"",onChange:z=>k(A.id,"degree",z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ngành học"}),r.jsx("input",{type:"text",value:A.field||"",onChange:z=>k(A.id,"field",z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ngày bắt đầu"}),r.jsx("input",{type:"date",value:A.startDate||"",onChange:z=>k(A.id,"startDate",z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ngày kết thúc"}),r.jsx("input",{type:"date",value:A.endDate||"",onChange:z=>k(A.id,"endDate",z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:A.current})]})]}),r.jsxs("div",{className:"flex items-center mb-3",children:[r.jsx("input",{type:"checkbox",id:`current-edu-${A.id}`,checked:A.current||!1,onChange:z=>k(A.id,"current",z.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("label",{htmlFor:`current-edu-${A.id}`,className:"ml-2 block text-sm text-gray-700",children:"Đang học"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mô tả"}),r.jsx("textarea",{rows:"2",value:A.description||"",onChange:z=>k(A.id,"description",z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]},A.id||M)):r.jsx("div",{className:"p-4 text-gray-500 text-center bg-gray-50 border border-dashed rounded-md",children:'Chưa có thông tin học vấn. Nhấn "Thêm học vấn" để bắt đầu.'}),p.education&&p.education.length>0&&r.jsx("div",{className:"mt-2 flex justify-end",children:r.jsx("button",{type:"button",onClick:_,disabled:l,className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600",children:l?"Đang lưu...":"Lưu thông tin học vấn"})})]}),r.jsxs("div",{className:"space-y-4 border-t pt-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Kinh nghiệm làm việc"}),r.jsxs("button",{type:"button",onClick:N,className:"px-3 py-1 bg-blue-50 text-blue-600 rounded-md text-sm hover:bg-blue-100 flex items-center",children:[r.jsx(Tr,{className:"h-4 w-4 mr-1"}),"Thêm kinh nghiệm"]})]}),p.workExperience&&p.workExperience.length>0?p.workExperience.map((A,M)=>r.jsxs("div",{className:"p-4 border rounded-md bg-gray-50",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("h4",{className:"font-medium",children:["Kinh nghiệm ",M+1]}),r.jsx("button",{type:"button",onClick:()=>T(A.id),className:"text-red-500 hover:text-red-700",children:r.jsx(zt,{className:"h-5 w-5"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Công ty"}),r.jsx("input",{type:"text",value:A.company||"",onChange:z=>C(A.id,"company",z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vị trí"}),r.jsx("input",{type:"text",value:A.position||"",onChange:z=>C(A.id,"position",z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}),r.jsxs("div",{className:"mb-3",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Địa điểm"}),r.jsx("input",{type:"text",value:A.location||"",onChange:z=>C(A.id,"location",z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Thành phố, Quốc gia"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ngày bắt đầu"}),r.jsx("input",{type:"date",value:A.startDate||"",onChange:z=>C(A.id,"startDate",z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ngày kết thúc"}),r.jsx("input",{type:"date",value:A.endDate||"",onChange:z=>C(A.id,"endDate",z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:A.current})]})]}),r.jsxs("div",{className:"flex items-center mb-3",children:[r.jsx("input",{type:"checkbox",id:`current-work-${A.id}`,checked:A.current||!1,onChange:z=>C(A.id,"current",z.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("label",{htmlFor:`current-work-${A.id}`,className:"ml-2 block text-sm text-gray-700",children:"Đang làm việc tại đây"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mô tả công việc"}),r.jsx("textarea",{rows:"2",value:A.description||"",onChange:z=>C(A.id,"description",z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Mô tả trách nhiệm và thành tựu của bạn"})]})]},A.id||M)):r.jsx("div",{className:"p-4 text-gray-500 text-center bg-gray-50 border border-dashed rounded-md",children:'Chưa có thông tin kinh nghiệm làm việc. Nhấn "Thêm kinh nghiệm" để bắt đầu.'}),p.workExperience&&p.workExperience.length>0&&r.jsx("div",{className:"mt-2 flex justify-end",children:r.jsx("button",{type:"button",onClick:L,disabled:d,className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600",children:d?"Đang lưu...":"Lưu kinh nghiệm làm việc"})})]}),r.jsxs("div",{className:"space-y-4 border-t pt-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Kỹ năng"}),r.jsxs("div",{className:"mb-2",children:[r.jsx("label",{htmlFor:"skill-input",className:"block text-sm font-medium text-gray-700 mb-1",children:"Thêm kỹ năng mới"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("input",{type:"text",id:"skill-input",placeholder:"Nhập kỹ năng và nhấn Enter",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onKeyPress:A=>O(A,"skill")}),r.jsx("button",{type:"button",onClick:()=>{const A=document.getElementById("skill-input");A.value.trim()&&(E(A.value.trim()),A.value="")},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Thêm"})]})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:p.skills&&p.skills.length>0?p.skills.map((A,M)=>r.jsxs("div",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm flex items-center",children:[r.jsx("span",{children:A}),r.jsx("button",{type:"button",onClick:()=>P(A),className:"ml-2 text-blue-600 hover:text-blue-800",children:r.jsx(zt,{className:"h-4 w-4"})})]},M)):r.jsx("div",{className:"text-gray-500 italic w-full",children:"Chưa có kỹ năng nào"})})]}),r.jsxs("div",{className:"space-y-4 border-t pt-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Sở thích"}),r.jsxs("div",{className:"mb-2",children:[r.jsx("label",{htmlFor:"interest-input",className:"block text-sm font-medium text-gray-700 mb-1",children:"Thêm sở thích mới"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("input",{type:"text",id:"interest-input",placeholder:"Nhập sở thích và nhấn Enter",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onKeyPress:A=>O(A,"interest")}),r.jsx("button",{type:"button",onClick:()=>{const A=document.getElementById("interest-input");A.value.trim()&&(R(A.value.trim()),A.value="")},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Thêm"})]})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:p.interests&&p.interests.length>0?p.interests.map((A,M)=>r.jsxs("div",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm flex items-center",children:[r.jsx("span",{children:A}),r.jsx("button",{type:"button",onClick:()=>y(A),className:"ml-2 text-green-600 hover:text-green-800",children:r.jsx(zt,{className:"h-4 w-4"})})]},M)):r.jsx("div",{className:"text-gray-500 italic w-full",children:"Chưa có sở thích nào"})})]}),r.jsxs("div",{className:"space-y-2 border-t pt-4",children:[r.jsx("label",{htmlFor:"url",className:"block text-sm font-medium text-gray-700",children:"URL trang web cá nhân"}),r.jsx("input",{type:"url",id:"url",name:"url",value:p.url||"",onChange:A=>g("url",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"orcid",className:"block text-sm font-medium text-gray-700",children:"ORCID iD"}),r.jsx("input",{type:"text",id:"orcid",name:"orcid",value:p.orcidId||"",onChange:A=>g("orcidId",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0000-0000-0000-0000"}),r.jsxs("p",{className:"text-xs text-gray-500",children:["ORCID cung cấp một định danh liên tục - ORCID iD - giúp phân biệt bạn với các nhà nghiên cứu khác. Tìm hiểu thêm tại ",r.jsx("a",{href:"https://orcid.org",className:"text-blue-500",children:"ORCID.org"}),"."]})]}),r.jsx("div",{className:"pt-6",children:r.jsx("button",{type:"submit",disabled:s,className:"px-4 py-2 rounded-md text-white bg-green-600 hover:bg-green-700 active:bg-green-800 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:s?r.jsxs("span",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Đang lưu..."]}):"Cập nhật hồ sơ"})})]})]})},uw=()=>{Ht();const[e,t]=h.useState([{id:"pkg-1",name:"@campust/ui-components",description:"UI components for Campust applications",version:"1.2.3",registry:"npm",visibility:"public",downloads:1245,lastPublished:new Date(2023,9,15),tags:["ui","react","components"]},{id:"pkg-2",name:"@campust/utils",description:"Utility functions for Campust applications",version:"0.8.5",registry:"npm",visibility:"public",downloads:876,lastPublished:new Date(2023,10,5),tags:["utils","helpers"]},{id:"pkg-3",name:"campust-server",description:"Docker image for Campust server",version:"2.1.0",registry:"docker",visibility:"private",downloads:53,lastPublished:new Date(2023,8,20),tags:["server","docker","backend"]}]),[n,s]=h.useState("all"),i=c=>new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"long",day:"numeric"}).format(c),a=c=>{switch(c){case"npm":return r.jsx("div",{className:"bg-red-100 p-1 rounded",children:r.jsx("span",{className:"text-red-600 font-semibold text-xs",children:"npm"})});case"docker":return r.jsx("div",{className:"bg-blue-100 p-1 rounded",children:r.jsx("span",{className:"text-blue-600 font-semibold text-xs",children:"docker"})});case"maven":return r.jsx("div",{className:"bg-green-100 p-1 rounded",children:r.jsx("span",{className:"text-green-600 font-semibold text-xs",children:"maven"})});case"nuget":return r.jsx("div",{className:"bg-purple-100 p-1 rounded",children:r.jsx("span",{className:"text-purple-600 font-semibold text-xs",children:"nuget"})});default:return r.jsx("div",{className:"bg-gray-100 p-1 rounded",children:r.jsx("span",{className:"text-gray-600 font-semibold text-xs",children:c})})}},o=c=>{const d=e.filter(u=>u.id!==c);t(d),re.success("Gói đã được xóa thành công")},l=n==="all"?e:e.filter(c=>c.registry===n);return r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800 border-b pb-2",children:"Quản lý gói"}),r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{className:"bg-blue-50 rounded-lg border border-blue-100 p-5",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(R8,{className:"h-6 w-6 text-blue-600 mt-0.5 mr-3"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-blue-900",children:"Về gói phần mềm"}),r.jsx("p",{className:"mt-2 text-sm text-blue-700",children:"Gói phần mềm là một cách để phân phối mã, thư viện hoặc ứng dụng của bạn cho người khác sử dụng. Bạn có thể xuất bản gói đến các registry khác nhau như npm, Docker Hub, Maven Central, NuGet, và nhiều nơi khác."}),r.jsx("p",{className:"mt-2 text-sm text-blue-700",children:r.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-800 underline",children:"Tìm hiểu thêm về cách xuất bản gói"})})]})]})}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Bộ lọc registry"})}),r.jsx("div",{className:"p-5",children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx("button",{onClick:()=>s("all"),className:`px-4 py-2 rounded-md text-sm font-medium ${n==="all"?"bg-blue-100 text-blue-700 border border-blue-300":"bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200"}`,children:"Tất cả"}),r.jsx("button",{onClick:()=>s("npm"),className:`px-4 py-2 rounded-md text-sm font-medium ${n==="npm"?"bg-red-100 text-red-700 border border-red-300":"bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200"}`,children:"npm"}),r.jsx("button",{onClick:()=>s("docker"),className:`px-4 py-2 rounded-md text-sm font-medium ${n==="docker"?"bg-blue-100 text-blue-700 border border-blue-300":"bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200"}`,children:"Docker"}),r.jsx("button",{onClick:()=>s("maven"),className:`px-4 py-2 rounded-md text-sm font-medium ${n==="maven"?"bg-green-100 text-green-700 border border-green-300":"bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200"}`,children:"Maven"}),r.jsx("button",{onClick:()=>s("nuget"),className:`px-4 py-2 rounded-md text-sm font-medium ${n==="nuget"?"bg-purple-100 text-purple-700 border border-purple-300":"bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200"}`,children:"NuGet"})]})})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsxs("div",{className:"px-5 py-4 border-b border-gray-200 flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Gói của bạn"}),r.jsxs("button",{className:"px-3 py-1.5 bg-green-50 border border-green-300 rounded text-sm text-green-700 hover:bg-green-100 flex items-center",children:[r.jsx(Tr,{className:"h-4 w-4 mr-1"}),r.jsx("span",{children:"Xuất bản gói mới"})]})]}),l.length>0?r.jsx("div",{className:"divide-y divide-gray-100",children:l.map(c=>r.jsx("div",{className:"p-5",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:c.name}),r.jsxs("span",{className:"ml-2 text-xs bg-gray-100 text-gray-800 px-2 py-0.5 rounded",children:["v",c.version]}),r.jsx("span",{className:`ml-2 text-xs px-2 py-0.5 rounded ${c.visibility==="public"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:c.visibility==="public"?"Công khai":"Riêng tư"}),r.jsx("div",{className:"ml-2",children:a(c.registry)})]}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:c.description}),r.jsxs("div",{className:"mt-2 flex items-center text-xs text-gray-500",children:[r.jsxs("div",{className:"flex items-center mr-4",children:[r.jsx(pj,{className:"h-3 w-3 mr-1"}),r.jsxs("span",{children:[c.downloads.toLocaleString()," lượt tải"]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(kn,{className:"h-3 w-3 mr-1"}),r.jsxs("span",{children:["Cập nhật: ",i(c.lastPublished)]})]})]}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:c.tags.map((d,u)=>r.jsxs("span",{className:"inline-flex items-center bg-gray-100 text-gray-800 text-xs px-2 py-0.5 rounded",children:[r.jsx(OP,{className:"h-3 w-3 mr-1"}),d]},u))})]}),r.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[r.jsx("button",{className:"text-gray-400 hover:text-blue-600",title:"Xem chi tiết",children:r.jsx(Zs,{className:"h-5 w-5"})}),r.jsx("button",{onClick:()=>o(c.id),className:"text-gray-400 hover:text-red-600",title:"Xóa gói",children:r.jsx(bs,{className:"h-5 w-5"})})]})]})},c.id))}):r.jsxs("div",{className:"p-10 text-center",children:[r.jsx(_o,{className:"h-12 w-12 mx-auto text-gray-400"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Không có gói nào"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n==="all"?"Bạn chưa xuất bản gói nào. Hãy bắt đầu bằng cách xuất bản gói đầu tiên của bạn.":`Bạn chưa xuất bản gói nào trên registry ${n}.`}),r.jsx("div",{className:"mt-6",children:r.jsxs("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx(Tr,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Xuất bản gói mới"]})})]})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Cài đặt gói"})}),r.jsxs("div",{className:"p-5 space-y-5",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Tự động xuất bản"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Tự động xuất bản gói khi có thẻ mới được tạo"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:!0,className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                    peer-focus:ring-4 peer-focus:ring-blue-300
                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                    after:bg-white after:rounded-full after:h-5 after:w-5
                    after:transition-all peer-checked:after:translate-x-5`})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Thông báo về phiên bản mới"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Nhận thông báo khi có phiên bản mới của gói bạn sử dụng"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:!0,className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                    peer-focus:ring-4 peer-focus:ring-blue-300
                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                    after:bg-white after:rounded-full after:h-5 after:w-5
                    after:transition-all peer-checked:after:translate-x-5`})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Gói mặc định là riêng tư"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Đặt gói mới là riêng tư theo mặc định"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:!1,className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                    peer-focus:ring-4 peer-focus:ring-blue-300
                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                    after:bg-white after:rounded-full after:h-5 after:w-5
                    after:transition-all peer-checked:after:translate-x-5`})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Token truy cập"})}),r.jsxs("div",{className:"p-5",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Token truy cập cho phép bạn xác thực với các registry khác nhau để xuất bản và tải gói."}),r.jsx("div",{className:"mt-4",children:r.jsxs("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx(Tr,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Tạo token truy cập"]})}),r.jsx("div",{className:"mt-6 text-center text-gray-500 text-sm",children:"Bạn chưa có token truy cập nào. Tạo token để bắt đầu xuất bản gói."})]})]}),r.jsx("div",{className:"mt-8 p-4 bg-gray-50 border border-gray-200 rounded-md",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Gs,{className:"h-6 w-6 text-gray-400 mr-2"}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Để tìm hiểu thêm về cách xuất bản và quản lý gói, vui lòng xem",r.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-800 mx-1",children:"tài liệu hướng dẫn"}),"của chúng tôi."]})]})})]})]})},Hee=()=>{Ht();const[e,t]=h.useState([]);h.useEffect(()=>{rn.getSessions().then(o=>{t(o.data.sessions)}).catch(o=>{console.error("Error fetching sessions:",o),re.error("Không thể tải danh sách phiên đăng nhập")})},[]);const n=o=>{const c=Math.floor((new Date-o)/1e3);return c<60?"Vừa xong":c<3600?`${Math.floor(c/60)} phút trước`:c<86400?`${Math.floor(c/3600)} giờ trước`:`${Math.floor(c/86400)} ngày trước`},s=o=>{switch(o){case"desktop":return r.jsx(tp,{className:"h-8 w-8 text-gray-500"});case"tablet":return r.jsx(O8,{className:"h-8 w-8 text-gray-500"});case"mobile":return r.jsx(Pg,{className:"h-8 w-8 text-gray-500"});default:return r.jsx(Oa,{className:"h-8 w-8 text-gray-500"})}},i=o=>{rn.deleteSession(o).then(()=>{re.success("Phiên đăng nhập đã được kết thúc"),t(e.filter(l=>l.id!==o))}).catch(l=>{console.error("Error terminating session:",l),re.error("Lỗi khi kết thúc phiên đăng nhập")})},a=()=>{rn.terminateOtherSessions().then(()=>{const o=e.find(l=>l.isCurrent);t(o?[o]:[]),re.success("Tất cả các phiên khác đã được kết thúc")}).catch(o=>{console.error("Error terminating other sessions:",o),re.error("Lỗi khi kết thúc các phiên khác")})};return r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800 border-b pb-2",children:"Phiên đăng nhập"}),r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Phiên đăng nhập hiện tại"})}),r.jsx("div",{className:"p-5",children:e.filter(o=>o.isCurrent).map(o=>r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"mr-4 mt-1",children:s(o.device)}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsxs("h4",{className:"font-medium text-gray-900",children:[o.browser," trên ",o.os]}),r.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Hiện tại"})]}),r.jsxs("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm",children:[r.jsxs("div",{className:"flex items-center text-gray-500",children:[r.jsx(Oa,{className:"h-4 w-4 mr-1"}),r.jsxs("span",{children:[o.location," (",o.ip,")"]})]}),r.jsxs("div",{className:"flex items-center text-gray-500",children:[r.jsx(ir,{className:"h-4 w-4 mr-1"}),r.jsxs("span",{children:["Hoạt động ",n(o.lastActive)]})]})]})]})]},o.id))})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsxs("div",{className:"px-5 py-4 border-b border-gray-200 flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Phiên đăng nhập khác"}),e.some(o=>!o.isCurrent)&&r.jsx("button",{onClick:a,className:"text-sm text-red-600 hover:text-red-800",children:"Kết thúc tất cả phiên khác"})]}),r.jsx("div",{className:"divide-y divide-gray-100",children:e.filter(o=>!o.isCurrent).length>0?e.filter(o=>!o.isCurrent).map(o=>r.jsxs("div",{className:"p-5 flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start flex-1",children:[r.jsx("div",{className:"mr-4 mt-1",children:s(o.device)}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("h4",{className:"font-medium text-gray-900",children:[o.browser," trên ",o.os]}),r.jsxs("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm",children:[r.jsxs("div",{className:"flex items-center text-gray-500",children:[r.jsx(Oa,{className:"h-4 w-4 mr-1"}),r.jsxs("span",{children:[o.location," (",o.ip,")"]})]}),r.jsxs("div",{className:"flex items-center text-gray-500",children:[r.jsx(ir,{className:"h-4 w-4 mr-1"}),r.jsxs("span",{children:["Hoạt động ",n(o.lastActive)]})]})]})]})]}),r.jsx("button",{onClick:()=>i(o.id),className:"text-gray-400 hover:text-red-600",title:"Kết thúc phiên này",children:r.jsx(zt,{className:"h-5 w-5"})})]},o.id)):r.jsx("div",{className:"p-5 text-center text-gray-500",children:"Không có phiên đăng nhập nào khác"})})]}),r.jsx("div",{className:"bg-blue-50 rounded-lg border border-blue-100 p-5",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(ei,{className:"h-6 w-6 text-blue-600 mt-0.5 mr-3"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-blue-900",children:"Mẹo bảo mật"}),r.jsxs("ul",{className:"mt-2 text-sm text-blue-700 space-y-2",children:[r.jsx("li",{children:"• Đảm bảo đăng xuất trên các thiết bị công cộng"}),r.jsx("li",{children:"• Kiểm tra thường xuyên các phiên đăng nhập của bạn"}),r.jsx("li",{children:"• Bật xác thực hai lớp để tăng cường bảo mật"}),r.jsx("li",{children:"• Thay đổi mật khẩu ngay lập tức nếu bạn thấy phiên đăng nhập lạ"})]})]})]})}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Lịch sử đăng nhập"})}),r.jsx("div",{className:"p-5",children:e.length>0?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thiết bị"}),r.jsx("th",{className:"px-3 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vị trí"}),r.jsx("th",{className:"px-3 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thời gian"}),r.jsx("th",{className:"px-3 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trạng thái"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.sort((o,l)=>new Date(l.lastActive)-new Date(o.lastActive)).map(o=>r.jsxs("tr",{children:[r.jsxs("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-900",children:[o.browser," trên ",o.os]}),r.jsxs("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-500",children:[o.location," (",o.ip,")"]}),r.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-500",children:n(o.lastActive)}),r.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Thành công"})})]},o.id))})]})}):r.jsx("div",{className:"text-center text-gray-500",children:"Chưa có lịch sử đăng nhập"})})]})]})]})},Wee=()=>{Ht();const{profileInfo:e}=gn(C=>C.user),[t,n]=h.useState([]),[s,i]=h.useState(""),[a,o]=h.useState(!1),[l,c]=h.useState(!0),[d,u]=h.useState(!1),[m,f]=h.useState(""),[p,x]=h.useState("");h.useEffect(()=>{rn.getEmails().then(C=>{n(C.data.emails)}).catch(C=>{console.error("Error fetching emails:",C),re.error("Không thể tải danh sách email")})},[]);const g=C=>{if(C.preventDefault(),!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)){re.error("Vui lòng nhập một địa chỉ email hợp lệ");return}if(t.length>=3){re.error("Bạn chỉ có thể thêm tối đa 3 địa chỉ email");return}rn.addEmail(s).then(()=>(re.success("Email đã được thêm. Vui lòng kiểm tra hộp thư để xác thực."),i(""),o(!1),f(s),u(!0),rn.getEmails())).then(E=>n(E.data.emails)).catch(E=>{var P,R;console.error("Error adding email:",E),re.error(((R=(P=E.response)==null?void 0:P.data)==null?void 0:R.message)||"Có lỗi khi thêm email")})},b=C=>{rn.setPrimaryEmail(C).then(()=>(re.success("Đã đặt email chính thành công"),rn.getEmails())).then(T=>n(T.data.emails)).catch(T=>{console.error("Error setting primary email:",T),re.error("Có lỗi khi đặt email chính")})},w=C=>{rn.deleteEmail(C).then(()=>(re.success("Email đã được xóa"),rn.getEmails())).then(T=>n(T.data.emails)).catch(T=>{var E,P;console.error("Error deleting email:",T),re.error(((P=(E=T.response)==null?void 0:E.data)==null?void 0:P.message)||"Có lỗi khi xóa email")})},k=(C,T)=>{rn.resendVerificationEmail(C).then(()=>{re.info("Đã gửi lại email xác thực"),f(T),u(!0),x("")}).catch(E=>{var P,R;console.error("Error resending verification:",E),re.error(((R=(P=E.response)==null?void 0:P.data)==null?void 0:R.message)||"Có lỗi khi gửi lại email xác thực")})},v=C=>{if(C.preventDefault(),!p||p.length<6){re.error("Vui lòng nhập mã xác thực hợp lệ");return}rn.verifyAdditionalEmail(m,p).then(()=>(re.success("Xác thực email thành công"),u(!1),x(""),f(""),rn.getEmails())).then(T=>n(T.data.emails)).catch(T=>{var E,P;console.error("Error verifying email:",T),re.error(((P=(E=T.response)==null?void 0:E.data)==null?void 0:P.message)||"Có lỗi khi xác thực email")})},N=()=>{c(!l)};return r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800 border-b pb-2",children:"Cài đặt Email"}),r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Quyền riêng tư Email"})}),r.jsxs("div",{className:"p-5",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Giữ địa chỉ email riêng tư"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Chúng tôi sẽ tạo một địa chỉ chuyển tiếp để bảo vệ địa chỉ email thật của bạn"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:l,onChange:N,className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                    peer-focus:ring-4 peer-focus:ring-blue-300
                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                    after:bg-white after:rounded-full after:h-5 after:w-5
                    after:transition-all peer-checked:after:translate-x-5`})]})]}),l&&r.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-md border border-blue-100",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(ei,{className:"h-5 w-5 text-blue-600 mt-0.5 mr-2"}),r.jsxs("p",{className:"text-sm text-blue-700",children:["Khi bạn thực hiện các thao tác dựa trên web, chúng tôi sẽ sử dụng",r.jsxs("span",{className:"font-mono mx-1",children:[(e==null?void 0:e.id)||"12345","+",(e==null?void 0:e.username)||"username","@users.noreply.example.com"]}),"thay vì địa chỉ email thật của bạn."]})]})})]})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Địa chỉ Email"})}),r.jsxs("div",{className:"p-5",children:[r.jsx("div",{className:"space-y-5",children:t.map(C=>r.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 pb-4 last:border-b-0 last:pb-0",children:[r.jsxs("div",{className:"flex items-start",children:[r.jsx(mo,{className:"h-5 w-5 text-gray-400 mt-0.5 mr-2"}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-medium text-gray-900",children:C.Email}),C.IsPrimary&&r.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Chính"}),C.IsVerified?r.jsxs("span",{className:"ml-2 inline-flex items-center text-green-600",children:[r.jsx(Zn,{className:"h-4 w-4 mr-1"}),r.jsx("span",{className:"text-xs",children:"Đã xác thực"})]}):r.jsxs("span",{className:"ml-2 inline-flex items-center text-yellow-600",children:[r.jsx(Ji,{className:"h-4 w-4 mr-1"}),r.jsx("span",{className:"text-xs",children:"Chưa xác thực"})]})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Quyền riêng tư: ",C.Visibility==="private"?"Riêng tư":"Công khai"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[!C.IsVerified&&r.jsx("button",{onClick:()=>k(C.EmailID,C.Email),className:"text-xs text-blue-600 hover:text-blue-800",children:"Gửi lại xác thực"}),!C.IsPrimary&&C.IsVerified&&r.jsx("button",{onClick:()=>b(C.EmailID),className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded text-gray-700",children:"Đặt làm chính"}),!C.IsPrimary&&r.jsx("button",{onClick:()=>w(C.EmailID),className:"text-red-500 hover:text-red-700",children:r.jsx(bs,{className:"h-4 w-4"})})]})]},C.EmailID))}),d&&r.jsxs("div",{className:"mt-6 p-4 border border-blue-100 rounded-md bg-blue-50",children:[r.jsxs("div",{className:"flex items-start mb-3",children:[r.jsx(Xr,{className:"h-5 w-5 text-blue-600 mt-0.5 mr-2"}),r.jsxs("h4",{className:"font-medium text-blue-800",children:["Xác thực email: ",m]})]}),r.jsxs("form",{onSubmit:v,className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"verificationCode",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nhập mã xác thực đã gửi đến email của bạn"}),r.jsx("input",{type:"text",id:"verificationCode",value:p,onChange:C=>x(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nhập mã 6 chữ số",maxLength:6,required:!0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Nếu bạn không thấy email, hãy kiểm tra thư mục spam"})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Xác thực"}),r.jsx("button",{type:"button",onClick:()=>{rn.resendVerificationEmail(m),re.info("Đã gửi lại mã xác thực")},className:"px-4 py-2 bg-white border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Gửi lại mã"}),r.jsx("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 bg-white border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Sau này"})]})]})]}),a?r.jsx("div",{className:"mt-6",children:r.jsxs("form",{onSubmit:g,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"newEmail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Thêm địa chỉ email mới"}),r.jsx("input",{type:"email",id:"newEmail",value:s,onChange:C=>i(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"email@example.com",required:!0})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Thêm email"}),r.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 bg-white border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Hủy"})]})]})}):r.jsxs("div",{className:"mt-6",children:[r.jsxs("button",{onClick:()=>o(!0),className:"flex items-center text-blue-600 hover:text-blue-800",disabled:t.length>=3,children:[r.jsx(SP,{className:"h-5 w-5 mr-1"}),r.jsxs("span",{children:["Thêm địa chỉ email ",t.length>=3&&"(Đã đạt giới hạn)"]})]}),t.length>=3&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Bạn chỉ có thể thêm tối đa 3 địa chỉ email."})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Tùy chọn thông báo email"})}),r.jsxs("div",{className:"p-5 space-y-5",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Thông báo hoạt động"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Nhận email khi có hoạt động liên quan đến bạn"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",defaultChecked:!0,className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                    peer-focus:ring-4 peer-focus:ring-blue-300
                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                    after:bg-white after:rounded-full after:h-5 after:w-5
                    after:transition-all peer-checked:after:translate-x-5`})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Cập nhật khóa học"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Nhận email khi khóa học của bạn có nội dung mới"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",defaultChecked:!0,className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                    peer-focus:ring-4 peer-focus:ring-blue-300
                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                    after:bg-white after:rounded-full after:h-5 after:w-5
                    after:transition-all peer-checked:after:translate-x-5`})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Tin tức và khuyến mãi"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Nhận thông tin về tính năng mới và ưu đãi đặc biệt"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",defaultChecked:!1,className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                    peer-focus:ring-4 peer-focus:ring-blue-300
                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                    after:bg-white after:rounded-full after:h-5 after:w-5
                    after:transition-all peer-checked:after:translate-x-5`})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Tần suất email"})}),r.jsxs("div",{className:"p-5",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"radio",name:"emailFrequency",defaultChecked:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500"}),r.jsx("span",{className:"ml-3 block text-gray-900",children:"Ngay lập tức"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"radio",name:"emailFrequency",className:"h-4 w-4 text-blue-600 focus:ring-blue-500"}),r.jsx("span",{className:"ml-3 block text-gray-900",children:"Hàng ngày"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"radio",name:"emailFrequency",className:"h-4 w-4 text-blue-600 focus:ring-blue-500"}),r.jsx("span",{className:"ml-3 block text-gray-900",children:"Hàng tuần"})]})]}),r.jsx("p",{className:"mt-3 text-sm text-gray-500",children:"Tần suất bạn muốn nhận email thông báo (không áp dụng cho email xác thực và bảo mật)"})]})]}),r.jsx("div",{className:"pt-6",children:r.jsx("button",{type:"submit",className:"px-4 py-2 rounded-md text-white bg-green-600 hover:bg-green-700 active:bg-green-800 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"Lưu thay đổi"})})]})]})},qee=()=>{const e=Ht(),{settings:t,profileInfo:n}=gn(f=>f.user),[s,i]=h.useState({profileVisibility:"public",searchEngineIndex:!0,activityVisibility:"followers",showOnlineStatus:!0,allowMessages:"friends",dataCollection:{analytics:!0,personalization:!0,thirdParty:!1},contentPreferences:{adultContent:!1,sensitiveContent:!1}}),[a,o]=h.useState(!1);h.useEffect(()=>{t||e(Xo())},[e,t]),h.useEffect(()=>{t&&t.privacy&&i(f=>({...f,...t.privacy,dataCollection:{...f.dataCollection,...t.privacy.dataCollection},contentPreferences:{...f.contentPreferences,...t.privacy.contentPreferences}}))},[t]);const l=f=>{i({...s,[f]:!s[f]})},c=(f,p)=>{i({...s,[f]:{...s[f],[p]:!s[f][p]}})},d=(f,p)=>{i({...s,[f]:p})},u=async f=>{f.preventDefault();try{const p={...t,privacy:{...t==null?void 0:t.privacy,...s}};await e(zi(p)).unwrap(),re.success("Cài đặt quyền riêng tư đã được cập nhật")}catch(p){console.error("Update privacy settings error:",p),re.error((p==null?void 0:p.message)||"Không thể cập nhật cài đặt")}},m=async()=>{var f,p,x,g;if(!a){o(!0);try{const b=await uo.exportData();if(b.data instanceof Blob){const w=window.URL.createObjectURL(b.data),k=document.createElement("a");k.href=w,k.download=`user-data-${Date.now()}.json`,document.body.appendChild(k),k.click(),window.URL.revokeObjectURL(w),document.body.removeChild(k),re.success("Dữ liệu đã được tải xuống thành công.")}else re.success("Yêu cầu xuất dữ liệu đã được gửi. Vui lòng kiểm tra email của bạn.")}catch(b){console.error("Export data error:",b),b.code==="ERR_NETWORK"?re.error("Không thể kết nối tới máy chủ. Vui lòng kiểm tra kết nối mạng và thử lại sau."):((f=b.response)==null?void 0:f.status)===500?re.error("Lỗi máy chủ. Vui lòng liên hệ quản trị viên để được hỗ trợ."):((p=b.response)==null?void 0:p.status)===401?re.error("Phiên đăng nhập của bạn đã hết hạn. Vui lòng đăng nhập lại."):re.error(((g=(x=b==null?void 0:b.response)==null?void 0:x.data)==null?void 0:g.message)||"Không thể xuất dữ liệu. Vui lòng thử lại sau.")}finally{o(!1)}}};return r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800 border-b pb-2",children:"Cài đặt quyền riêng tư"}),r.jsxs("form",{onSubmit:u,className:"space-y-8",children:[r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Hiển thị hồ sơ"})}),r.jsxs("div",{className:"p-5 space-y-5",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"profileVisibility",className:"block text-sm font-medium text-gray-700 mb-1",children:"Ai có thể xem hồ sơ của bạn"}),r.jsxs("select",{id:"profileVisibility",value:s.profileVisibility,onChange:f=>d("profileVisibility",f.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"public",children:"Công khai (Mọi người)"}),r.jsx("option",{value:"registered",children:"Người dùng đã đăng ký"}),r.jsx("option",{value:"followers",children:"Người theo dõi"}),r.jsx("option",{value:"friends",children:"Chỉ bạn bè"}),r.jsx("option",{value:"private",children:"Riêng tư (Chỉ mình tôi)"})]}),r.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Điều này xác định ai có thể xem thông tin hồ sơ của bạn, bao gồm tên, tiểu sử và các thông tin khác."})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Hiển thị trạng thái trực tuyến"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Cho phép người khác biết khi nào bạn đang hoạt động trên hệ thống"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:s.showOnlineStatus,onChange:()=>l("showOnlineStatus"),className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                    peer-focus:ring-4 peer-focus:ring-blue-300
                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                    after:bg-white after:rounded-full after:h-5 after:w-5
                    after:transition-all peer-checked:after:translate-x-5`})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Hiển thị trong kết quả tìm kiếm"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Cho phép các công cụ tìm kiếm như Google lập chỉ mục hồ sơ của bạn"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:s.searchEngineIndex,onChange:()=>l("searchEngineIndex"),className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                    peer-focus:ring-4 peer-focus:ring-blue-300
                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                    after:bg-white after:rounded-full after:h-5 after:w-5
                    after:transition-all peer-checked:after:translate-x-5`})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Quyền riêng tư hoạt động"})}),r.jsxs("div",{className:"p-5 space-y-5",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"activityVisibility",className:"block text-sm font-medium text-gray-700 mb-1",children:"Ai có thể xem hoạt động của bạn"}),r.jsxs("select",{id:"activityVisibility",value:s.activityVisibility,onChange:f=>d("activityVisibility",f.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"public",children:"Công khai (Mọi người)"}),r.jsx("option",{value:"registered",children:"Người dùng đã đăng ký"}),r.jsx("option",{value:"followers",children:"Người theo dõi"}),r.jsx("option",{value:"friends",children:"Chỉ bạn bè"}),r.jsx("option",{value:"private",children:"Riêng tư (Chỉ mình tôi)"})]}),r.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Điều này xác định ai có thể xem hoạt động của bạn như bình luận, theo dõi và đóng góp."})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"allowMessages",className:"block text-sm font-medium text-gray-700 mb-1",children:"Ai có thể gửi tin nhắn cho bạn"}),r.jsxs("select",{id:"allowMessages",value:s.allowMessages,onChange:f=>d("allowMessages",f.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"all",children:"Tất cả mọi người"}),r.jsx("option",{value:"registered",children:"Người dùng đã đăng ký"}),r.jsx("option",{value:"followers",children:"Người theo dõi"}),r.jsx("option",{value:"friends",children:"Chỉ bạn bè"}),r.jsx("option",{value:"none",children:"Không ai"})]}),r.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Điều này xác định ai có thể gửi tin nhắn trực tiếp cho bạn."})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Thu thập dữ liệu và cá nhân hóa"})}),r.jsxs("div",{className:"p-5 space-y-5",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Phân tích sử dụng"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Cho phép thu thập dữ liệu về cách bạn sử dụng dịch vụ để cải thiện trải nghiệm"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:s.dataCollection.analytics,onChange:()=>c("dataCollection","analytics"),className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                    peer-focus:ring-4 peer-focus:ring-blue-300
                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                    after:bg-white after:rounded-full after:h-5 after:w-5
                    after:transition-all peer-checked:after:translate-x-5`})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Cá nhân hóa nội dung"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Cho phép sử dụng dữ liệu của bạn để cá nhân hóa nội dung và đề xuất"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:s.dataCollection.personalization,onChange:()=>c("dataCollection","personalization"),className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                    peer-focus:ring-4 peer-focus:ring-blue-300
                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                    after:bg-white after:rounded-full after:h-5 after:w-5
                    after:transition-all peer-checked:after:translate-x-5`})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Chia sẻ dữ liệu với bên thứ ba"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Cho phép chia sẻ dữ liệu của bạn với các đối tác tin cậy"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:s.dataCollection.thirdParty,onChange:()=>c("dataCollection","thirdParty"),className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                    peer-focus:ring-4 peer-focus:ring-blue-300
                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                    after:bg-white after:rounded-full after:h-5 after:w-5
                    after:transition-all peer-checked:after:translate-x-5`})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Tùy chọn nội dung"})}),r.jsxs("div",{className:"p-5 space-y-5",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Hiển thị nội dung người lớn"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Cho phép hiển thị nội dung dành cho người lớn (18+)"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:s.contentPreferences.adultContent,onChange:()=>c("contentPreferences","adultContent"),className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                    peer-focus:ring-4 peer-focus:ring-blue-300
                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                    after:bg-white after:rounded-full after:h-5 after:w-5
                    after:transition-all peer-checked:after:translate-x-5`})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Hiển thị nội dung nhạy cảm"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Cho phép hiển thị nội dung có thể gây khó chịu hoặc tranh cãi"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:s.contentPreferences.sensitiveContent,onChange:()=>c("contentPreferences","sensitiveContent"),className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                    peer-focus:ring-4 peer-focus:ring-blue-300
                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                    after:bg-white after:rounded-full after:h-5 after:w-5
                    after:transition-all peer-checked:after:translate-x-5`})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Quản lý dữ liệu của bạn"})}),r.jsxs("div",{className:"p-5 space-y-5",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Xuất dữ liệu của bạn"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Tải xuống bản sao dữ liệu cá nhân của bạn"})]}),r.jsx("button",{type:"button",onClick:m,disabled:a,className:`px-4 py-2 border rounded-md flex items-center ${a?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200"}`,children:a?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{children:"Đang xử lý..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(pj,{className:"h-5 w-5 mr-2"}),r.jsx("span",{children:"Xuất dữ liệu"})]})})]}),r.jsx("div",{className:"border-t border-gray-100 pt-5",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Sao chép dữ liệu"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Yêu cầu bản sao dữ liệu theo Quy định bảo vệ dữ liệu"})]}),r.jsxs("button",{type:"button",className:"px-4 py-2 bg-gray-100 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-200 flex items-center",children:[r.jsx(bj,{className:"h-5 w-5 mr-2"}),r.jsx("span",{children:"Yêu cầu bản sao"})]})]})}),r.jsx("div",{className:"border-t border-gray-100 pt-5",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-red-600",children:"Xóa dữ liệu của bạn"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Yêu cầu xóa tất cả dữ liệu cá nhân của bạn"})]}),r.jsxs("button",{type:"button",className:"px-4 py-2 bg-red-50 border border-red-300 rounded-md text-red-700 hover:bg-red-100 flex items-center",children:[r.jsx(bs,{className:"h-5 w-5 mr-2"}),r.jsx("span",{children:"Yêu cầu xóa dữ liệu"})]})]})})]})]}),r.jsx("div",{className:"pt-6",children:r.jsx("button",{type:"submit",className:"px-4 py-2 rounded-md text-white bg-green-600 hover:bg-green-700 active:bg-green-800 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"Lưu thay đổi"})})]}),r.jsx("div",{className:"mt-8 p-4 bg-gray-50 border border-gray-200 rounded-md",children:r.jsxs("p",{className:"text-sm text-gray-600",children:["Để tìm hiểu thêm về cách chúng tôi thu thập, sử dụng và bảo vệ dữ liệu của bạn, vui lòng xem",r.jsx("a",{href:"/privacy-policy",className:"text-blue-600 hover:text-blue-800 mx-1",children:"Chính sách quyền riêng tư"}),"và",r.jsx("a",{href:"/terms-of-service",className:"text-blue-600 hover:text-blue-800 mx-1",children:"Điều khoản dịch vụ"}),"của chúng tôi."]})})]})},Ca={getSSHKeys:async e=>{try{return(await De.get(`${Qn}/api/users/ssh-keys`,{headers:{Authorization:`Bearer ${e}`}})).data}catch(t){throw console.error("Error fetching SSH keys:",t),t}},addSSHKey:async(e,{title:t,key:n})=>{try{return(await De.post(`${Qn}/api/users/ssh-keys`,{title:t,key:n},{headers:{Authorization:`Bearer ${e}`}})).data}catch(s){throw console.error("Error adding SSH key:",s),s}},deleteSSHKey:async(e,t)=>{try{return(await De.delete(`${Qn}/api/users/ssh-keys/${t}`,{headers:{Authorization:`Bearer ${e}`}})).data}catch(n){throw console.error("Error deleting SSH key:",n),n}},getGPGKeys:async e=>{try{return(await De.get(`${Qn}/api/users/gpg-keys`,{headers:{Authorization:`Bearer ${e}`}})).data}catch(t){throw console.error("Error fetching GPG keys:",t),t}},addGPGKey:async(e,{title:t,key:n})=>{try{return(await De.post(`${Qn}/api/users/gpg-keys`,{title:t,key:n},{headers:{Authorization:`Bearer ${e}`}})).data}catch(s){throw console.error("Error adding GPG key:",s),s}},deleteGPGKey:async(e,t)=>{try{return(await De.delete(`${Qn}/api/users/gpg-keys/${t}`,{headers:{Authorization:`Bearer ${e}`}})).data}catch(n){throw console.error("Error deleting GPG key:",n),n}}},Kee=()=>{Ht(),gn(L=>L.auth.user);const e=gn(L=>L.auth.token),t=h.useRef(null),[n,s]=h.useState([]),[i,a]=h.useState([]),[o,l]=h.useState({ssh:!1,gpg:!1}),[c,d]=h.useState(!1),[u,m]=h.useState({title:"",key:""}),[f,p]=h.useState(!1),[x,g]=h.useState({title:"",key:""});h.useEffect(()=>{b(),w()},[]);const b=async()=>{if(e){l(L=>({...L,ssh:!0}));try{const L=await Ca.getSSHKeys(e);L.success?s(L.keys||[]):re.error("Không thể tải khóa SSH")}catch(L){console.error("Error fetching SSH keys:",L),re.error("Đã xảy ra lỗi khi tải khóa SSH")}finally{l(L=>({...L,ssh:!1}))}}},w=async()=>{if(e){l(L=>({...L,gpg:!0}));try{const L=await Ca.getGPGKeys(e);L.success?a(L.keys||[]):re.error("Không thể tải khóa GPG")}catch(L){console.error("Error fetching GPG keys:",L),re.error("Đã xảy ra lỗi khi tải khóa GPG")}finally{l(L=>({...L,gpg:!1}))}}},k=L=>{m({...u,[L.target.name]:L.target.value})},v=L=>{g({...x,[L.target.name]:L.target.value})},N=async L=>{var A,M;if(L.preventDefault(),!u.title.trim()){re.error("Vui lòng nhập tiêu đề cho khóa SSH"),t.current.focus();return}if(!u.key.trim()){re.error("Vui lòng nhập khóa SSH công khai");return}if(!y(u.key)){re.error("Khóa SSH không hợp lệ. Vui lòng kiểm tra lại định dạng.");return}try{const z=await Ca.addSSHKey(e,{title:u.title,key:u.key});z.success?(b(),m({title:"",key:""}),d(!1),re.success("Đã thêm khóa SSH thành công")):re.error(z.message||"Không thể thêm khóa SSH")}catch(z){console.error("Error adding SSH key:",z),re.error(((M=(A=z.response)==null?void 0:A.data)==null?void 0:M.message)||"Đã xảy ra lỗi khi thêm khóa SSH")}},C=async L=>{var A,M;if(L.preventDefault(),!x.title.trim()){re.error("Vui lòng nhập tiêu đề cho khóa GPG");return}if(!x.key.trim()){re.error("Vui lòng nhập khóa GPG công khai");return}try{const z=await Ca.addGPGKey(e,{title:x.title,key:x.key});z.success?(w(),g({title:"",key:""}),p(!1),re.success("Đã thêm khóa GPG thành công")):re.error(z.message||"Không thể thêm khóa GPG")}catch(z){console.error("Error adding GPG key:",z),re.error(((M=(A=z.response)==null?void 0:A.data)==null?void 0:M.message)||"Đã xảy ra lỗi khi thêm khóa GPG")}},T=async L=>{var A,M;try{const z=await Ca.deleteSSHKey(e,L);z.success?(b(),re.success("Đã xóa khóa SSH")):re.error(z.message||"Không thể xóa khóa SSH")}catch(z){console.error("Error deleting SSH key:",z),re.error(((M=(A=z.response)==null?void 0:A.data)==null?void 0:M.message)||"Đã xảy ra lỗi khi xóa khóa SSH")}},E=async L=>{var A,M;try{const z=await Ca.deleteGPGKey(e,L);z.success?(w(),re.success("Đã xóa khóa GPG")):re.error(z.message||"Không thể xóa khóa GPG")}catch(z){console.error("Error deleting GPG key:",z),re.error(((M=(A=z.response)==null?void 0:A.data)==null?void 0:M.message)||"Đã xảy ra lỗi khi xóa khóa GPG")}},P=L=>{navigator.clipboard.writeText(L).then(()=>{re.success("Đã sao chép vân tay khóa vào clipboard")}).catch(()=>{re.error("Không thể sao chép vào clipboard")})},R=L=>L?new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"long",day:"numeric"}).format(new Date(L)):"Chưa sử dụng",y=L=>{const A=L.trim();return(A.startsWith("ssh-rsa ")||A.startsWith("ssh-ed25519 ")||A.startsWith("ssh-dss ")||A.startsWith("ecdsa-sha2-nistp"))&&A.length>50},O=L=>{const A=L.KeyID||L.keyID||L.id,M=L.Title||L.title,z=L.Fingerprint||L.fingerprint,ie=L.CreatedAt||L.createdAt,X=L.LastUsedAt||L.lastUsedAt||L.lastUsed;return r.jsx("div",{className:"p-5",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start",children:[r.jsx(rp,{className:"h-5 w-5 text-gray-400 mt-0.5 mr-3"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:M}),r.jsxs("div",{className:"mt-1 flex items-center text-sm text-gray-500",children:[r.jsx("span",{className:"font-mono",children:z}),r.jsx("button",{onClick:()=>P(z),className:"ml-2 text-blue-600 hover:text-blue-800",title:"Sao chép vân tay khóa",children:r.jsx(Qx,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Thêm vào ngày ",R(ie)," •",X?r.jsxs("span",{children:[" Sử dụng lần cuối: ",R(X)]}):r.jsx("span",{children:" Chưa được sử dụng"})]})]})]}),r.jsx("button",{onClick:()=>T(A),className:"text-gray-400 hover:text-red-600",title:"Xóa khóa này",children:r.jsx(bs,{className:"h-5 w-5"})})]})},A)},_=L=>{const A=L.KeyID||L.keyID||L.id,M=L.Title||L.title,z=L.Fingerprint||L.fingerprint,ie=L.CreatedAt||L.createdAt,X=L.ExpiresAt||L.expiresAt;return r.jsx("div",{className:"p-5",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start",children:[r.jsx(ei,{className:"h-5 w-5 text-gray-400 mt-0.5 mr-3"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:M}),r.jsxs("div",{className:"mt-1 flex items-center text-sm text-gray-500",children:[r.jsx("span",{className:"font-mono",children:z}),r.jsx("button",{onClick:()=>P(z),className:"ml-2 text-blue-600 hover:text-blue-800",title:"Sao chép vân tay khóa",children:r.jsx(Qx,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Thêm vào ngày ",R(ie),X&&r.jsxs("span",{children:[" • Hết hạn vào: ",R(X)]})]})]})]}),r.jsx("button",{onClick:()=>E(A),className:"text-gray-400 hover:text-red-600",title:"Xóa khóa này",children:r.jsx(bs,{className:"h-5 w-5"})})]})},A)};return r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800 border-b pb-2",children:"Khóa SSH và GPG"}),r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{className:"bg-blue-50 rounded-lg border border-blue-100 p-5",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(wj,{className:"h-6 w-6 text-blue-600 mt-0.5 mr-3"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-blue-900",children:"Về khóa SSH"}),r.jsx("p",{className:"mt-2 text-sm text-blue-700",children:"Khóa SSH cho phép bạn thiết lập kết nối an toàn giữa máy tính của bạn và máy chủ của chúng tôi. Bạn có thể sử dụng khóa SSH để xác thực thay vì sử dụng mật khẩu khi thực hiện các thao tác như đẩy mã hoặc kết nối với máy chủ."}),r.jsx("p",{className:"mt-2 text-sm text-blue-700",children:r.jsx("a",{href:"https://docs.github.com/en/authentication/connecting-to-github-with-ssh",className:"text-blue-600 hover:text-blue-800 underline",target:"_blank",rel:"noopener noreferrer",children:"Tìm hiểu thêm về khóa SSH"})})]})]})}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsxs("div",{className:"px-5 py-4 border-b border-gray-200 flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Khóa SSH"}),r.jsxs("button",{onClick:()=>d(!0),className:"px-3 py-1.5 bg-green-50 border border-green-300 rounded text-sm text-green-700 hover:bg-green-100 flex items-center",disabled:c,children:[r.jsx(Tr,{className:"h-4 w-4 mr-1"}),r.jsx("span",{children:"Thêm khóa SSH"})]})]}),c&&r.jsx("div",{className:"p-5 border-b border-gray-200 bg-gray-50",children:r.jsxs("form",{onSubmit:N,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tiêu đề"}),r.jsx("input",{type:"text",id:"title",name:"title",ref:t,value:u.title,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"ví dụ: MacBook Pro",autoFocus:!0}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:'Đặt tên mô tả để dễ dàng nhận biết khóa này (ví dụ: "Laptop cá nhân")'})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"key",className:"block text-sm font-medium text-gray-700 mb-1",children:"Khóa"}),r.jsx("textarea",{id:"key",name:"key",value:u.key,onChange:k,rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm",placeholder:"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC..."}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:'Dán khóa SSH công khai của bạn vào đây. Bắt đầu bằng "ssh-rsa", "ssh-ed25519", "ssh-dss", "ecdsa-sha2-nistp"...'})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Thêm khóa SSH"}),r.jsx("button",{type:"button",onClick:()=>{d(!1),m({title:"",key:""})},className:"px-4 py-2 bg-white border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Hủy"})]})]})}),r.jsx("div",{className:"divide-y divide-gray-100",children:o.ssh?r.jsx("div",{className:"p-5 text-center text-gray-500",children:"Đang tải khóa SSH..."}):n.length>0?n.map(L=>O(L)):r.jsx("div",{className:"p-5 text-center text-gray-500",children:c?"Điền thông tin để thêm khóa SSH đầu tiên của bạn":"Bạn chưa thêm khóa SSH nào. Nhấn 'Thêm khóa SSH' để bắt đầu."})})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsxs("div",{className:"px-5 py-4 border-b border-gray-200 flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Khóa GPG"}),r.jsxs("button",{onClick:()=>p(!0),className:"px-3 py-1.5 bg-green-50 border border-green-300 rounded text-sm text-green-700 hover:bg-green-100 flex items-center",disabled:f,children:[r.jsx(Tr,{className:"h-4 w-4 mr-1"}),r.jsx("span",{children:"Thêm khóa GPG"})]})]}),f&&r.jsx("div",{className:"p-5 border-b border-gray-200 bg-gray-50",children:r.jsxs("form",{onSubmit:C,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"gpg-title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tiêu đề"}),r.jsx("input",{type:"text",id:"gpg-title",name:"title",value:x.title,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"ví dụ: GPG Key cho GitHub",autoFocus:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"gpg-key",className:"block text-sm font-medium text-gray-700 mb-1",children:"Khóa"}),r.jsx("textarea",{id:"gpg-key",name:"key",value:x.key,onChange:v,rows:8,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm",placeholder:"-----BEGIN PGP PUBLIC KEY BLOCK-----..."}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:'Dán khóa GPG công khai của bạn vào đây. Bắt đầu bằng "-----BEGIN PGP PUBLIC KEY BLOCK-----"'})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Thêm khóa GPG"}),r.jsx("button",{type:"button",onClick:()=>{p(!1),g({title:"",key:""})},className:"px-4 py-2 bg-white border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Hủy"})]})]})}),r.jsx("div",{className:"divide-y divide-gray-100",children:o.gpg?r.jsx("div",{className:"p-5 text-center text-gray-500",children:"Đang tải khóa GPG..."}):i.length>0?i.map(L=>_(L)):r.jsx("div",{className:"p-5",children:f?r.jsx("div",{className:"text-center text-gray-500",children:"Điền thông tin để thêm khóa GPG đầu tiên của bạn"}):r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-start mb-4",children:[r.jsx(ei,{className:"h-6 w-6 text-gray-400 mt-0.5 mr-3"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Ký xác minh commit của bạn"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Sử dụng khóa GPG để ký commit và thẻ của bạn để người khác có thể xác minh rằng chúng thực sự đến từ bạn."}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:r.jsx("a",{href:"https://docs.github.com/en/authentication/managing-commit-signature-verification",className:"text-blue-600 hover:text-blue-800 underline",target:"_blank",rel:"noopener noreferrer",children:"Tìm hiểu thêm về việc ký xác minh commit"})})]})]}),r.jsx("div",{className:"mt-3 text-center text-gray-500",children:"Bạn chưa thêm khóa GPG nào. Nhấn 'Thêm khóa GPG' để bắt đầu."})]})})})]}),r.jsx("div",{className:"bg-yellow-50 rounded-lg border border-yellow-100 p-5",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(jl,{className:"h-6 w-6 text-yellow-600 mt-0.5 mr-3"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-yellow-900",children:"Lưu ý bảo mật"}),r.jsxs("ul",{className:"mt-2 text-sm text-yellow-700 space-y-2",children:[r.jsx("li",{children:"• Không bao giờ chia sẻ khóa riêng tư SSH của bạn với người khác"}),r.jsx("li",{children:"• Chỉ thêm khóa công khai SSH vào tài khoản của bạn"}),r.jsx("li",{children:"• Xem xét sử dụng khóa SSH với mật khẩu để tăng cường bảo mật"}),r.jsx("li",{children:"• Xóa khóa SSH không còn sử dụng hoặc có thể đã bị xâm phạm"})]})]})]})})]})]})},Gee=()=>{Ht();const[e,t]=h.useState([{id:"repo-1",name:"campust-web",type:"repository",description:"Main web application for Campust",archivedAt:new Date(2023,8,15),lastActive:new Date(2023,7,30),tags:["react","javascript","web"]},{id:"project-1",name:"Campus Redesign",type:"project",description:"Project for redesigning the campus website",archivedAt:new Date(2023,9,5),lastActive:new Date(2023,8,28),tags:["design","ui/ux"]},{id:"course-1",name:"Introduction to React",type:"course",description:"Beginner course for React development",archivedAt:new Date(2023,7,10),lastActive:new Date(2023,6,15),tags:["react","tutorial"]},{id:"doc-1",name:"API Documentation",type:"document",description:"Documentation for the Campust API",archivedAt:new Date(2023,10,2),lastActive:new Date(2023,9,25),tags:["api","documentation"]}]),[n,s]=h.useState("all"),[i,a]=h.useState(""),[o,l]=h.useState("newest"),c=g=>new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"long",day:"numeric"}).format(g),d=(g,b="h-5 w-5")=>{switch(g){case"repository":return r.jsx(Z8,{className:b});case"project":return r.jsx(_o,{className:b});case"course":return r.jsx(ho,{className:b});case"document":return r.jsx(Zx,{className:b});default:return r.jsx(_o,{className:b})}},u=g=>{const b=e.filter(w=>w.id!==g);t(b),re.success("Mục đã được khôi phục thành công")},m=g=>{if(window.confirm("Bạn có chắc chắn muốn xóa vĩnh viễn mục này? Hành động này không thể hoàn tác.")){const b=e.filter(w=>w.id!==g);t(b),re.success("Mục đã được xóa vĩnh viễn")}},p=[...e.filter(g=>{const b=n==="all"||g.type===n,w=i===""||g.name.toLowerCase().includes(i.toLowerCase())||g.description.toLowerCase().includes(i.toLowerCase());return b&&w})].sort((g,b)=>o==="newest"?b.archivedAt-g.archivedAt:o==="oldest"?g.archivedAt-b.archivedAt:o==="name-asc"?g.name.localeCompare(b.name):o==="name-desc"?b.name.localeCompare(g.name):0),x=g=>{switch(g){case"repository":return"Kho lưu trữ";case"project":return"Dự án";case"course":return"Khóa học";case"document":return"Tài liệu";default:return g}};return r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800 border-b pb-2",children:"Kho lưu trữ"}),r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{className:"bg-blue-50 rounded-lg border border-blue-100 p-5",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(_o,{className:"h-6 w-6 text-blue-600 mt-0.5 mr-3"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-blue-900",children:"Về kho lưu trữ"}),r.jsx("p",{className:"mt-2 text-sm text-blue-700",children:"Kho lưu trữ chứa các mục đã được lưu trữ từ tài khoản của bạn. Các mục này không còn hiển thị trong danh sách chính nhưng vẫn có thể truy cập và khôi phục nếu cần."}),r.jsx("p",{className:"mt-2 text-sm text-blue-700",children:"Các mục được lưu trữ sẽ tự động bị xóa sau 90 ngày trừ khi bạn khôi phục chúng."})]})]})}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Tìm kiếm và lọc"})}),r.jsx("div",{className:"p-5",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{htmlFor:"search",className:"sr-only",children:"Tìm kiếm"}),r.jsxs("div",{className:"relative rounded-md shadow-sm",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:r.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),r.jsx("input",{type:"text",name:"search",id:"search",value:i,onChange:g=>a(g.target.value),className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md",placeholder:"Tìm kiếm theo tên hoặc mô tả"})]})]}),r.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[r.jsxs("div",{className:"relative inline-block w-full md:w-auto",children:[r.jsx("label",{htmlFor:"type-filter",className:"sr-only",children:"Lọc theo loại"}),r.jsx("div",{className:"flex",children:r.jsxs("div",{className:"relative flex items-center",children:[r.jsx(tP,{className:"h-5 w-5 text-gray-400 absolute left-3"}),r.jsxs("select",{id:"type-filter",name:"type-filter",value:n,onChange:g=>s(g.target.value),className:"focus:ring-blue-500 focus:border-blue-500 pl-10 pr-10 py-2 text-base border-gray-300 rounded-md",children:[r.jsx("option",{value:"all",children:"Tất cả loại"}),r.jsx("option",{value:"repository",children:"Kho lưu trữ"}),r.jsx("option",{value:"project",children:"Dự án"}),r.jsx("option",{value:"course",children:"Khóa học"}),r.jsx("option",{value:"document",children:"Tài liệu"})]})]})})]}),r.jsxs("div",{className:"relative inline-block w-full md:w-auto",children:[r.jsx("label",{htmlFor:"sort-order",className:"sr-only",children:"Sắp xếp theo"}),r.jsx("div",{className:"flex",children:r.jsxs("div",{className:"relative flex items-center",children:[r.jsx(DI,{className:"h-5 w-5 text-gray-400 absolute left-3"}),r.jsxs("select",{id:"sort-order",name:"sort-order",value:o,onChange:g=>l(g.target.value),className:"focus:ring-blue-500 focus:border-blue-500 pl-10 pr-10 py-2 text-base border-gray-300 rounded-md",children:[r.jsx("option",{value:"newest",children:"Mới nhất trước"}),r.jsx("option",{value:"oldest",children:"Cũ nhất trước"}),r.jsx("option",{value:"name-asc",children:"Tên (A-Z)"}),r.jsx("option",{value:"name-desc",children:"Tên (Z-A)"})]})]})})]})]})]})})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Các mục đã lưu trữ"})}),p.length>0?r.jsx("div",{className:"divide-y divide-gray-100",children:p.map(g=>r.jsx("div",{className:"p-5",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"mr-3 text-gray-400",children:d(g.type)}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:g.name}),r.jsxs("div",{className:"flex items-center mt-1",children:[r.jsx("span",{className:"text-xs bg-gray-100 text-gray-800 px-2 py-0.5 rounded",children:x(g.type)}),r.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["Lưu trữ ngày ",c(g.archivedAt)]})]})]})]}),r.jsx("p",{className:"mt-2 text-sm text-gray-500 ml-8",children:g.description}),r.jsx("div",{className:"mt-2 flex items-center text-xs text-gray-500 ml-8",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(kn,{className:"h-3 w-3 mr-1"}),r.jsxs("span",{children:["Hoạt động cuối: ",c(g.lastActive)]})]})}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-1 ml-8",children:g.tags.map((b,w)=>r.jsxs("span",{className:"inline-flex items-center bg-gray-100 text-gray-800 text-xs px-2 py-0.5 rounded",children:["#",b]},w))})]}),r.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[r.jsx("button",{className:"text-gray-400 hover:text-blue-600",title:"Xem chi tiết",children:r.jsx(Zs,{className:"h-5 w-5"})}),r.jsx("button",{onClick:()=>u(g.id),className:"text-gray-400 hover:text-green-600",title:"Khôi phục mục này",children:r.jsx(KI,{className:"h-5 w-5"})}),r.jsx("button",{onClick:()=>m(g.id),className:"text-gray-400 hover:text-red-600",title:"Xóa vĩnh viễn",children:r.jsx(bs,{className:"h-5 w-5"})})]})]})},g.id))}):r.jsxs("div",{className:"p-10 text-center",children:[r.jsx(_o,{className:"h-12 w-12 mx-auto text-gray-400"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Không có mục nào"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n==="all"&&i===""?"Bạn chưa lưu trữ mục nào.":"Không tìm thấy mục nào phù hợp với bộ lọc của bạn."})]})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Cài đặt lưu trữ"})}),r.jsxs("div",{className:"p-5 space-y-5",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Tự động xóa sau 90 ngày"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Tự động xóa các mục đã lưu trữ sau 90 ngày"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:!0,className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                    peer-focus:ring-4 peer-focus:ring-blue-300
                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                    after:bg-white after:rounded-full after:h-5 after:w-5
                    after:transition-all peer-checked:after:translate-x-5`})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Thông báo trước khi xóa"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Nhận thông báo trước khi các mục bị xóa tự động"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:!0,className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                    peer-focus:ring-4 peer-focus:ring-blue-300
                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                    after:bg-white after:rounded-full after:h-5 after:w-5
                    after:transition-all peer-checked:after:translate-x-5`})]})]}),r.jsxs("div",{className:"border-t border-gray-100 pt-5",children:[r.jsxs("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[r.jsx(bs,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Xóa tất cả các mục đã lưu trữ"]}),r.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Hành động này sẽ xóa vĩnh viễn tất cả các mục đã lưu trữ và không thể hoàn tác."})]})]})]}),r.jsx("div",{className:"mt-8 p-4 bg-gray-50 border border-gray-200 rounded-md",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(Zx,{className:"h-6 w-6 text-gray-400 mt-0.5 mr-2"}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Theo chính sách lưu trữ của chúng tôi, các mục đã lưu trữ sẽ tự động bị xóa sau 90 ngày trừ khi được khôi phục. Để biết thêm chi tiết, vui lòng xem",r.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-800 mx-1",children:"chính sách lưu trữ"}),"của chúng tôi."]})]})})]})]})},Xee=()=>{Ht();const[e,t]=h.useState([{id:"cs-1",name:"campust-web-dev",repository:"campust/campust-web",branch:"main",status:"running",createdAt:new Date(2023,10,15),lastUsed:new Date(2023,10,25),machine:{cpu:4,memory:8,storage:32},expiresAt:new Date(2023,11,15)},{id:"cs-2",name:"api-feature-auth",repository:"campust/campust-api",branch:"feature/auth",status:"stopped",createdAt:new Date(2023,9,20),lastUsed:new Date(2023,10,10),machine:{cpu:2,memory:4,storage:16},expiresAt:new Date(2023,11,20)},{id:"cs-3",name:"mobile-app-dev",repository:"campust/campust-mobile",branch:"develop",status:"stopped",createdAt:new Date(2023,10,5),lastUsed:new Date(2023,10,18),machine:{cpu:4,memory:8,storage:32},expiresAt:new Date(2023,11,5)}]),n=[{id:"basic",name:"Cơ bản",cpu:2,memory:4,storage:16},{id:"standard",name:"Tiêu chuẩn",cpu:4,memory:8,storage:32},{id:"premium",name:"Cao cấp",cpu:8,memory:16,storage:64}],[s,i]=h.useState(!1),[a,o]=h.useState({repository:"",branch:"main",machinePreset:"standard"}),l=g=>new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"long",day:"numeric"}).format(g),c=g=>{const w=Math.floor((new Date-g)/1e3);return w<60?"Vừa xong":w<3600?`${Math.floor(w/60)} phút trước`:w<86400?`${Math.floor(w/3600)} giờ trước`:`${Math.floor(w/86400)} ngày trước`},d=g=>{const b=e.map(w=>w.id===g?{...w,status:"running",lastUsed:new Date}:w);t(b),re.success("Codespace đã được khởi động")},u=g=>{const b=e.map(w=>w.id===g?{...w,status:"stopped"}:w);t(b),re.success("Codespace đã được dừng")},m=g=>{if(window.confirm("Bạn có chắc chắn muốn xóa codespace này? Tất cả dữ liệu không được commit sẽ bị mất.")){const b=e.filter(w=>w.id!==g);t(b),re.success("Codespace đã được xóa")}},f=g=>{o({...a,[g.target.name]:g.target.value})},p=g=>{if(g.preventDefault(),!a.repository.trim()){re.error("Vui lòng chọn một repository");return}const b=n.find(k=>k.id===a.machinePreset),w={id:`cs-${Date.now()}`,name:a.repository.split("/").pop()+"-"+a.branch.replace("/","-"),repository:a.repository,branch:a.branch,status:"starting",createdAt:new Date,lastUsed:new Date,machine:{cpu:b.cpu,memory:b.memory,storage:b.storage},expiresAt:new Date(Date.now()+30*24*60*60*1e3)};t([w,...e]),o({repository:"",branch:"main",machinePreset:"standard"}),i(!1),re.success("Codespace đang được tạo"),setTimeout(()=>{t(k=>k.map(v=>v.id===w.id?{...v,status:"running"}:v)),re.success("Codespace đã sẵn sàng để sử dụng")},3e3)},x=g=>{switch(g){case"running":return r.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[r.jsx("span",{className:"w-2 h-2 mr-1 bg-green-500 rounded-full"}),"Đang chạy"]});case"stopped":return r.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[r.jsx("span",{className:"w-2 h-2 mr-1 bg-gray-500 rounded-full"}),"Đã dừng"]});case"starting":return r.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[r.jsx("span",{className:"w-2 h-2 mr-1 bg-blue-500 rounded-full animate-pulse"}),"Đang khởi động"]});default:return r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:g})}};return r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800 border-b pb-2",children:"Codespaces"}),r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{className:"bg-blue-50 rounded-lg border border-blue-100 p-5",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(to,{className:"h-6 w-6 text-blue-600 mt-0.5 mr-3"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-blue-900",children:"Về Codespaces"}),r.jsx("p",{className:"mt-2 text-sm text-blue-700",children:"Codespaces là môi trường phát triển dựa trên đám mây, cho phép bạn phát triển hoàn toàn trong trình duyệt. Mỗi codespace bao gồm một máy ảo với các công cụ, thư viện và runtime bạn cần để phát triển."}),r.jsx("p",{className:"mt-2 text-sm text-blue-700",children:r.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-800 underline",children:"Tìm hiểu thêm về Codespaces"})})]})]})}),r.jsx("div",{className:"flex justify-end",children:r.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx(Tr,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Tạo codespace mới"]})}),s&&r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Tạo codespace mới"})}),r.jsx("div",{className:"p-5",children:r.jsxs("form",{onSubmit:p,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"repository",className:"block text-sm font-medium text-gray-700 mb-1",children:"Repository"}),r.jsxs("select",{id:"repository",name:"repository",value:a.repository,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[r.jsx("option",{value:"",children:"Chọn repository"}),r.jsx("option",{value:"campust/campust-web",children:"campust/campust-web"}),r.jsx("option",{value:"campust/campust-api",children:"campust/campust-api"}),r.jsx("option",{value:"campust/campust-mobile",children:"campust/campust-mobile"}),r.jsx("option",{value:"campust/campust-docs",children:"campust/campust-docs"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"branch",className:"block text-sm font-medium text-gray-700 mb-1",children:"Branch"}),r.jsx("input",{type:"text",id:"branch",name:"branch",value:a.branch,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"main"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"machinePreset",className:"block text-sm font-medium text-gray-700 mb-1",children:"Cấu hình máy"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:n.map(g=>r.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer ${a.machinePreset===g.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:bg-gray-50"}`,onClick:()=>o({...a,machinePreset:g.id}),children:[r.jsx("div",{className:"font-medium text-gray-900",children:g.name}),r.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Jx,{className:"h-4 w-4 mr-1"}),r.jsxs("span",{children:[g.cpu," CPU"]})]}),r.jsxs("div",{className:"flex items-center mt-1",children:[r.jsx(Nj,{className:"h-4 w-4 mr-1"}),r.jsxs("span",{children:[g.memory," GB RAM"]})]}),r.jsxs("div",{className:"flex items-center mt-1",children:[r.jsx(bj,{className:"h-4 w-4 mr-1"}),r.jsxs("span",{children:[g.storage," GB Storage"]})]})]})]},g.id))})]}),r.jsxs("div",{className:"flex space-x-3 pt-4",children:[r.jsxs("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx(kj,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Tạo codespace"]}),r.jsx("button",{type:"button",onClick:()=>i(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Hủy"})]})]})})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Codespaces của bạn"})}),e.length>0?r.jsx("div",{className:"divide-y divide-gray-100",children:e.map(g=>r.jsxs("div",{className:"p-5",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"mr-3 text-gray-400",children:r.jsx(tp,{className:"h-6 w-6"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:g.name}),r.jsxs("div",{className:"flex items-center mt-1",children:[x(g.status),r.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:[g.repository," • ",g.branch]})]})]})]}),r.jsxs("div",{className:"mt-3 ml-9 grid grid-cols-1 md:grid-cols-3 gap-2",children:[r.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[r.jsx(Jx,{className:"h-3 w-3 mr-1"}),r.jsxs("span",{children:[g.machine.cpu," CPU • ",g.machine.memory," GB RAM • ",g.machine.storage," GB"]})]}),r.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[r.jsx(ir,{className:"h-3 w-3 mr-1"}),r.jsxs("span",{children:["Sử dụng lần cuối: ",c(g.lastUsed)]})]}),r.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[r.jsx(kn,{className:"h-3 w-3 mr-1"}),r.jsxs("span",{children:["Hết hạn: ",l(g.expiresAt)]})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[g.status==="running"?r.jsx("button",{onClick:()=>u(g.id),className:"text-gray-400 hover:text-red-600",title:"Dừng codespace",children:r.jsx(Sj,{className:"h-5 w-5"})}):g.status==="stopped"?r.jsx("button",{onClick:()=>d(g.id),className:"text-gray-400 hover:text-green-600",title:"Khởi động codespace",children:r.jsx(NP,{className:"h-5 w-5"})}):null,r.jsx("button",{onClick:()=>m(g.id),className:"text-gray-400 hover:text-red-600",title:"Xóa codespace",children:r.jsx(bs,{className:"h-5 w-5"})})]})]}),g.status==="running"&&r.jsx("div",{className:"mt-4 ml-9",children:r.jsx("button",{className:"px-3 py-1.5 bg-blue-50 border border-blue-300 rounded text-sm text-blue-700 hover:bg-blue-100",children:"Mở trong trình duyệt"})})]},g.id))}):r.jsxs("div",{className:"p-10 text-center",children:[r.jsx(tp,{className:"h-12 w-12 mx-auto text-gray-400"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Không có codespace nào"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Bạn chưa tạo codespace nào. Hãy bắt đầu bằng cách tạo codespace đầu tiên của bạn."}),r.jsx("div",{className:"mt-6",children:r.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx(Tr,{className:"-ml-1 mr-2 h-5 w-5","aria-hidden":"true"}),"Tạo codespace mới"]})})]})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Cài đặt Codespace"})}),r.jsxs("div",{className:"p-5 space-y-5",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Tự động dừng sau thời gian không hoạt động"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Tự động dừng codespace sau một khoảng thời gian không hoạt động để tiết kiệm tài nguyên"})]}),r.jsx("div",{className:"w-32",children:r.jsxs("select",{className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"30",children:"30 phút"}),r.jsx("option",{value:"60",children:"1 giờ"}),r.jsx("option",{value:"120",children:"2 giờ"}),r.jsx("option",{value:"never",children:"Không bao giờ"})]})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Tự động lưu thay đổi"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Tự động lưu các thay đổi vào repository của bạn"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:!0,className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                    peer-focus:ring-4 peer-focus:ring-blue-300
                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                    after:bg-white after:rounded-full after:h-5 after:w-5
                    after:transition-all peer-checked:after:translate-x-5`})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Tự động đồng bộ dotfiles"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Đồng bộ các tệp cấu hình cá nhân của bạn với codespace"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:!1,className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                    peer-focus:ring-4 peer-focus:ring-blue-300
                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                    after:bg-white after:rounded-full after:h-5 after:w-5
                    after:transition-all peer-checked:after:translate-x-5`})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Thông tin thanh toán"})}),r.jsxs("div",{className:"p-5",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Thời gian sử dụng trong tháng này"}),r.jsxs("div",{className:"mt-2 text-sm",children:[r.jsxs("div",{className:"flex items-center text-gray-500",children:[r.jsx("span",{className:"font-medium text-gray-900 mr-1",children:"15 giờ"})," sử dụng"]}),r.jsxs("div",{className:"flex items-center text-gray-500 mt-1",children:[r.jsx("span",{className:"font-medium text-gray-900 mr-1",children:"60 giờ"})," còn lại trong gói miễn phí"]})]})]}),r.jsx("div",{className:"mt-4 md:mt-0",children:r.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-800",children:"Xem chi tiết thanh toán"})})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:r.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:"20%"}})}),r.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Bạn đã sử dụng 20% thời gian miễn phí trong tháng này"})]})]})]})]})]})},Yee=()=>{const e=Ht(),{loading:t}=gn(E=>E.user),n=gn(E=>E.auth.user),s=gn(E=>E.auth.token),[i,a]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[o,l]=h.useState(!1),[c,d]=h.useState(!1),[u,m]=h.useState(!1),[f,p]=h.useState(null),[x,g]=h.useState([]);h.useEffect(()=>{window.PublicKeyCredential&&PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable?PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable().then(E=>{l(E)}).catch(E=>{console.error("Error checking platform authenticator:",E),l(!1)}):l(!1)},[]),h.useEffect(()=>{n&&s&&b()},[n,s]);const b=async()=>{try{const E=await De.get("/api/passkeys/list",{headers:{Authorization:`Bearer ${s}`}});d(E.data.hasPasskey),g(E.data.passkeys||[])}catch(E){console.error("Error checking passkey status:",E),d(!1)}},w=E=>{const P=window.atob(E.replace(/-/g,"+").replace(/_/g,"/")),R=new Uint8Array(P.length);for(let y=0;y<P.length;y++)R[y]=P.charCodeAt(y);return R.buffer},k=E=>{const P=new Uint8Array(E);let R="";for(let y=0;y<P.byteLength;y++)R+=String.fromCharCode(P[y]);return window.btoa(R).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")},v=async()=>{var E,P;if(!o){re.error("Thiết bị của bạn không hỗ trợ xác thực sinh trắc học.");return}m(!0),p(null);try{const R=await De.post("/api/passkeys/register/options",{},{headers:{Authorization:`Bearer ${s}`}});if(!R.data.success)throw new Error(R.data.message||"Không thể tạo yêu cầu đăng ký");const y=R.data.options;y.challenge=w(y.challenge),y.user.id=w(y.user.id),y.excludeCredentials&&y.excludeCredentials.forEach(A=>{A.id=w(A.id)});const O=await navigator.credentials.create({publicKey:y}),_={id:O.id,type:O.type,rawId:k(O.rawId),response:{clientDataJSON:k(O.response.clientDataJSON),attestationObject:k(O.response.attestationObject)},name:`Passkey on ${navigator.platform}`},L=await De.post("/api/passkeys/register/verify",_,{headers:{Authorization:`Bearer ${s}`}});if(!L.data.success)throw new Error(L.data.message||"Đăng ký không thành công");re.success("Đã đăng ký xác thực sinh trắc học thành công!"),d(!0),b()}catch(R){console.error("Error registering passkey:",R),p(((P=(E=R.response)==null?void 0:E.data)==null?void 0:P.message)||"Không thể đăng ký xác thực sinh trắc học."),re.error("Không thể đăng ký xác thực sinh trắc học. Vui lòng thử lại sau.")}finally{m(!1)}},N=async E=>{var P,R;m(!0),p(null);try{const y=await De.delete(`/api/passkeys/${E||""}`,{headers:{Authorization:`Bearer ${s}`}});re.success("Đã xóa xác thực sinh trắc học."),d(y.data.hasPasskey),b()}catch(y){console.error("Error removing passkey:",y),p(((R=(P=y.response)==null?void 0:P.data)==null?void 0:R.message)||"Không thể xóa xác thực sinh trắc học."),re.error("Không thể xóa xác thực sinh trắc học. Vui lòng thử lại sau.")}finally{m(!1)}},C=E=>{a({...i,[E.target.name]:E.target.value})},T=E=>{if(E.preventDefault(),i.newPassword!==i.confirmPassword){re.error("Mật khẩu mới và xác nhận mật khẩu không khớp");return}e(md({currentPassword:i.currentPassword,newPassword:i.newPassword})),a({currentPassword:"",newPassword:"",confirmPassword:""})};return r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800 border-b pb-2",children:"Mật khẩu và xác thực"}),r.jsxs("div",{className:"space-y-8",children:[r.jsxs("form",{onSubmit:T,className:"space-y-5 max-w-md",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Mật khẩu hiện tại"}),r.jsx("input",{type:"password",name:"currentPassword",value:i.currentPassword,onChange:C,required:!0,className:"w-full px-3 py-2 rounded-md border border-gray-300 shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nhập mật khẩu hiện tại"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Mật khẩu mới"}),r.jsx("input",{type:"password",name:"newPassword",value:i.newPassword,onChange:C,required:!0,minLength:8,className:"w-full px-3 py-2 rounded-md border border-gray-300 shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Tối thiểu 8 ký tự"}),r.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Mật khẩu phải có ít nhất 8 ký tự."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Xác nhận mật khẩu mới"}),r.jsx("input",{type:"password",name:"confirmPassword",value:i.confirmPassword,onChange:C,required:!0,className:"w-full px-3 py-2 rounded-md border border-gray-300 shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nhập lại mật khẩu mới"})]}),r.jsx("div",{className:"pt-2",children:r.jsx("button",{type:"submit",disabled:t,className:"w-full px-4 py-2 rounded-md text-white font-medium bg-blue-600 hover:bg-blue-700 active:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:t?"Đang cập nhật...":"Cập nhật mật khẩu"})})]}),r.jsxs("div",{className:"mt-10 pt-10 border-t border-gray-200",children:[r.jsxs("h3",{className:"text-lg font-medium mb-5 text-gray-800 flex items-center",children:[r.jsx(vj,{className:"h-6 w-6 mr-2 text-blue-500"}),"Xác thực sinh trắc học"]}),r.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:o?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx(ei,{className:"h-8 w-8 text-green-500 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Bảo mật cao cấp"}),r.jsx("p",{className:"text-sm mt-1 text-gray-600",children:"Sử dụng vân tay, khuôn mặt hoặc phương thức sinh trắc học khác trên thiết bị của bạn để đăng nhập mà không cần nhớ mật khẩu. Chúng tôi không lưu trữ dữ liệu sinh trắc học của bạn - chỉ một khóa bảo mật được lưu trong cơ sở dữ liệu."})]})]}),r.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:c?"Xác thực sinh trắc học đang hoạt động":"Đăng ký xác thực sinh trắc học"}),r.jsx("p",{className:"text-sm text-gray-600",children:c?"Bạn có thể sử dụng vân tay hoặc khuôn mặt để đăng nhập vào tài khoản của mình.":"Thiết lập xác thực sinh trắc học để đăng nhập nhanh chóng và an toàn hơn."})]}),u?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-blue-500 rounded-full border-t-transparent"}),r.jsx("span",{className:"text-blue-600",children:"Đang xử lý..."})]}):c?r.jsx("button",{onClick:()=>x.length>0?N(x[0].id):null,className:"px-4 py-2 border border-red-300 text-red-700 bg-white rounded-md hover:bg-red-50",children:"Xóa"}):r.jsx("button",{onClick:v,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:"Thiết lập ngay"})]})}),f&&r.jsx("div",{className:"bg-red-50 text-red-800 p-3 rounded-md text-sm",children:f}),c&&x.length>0&&r.jsxs("div",{className:"mt-4",children:[r.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Thiết bị đã đăng ký"}),r.jsx("ul",{className:"space-y-2",children:x.map((E,P)=>r.jsxs("li",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-md",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(rp,{className:"h-5 w-5 text-blue-500 mr-2"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:E.name}),r.jsx("div",{className:"text-xs text-gray-500",children:new Date(E.createdAt).toLocaleDateString()})]})]}),r.jsx("button",{onClick:()=>N(E.id),className:"text-sm text-red-600 hover:text-red-800",children:"Xóa"})]},P))})]}),c&&r.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(rp,{className:"h-5 w-5 text-blue-500 mt-0.5 mr-3"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-blue-900",children:"Mẹo sử dụng"}),r.jsx("p",{className:"mt-2 text-sm text-blue-700",children:"Khi đăng nhập, bạn sẽ thấy tùy chọn sử dụng sinh trắc học thay vì nhập mật khẩu. Xác thực sinh trắc học chỉ hoạt động trên thiết bị đã đăng ký."})]})]})}),r.jsx("p",{className:"text-xs text-gray-500",children:"Chúng tôi sử dụng công nghệ Web Authentication (WebAuthn) để xác thực sinh trắc học. Dữ liệu sinh trắc học không bao giờ rời khỏi thiết bị của bạn."})]}):r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Ji,{className:"h-6 w-6 text-yellow-500 mt-0.5 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Thiết bị không hỗ trợ"}),r.jsx("p",{className:"text-sm mt-1 text-gray-600",children:"Trình duyệt hoặc thiết bị của bạn không hỗ trợ xác thực sinh trắc học. Vui lòng sử dụng trình duyệt hiện đại hơn hoặc thiết bị có cảm biến vân tay/khuôn mặt."}),r.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Các trình duyệt được hỗ trợ: Chrome (phiên bản 67+), Edge (phiên bản 18+), Firefox (phiên bản 60+), Safari (phiên bản 13+)"})]})]})})]}),r.jsxs("div",{className:"mt-10 pt-10 border-t border-gray-200",children:[r.jsx("h3",{className:"text-lg font-medium mb-5 text-gray-800",children:"Xác thực hai lớp (2FA)"}),r.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Bảo vệ tài khoản của bạn"}),r.jsx("p",{className:"text-sm mt-1 text-gray-600",children:"Thêm lớp bảo mật bổ sung để ngăn chặn truy cập trái phép vào tài khoản của bạn"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",defaultChecked:!0,className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                      peer-focus:ring-4 peer-focus:ring-blue-300
                      after:content-[''] after:absolute after:top-0.5 after:left-0.5
                      after:bg-white after:rounded-full after:h-5 after:w-5
                      after:transition-all peer-checked:after:translate-x-5`})]})]})})]})]})]})},Qee=()=>{var T;const e=Ht(),t=St(),{settings:n,profileInfo:s,loading:i}=gn(E=>E.user),[a,o]=h.useState(n?{...n}:null),[l,c]=h.useState(!1),[d,u]=h.useState({password:"",reason:"",confirmation:""}),[m,f]=h.useState(null),[p,x]=h.useState([]),[g,b]=h.useState(!0);h.useEffect(()=>{b(!0),rn.getEmails().then(E=>{x(E.data.emails);const P=E.data.emails.find(R=>R.IsPrimary);P&&f(P),b(!1)}).catch(E=>{console.error("Error fetching emails:",E),b(!1)})},[]);const w=(E,P,R)=>{a&&o({...a,[E]:{...a[E],[P]:R}})},k=E=>{E.preventDefault(),a&&e(zi(a))},v=E=>{u({...d,[E.target.name]:E.target.value})},N=E=>{if(E.preventDefault(),d.confirmation!=="XÓA"){re.error('Vui lòng nhập "XÓA" để xác nhận');return}e(fd({password:d.password,reason:d.reason})).then(P=>{P.error||(e(Tg()),t("/login"))})},C=()=>{!m||m.IsVerified||rn.resendVerificationEmail(m.EmailID).then(()=>{re.info("Đã gửi email xác thực. Vui lòng kiểm tra hộp thư của bạn.")}).catch(E=>{console.error("Error sending verification email:",E),re.error("Có lỗi khi gửi email xác thực")})};return r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800 border-b pb-2",children:"Tài khoản"}),r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Thông tin tài khoản"})}),r.jsxs("div",{className:"p-5 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tên người dùng"}),r.jsx("div",{className:"text-gray-900 bg-gray-50 border border-gray-300 rounded-md px-3 py-2",children:(s==null?void 0:s.username)||"username"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"text-gray-900 bg-gray-50 border border-gray-300 rounded-md px-3 py-2 flex-1 mr-2",children:g?"Loading...":(m==null?void 0:m.Email)||(s==null?void 0:s.email)||"email@example.com"}),!g&&m&&(m.IsVerified?r.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[r.jsx(Zn,{className:"h-4 w-4 mr-1"}),"Đã xác thực"]}):r.jsxs("button",{onClick:C,className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800 hover:bg-yellow-200",children:[r.jsx(Ji,{className:"h-4 w-4 mr-1"}),"Xác thực ngay"]}))]}),p.length>1&&r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[p.length,' email đã liên kết. Quản lý tại trang "Email".']})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ngày tham gia"}),r.jsx("div",{className:"text-gray-900 bg-gray-50 border border-gray-300 rounded-md px-3 py-2",children:s!=null&&s.createdAt?new Date(s.createdAt).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric"}):new Date().toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric"})})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Tùy chọn tài khoản"})}),r.jsxs("div",{className:"p-5 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ngôn ngữ mặc định"}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:(T=a==null?void 0:a.preferences)==null?void 0:T.language,onChange:E=>w("preferences","language",E.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"vi",children:"Tiếng Việt"}),r.jsx("option",{value:"en",children:"Tiếng Anh"}),r.jsx("option",{value:"fr",children:"Tiếng Pháp"}),r.jsx("option",{value:"ja",children:"Tiếng Nhật"}),r.jsx("option",{value:"zh",children:"Tiếng Trung"})]}),r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:r.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Múi giờ"}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"Asia/Ho_Chi_Minh",children:"(GMT+7:00) Hồ Chí Minh, Hà Nội, Bangkok"}),r.jsx("option",{value:"Asia/Tokyo",children:"(GMT+9:00) Tokyo, Osaka"}),r.jsx("option",{value:"Europe/London",children:"(GMT+0:00) London, Edinburgh"}),r.jsx("option",{value:"America/New_York",children:"(GMT-5:00) New York, Miami"}),r.jsx("option",{value:"America/Los_Angeles",children:"(GMT-8:00) Los Angeles, Seattle"})]}),r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:r.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Trạng thái hoạt động"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Tự động đánh dấu là đang hoạt động khi đăng nhập"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:!0,className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                    peer-focus:ring-4 peer-focus:ring-blue-300
                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                    after:bg-white after:rounded-full after:h-5 after:w-5
                    after:transition-all peer-checked:after:translate-x-5`})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Dịch vụ đã kết nối"})}),r.jsxs("div",{className:"p-5 space-y-5",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mr-3",children:r.jsx("svg",{className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Google"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Đã kết nối với tài khoản Google"})]})]}),r.jsx("button",{className:"px-3 py-1 bg-white border border-gray-300 rounded text-sm text-gray-700 hover:bg-gray-50",children:"Ngắt kết nối"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center mr-3",children:r.jsx("svg",{className:"h-6 w-6 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Facebook"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Chưa kết nối với tài khoản Facebook"})]})]}),r.jsx("button",{className:"px-3 py-1 bg-blue-50 border border-blue-300 rounded text-sm text-blue-700 hover:bg-blue-100",children:"Kết nối"})]})]})]}),r.jsxs("div",{className:"border-t border-gray-200 pt-6 mt-8",children:[r.jsxs("div",{className:"rounded-lg bg-red-50 border border-red-200",children:[r.jsx("div",{className:"px-5 py-4 border-b border-red-200",children:r.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Vùng nguy hiểm"})}),r.jsx("div",{className:"p-5 space-y-5",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-red-800",children:"Xóa tài khoản"}),r.jsx("p",{className:"text-sm text-red-700",children:"Xóa vĩnh viễn tài khoản và tất cả dữ liệu của bạn. Hành động này không thể hoàn tác."})]}),r.jsx("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-white border border-red-300 rounded text-sm font-medium text-red-700 hover:bg-red-50",children:"Xóa tài khoản"})]})})]}),l&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[r.jsx("h3",{className:"text-lg font-medium text-red-600",children:"Xác nhận xóa tài khoản"}),r.jsx("button",{onClick:()=>{c(!1),u({password:"",reason:"",confirmation:""})},className:"text-gray-400 hover:text-gray-500",children:r.jsx(zt,{className:"h-5 w-5"})})]}),r.jsxs("form",{onSubmit:N,className:"p-4 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Mật khẩu"}),r.jsx("input",{type:"password",name:"password",value:d.password,onChange:v,required:!0,className:"w-full px-3 py-2 rounded-md border border-gray-300 shadow-sm focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Nhập mật khẩu để xác nhận"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Lý do xóa tài khoản (tùy chọn)"}),r.jsx("textarea",{name:"reason",value:d.reason,onChange:v,rows:3,className:"w-full px-3 py-2 rounded-md border border-gray-300 shadow-sm focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Hãy cho chúng tôi biết lý do bạn muốn xóa tài khoản"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700",children:"Xác nhận xóa tài khoản"}),r.jsx("p",{className:"text-sm mb-2 text-gray-500",children:'Nhập "XÓA" để xác nhận rằng bạn muốn xóa tài khoản'}),r.jsx("input",{type:"text",name:"confirmation",value:d.confirmation,onChange:v,required:!0,className:"w-full px-3 py-2 rounded-md border border-gray-300 shadow-sm focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),r.jsxs("div",{className:"flex space-x-4 pt-2",children:[r.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 flex-1",children:i?"Đang xử lý...":"Xóa vĩnh viễn tài khoản"}),r.jsx("button",{type:"button",onClick:()=>{c(!1),u({password:"",reason:"",confirmation:""})},className:"px-4 py-2 rounded-md bg-gray-100 text-gray-700 hover:bg-gray-200 flex-1",children:"Hủy"})]})]})]})})]}),r.jsx("div",{className:"pt-4",children:r.jsx("button",{type:"submit",onClick:k,disabled:i,className:"px-4 py-2 rounded-md text-white bg-green-600 hover:bg-green-700 active:bg-green-800 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:i?"Đang lưu...":"Lưu thay đổi"})})]})]})};function Yh(){return(Yh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}function Q4(e,t){if(e==null)return{};var n,s,i={},a=Object.keys(e);for(s=0;s<a.length;s++)t.indexOf(n=a[s])>=0||(i[n]=e[n]);return i}function cg(e){var t=h.useRef(e),n=h.useRef(function(s){t.current&&t.current(s)});return t.current=e,n.current}var Wl=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),e>n?n:e<t?t:e},fl=function(e){return"touches"in e},dg=function(e){return e&&e.ownerDocument.defaultView||self},hw=function(e,t,n){var s=e.getBoundingClientRect(),i=fl(t)?function(a,o){for(var l=0;l<a.length;l++)if(a[l].identifier===o)return a[l];return a[0]}(t.touches,n):t;return{left:Wl((i.pageX-(s.left+dg(e).pageXOffset))/s.width),top:Wl((i.pageY-(s.top+dg(e).pageYOffset))/s.height)}},mw=function(e){!fl(e)&&e.preventDefault()},J4=Fe.memo(function(e){var t=e.onMove,n=e.onKey,s=Q4(e,["onMove","onKey"]),i=h.useRef(null),a=cg(t),o=cg(n),l=h.useRef(null),c=h.useRef(!1),d=h.useMemo(function(){var p=function(b){mw(b),(fl(b)?b.touches.length>0:b.buttons>0)&&i.current?a(hw(i.current,b,l.current)):g(!1)},x=function(){return g(!1)};function g(b){var w=c.current,k=dg(i.current),v=b?k.addEventListener:k.removeEventListener;v(w?"touchmove":"mousemove",p),v(w?"touchend":"mouseup",x)}return[function(b){var w=b.nativeEvent,k=i.current;if(k&&(mw(w),!function(N,C){return C&&!fl(N)}(w,c.current)&&k)){if(fl(w)){c.current=!0;var v=w.changedTouches||[];v.length&&(l.current=v[0].identifier)}k.focus(),a(hw(k,w,l.current)),g(!0)}},function(b){var w=b.which||b.keyCode;w<37||w>40||(b.preventDefault(),o({left:w===39?.05:w===37?-.05:0,top:w===40?.05:w===38?-.05:0}))},g]},[o,a]),u=d[0],m=d[1],f=d[2];return h.useEffect(function(){return f},[f]),Fe.createElement("div",Yh({},s,{onTouchStart:u,onMouseDown:u,className:"react-colorful__interactive",ref:i,onKeyDown:m,tabIndex:0,role:"slider"}))}),tx=function(e){return e.filter(Boolean).join(" ")},Z4=function(e){var t=e.color,n=e.left,s=e.top,i=s===void 0?.5:s,a=tx(["react-colorful__pointer",e.className]);return Fe.createElement("div",{className:a,style:{top:100*i+"%",left:100*n+"%"}},Fe.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},Nn=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=Math.pow(10,t)),Math.round(n*e)/n},Jee=function(e){return rte(ug(e))},ug=function(e){return e[0]==="#"&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?Nn(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:e.length===8?Nn(parseInt(e.substring(6,8),16)/255,2):1}},Zee=function(e){return nte(tte(e))},ete=function(e){var t=e.s,n=e.v,s=e.a,i=(200-t)*n/100;return{h:Nn(e.h),s:Nn(i>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0),l:Nn(i/2),a:Nn(s,2)}},hg=function(e){var t=ete(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},tte=function(e){var t=e.h,n=e.s,s=e.v,i=e.a;t=t/360*6,n/=100,s/=100;var a=Math.floor(t),o=s*(1-n),l=s*(1-(t-a)*n),c=s*(1-(1-t+a)*n),d=a%6;return{r:Nn(255*[s,l,o,o,c,s][d]),g:Nn(255*[c,s,s,l,o,o][d]),b:Nn(255*[o,o,c,s,s,l][d]),a:Nn(i,2)}},Gc=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},nte=function(e){var t=e.r,n=e.g,s=e.b,i=e.a,a=i<1?Gc(Nn(255*i)):"";return"#"+Gc(t)+Gc(n)+Gc(s)+a},rte=function(e){var t=e.r,n=e.g,s=e.b,i=e.a,a=Math.max(t,n,s),o=a-Math.min(t,n,s),l=o?a===t?(n-s)/o:a===n?2+(s-t)/o:4+(t-n)/o:0;return{h:Nn(60*(l<0?l+6:l)),s:Nn(a?o/a*100:0),v:Nn(a/255*100),a:i}},ste=Fe.memo(function(e){var t=e.hue,n=e.onChange,s=tx(["react-colorful__hue",e.className]);return Fe.createElement("div",{className:s},Fe.createElement(J4,{onMove:function(i){n({h:360*i.left})},onKey:function(i){n({h:Wl(t+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":Nn(t),"aria-valuemax":"360","aria-valuemin":"0"},Fe.createElement(Z4,{className:"react-colorful__hue-pointer",left:t/360,color:hg({h:t,s:100,v:100,a:1})})))}),ite=Fe.memo(function(e){var t=e.hsva,n=e.onChange,s={backgroundColor:hg({h:t.h,s:100,v:100,a:1})};return Fe.createElement("div",{className:"react-colorful__saturation",style:s},Fe.createElement(J4,{onMove:function(i){n({s:100*i.left,v:100-100*i.top})},onKey:function(i){n({s:Wl(t.s+100*i.left,0,100),v:Wl(t.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+Nn(t.s)+"%, Brightness "+Nn(t.v)+"%"},Fe.createElement(Z4,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:hg(t)})))}),eC=function(e,t){if(e===t)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0},ate=function(e,t){return e.toLowerCase()===t.toLowerCase()||eC(ug(e),ug(t))};function ote(e,t,n){var s=cg(n),i=h.useState(function(){return e.toHsva(t)}),a=i[0],o=i[1],l=h.useRef({color:t,hsva:a});h.useEffect(function(){if(!e.equal(t,l.current.color)){var d=e.toHsva(t);l.current={hsva:d,color:t},o(d)}},[t,e]),h.useEffect(function(){var d;eC(a,l.current.hsva)||e.equal(d=e.fromHsva(a),l.current.color)||(l.current={hsva:a,color:d},s(d))},[a,e,s]);var c=h.useCallback(function(d){o(function(u){return Object.assign({},u,d)})},[]);return[a,c]}var lte=typeof window<"u"?h.useLayoutEffect:h.useEffect,cte=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},fw=new Map,dte=function(e){lte(function(){var t=e.current?e.current.ownerDocument:document;if(t!==void 0&&!fw.has(t)){var n=t.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,fw.set(t,n);var s=cte();s&&n.setAttribute("nonce",s),t.head.appendChild(n)}},[])},ute=function(e){var t=e.className,n=e.colorModel,s=e.color,i=s===void 0?n.defaultColor:s,a=e.onChange,o=Q4(e,["className","colorModel","color","onChange"]),l=h.useRef(null);dte(l);var c=ote(n,i,a),d=c[0],u=c[1],m=tx(["react-colorful",t]);return Fe.createElement("div",Yh({},o,{ref:l,className:m}),Fe.createElement(ite,{hsva:d,onChange:u}),Fe.createElement(ste,{hue:d.h,onChange:u,className:"react-colorful__last-control"}))},hte={defaultColor:"000",toHsva:Jee,fromHsva:function(e){return Zee({h:e.h,s:e.s,v:e.v,a:1})},equal:ate},mte=function(e){return Fe.createElement(ute,Yh({},e,{colorModel:hte}))};const fte=()=>{var P,R,y,O,_,L,A,M,z,ie,X,te,B;const e=Ht(),{settings:t,loading:n}=gn(H=>H.user),[s,i]=h.useState(t?{...t}:null),{theme:a,themeColor:o,setThemeMode:l,setThemeColor:c,setCustomColors:d,availableColors:u}=I2(),[m,f]=h.useState(!1),[p,x]=h.useState("#3b82f6"),[g,b]=h.useState("primary"),[w,k]=h.useState({primary:"#3b82f6",secondary:"#60a5fa",accent:"#dbeafe",hover:"#2563eb",active:"#1d4ed8"}),v=(H,K,$)=>{s&&(i({...s,[H]:{...s[H],[K]:$}}),K==="theme"&&l($),K==="accentColor"&&c($))},N=(H,K)=>{s&&i({...s,[H]:{...s[H],[K]:!s[H][K]}})},C=(H,K)=>{x(H),k({...w,[K]:H})},T=()=>{d(w),v("preferences","accentColor","custom"),f(!1)},E=H=>{H.preventDefault(),s&&e(zi(s))};return h.useEffect(()=>{t&&t.preferences&&(t.preferences.theme&&l(t.preferences.theme),t.preferences.accentColor&&c(t.preferences.accentColor))},[]),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800 dark:text-white border-b pb-2",children:"Giao diện"}),r.jsxs("form",{onSubmit:E,className:"space-y-8",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200 dark:border-gray-700",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Chủ đề"})}),r.jsx("div",{className:"p-5",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{onClick:()=>v("preferences","theme","light"),className:`relative rounded-xl p-4 border-2 cursor-pointer transition-all ${((P=s==null?void 0:s.preferences)==null?void 0:P.theme)==="light"?"border-theme-primary bg-theme-accent bg-opacity-50":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"}`,children:[r.jsx("div",{className:"h-24 bg-white rounded-lg shadow-inner flex items-center justify-center mb-3",children:r.jsx("div",{className:"w-3/4 h-4 bg-theme-primary rounded-md"})}),r.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Sáng"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Giao diện nền sáng"}),((R=s==null?void 0:s.preferences)==null?void 0:R.theme)==="light"&&r.jsx("div",{className:"absolute top-2 right-2 h-4 w-4 bg-theme-primary rounded-full"})]}),r.jsxs("div",{onClick:()=>v("preferences","theme","dark"),className:`relative rounded-xl p-4 border-2 cursor-pointer transition-all ${((y=s==null?void 0:s.preferences)==null?void 0:y.theme)==="dark"?"border-theme-primary bg-theme-accent bg-opacity-20":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"}`,children:[r.jsx("div",{className:"h-24 bg-gray-900 rounded-lg shadow-inner flex items-center justify-center mb-3",children:r.jsx("div",{className:"w-3/4 h-4 bg-theme-secondary rounded-md"})}),r.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Tối"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Giao diện nền tối"}),((O=s==null?void 0:s.preferences)==null?void 0:O.theme)==="dark"&&r.jsx("div",{className:"absolute top-2 right-2 h-4 w-4 bg-theme-primary rounded-full"})]}),r.jsxs("div",{onClick:()=>v("preferences","theme","system"),className:`relative rounded-xl p-4 border-2 cursor-pointer transition-all ${((_=s==null?void 0:s.preferences)==null?void 0:_.theme)==="system"?"border-theme-primary bg-theme-accent bg-opacity-50 dark:bg-opacity-20":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"}`,children:[r.jsx("div",{className:"h-24 bg-gradient-to-r from-white to-gray-900 rounded-lg shadow-inner flex items-center justify-center mb-3",children:r.jsx("div",{className:"w-3/4 h-4 bg-purple-500 rounded-md"})}),r.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Hệ thống"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Tự động theo hệ thống"}),((L=s==null?void 0:s.preferences)==null?void 0:L.theme)==="system"&&r.jsx("div",{className:"absolute top-2 right-2 h-4 w-4 bg-theme-primary rounded-full"})]})]})})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200 dark:border-gray-700",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Cỡ chữ"})}),r.jsx("div",{className:"p-5",children:r.jsxs("div",{className:"max-w-md",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsx("button",{type:"button",onClick:()=>v("preferences","fontSize","small"),className:`
                    px-4 py-2 rounded-lg font-medium text-sm focus:outline-none border-2
                    ${((A=s==null?void 0:s.preferences)==null?void 0:A.fontSize)==="small"?"border-theme-primary bg-theme-accent text-theme-primary":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300"}
                    transition-colors
                  `,children:"Nhỏ"}),r.jsx("button",{type:"button",onClick:()=>v("preferences","fontSize","medium"),className:`
                    px-4 py-2 rounded-lg font-medium text-base focus:outline-none border-2
                    ${((M=s==null?void 0:s.preferences)==null?void 0:M.fontSize)==="medium"?"border-theme-primary bg-theme-accent text-theme-primary":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300"}
                    transition-colors
                  `,children:"Vừa"}),r.jsx("button",{type:"button",onClick:()=>v("preferences","fontSize","large"),className:`
                    px-4 py-2 rounded-lg font-medium text-lg focus:outline-none border-2
                    ${((z=s==null?void 0:s.preferences)==null?void 0:z.fontSize)==="large"?"border-theme-primary bg-theme-accent text-theme-primary":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300"}
                    transition-colors
                  `,children:"Lớn"})]}),r.jsx("p",{className:"mt-3 text-sm text-gray-500 dark:text-gray-400",children:"Điều chỉnh kích thước chữ cho toàn bộ ứng dụng"})]})})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200 dark:border-gray-700",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Màu sắc"})}),r.jsxs("div",{className:"p-5",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Màu chủ đạo"}),r.jsxs("div",{className:"grid grid-cols-6 gap-3",children:[u.filter(H=>H!=="custom").map(H=>{var K;return r.jsx("button",{type:"button",onClick:()=>v("preferences","accentColor",H),className:`
                    w-10 h-10 rounded-full focus:outline-none border-2
                    ${((K=s==null?void 0:s.preferences)==null?void 0:K.accentColor)===H?"border-gray-600 dark:border-gray-300":"border-transparent"}
                    transition-colors
                  `,style:{backgroundColor:{blue:"#3b82f6",red:"#ef4444",green:"#10b981",purple:"#8b5cf6",orange:"#f97316"}[H]},"aria-label":`Màu ${H}`},H)}),r.jsx("button",{type:"button",onClick:()=>f(!m),className:`
                  w-10 h-10 rounded-full focus:outline-none border-2
                  ${((ie=s==null?void 0:s.preferences)==null?void 0:ie.accentColor)==="custom"?"border-gray-600 dark:border-gray-300":"border-transparent"}
                  transition-colors bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500 text-white flex items-center justify-center
                `,"aria-label":"Tùy chỉnh màu",children:"+"})]}),r.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Thay đổi màu chủ đạo của giao diện người dùng"}),m&&r.jsx("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex justify-between mb-2",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Tùy chỉnh màu sắc"}),r.jsx("button",{type:"button",onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:"✕"})]}),r.jsx("div",{className:"flex space-x-3 mb-4",children:["primary","secondary","accent","hover","active"].map(H=>r.jsx("button",{type:"button",onClick:()=>b(H),className:`px-3 py-1.5 rounded text-xs font-medium ${g===H?"bg-theme-primary text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}`,children:H},H))}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx("div",{children:r.jsx(mte,{color:w[g],onChange:H=>C(H,g)})}),r.jsxs("div",{children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Giá trị hex"}),r.jsx("input",{type:"text",value:w[g],onChange:H=>C(H.target.value,g),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),r.jsxs("div",{className:"flex flex-col space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Xem trước"}),r.jsx("div",{className:"w-full h-24 rounded-md flex items-center justify-center",style:{backgroundColor:w.primary},children:r.jsx("span",{className:"text-white font-bold",children:"Chính"})}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("div",{className:"w-1/2 h-12 rounded-md flex items-center justify-center",style:{backgroundColor:w.secondary},children:r.jsx("span",{className:"text-white text-sm",children:"Phụ"})}),r.jsx("div",{className:"w-1/2 h-12 rounded-md flex items-center justify-center",style:{backgroundColor:w.accent},children:r.jsx("span",{className:"text-gray-800 text-sm",children:"Nhấn"})})]})]})]})]}),r.jsx("div",{className:"mt-4 flex justify-end",children:r.jsx("button",{type:"button",onClick:T,className:"px-4 py-2 bg-theme-primary text-white rounded-md hover:bg-theme-hover",children:"Áp dụng"})})]})})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200 dark:border-gray-700",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Bố cục"})}),r.jsxs("div",{className:"p-5 space-y-5",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hiển thị thanh bên"}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:((X=s==null?void 0:s.preferences)==null?void 0:X.sidebarPosition)||"left",onChange:H=>v("preferences","sidebarPosition",H.target.value),className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm appearance-none focus:outline-none focus:ring-2 focus:ring-theme-primary focus:border-theme-primary bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[r.jsx("option",{value:"left",children:"Bên trái"}),r.jsx("option",{value:"right",children:"Bên phải"}),r.jsx("option",{value:"hidden",children:"Ẩn"})]}),r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:r.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),r.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Vị trí hiển thị của thanh điều hướng bên"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Hiệu ứng chuyển động"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Bật/tắt hiệu ứng chuyển động trong giao diện người dùng"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:((te=s==null?void 0:s.preferences)==null?void 0:te.animations)!==!1,onChange:()=>N("preferences","animations"),className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 dark:bg-gray-700 peer-checked:bg-theme-primary
                    peer-focus:ring-4 peer-focus:ring-theme-accent
                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                    after:bg-white after:rounded-full after:h-5 after:w-5
                    after:transition-all peer-checked:after:translate-x-5`})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Chế độ tiết kiệm dữ liệu"}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Giảm tải hình ảnh và hiệu ứng để tiết kiệm dữ liệu"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:((B=s==null?void 0:s.preferences)==null?void 0:B.dataSaver)===!0,onChange:()=>N("preferences","dataSaver"),className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 dark:bg-gray-700 peer-checked:bg-theme-primary
                    peer-focus:ring-4 peer-focus:ring-theme-accent
                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                    after:bg-white after:rounded-full after:h-5 after:w-5
                    after:transition-all peer-checked:after:translate-x-5`})]})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200 dark:border-gray-700",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"CSS tùy chỉnh"})}),r.jsx("div",{className:"p-5",children:r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Mã CSS tùy chỉnh"}),r.jsx("textarea",{rows:"5",placeholder:"/* Nhập mã CSS tùy chỉnh của bạn tại đây */",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-theme-primary focus:border-theme-primary font-mono text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:"Thêm mã CSS tùy chỉnh để điều chỉnh giao diện người dùng. Cài đặt này chỉ áp dụng cho tài khoản của bạn."})]})})]}),r.jsx("div",{className:"pt-6",children:r.jsx("button",{type:"submit",disabled:n,className:"px-4 py-2 rounded-md text-white bg-theme-primary hover:bg-theme-hover active:bg-theme-active focus:outline-none focus:ring-2 focus:ring-theme-primary focus:ring-offset-2",children:n?"Đang lưu...":"Lưu thay đổi"})})]})]})},pte=()=>{var L,A,M,z,ie,X,te,B,H,K,$,me,ke,ye,se,G,W,Z,Y,ee;const e=Ht(),t=St(),n=h.useRef(null),{settings:s,profileInfo:i,loading:a,error:o,success:l,message:c}=gn(ae=>ae.user),[d,u]=h.useState("general"),[m,f]=h.useState(null),[p,x]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[g,b]=h.useState({password:"",reason:"",confirmation:""}),[w,k]=h.useState(!1),[v,N]=h.useState(!1);h.useEffect(()=>{e(Xo())},[e]),h.useEffect(()=>{var ae;s&&(f({...s}),((ae=s.preferences)==null?void 0:ae.theme)==="dark"&&N(!0))},[s]),h.useEffect(()=>{l&&c&&(re.success(c),e(Kx())),o&&(re.error(o),e(Kx()))},[l,o,c,e]);const C=ae=>{u(ae)},T=(ae,de,Re)=>{m&&f({...m,[ae]:{...m[ae],[de]:Re}})},E=(ae,de)=>{m&&f({...m,[ae]:{...m[ae],[de]:!m[ae][de]}})},P=ae=>{ae.preventDefault(),m&&e(zi(m))},R=()=>{n.current.click()},y=ae=>{if(ae.target.files&&ae.target.files[0]){const de=ae.target.files[0],Re=new FormData;Re.append("image",de),e(hd(Re))}},O=()=>{e(Tg()),t("/login")};if(!m||!i)return r.jsx("div",{className:"flex justify-center items-center h-96",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})});const _=[{id:"general",label:"Hồ sơ cá nhân",icon:Nl},{id:"account",label:"Tài khoản",icon:ep},{id:"appearance",label:"Giao diện",icon:Zs},{id:"accessibility",label:"Trợ năng",icon:Nl},{id:"notifications",label:"Thông báo",icon:Qo}];return r.jsxs("div",{className:"w-full mx-auto px-4 sm:px-6 lg:px-8 py-6 bg-white text-gray-900",children:[r.jsx(Z2,{position:"top-right",autoClose:5e3,theme:"light"}),r.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[r.jsxs("div",{className:"lg:w-1/4",children:[r.jsx("div",{className:"mb-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsxs("div",{onClick:R,className:"w-16 h-16 rounded-full overflow-hidden bg-gray-200 mr-4 cursor-pointer relative group",children:[i.profileImage?r.jsx("img",{src:i.profileImage,alt:"Profile",className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200",children:r.jsx("span",{className:"text-2xl font-bold",children:((L=i.fullName)==null?void 0:L.charAt(0))||"?"})}),r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(Vd,{className:"h-5 w-5 text-white"})})]}),r.jsx("input",{type:"file",ref:n,className:"hidden",onChange:y,accept:"image/*"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800",children:i.fullName||"Người dùng"}),r.jsx("p",{className:"text-gray-600",children:"Tài khoản cá nhân của bạn"})]})]})}),r.jsx("nav",{className:"border-l-4 border-transparent",children:_.map(ae=>r.jsx("button",{onClick:()=>C(ae.id),className:`flex items-center w-full px-4 py-2 mb-1 border-l-4 transition-all ${d===ae.id?"border-l-blue-500 text-black font-medium bg-blue-50":"border-l-transparent text-gray-700 hover:bg-gray-100"}`,style:{marginLeft:"-1rem"},children:r.jsx("span",{children:ae.label})},ae.id))}),r.jsxs("div",{className:"mt-8",children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Truy cập"}),r.jsxs("nav",{className:"border-l-4 border-transparent",children:[r.jsx("button",{onClick:()=>C("payment"),className:`flex items-center w-full px-4 py-2 mb-1 border-l-4 transition-all ${d==="payment"?"border-l-blue-500 text-black font-medium bg-blue-50":"border-l-transparent text-gray-700 hover:bg-gray-100"}`,style:{marginLeft:"-1rem"},children:r.jsx("span",{children:"Thanh toán và giấy phép"})}),r.jsx("button",{onClick:()=>C("email"),className:`flex items-center w-full px-4 py-2 mb-1 border-l-4 transition-all ${d==="email"?"border-l-blue-500 text-black font-medium bg-blue-50":"border-l-transparent text-gray-700 hover:bg-gray-100"}`,style:{marginLeft:"-1rem"},children:r.jsx("span",{children:"Email"})}),r.jsx("button",{onClick:()=>C("security"),className:`flex items-center w-full px-4 py-2 mb-1 border-l-4 transition-all ${d==="security"?"border-l-blue-500 text-black font-medium bg-blue-50":"border-l-transparent text-gray-700 hover:bg-gray-100"}`,style:{marginLeft:"-1rem"},children:r.jsx("span",{children:"Mật khẩu và xác thực"})}),r.jsx("button",{onClick:()=>C("loginsession"),className:`flex items-center w-full px-4 py-2 mb-1 border-l-4 transition-all ${d==="loginsession"?"border-l-blue-500 text-black font-medium bg-blue-50":"border-l-transparent text-gray-700 hover:bg-gray-100"}`,style:{marginLeft:"-1rem"},children:r.jsx("span",{children:"Phiên đăng nhập"})}),r.jsx("button",{onClick:()=>C("privacy"),className:`flex items-center w-full px-4 py-2 mb-1 border-l-4 transition-all ${d==="privacy"?"border-l-blue-500 text-black font-medium bg-blue-50":"border-l-transparent text-gray-700 hover:bg-gray-100"}`,style:{marginLeft:"-1rem"},children:r.jsx("span",{children:"Quyền riêng tư"})}),r.jsx("button",{onClick:()=>C("ssh"),className:`flex items-center w-full px-4 py-2 mb-1 border-l-4 transition-all ${d==="ssh"?"border-l-blue-500 text-black font-medium bg-blue-50":"border-l-transparent text-gray-700 hover:bg-gray-100"}`,style:{marginLeft:"-1rem"},children:r.jsx("span",{children:"Khóa SSH và GPG"})})]})]}),r.jsxs("div",{className:"mt-8",children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Mã nguồn, quy hoạch và tự động hóa"}),r.jsxs("nav",{className:"border-l-4 border-transparent",children:[r.jsx("button",{onClick:()=>C("archive"),className:`flex items-center w-full px-4 py-2 mb-1 border-l-4 transition-all ${d==="archive"?"border-l-blue-500 text-black font-medium bg-blue-50":"border-l-transparent text-gray-700 hover:bg-gray-100"}`,style:{marginLeft:"-1rem"},children:r.jsx("span",{children:"Kho lưu trữ"})}),r.jsx("button",{onClick:()=>C("codespace"),className:`flex items-center w-full px-4 py-2 mb-1 border-l-4 transition-all ${d==="codespace"?"border-l-blue-500 text-black font-medium bg-blue-50":"border-l-transparent text-gray-700 hover:bg-gray-100"}`,style:{marginLeft:"-1rem"},children:r.jsx("span",{children:"Không gian mã"})}),r.jsx("button",{onClick:()=>C("package"),className:`flex items-center w-full px-4 py-2 mb-1 border-l-4 transition-all ${d==="package"?"border-l-blue-500 text-black font-medium bg-blue-50":"border-l-transparent text-gray-700 hover:bg-gray-100"}`,style:{marginLeft:"-1rem"},children:r.jsx("span",{children:"Gói"})})]})]}),r.jsx("div",{className:"mt-8",children:r.jsxs("button",{onClick:O,className:"flex items-center w-full px-4 py-2 mb-1 text-gray-700 hover:bg-red-50 hover:text-red-600 transition-all border border-transparent hover:border-red-300 rounded-md",children:[r.jsx(_I,{className:"h-5 w-5 mr-2 text-red-500"}),r.jsx("span",{children:"Đăng xuất"})]})})]}),r.jsx("div",{className:"lg:w-3/4",children:r.jsx(R0,{mode:"wait",children:r.jsxs(qe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:[d==="payment"&&r.jsx(uw,{}),d==="email"&&r.jsx(Wee,{}),d==="loginsession"&&r.jsx(Hee,{}),d==="privacy"&&r.jsx(qee,{}),d==="ssh"&&r.jsx(Kee,{}),d==="archive"&&r.jsx(Gee,{}),d==="codespace"&&r.jsx(Xee,{}),d==="package"&&r.jsx(uw,{}),d==="account"&&r.jsx(Qee,{}),d==="general"&&r.jsx(Vee,{}),d==="security"&&r.jsx(Yee,{}),d==="appearance"&&r.jsx(fte,{}),d==="notifications"&&r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800 border-b pb-2",children:"Thông báo"}),r.jsxs("form",{onSubmit:P,className:"space-y-6",children:[r.jsxs("div",{className:"divide-y divide-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between py-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Thông báo email"}),r.jsx("p",{className:"text-sm mt-1 text-gray-500",children:"Nhận thông báo qua email"})]}),r.jsx("div",{className:"ml-3",children:r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:(A=m==null?void 0:m.notifications)==null?void 0:A.email,onChange:()=>E("notifications","email"),className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                                  peer-focus:ring-4 peer-focus:ring-blue-300
                                  after:content-[''] after:absolute after:top-0.5 after:left-0.5
                                after:bg-white after:rounded-full after:h-5 after:w-5
                                after:transition-all peer-checked:after:translate-x-5`})]})})]}),r.jsxs("div",{className:"flex items-center justify-between py-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Thông báo đẩy"}),r.jsx("p",{className:"text-sm mt-1 text-gray-500",children:"Nhận thông báo trên thiết bị"})]}),r.jsx("div",{className:"ml-3",children:r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:(M=m==null?void 0:m.notifications)==null?void 0:M.push,onChange:()=>E("notifications","push"),className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                                peer-focus:ring-4 peer-focus:ring-blue-300
                                after:content-[''] after:absolute after:top-0.5 after:left-0.5
                                after:bg-white after:rounded-full after:h-5 after:w-5
                                after:transition-all peer-checked:after:translate-x-5`})]})})]}),r.jsxs("div",{className:"flex items-center justify-between py-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Cập nhật khóa học"}),r.jsx("p",{className:"text-sm mt-1 text-gray-500",children:"Thông báo khi khóa học có cập nhật mới"})]}),r.jsx("div",{className:"ml-3",children:r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:(z=m==null?void 0:m.notifications)==null?void 0:z.courseUpdates,onChange:()=>E("notifications","courseUpdates"),className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                                peer-focus:ring-4 peer-focus:ring-blue-300
                                after:content-[''] after:absolute after:top-0.5 after:left-0.5
                                after:bg-white after:rounded-full after:h-5 after:w-5
                                after:transition-all peer-checked:after:translate-x-5`})]})})]})]}),r.jsx("div",{className:"pt-6",children:r.jsx("button",{type:"submit",disabled:a,className:"px-4 py-2 rounded-md text-white bg-green-600 hover:bg-green-700 active:bg-green-800 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:a?"Đang lưu...":"Lưu thay đổi"})})]})]}),d==="accessibility"&&r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800 border-b pb-2",children:"Trợ năng"}),r.jsxs("form",{onSubmit:P,className:"space-y-8",children:[r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Hỗ trợ trình đọc màn hình"})}),r.jsxs("div",{className:"p-5 space-y-5",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Cải thiện trình đọc màn hình"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Tối ưu hóa trang web cho người dùng trình đọc màn hình"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:((ie=m==null?void 0:m.accessibility)==null?void 0:ie.screenReader)===!0,onChange:()=>E("accessibility","screenReader"),className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                                    peer-focus:ring-4 peer-focus:ring-blue-300
                                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                                    after:bg-white after:rounded-full after:h-5 after:w-5
                                    after:transition-all peer-checked:after:translate-x-5`})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Mô tả hình ảnh"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Hiển thị mô tả chi tiết cho hình ảnh"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:((X=m==null?void 0:m.accessibility)==null?void 0:X.imageDescriptions)===!0,onChange:()=>E("accessibility","imageDescriptions"),className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                                    peer-focus:ring-4 peer-focus:ring-blue-300
                                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                                    after:bg-white after:rounded-full after:h-5 after:w-5
                                    after:transition-all peer-checked:after:translate-x-5`})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Điều hướng bàn phím"})}),r.jsxs("div",{className:"p-5 space-y-5",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Chỉ báo tiêu điểm"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Hiển thị đường viền rõ ràng xung quanh phần tử đang được chọn"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:((te=m==null?void 0:m.accessibility)==null?void 0:te.focusIndicator)!==!1,onChange:()=>E("accessibility","focusIndicator"),className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                                    peer-focus:ring-4 peer-focus:ring-blue-300
                                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                                    after:bg-white after:rounded-full after:h-5 after:w-5
                                    after:transition-all peer-checked:after:translate-x-5`})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Độ trễ phím (ms)"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"range",min:"0",max:"1000",step:"50",value:((B=m==null?void 0:m.accessibility)==null?void 0:B.keyboardDelay)||0,onChange:ae=>T("accessibility","keyboardDelay",parseInt(ae.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),r.jsx("span",{className:"text-sm text-gray-700 w-12 text-center",children:((H=m==null?void 0:m.accessibility)==null?void 0:H.keyboardDelay)||0})]}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Điều chỉnh độ trễ khi nhấn và giữ phím"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Chuyển động & Hiệu ứng"})}),r.jsxs("div",{className:"p-5 space-y-5",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Giảm chuyển động"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Giảm thiểu hoặc loại bỏ các hiệu ứng chuyển động"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:((K=m==null?void 0:m.accessibility)==null?void 0:K.reducedMotion)===!0,onChange:()=>E("accessibility","reducedMotion"),className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                                    peer-focus:ring-4 peer-focus:ring-blue-300
                                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                                    after:bg-white after:rounded-full after:h-5 after:w-5
                                    after:transition-all peer-checked:after:translate-x-5`})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Bỏ qua hiệu ứng"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Tắt các hiệu ứng đặc biệt như lấp lánh và hiệu ứng hover"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:(($=m==null?void 0:m.accessibility)==null?void 0:$.disableEffects)===!0,onChange:()=>E("accessibility","disableEffects"),className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                                    peer-focus:ring-4 peer-focus:ring-blue-300
                                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                                    after:bg-white after:rounded-full after:h-5 after:w-5
                                    after:transition-all peer-checked:after:translate-x-5`})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tốc độ hiệu ứng"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"range",min:"50",max:"200",step:"10",value:((me=m==null?void 0:m.accessibility)==null?void 0:me.animationSpeed)||100,onChange:ae=>T("accessibility","animationSpeed",parseInt(ae.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),r.jsxs("span",{className:"text-sm text-gray-700 w-12 text-center",children:[((ke=m==null?void 0:m.accessibility)==null?void 0:ke.animationSpeed)||100,"%"]})]}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Điều chỉnh tốc độ hiệu ứng chuyển động (100% là bình thường)"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Điều chỉnh hiển thị"})}),r.jsxs("div",{className:"p-5 space-y-5",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Chế độ tương phản cao"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Tăng cường tương phản giữa văn bản và nền"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:((ye=m==null?void 0:m.accessibility)==null?void 0:ye.highContrast)===!0,onChange:()=>E("accessibility","highContrast"),className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                                    peer-focus:ring-4 peer-focus:ring-blue-300
                                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                                    after:bg-white after:rounded-full after:h-5 after:w-5
                                    after:transition-all peer-checked:after:translate-x-5`})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Khoảng cách chữ"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"range",min:"0",max:"10",step:"1",value:((se=m==null?void 0:m.accessibility)==null?void 0:se.letterSpacing)||0,onChange:ae=>T("accessibility","letterSpacing",parseInt(ae.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),r.jsx("span",{className:"text-sm text-gray-700 w-12 text-center",children:((G=m==null?void 0:m.accessibility)==null?void 0:G.letterSpacing)||0})]}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Điều chỉnh khoảng cách giữa các chữ cái"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Khoảng cách dòng"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"range",min:"100",max:"200",step:"10",value:((W=m==null?void 0:m.accessibility)==null?void 0:W.lineHeight)||150,onChange:ae=>T("accessibility","lineHeight",parseInt(ae.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),r.jsxs("span",{className:"text-sm text-gray-700 w-12 text-center",children:[((Z=m==null?void 0:m.accessibility)==null?void 0:Z.lineHeight)||150,"%"]})]}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Điều chỉnh khoảng cách giữa các dòng chữ"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm",children:[r.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Tùy chọn nội dung"})}),r.jsxs("div",{className:"p-5 space-y-5",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Hiển thị phụ đề"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Tự động hiển thị phụ đề cho video và âm thanh"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:((Y=m==null?void 0:m.accessibility)==null?void 0:Y.alwaysShowCaptions)===!0,onChange:()=>E("accessibility","alwaysShowCaptions"),className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                                    peer-focus:ring-4 peer-focus:ring-blue-300
                                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                                    after:bg-white after:rounded-full after:h-5 after:w-5
                                    after:transition-all peer-checked:after:translate-x-5`})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Tự động phát"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Ngăn tự động phát nội dung âm thanh và video"})]}),r.jsxs("label",{className:"relative inline-flex cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:((ee=m==null?void 0:m.accessibility)==null?void 0:ee.preventAutoplay)===!0,onChange:()=>E("accessibility","preventAutoplay"),className:"sr-only peer"}),r.jsx("div",{className:`w-11 h-6 rounded-full peer bg-gray-200 peer-checked:bg-blue-600
                                    peer-focus:ring-4 peer-focus:ring-blue-300
                                    after:content-[''] after:absolute after:top-0.5 after:left-0.5
                                    after:bg-white after:rounded-full after:h-5 after:w-5
                                    after:transition-all peer-checked:after:translate-x-5`})]})]})]})]}),r.jsx("div",{className:"pt-6",children:r.jsx("button",{type:"submit",disabled:a,className:"px-4 py-2 rounded-md text-white bg-green-600 hover:bg-green-700 active:bg-green-800 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:a?"Đang lưu...":"Lưu thay đổi"})})]})]})]},d)})})]})]})},gte=()=>{const e=typeof window.PublicKeyCredential<"u",t=e&&typeof window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable=="function";return console.log("WebAuthn Support Check:",{hasCredentials:e,hasBiometricCheck:t}),e},xte=()=>{const e=lr(),t=St(),n=Ht(),{login:s,isAuthenticated:i}=Kn(),[a,o]=h.useState(!1),[l,c]=h.useState({email:"",password:"",remember:!1}),[d,u]=h.useState(!1),[m,f]=h.useState(!1),[p,x]=h.useState(""),[g,b]=h.useState(""),[w,k]=h.useState(!1),[v,N]=h.useState(!1),[C,T]=h.useState(0),E=3,P=h.useRef(null),R=h.useRef(null);h.useEffect(()=>{const L=gte();N(L),L&&typeof window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable=="function"&&window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable().then(A=>{console.log(`Platform authenticator (biometrics) available: ${A}`)}).catch(A=>{console.error("Error checking platform authenticator:",A)})},[]),h.useEffect(()=>()=>{P.current&&clearTimeout(P.current)},[]),h.useEffect(()=>{var L;(L=e.state)!=null&&L.message&&b(e.state.message),i&&!w&&t("/",{replace:!0}),k(!0)},[e,i,t,w]);const y=async L=>{L.preventDefault(),x(""),u(!0);try{const A=await s(l.email,l.password);A.success?O(A.user):x(A.error||"Đăng nhập thất bại")}catch(A){x(A.message||"Đăng nhập thất bại")}finally{u(!1)}},O=h.useCallback(L=>{console.log("handleLoginSuccess called with:",L);const A={...L,id:L.id||L.UserID,UserID:L.UserID||L.id,username:L.username||L.Username,email:L.email||L.Email,role:(L.role||L.Role||"STUDENT").toUpperCase(),token:L.token};n(W2(A)),A.token&&(localStorage.setItem("token",A.token),localStorage.setItem("authToken",A.token)),localStorage.setItem("user",JSON.stringify(A)),dt.success("Đăng nhập thành công!"),console.log("Navigating to home page after successful login"),t("/home",{replace:!0})},[n,t]),_=async()=>{if(C>=E){dt.error("Quá nhiều lần thử không thành công. Vui lòng sử dụng mật khẩu.");return}if(!window.PublicKeyCredential){dt.error("Trình duyệt của bạn không hỗ trợ xác thực sinh trắc học."),console.error("WebAuthn is not supported in this browser");return}if(x(""),!l.email){x("Vui lòng nhập email để đăng nhập bằng sinh trắc học"),dt.error("Vui lòng nhập email trước khi sử dụng sinh trắc học"),R.current&&R.current.focus();return}try{f(!0);let L;console.log(`Requesting authentication options for email: ${l.email}`);try{const B="http://localhost:5001";console.log(`Using API base URL: ${B}`);const H=await De.post(`${B}/api/passkeys/auth/options`,{email:l.email});if(console.log("Server response for auth options:",H.data),!H.data.success)throw new Error(H.data.message||"Không thể tạo yêu cầu xác thực");L=H.data.options}catch(B){throw console.error("Error fetching authentication options:",B),B.response?(console.error("Server response:",B.response.data),console.error("Status code:",B.response.status)):B.request?(console.error("No response received:",B.request),console.error("Network error or server not running")):console.error("Error setting up request:",B.message),new Error(`Lỗi khi lấy thông tin xác thực: ${B.message}`)}try{L.challenge=Uint8Array.from(atob(L.challenge.replace(/-/g,"+").replace(/_/g,"/")),B=>B.charCodeAt(0)),L.allowCredentials&&(L.allowCredentials=L.allowCredentials.map(B=>({...B,id:Uint8Array.from(atob(B.id.replace(/-/g,"+").replace(/_/g,"/")),H=>H.charCodeAt(0))})))}catch(B){throw console.error("Error preparing WebAuthn options:",B),new Error("Lỗi định dạng dữ liệu xác thực")}dt("Vui lòng xác thực bằng sinh trắc học của thiết bị khi được yêu cầu"),console.log("🔐 Activating device biometric authentication - watch for native OS prompt"),console.log("Authentication options:",JSON.stringify({...L,challenge:"Uint8Array",allowCredentials:L.allowCredentials?"Array of credentials":void 0})),await new Promise(B=>setTimeout(B,100));const A=await navigator.credentials.get({publicKey:L});console.log("✅ Native biometric authentication successful - processing server verification");let M;try{M={id:A.id,rawId:btoa(String.fromCharCode(...new Uint8Array(A.rawId))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),response:{clientDataJSON:btoa(String.fromCharCode(...new Uint8Array(A.response.clientDataJSON))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),authenticatorData:btoa(String.fromCharCode(...new Uint8Array(A.response.authenticatorData))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),signature:btoa(String.fromCharCode(...new Uint8Array(A.response.signature))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),userHandle:A.response.userHandle?btoa(String.fromCharCode(...new Uint8Array(A.response.userHandle))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""):null},type:A.type}}catch(B){throw console.error("Error encoding credential for server:",B),new Error("Lỗi xử lý dữ liệu sinh trắc học")}let z;try{if(z=await De.post("http://localhost:5001/api/passkeys/auth/verify",{email:l.email,response:M}),console.log("Server verification response:",z.data),!z.data.success)throw new Error(z.data.message||"Xác thực không thành công")}catch(B){throw console.error("Error during server verification:",B),B.response?(console.error("Server response:",B.response.data),console.error("Status code:",B.response.status)):B.request?console.error("No response received:",B.request):console.error("Error setting up request:",B.message),new Error(`Lỗi xác thực với máy chủ: ${B.message}`)}T(0);const{user:ie,tokens:X}=z.data,te={...ie,token:X.accessToken,UserID:ie.id,username:ie.username,role:ie.role||"STUDENT"};console.log("Constructed user object for login:",te),localStorage.setItem("token",X.accessToken),localStorage.setItem("authToken",X.accessToken),O(te),dt.success("Đăng nhập bằng sinh trắc học thành công!"),setTimeout(()=>{window.location.pathname.includes("/login")&&(console.log("Backup navigation to home triggered"),t("/home",{replace:!0}))},1e3)}catch(L){console.error("❌ Passkey authentication error:",L);const A=C+1;if(T(A),A>=E)x("Quá nhiều lần thử không thành công. Vui lòng sử dụng mật khẩu."),dt.error("Quá nhiều lần thử không thành công. Vui lòng sử dụng mật khẩu.");else{let M=`Xác thực sinh trắc học thất bại (lần thử ${A}/${E}).`;L.name==="NotAllowedError"?M+=" Người dùng từ chối xác thực hoặc không có sinh trắc học được đăng ký.":L.name==="SecurityError"?M+=" Lỗi bảo mật: yêu cầu xác thực phải đến từ nguồn an toàn (HTTPS).":L.name==="AbortError"?M+=" Xác thực bị hủy.":L.name==="NotSupportedError"?M+=" Phương thức xác thực không được hỗ trợ.":M+=` ${L.message||""}`,x(M),dt.error(M)}}finally{f(!1),P.current&&(clearTimeout(P.current),P.current=null)}};return r.jsxs("div",{className:"flex flex-col min-h-screen",children:[r.jsxs("div",{className:"flex min-h-screen",children:[r.jsx("div",{className:"flex-1 flex items-center justify-center bg-white",children:r.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-md w-full px-6 py-12",children:[r.jsxs(qe.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2,duration:.5},className:"text-center",children:[r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx("img",{className:"h-14 w-auto",src:"/images/education-icon.svg",alt:"Education Icon"}),r.jsx("h1",{className:"text-4xl font-bold text-blue-600",children:"Learning"})]}),r.jsx("h2",{className:"mt-8 text-3xl font-extrabold text-gray-900",children:"Chào mừng trở lại!"}),r.jsx("p",{className:"mt-3 text-base text-gray-600",children:"Đăng nhập để tiếp tục hành trình học tập của bạn"})]}),g&&r.jsx(qe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-6 bg-blue-50 border-l-4 border-blue-400 p-4 rounded-md",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2h-1V9a1 1 0 00-1-1z",clipRule:"evenodd"})})}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm text-blue-700",children:g})})]})}),p&&r.jsx(qe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-6 bg-red-50 border-l-4 border-red-400 p-4 rounded-md",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm text-red-700",children:p})})]})}),r.jsxs(qe.form,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.5},className:"mt-8 space-y-6",onSubmit:y,children:[r.jsxs("div",{className:"space-y-5",children:[r.jsxs("div",{children:[r.jsx("div",{className:"flex justify-between items-center mb-2",children:r.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Email"})}),r.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(mo,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{type:"email",required:!0,value:l.email,onChange:L=>c({...l,email:L.target.value}),className:"pl-10 block w-full px-4 py-3 border border-gray-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"your@email.com",ref:R})]})]}),r.jsx("div",{children:r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"flex items-center",children:r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mật khẩu"})}),r.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Xr,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{type:"password",required:!0,value:l.password,onChange:L=>c({...l,password:L.target.value}),className:"pl-10 block w-full px-4 py-3 border border-gray-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"••••••••"}),r.jsx("button",{type:"button",onClick:()=>o(!a),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:a?r.jsx(kl,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):r.jsx(Zs,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{id:"remember",type:"checkbox",checked:l.remember,onChange:L=>c({...l,remember:L.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded cursor-pointer"}),r.jsx("label",{htmlFor:"remember",className:"ml-2 block text-sm text-gray-700 cursor-pointer",children:"Ghi nhớ đăng nhập"})]}),r.jsx("div",{className:"text-sm",children:r.jsx(Ve,{to:"/forgot-password",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"Quên mật khẩu?"})})]}),r.jsx("div",{className:"mt-6",children:r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("button",{type:"submit",disabled:d,className:`flex-1 flex justify-center items-center py-3 px-4 border border-black rounded-lg shadow-sm text-base font-medium text-white transform transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] ${d?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}`,children:d?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Đăng nhập..."]}):"Đăng nhập"}),v&&r.jsxs("button",{type:"button",onClick:_,disabled:m||!l.email||d,className:`flex items-center justify-center p-3 border border-black rounded-lg shadow-sm transform transition-all duration-200 hover:scale-[1.05] active:scale-[0.95] ${m||!l.email||d?"bg-gray-300 cursor-not-allowed opacity-70 text-gray-500":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"} relative group`,title:l.email?"Đăng nhập bằng sinh trắc học":"Vui lòng nhập email trước khi sử dụng đăng nhập sinh trắc học",children:[!l.email&&r.jsx("div",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:"Nhập email trước"}),m?r.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):r.jsx(vj,{className:`h-6 w-6 ${l.email?"text-red-500":"text-gray-500"}`})]})]})}),r.jsxs("div",{className:"relative my-6",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-gray-300"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Hoặc đăng nhập với"})})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[r.jsx("button",{type:"button",className:"inline-flex justify-center items-center py-2.5 border border-gray-300 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 transition-colors",children:r.jsx("svg",{className:"h-5 w-5 text-[#1877F2]",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z",clipRule:"evenodd"})})}),r.jsx("button",{type:"button",className:"inline-flex justify-center items-center py-2.5 border border-gray-300 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 transition-colors",children:r.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[r.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),r.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),r.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),r.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"}),r.jsx("path",{d:"M1 1h22v22H1z",fill:"none"})]})}),r.jsx("button",{type:"button",className:"inline-flex justify-center items-center py-2.5 border border-gray-300 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 transition-colors",children:r.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"})})}),r.jsx("button",{type:"button",className:"inline-flex justify-center items-center py-2.5 border border-gray-300 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 transition-colors",children:r.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",children:r.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})]}),r.jsx("div",{className:"text-center mt-6",children:r.jsxs("span",{className:"text-sm text-gray-600",children:["Chưa có tài khoản?"," ",r.jsx(Ve,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"Đăng ký ngay"})]})})]}),!v&&r.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Ji,{className:"h-6 w-6 text-yellow-500 mt-0.5 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Thiết bị không hỗ trợ"}),r.jsx("p",{className:"text-sm mt-1 text-gray-600",children:"Trình duyệt hoặc thiết bị của bạn không hỗ trợ xác thực sinh trắc học."})]})]})})]})}),r.jsxs("div",{className:"hidden lg:block relative flex-1",children:[r.jsx("img",{className:"absolute inset-0 h-full w-full object-cover",src:"https://images.unsplash.com/photo-1523240795612-9a054b0db644?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2340&q=80",alt:"Learning background"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/80 to-indigo-700/80",children:r.jsx("div",{className:"flex flex-col h-full",children:r.jsx("div",{className:"flex items-center justify-center flex-1",children:r.jsxs(qe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.8},className:"max-w-2xl mx-auto text-center text-white px-4",children:[r.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-6",children:"Learning"}),r.jsx("p",{className:"text-xl sm:text-2xl mb-8",children:"Khám phá thế giới kiến thức không giới hạn"}),r.jsxs("div",{className:"flex flex-col space-y-4 sm:flex-row sm:space-x-4 sm:space-y-0 justify-center",children:[r.jsx("div",{className:"flex items-center justify-center bg-white/20 backdrop-blur-sm rounded-lg p-4",children:r.jsxs("div",{className:"text-left",children:[r.jsx("div",{className:"font-semibold text-lg",children:"10,000+"}),r.jsx("div",{className:"text-sm text-white/80",children:"Khóa học đa dạng"})]})}),r.jsx("div",{className:"flex items-center justify-center bg-white/20 backdrop-blur-sm rounded-lg p-4",children:r.jsxs("div",{className:"text-left",children:[r.jsx("div",{className:"font-semibold text-lg",children:"24/7"}),r.jsx("div",{className:"text-sm text-white/80",children:"Hỗ trợ mọi lúc"})]})}),r.jsx("div",{className:"flex items-center justify-center bg-white/20 backdrop-blur-sm rounded-lg p-4",children:r.jsxs("div",{className:"text-left",children:[r.jsx("div",{className:"font-semibold text-lg",children:"100%"}),r.jsx("div",{className:"text-sm text-white/80",children:"Cam kết chất lượng"})]})})]}),r.jsx("div",{className:"mt-10",children:r.jsxs("button",{onClick:()=>{document.getElementById("about-us").scrollIntoView({behavior:"smooth"})},className:"flex items-center mx-auto space-x-2 text-white bg-white/20 backdrop-blur-sm px-5 py-2.5 rounded-full hover:bg-white/30 transition-all duration-200",children:[r.jsx("span",{children:"Về Chúng Tôi"}),r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 animate-bounce",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})]})})]})})})})]})]}),r.jsx("div",{id:"about-us",className:"bg-gradient-to-b from-gray-50 to-white py-16",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs(qe.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0,margin:"-100px"},className:"text-center mb-12",children:[r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Về Chúng Tôi"}),r.jsx("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"CampusT là nền tảng học tập trực tuyến hàng đầu tại Việt Nam, được thành lập với sứ mệnh mang đến cơ hội tiếp cận kiến thức công nghệ chất lượng cao cho mọi người. Chúng tôi tự hào là đối tác đào tạo tin cậy của nhiều doanh nghiệp công nghệ hàng đầu trong và ngoài nước."})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[{title:"Tầm Nhìn",content:"Trở thành nền tảng giáo dục công nghệ số 1 Việt Nam, đào tạo 100,000+ lập trình viên chuyên nghiệp đến năm 2025. Xây dựng cộng đồng học tập công nghệ lớn mạnh với hơn 1 triệu thành viên, góp phần thúc đẩy sự phát triển của ngành công nghệ thông tin Việt Nam.",icon:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})},{title:"Sứ Mệnh",content:"Cung cấp nền tảng học tập công nghệ toàn diện với chi phí tối ưu nhất. Đào tạo nguồn nhân lực chất lượng cao đáp ứng nhu cầu chuyển đổi số của doanh nghiệp. Tạo môi trường học tập và phát triển nghề nghiệp chuyên nghiệp cho cộng đồng IT Việt Nam.",icon:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})},{title:"Giá Trị Cốt Lõi",content:`- Chất lượng đào tạo là ưu tiên hàng đầu
- Đổi mới sáng tạo trong phương pháp giảng dạy
- Tận tâm hỗ trợ người học
- Cam kết đồng hành cùng sự phát triển của học viên
- Liên tục cập nhật và nâng cao chất lượng`,icon:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}].map((L,A)=>r.jsxs(qe.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:A*.1},viewport:{once:!0,margin:"-100px"},className:"bg-white p-6 rounded-xl shadow-md transition-all duration-300 hover:shadow-lg border border-gray-100",children:[r.jsx("div",{className:"h-14 w-14 mx-auto mb-4 rounded-lg bg-blue-100 flex items-center justify-center",children:L.icon}),r.jsx("h3",{className:"text-xl font-semibold text-center mb-3 text-gray-900",children:L.title}),r.jsx("p",{className:"text-gray-600 text-center whitespace-pre-line",children:L.content})]},A))}),r.jsx(qe.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0,margin:"-100px"},className:"mt-16 bg-white rounded-xl shadow-md overflow-hidden border border-gray-100",children:r.jsxs("div",{className:"md:flex",children:[r.jsx("div",{className:"md:flex-shrink-0",children:r.jsx("img",{className:"h-full w-full object-cover md:w-72",src:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=600&q=80",alt:"Đội ngũ giảng viên"})}),r.jsxs("div",{className:"p-8",children:[r.jsx("div",{className:"uppercase tracking-wide text-sm text-blue-600 font-semibold",children:"Đội Ngũ Chuyên Gia"}),r.jsx("h2",{className:"mt-2 text-2xl font-bold leading-tight text-gray-900",children:"Giảng viên hàng đầu trong lĩnh vực công nghệ"}),r.jsx("p",{className:"mt-4 text-gray-600 leading-relaxed",children:"Đội ngũ giảng viên của CampusT gồm các chuyên gia có trên 10 năm kinh nghiệm đến từ các công ty công nghệ hàng đầu như Google, Microsoft, AWS, FPT Software. Với kinh nghiệm thực tế phong phú, các giảng viên không chỉ truyền đạt kiến thức chuyên môn mà còn chia sẻ những bài học quý giá từ dự án thực tế."}),r.jsxs("div",{className:"mt-6 flex flex-wrap gap-2",children:[r.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:"Front-end"}),r.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:"Back-end"}),r.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:"DevOps"}),r.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:"AI & ML"}),r.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:"Mobile Dev"}),r.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:"Cloud Computing"})]})]})]})}),r.jsx("div",{className:"mt-16",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:[r.jsxs(qe.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},transition:{duration:.5},viewport:{once:!0,margin:"-100px"},className:"bg-white p-8 rounded-xl shadow-md border border-gray-100",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Phương Pháp Đào Tạo"}),r.jsxs("ul",{className:"space-y-4",children:[r.jsxs("li",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),r.jsx("p",{className:"ml-3 text-gray-600",children:"Học tập dựa trên dự án thực tế (Project-based learning)"})]}),r.jsxs("li",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),r.jsx("p",{className:"ml-3 text-gray-600",children:"Nội dung học tập được cá nhân hóa theo trình độ và mục tiêu"})]}),r.jsxs("li",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),r.jsx("p",{className:"ml-3 text-gray-600",children:"Hệ thống hỗ trợ học tập 1-1 với giảng viên và mentor"})]}),r.jsxs("li",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),r.jsx("p",{className:"ml-3 text-gray-600",children:"Cập nhật liên tục kiến thức mới nhất theo xu hướng công nghệ"})]})]})]}),r.jsxs(qe.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},transition:{duration:.5},viewport:{once:!0,margin:"-100px"},className:"bg-white p-8 rounded-xl shadow-md border border-gray-100",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Cam Kết Với Học Viên"}),r.jsxs("ul",{className:"space-y-4",children:[r.jsxs("li",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),r.jsx("p",{className:"ml-3 text-gray-600",children:"Bảo mật thông tin cá nhân và dữ liệu học tập"})]}),r.jsxs("li",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),r.jsx("p",{className:"ml-3 text-gray-600",children:"Hoàn trả học phí nếu không hài lòng trong 7 ngày đầu"})]}),r.jsxs("li",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),r.jsx("p",{className:"ml-3 text-gray-600",children:"Hỗ trợ kỹ thuật và giải đáp thắc mắc 24/7"})]}),r.jsxs("li",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),r.jsx("p",{className:"ml-3 text-gray-600",children:"Cấp chứng chỉ hoàn thành có giá trị trong ngành công nghệ"})]})]})]})]})}),r.jsxs(qe.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0,margin:"-100px"},className:"mt-16 text-center",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Đối Tác Của Chúng Tôi"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:[{title:"FPT Software",image:"https://upload.wikimedia.org/wikipedia/commons/1/11/FPT_logo_2010.svg"},{title:"VNG Corporation",image:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8f/VNG_Corp._logo.svg/1200px-VNG_Corp._logo.svg.png"},{title:"Microsoft Vietnam",image:"https://upload.wikimedia.org/wikipedia/commons/9/96/Microsoft_logo_%282012%29.svg"},{title:"Amazon Web Services",image:"https://upload.wikimedia.org/wikipedia/commons/9/93/Amazon_Web_Services_Logo.svg"},{title:"Google",image:"https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png"},{title:"MoMo",image:"https://upload.wikimedia.org/wikipedia/vi/f/fe/MoMo_Logo.png"},{title:"Tiki",image:"https://upload.wikimedia.org/wikipedia/commons/4/43/Logo_Tiki_2023.png"},{title:"Shopee",image:"https://upload.wikimedia.org/wikipedia/commons/f/fe/Shopee.svg"}].map((L,A)=>r.jsx(qe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.3,delay:A*.05},whileHover:{y:-5,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"},className:"bg-white p-8 rounded-lg shadow-sm flex items-center justify-center h-32 border border-gray-100",children:r.jsx("img",{src:L.image,alt:L.title,className:"w-36 h-16 object-contain"})},A))}),r.jsx("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-8",children:["Đối Tác Tuyển Dụng","Đối Tác Đào Tạo","Đối Tác Công Nghệ"].map((L,A)=>r.jsxs(qe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.4,delay:A*.1},className:"bg-blue-50 p-6 rounded-xl",children:[r.jsx("h4",{className:"font-semibold text-lg text-blue-900 mb-2",children:L}),r.jsx("p",{className:"text-blue-700",children:"200+ doanh nghiệp công nghệ tuyển dụng trực tiếp từ CampusT"})]},A))})]})]})}),r.jsx("div",{className:"mt-20 bg-blue-50 py-16",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs(qe.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6},className:"text-center mb-12",children:[r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Liên Hệ Với Chúng Tôi"}),r.jsx("p",{className:"text-lg text-gray-600",children:"Hãy liên hệ với chúng tôi nếu bạn cần hỗ trợ hoặc có bất kỳ câu hỏi nào"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto",children:[{title:"Điện thoại",content:["0332029410","Thứ 2 - Chủ nhật: 8:00 - 22:00"],icon:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})},{title:"Email",content:["support@campust.edu.vn","quyen.nd19@outlook.com"],icon:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})},{title:"Địa chỉ",content:["Tầng 15, Tòa nhà Innovation","Quận 1, TP. Hồ Chí Minh"],icon:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})]})}].map((L,A)=>r.jsxs(qe.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.5,delay:A*.1},className:"bg-white p-6 rounded-xl shadow-md text-center",children:[r.jsx("div",{className:"h-12 w-12 mx-auto mb-4 rounded-full bg-blue-100 flex items-center justify-center",children:L.icon}),r.jsx("h3",{className:"text-xl font-semibold mb-2",children:L.title}),L.content.map((M,z)=>r.jsx("p",{className:"text-gray-600",children:M},z))]},A))}),r.jsx(qe.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6},className:"mt-12 max-w-3xl mx-auto",children:r.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md",children:[r.jsx("h3",{className:"text-2xl font-bold text-center mb-6",children:"Gửi Tin Nhắn Cho Chúng Tôi"}),r.jsxs("form",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Họ và tên"}),r.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),r.jsx("input",{type:"email",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tiêu đề"}),r.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nội dung"}),r.jsx("textarea",{rows:"4",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),r.jsx("div",{className:"text-center",children:r.jsx("button",{type:"submit",className:"inline-flex justify-center py-3 px-6 border border-transparent shadow-sm text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Gửi tin nhắn"})})]})]})}),r.jsx(qe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.5,delay:.2},className:"mt-12 text-center",children:r.jsxs("div",{className:"flex justify-center space-x-6",children:[r.jsxs("a",{href:"#",className:"text-gray-400 hover:text-gray-500",children:[r.jsx("span",{className:"sr-only",children:"Facebook"}),r.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z",clipRule:"evenodd"})})]}),r.jsxs("a",{href:"#",className:"text-gray-400 hover:text-gray-500",children:[r.jsx("span",{className:"sr-only",children:"Youtube"}),r.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{fillRule:"evenodd",d:"M19.812 5.418c.861.23 1.538.907 1.768 1.768C21.998 8.746 22 12 22 12s0 3.255-.418 4.814a2.504 2.504 0 0 1-1.768 1.768c-1.56.419-7.814.419-7.814.419s-6.255 0-7.814-.419a2.505 2.505 0 0 1-1.768-1.768C2 15.255 2 12 2 12s0-3.255.418-4.814a2.507 2.507 0 0 1 1.768-1.768C5.746 5 11.998 5 11.998 5s6.255 0 7.814.418ZM15.194 12 10 15V9l5.194 3Z",clipRule:"evenodd"})})]}),r.jsxs("a",{href:"#",className:"text-gray-400 hover:text-gray-500",children:[r.jsx("span",{className:"sr-only",children:"LinkedIn"}),r.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{fillRule:"evenodd",d:"M20.447 20.452h-3.554v-5.569c0-1.328-.07-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z",clipRule:"evenodd"})})]})]})})]})}),r.jsx(qe.footer,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.5},className:"bg-gray-900 text-white py-8",children:r.jsx("div",{className:"container mx-auto px-4 text-center",children:r.jsx("p",{className:"text-gray-400",children:"© 2025 CAMPUST. Tất cả quyền được bảo lưu."})})})]})},yte=()=>{const e=St(),[t,n]=h.useState(!1),[s,i]=h.useState({username:"",email:"",password:"",fullName:"",dateOfBirth:"",school:""}),[a,o]=h.useState(""),[l,c]=h.useState(!1),[d,u]=h.useState(!1),m=p=>{i({...s,[p.target.name]:p.target.value})},f=async p=>{if(p.preventDefault(),!d){o("Vui lòng đồng ý với Điều khoản sử dụng và Chính sách bảo mật");return}o(""),c(!0);try{const x=await fetch("http://localhost:5001/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),g=await x.json();if(!x.ok)throw new Error(g.message||"Đăng ký thất bại");e("/login",{state:{message:"Đăng ký thành công! Vui lòng đăng nhập."}})}catch(x){o(x.message||"Đã có lỗi xảy ra")}finally{c(!1)}};return r.jsxs("div",{className:"min-h-screen flex",children:[r.jsx("div",{className:"flex-1 flex items-center justify-center bg-white py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx("img",{className:"h-14 w-auto",src:"/images/education-icon.svg",alt:"Education Icon"}),r.jsx("h1",{className:"text-4xl font-bold text-blue-600",children:"Learning"})]}),r.jsx("h2",{className:"mt-8 text-3xl font-extrabold text-gray-900",children:"Tạo tài khoản mới"}),r.jsx("p",{className:"mt-3 text-base text-gray-600",children:"Bắt đầu hành trình học tập của bạn ngay hôm nay"})]}),a&&r.jsx("div",{className:"mt-6 bg-red-50 border-l-4 border-red-400 p-4 rounded-md",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm text-red-700",children:a})})]})}),r.jsxs("form",{className:"mt-8 space-y-6",onSubmit:f,children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Tên đăng nhập"}),r.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Nl,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:"pl-10 block w-full px-4 py-3 border border-gray-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Tên đăng nhập",value:s.username,onChange:m})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),r.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(mo,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"pl-10 block w-full px-4 py-3 border border-gray-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Email",value:s.email,onChange:m})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mật khẩu"}),r.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Xr,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"password",name:"password",type:t?"text":"password",required:!0,className:"pl-10 block w-full px-4 py-3 border border-gray-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Mật khẩu",value:s.password,onChange:m}),r.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>n(!t),children:t?r.jsx(kl,{className:"h-5 w-5 text-gray-400"}):r.jsx(Zs,{className:"h-5 w-5 text-gray-400"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700",children:"Họ và tên"}),r.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Nl,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"fullName",name:"fullName",type:"text",required:!0,className:"pl-10 block w-full px-4 py-3 border border-gray-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Họ và tên",value:s.fullName,onChange:m})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"dateOfBirth",className:"block text-sm font-medium text-gray-700",children:"Ngày sinh"}),r.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Qi,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"dateOfBirth",name:"dateOfBirth",type:"date",className:"pl-10 block w-full px-4 py-3 border border-gray-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:s.dateOfBirth,onChange:m})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"school",className:"block text-sm font-medium text-gray-700",children:"Trường học"}),r.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Ks,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"school",name:"school",type:"text",className:"pl-10 block w-full px-4 py-3 border border-gray-300 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Trường học",value:s.school,onChange:m})]})]})]}),r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex items-center h-5",children:r.jsx("input",{id:"terms",name:"terms",type:"checkbox",checked:d,onChange:p=>u(p.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded cursor-pointer"})}),r.jsx("div",{className:"ml-3 text-sm",children:r.jsxs("label",{htmlFor:"terms",className:"text-gray-600",children:["Tôi đồng ý với"," ",r.jsx(Ve,{to:"/support/terms-of-use",target:"_blank",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"Điều khoản sử dụng"})," ","và"," ",r.jsx(Ve,{to:"/support/privacy-policy",target:"_blank",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"Chính sách bảo mật"})]})})]}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:l||!d,className:`w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-base font-medium text-white ${l||!d?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors"}`,children:l?"Đang xử lý...":"Đăng ký"})}),r.jsx("div",{className:"text-center mt-4",children:r.jsxs("span",{className:"text-sm text-gray-600",children:["Đã có tài khoản?"," ",r.jsx(Ve,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"Đăng nhập ngay"})]})})]})]})}),r.jsxs("div",{className:"hidden lg:block relative flex-1",children:[r.jsx("img",{className:"absolute inset-0 h-full w-full object-cover",src:"https://images.unsplash.com/photo-1519389950473-47ba0277781c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2340&q=80",alt:"Learning background"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/80 to-indigo-700/80",children:r.jsx("div",{className:"flex h-full items-center justify-center",children:r.jsxs("div",{className:"max-w-2xl mx-auto text-center text-white px-4",children:[r.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-6",children:"Learning"}),r.jsx("p",{className:"text-xl sm:text-2xl mb-8",children:"Cùng nhau khám phá thế giới tri thức"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-6 text-left",children:[r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Học tập linh hoạt"}),r.jsx("p",{className:"text-white/80",children:"Hơn 10,000 khóa học trực tuyến từ các chuyên gia hàng đầu thế giới"})]}),r.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-6 text-left",children:[r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Cộng đồng năng động"}),r.jsx("p",{className:"text-white/80",children:"Kết nối và học hỏi cùng hàng triệu người học trên toàn cầu"})]}),r.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-6 text-left",children:[r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Chứng chỉ giá trị"}),r.jsx("p",{className:"text-white/80",children:"Nhận chứng chỉ được công nhận rộng rãi trong ngành"})]}),r.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-6 text-left",children:[r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Học mọi lúc, mọi nơi"}),r.jsx("p",{className:"text-white/80",children:"Truy cập học liệu trên mọi thiết bị, không giới hạn thời gian"})]})]})]})})})]})]})},bte=()=>{const e=St(),[t,n]=h.useState(1),[s,i]=h.useState(""),[a,o]=h.useState(""),[l,c]=h.useState(""),[d,u]=h.useState(""),[m,f]=h.useState(!1),[p,x]=h.useState(!1),[g,b]=h.useState(""),[w,k]=h.useState(""),v=async T=>{var E,P,R,y;if(T.preventDefault(),!s){b("Vui lòng nhập email của bạn");return}x(!0),b("");try{(await De.post("/api/verification/password/forgot",{email:s})).data.message&&(k("Mã xác thực đã được gửi đến email của bạn"),n(2))}catch(O){console.error("Error requesting OTP:",O),b(((P=(E=O.response)==null?void 0:E.data)==null?void 0:P.message)||"Không thể gửi mã xác thực"),dt.error(((y=(R=O.response)==null?void 0:R.data)==null?void 0:y.message)||"Không thể gửi mã xác thực")}finally{x(!1)}},N=async T=>{var E,P,R,y;if(T.preventDefault(),!a){b("Vui lòng nhập mã xác thực");return}if(!l){b("Vui lòng nhập mật khẩu mới");return}if(l!==d){b("Mật khẩu xác nhận không khớp");return}if(l.length<6){b("Mật khẩu phải có ít nhất 6 ký tự");return}x(!0),b("");try{(await De.post("/api/verification/password/reset",{email:s,otp:a,newPassword:l})).data.success&&(k("Mật khẩu đã được đặt lại thành công"),dt.success("Mật khẩu đã được đặt lại thành công"),setTimeout(()=>{e("/login",{state:{message:"Mật khẩu đã được đặt lại thành công. Vui lòng đăng nhập với mật khẩu mới."}})},2e3))}catch(O){console.error("Error resetting password:",O),b(((P=(E=O.response)==null?void 0:E.data)==null?void 0:P.message)||"Không thể đặt lại mật khẩu"),dt.error(((y=(R=O.response)==null?void 0:R.data)==null?void 0:y.message)||"Không thể đặt lại mật khẩu")}finally{x(!1)}},C=async()=>{var T,E;if(!s){b("Email không hợp lệ");return}x(!0),b("");try{(await De.post("/api/verification/password/forgot",{email:s})).data.message&&dt.success("Mã xác thực mới đã được gửi đến email của bạn")}catch(P){console.error("Error resending OTP:",P),b(((E=(T=P.response)==null?void 0:T.data)==null?void 0:E.message)||"Không thể gửi lại mã xác thực")}finally{x(!1)}};return r.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[r.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Đặt lại mật khẩu"}),r.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:t===1?"Nhập email của bạn để nhận mã xác thực":"Nhập mã xác thực và mật khẩu mới của bạn"})]}),r.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:r.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[g&&r.jsx("div",{className:"mb-4 bg-red-50 border-l-4 border-red-500 p-4",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm text-red-700",children:g})})]})}),w&&r.jsx("div",{className:"mb-4 bg-green-50 border-l-4 border-green-500 p-4",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm text-green-700",children:w})})]})}),t===1?r.jsxs("form",{className:"space-y-6",onSubmit:v,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),r.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(mo,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",value:s,onChange:T=>i(T.target.value),required:!0,className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md",placeholder:"Nhập email của bạn"})]})]}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:p,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${p?"opacity-50 cursor-not-allowed":""}`,children:p?"Đang gửi...":"Gửi mã xác thực"})}),r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("div",{className:"text-sm",children:r.jsx(Ve,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:r.jsxs("span",{className:"flex items-center",children:[r.jsx(zd,{className:"h-4 w-4 mr-1"}),"Quay lại đăng nhập"]})})})})]}):r.jsxs("form",{className:"space-y-6",onSubmit:N,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-700",children:"Mã xác thực"}),r.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(ei,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),r.jsx("input",{id:"otp",name:"otp",type:"text",value:a,onChange:T=>o(T.target.value),required:!0,className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md",placeholder:"Nhập mã xác thực"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mật khẩu mới"}),r.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Xr,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),r.jsx("input",{id:"password",name:"password",type:m?"text":"password",autoComplete:"new-password",value:l,onChange:T=>c(T.target.value),required:!0,className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md",placeholder:"Nhập mật khẩu mới"}),r.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:r.jsx("button",{type:"button",onClick:()=>f(!m),className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:m?r.jsx(kl,{className:"h-5 w-5","aria-hidden":"true"}):r.jsx(Zs,{className:"h-5 w-5","aria-hidden":"true"})})})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Xác nhận mật khẩu"}),r.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Xr,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),r.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:m?"text":"password",autoComplete:"new-password",value:d,onChange:T=>u(T.target.value),required:!0,className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md",placeholder:"Xác nhận mật khẩu mới"})]})]}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:p,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${p?"opacity-50 cursor-not-allowed":""}`,children:p?"Đang xác thực...":"Đặt lại mật khẩu"})}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("button",{type:"button",onClick:()=>n(1),className:"text-sm font-medium text-blue-600 hover:text-blue-500",children:r.jsxs("span",{className:"flex items-center",children:[r.jsx(zd,{className:"h-4 w-4 mr-1"}),"Quay lại"]})}),r.jsx("button",{type:"button",onClick:C,disabled:p,className:`text-sm font-medium text-blue-600 hover:text-blue-500 ${p?"opacity-50 cursor-not-allowed":""}`,children:"Gửi lại mã"})]})]})]})})]})},vte=()=>{const e=St(),[t]=EC(),n=t.get("token"),[s,i]=h.useState(!1),[a,o]=h.useState(!1),[l,c]=h.useState(!1),[d,u]=h.useState(""),[m,f]=h.useState({}),[p,x]=h.useState(!1),[g,b]=h.useState({password:"",confirmPassword:""});h.useEffect(()=>{n||u("Liên kết đặt lại mật khẩu không hợp lệ hoặc đã hết hạn. Vui lòng yêu cầu liên kết mới.")},[n]);const w=C=>{const T=C.length>=8,E=/[A-Z]/.test(C),P=/[a-z]/.test(C),R=/\d/.test(C),y={};return T||(y.minLength="Mật khẩu phải có ít nhất 8 ký tự"),E||(y.hasUppercase="Mật khẩu phải có ít nhất 1 chữ hoa"),P||(y.hasLowercase="Mật khẩu phải có ít nhất 1 chữ thường"),R||(y.hasNumber="Mật khẩu phải có ít nhất 1 chữ số"),{isValid:Object.keys(y).length===0,errors:y}},k=C=>{const T=C.target.value;if(b({...g,password:T}),g.confirmPassword&&g.confirmPassword!==T)f({...m,confirmPassword:"Mật khẩu không khớp"});else if(g.confirmPassword&&g.confirmPassword===T){const{confirmPassword:E,...P}=m;f(P)}if(T){const{isValid:E,errors:P}=w(T);if(!E)f({...m,password:P});else{const{password:R,...y}=m;f(y)}}},v=C=>{const T=C.target.value;if(b({...g,confirmPassword:T}),T&&T!==g.password)f({...m,confirmPassword:"Mật khẩu không khớp"});else{const{confirmPassword:E,...P}=m;f(P)}},N=async C=>{C.preventDefault(),u("");const{isValid:T,errors:E}=w(g.password);if(!T){f({...m,password:E});return}if(g.password!==g.confirmPassword){f({...m,confirmPassword:"Mật khẩu không khớp"});return}if(!n){u("Liên kết đặt lại mật khẩu không hợp lệ hoặc đã hết hạn.");return}c(!0);try{const R=await fetch("http://localhost:5001/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n,newPassword:g.password})}),y=await R.json();if(!R.ok)throw new Error(y.message||"Không thể đặt lại mật khẩu");x(!0),setTimeout(()=>{e("/login",{state:{message:"Đặt lại mật khẩu thành công! Vui lòng đăng nhập bằng mật khẩu mới."}})},3e3)}catch(P){console.error("Reset password error:",P),u(P.message||"Đã xảy ra lỗi. Vui lòng thử lại sau.")}finally{c(!1)}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto h-14 w-14 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(Xr,{className:"h-8 w-8 text-blue-600"})}),r.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:p?"Đặt lại mật khẩu thành công!":"Đặt lại mật khẩu"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:p?"Mật khẩu của bạn đã được đặt lại. Bạn sẽ được chuyển hướng đến trang đăng nhập...":"Nhập mật khẩu mới của bạn"})]}),d&&r.jsx("div",{className:"rounded-md bg-red-50 p-4",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(Ji,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Lỗi"}),r.jsx("div",{className:"mt-2 text-sm text-red-700",children:r.jsx("p",{children:d})})]})]})}),p&&r.jsx("div",{className:"rounded-md bg-green-50 p-4",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(Zn,{className:"h-5 w-5 text-green-400","aria-hidden":"true"})}),r.jsx("div",{className:"ml-3",children:r.jsx("div",{className:"mt-2 text-sm text-green-700",children:r.jsx("p",{children:"Mật khẩu của bạn đã được đặt lại thành công. Bạn có thể đăng nhập bằng mật khẩu mới."})})})]})}),!p&&r.jsxs("form",{className:"mt-8 space-y-6",onSubmit:N,children:[r.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mật khẩu mới"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Xr,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"password",name:"password",type:s?"text":"password",required:!0,value:g.password,onChange:k,className:`appearance-none relative block w-full px-3 py-2 pl-10 border ${m.password?"border-red-300":"border-gray-300"} placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm`,placeholder:"Nhập mật khẩu mới"}),r.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:s?r.jsx(kl,{className:"h-5 w-5 text-gray-400"}):r.jsx(Zs,{className:"h-5 w-5 text-gray-400"})})]}),m.password&&r.jsx("div",{className:"mt-2 text-sm text-red-600",children:r.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[m.password.minLength&&r.jsx("li",{children:m.password.minLength}),m.password.hasUppercase&&r.jsx("li",{children:m.password.hasUppercase}),m.password.hasLowercase&&r.jsx("li",{children:m.password.hasLowercase}),m.password.hasNumber&&r.jsx("li",{children:m.password.hasNumber})]})}),r.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Mật khẩu phải có ít nhất 8 ký tự, bao gồm chữ hoa, chữ thường và số."})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Xác nhận mật khẩu mới"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Xr,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:a?"text":"password",required:!0,value:g.confirmPassword,onChange:v,className:`appearance-none relative block w-full px-3 py-2 pl-10 border ${m.confirmPassword?"border-red-300":"border-gray-300"} placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm`,placeholder:"Xác nhận mật khẩu mới"}),r.jsx("button",{type:"button",onClick:()=>o(!a),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:a?r.jsx(kl,{className:"h-5 w-5 text-gray-400"}):r.jsx(Zs,{className:"h-5 w-5 text-gray-400"})})]}),m.confirmPassword&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:m.confirmPassword})]})]}),r.jsx("div",{children:r.jsxs("button",{type:"submit",disabled:l||!n,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${l||!n?"opacity-50 cursor-not-allowed":""}`,children:[l?r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,l?"Đang xử lý...":"Đặt lại mật khẩu"]})})]})]})})},wte=({children:e})=>{const t=lr(),{isAuthenticated:n,loading:s,refreshUserToken:i}=Kn(),[a,o]=h.useState(!0),[l,c]=h.useState(!1);return h.useEffect(()=>{(async()=>{try{if(n){c(!0),o(!1);return}const u=localStorage.getItem("token"),m=localStorage.getItem("refreshToken");if(u){if(c(!0),m)try{const f=await i();c(f)}catch(f){console.log("Token refresh error:",f.message),c(!!localStorage.getItem("token"))}}else c(!1)}catch(u){console.error("Auth middleware error:",u),c(!!localStorage.getItem("token"))}finally{o(!1)}})()},[n,i]),s||a?r.jsx("div",{className:"flex justify-center items-center h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):l?e:r.jsx($o,{to:"/login",state:{from:t.pathname},replace:!0})},jte=()=>{const e=St(),[t,n]=h.useState(""),[s,i]=h.useState(""),[a,o]=h.useState([]),[l,c]=h.useState(!1),[d,u]=h.useState(null),m=h.useRef(null),f=async g=>{if(g.preventDefault(),!s.trim()){re.error("Tiêu đề không được để trống");return}if(!t.trim()&&a.length===0){re.error("Nội dung không được để trống");return}c(!0),u(null);try{const b=new FormData;b.append("title",s),b.append("content",t),a.forEach(N=>{b.append("media",N)});const w=localStorage.getItem("token");if(!w)throw new Error("Bạn cần đăng nhập để tạo câu chuyện");const k=await fetch("/api/stories",{method:"POST",headers:{Authorization:`Bearer ${w}`},body:b});if(!k.ok)try{const N=await k.json();throw new Error(N.message||"Không thể tạo câu chuyện")}catch{throw new Error(`Lỗi ${k.status}: Không thể tạo câu chuyện`)}const v=await k.json();re.success("Câu chuyện đã được tạo thành công!"),e("/stories")}catch(b){console.error("Create story error:",b),u(b.message||"Có lỗi xảy ra khi tạo câu chuyện"),re.error(b.message||"Có lỗi xảy ra khi tạo câu chuyện")}finally{c(!1)}},p=g=>{const b=Array.from(g.target.files);b.length>0&&o([...a,...b])},x=g=>{o(a.filter((b,w)=>w!==g))};return r.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden max-w-2xl mx-auto mt-6",children:[r.jsx("div",{className:"p-4 border-b border-gray-100",children:r.jsx("h2",{className:"font-semibold text-lg",children:"Tạo câu chuyện mới"})}),r.jsxs("form",{onSubmit:f,className:"p-4",children:[d&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 border-l-4 border-red-500 text-red-700 rounded",children:r.jsx("p",{children:d})}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tiêu đề"}),r.jsx("input",{type:"text",id:"title",value:s,onChange:g=>i(g.target.value),className:"w-full p-3 bg-gray-50 border border-gray-200 rounded-lg focus-within:border-blue-300 focus-within:ring-1 focus-within:ring-blue-300 transition duration-200",placeholder:"Nhập tiêu đề câu chuyện"})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nội dung"}),r.jsx("div",{className:"w-full p-3 bg-gray-50 border border-gray-200 rounded-lg focus-within:border-blue-300 focus-within:ring-1 focus-within:ring-blue-300 transition duration-200",children:r.jsx("textarea",{id:"content",value:t,onChange:g=>n(g.target.value),rows:5,className:"w-full focus:outline-none bg-transparent resize-none",placeholder:"Viết nội dung câu chuyện của bạn..."})})]}),a.length>0&&r.jsx("div",{className:"mb-4",children:r.jsx("div",{className:"flex flex-wrap gap-3",children:a.map((g,b)=>r.jsx("div",{className:"relative group",children:r.jsxs("div",{className:"h-32 w-32 border border-gray-200 rounded-lg overflow-hidden bg-gray-100 flex items-center justify-center",children:[g.type.startsWith("image/")?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-200 z-0",children:r.jsxs("svg",{className:"animate-spin h-8 w-8 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),r.jsx("img",{src:URL.createObjectURL(g),alt:"Preview",className:"w-full h-full object-cover relative z-10",onLoad:w=>{const v=w.target.parentNode.querySelector("div.absolute");v&&v.remove()}})]}):g.type.startsWith("video/")?r.jsx("div",{className:"flex items-center justify-center h-full w-full bg-gray-800",children:r.jsx(Ba,{className:"h-12 w-12 text-white opacity-70"})}):r.jsx("div",{className:"flex items-center justify-center h-full w-full",children:r.jsx(jj,{className:"h-12 w-12 text-gray-400"})}),r.jsx("button",{type:"button",onClick:()=>x(b),className:"absolute top-2 right-2 bg-black bg-opacity-50 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(zt,{className:"h-4 w-4"})})]})},b))})}),r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 mt-4",children:[r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs("button",{type:"button",onClick:()=>m.current.click(),className:"flex items-center space-x-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm",children:[r.jsx(Vd,{className:"h-5 w-5 text-green-500"}),r.jsx("span",{children:"Thêm ảnh/video"})]}),r.jsx("input",{ref:m,type:"file",hidden:!0,accept:"image/*,video/*",multiple:!0,onChange:p})]}),r.jsx("button",{type:"submit",disabled:l||!t.trim()&&!s.trim()&&a.length===0,className:`px-6 py-2.5 rounded-lg font-medium ${l||!t.trim()&&!s.trim()&&a.length===0?"bg-gray-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:l?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{children:"Đang tạo..."})]}):"Tạo câu chuyện"})]})]})]})},kte=()=>{const e=[{question:"Làm thế nào để đăng ký tài khoản?",answer:"Bạn có thể đăng ký tài khoản bằng cách nhấp vào nút 'Đăng ký' ở góc trên bên phải của trang web. Sau đó điền đầy đủ thông tin theo yêu cầu và xác nhận email của bạn."},{question:"Tôi có thể học thử trước khi đăng ký không?",answer:"Có, chúng tôi cung cấp các bài học thử miễn phí cho mỗi khóa học. Bạn có thể xem trước nội dung và trải nghiệm chất lượng giảng dạy trước khi quyết định đăng ký."},{question:"Làm thế nào để thanh toán khóa học?",answer:"Chúng tôi chấp nhận nhiều phương thức thanh toán như chuyển khoản ngân hàng, ví điện tử, và thẻ tín dụng. Sau khi chọn khóa học, bạn sẽ được chuyển đến trang thanh toán để hoàn tất giao dịch."},{question:"Tôi có thể học trên thiết bị di động không?",answer:"Có, nền tảng của chúng tôi được thiết kế responsive và hoạt động tốt trên cả máy tính và thiết bị di động. Bạn có thể học mọi lúc, mọi nơi."},{question:"Làm thế nào để nhận chứng chỉ sau khi hoàn thành khóa học?",answer:"Sau khi hoàn thành tất cả bài học và vượt qua các bài kiểm tra của khóa học, bạn sẽ nhận được chứng chỉ điện tử. Chứng chỉ này có thể tải xuống và chia sẻ trên LinkedIn."}];return r.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-3xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Câu hỏi thường gặp"}),r.jsx("p",{className:"text-lg text-gray-600",children:"Tìm câu trả lời cho những thắc mắc phổ biến nhất"})]}),r.jsx("div",{className:"space-y-4",children:e.map((t,n)=>r.jsx(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:n*.1},className:"bg-white rounded-lg shadow-md overflow-hidden",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:t.question}),r.jsx(Jo,{className:"h-5 w-5 text-gray-500"})]}),r.jsx("div",{className:"mt-4 text-gray-600",children:t.answer})]})},n))}),r.jsxs("div",{className:"mt-12 text-center",children:[r.jsx("p",{className:"text-gray-600 mb-4",children:"Không tìm thấy câu trả lời bạn cần?"}),r.jsx("a",{href:"/support/contact",className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:"Liên hệ hỗ trợ"})]})]})})},Nte=()=>{const e=[{title:"Bắt đầu học",icon:ho,description:"Hướng dẫn cách bắt đầu học và sử dụng nền tảng",items:["Cách đăng ký tài khoản","Cách chọn khóa học phù hợp","Hướng dẫn sử dụng giao diện học tập","Cách theo dõi tiến độ học tập"]},{title:"Khóa học",icon:Ks,description:"Thông tin về các khóa học và chương trình học",items:["Các loại khóa học có sẵn","Cách đăng ký khóa học","Chính sách hoàn tiền","Cách nhận chứng chỉ"]},{title:"Thanh toán",icon:P8,description:"Hướng dẫn về các phương thức thanh toán",items:["Các phương thức thanh toán được chấp nhận","Cách sử dụng mã giảm giá","Hóa đơn và biên lai","Xử lý sự cố thanh toán"]},{title:"Hỗ trợ kỹ thuật",icon:Pg,description:"Giải quyết các vấn đề kỹ thuật",items:["Yêu cầu hệ thống","Khắc phục sự cố đăng nhập","Sự cố video/âm thanh","Hỗ trợ thiết bị di động"]},{title:"Tài liệu",icon:Gs,description:"Tài liệu hướng dẫn và tài nguyên học tập",items:["Hướng dẫn sử dụng nền tảng","Tài liệu học tập","Mẫu bài tập","Tài nguyên bổ sung"]},{title:"Câu hỏi thường gặp",icon:IP,description:"Giải đáp các thắc mắc phổ biến",items:["Câu hỏi về tài khoản","Câu hỏi về khóa học","Câu hỏi về thanh toán","Câu hỏi về chứng chỉ"]}];return r.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Trung tâm trợ giúp"}),r.jsx("p",{className:"text-lg text-gray-600",children:"Tìm kiếm hướng dẫn và hỗ trợ cho mọi vấn đề của bạn"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((t,n)=>r.jsx(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:n*.1},className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(t.icon,{className:"h-8 w-8 text-indigo-600 mr-3"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:t.title})]}),r.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),r.jsx("ul",{className:"space-y-2",children:t.items.map((s,i)=>r.jsxs("li",{className:"flex items-center text-gray-600",children:[r.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-600 rounded-full mr-2"}),s]},i))})]})},n))}),r.jsxs("div",{className:"mt-12 text-center",children:[r.jsx("p",{className:"text-gray-600 mb-4",children:"Vẫn cần hỗ trợ thêm?"}),r.jsx("a",{href:"/support/contact",className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700",children:"Liên hệ hỗ trợ"})]})]})})},Cte=()=>{const e=[{title:"Giới thiệu",content:"Chúng tôi cam kết bảo vệ quyền riêng tư và thông tin cá nhân của người dùng. Chính sách bảo mật này giải thích cách chúng tôi thu thập, sử dụng và bảo vệ thông tin của bạn khi bạn sử dụng nền tảng Campus Learning."},{title:"Thông tin chúng tôi thu thập",content:"Chúng tôi thu thập các thông tin sau:",items:["Thông tin cá nhân (họ tên, email, số điện thoại)","Thông tin thanh toán","Dữ liệu học tập và tiến độ","Thông tin thiết bị và trình duyệt","Dữ liệu tương tác với nền tảng"]},{title:"Cách chúng tôi sử dụng thông tin",content:"Chúng tôi sử dụng thông tin của bạn để:",items:["Cung cấp và cải thiện dịch vụ","Xử lý thanh toán và giao dịch","Gửi thông báo và cập nhật","Phân tích và tối ưu hóa trải nghiệm người dùng","Tuân thủ các yêu cầu pháp lý"]},{title:"Bảo mật thông tin",content:"Chúng tôi áp dụng các biện pháp bảo mật sau:",items:["Mã hóa dữ liệu nhạy cảm","Kiểm soát truy cập nghiêm ngặt","Bảo mật hệ thống và mạng","Đào tạo nhân viên về bảo mật","Đánh giá bảo mật định kỳ"]},{title:"Chia sẻ thông tin",content:"Chúng tôi chỉ chia sẻ thông tin của bạn trong các trường hợp:",items:["Với sự đồng ý của bạn","Để cung cấp dịch vụ","Tuân thủ pháp luật","Bảo vệ quyền lợi hợp pháp","Hợp tác với đối tác đáng tin cậy"]},{title:"Quyền của người dùng",content:"Bạn có quyền:",items:["Truy cập thông tin cá nhân","Yêu cầu sửa đổi thông tin","Yêu cầu xóa thông tin","Từ chối tiếp thị","Khiếu nại về việc xử lý dữ liệu"]},{title:"Cookie và công nghệ theo dõi",content:"Chúng tôi sử dụng cookie để:",items:["Cải thiện trải nghiệm người dùng","Phân tích lưu lượng truy cập","Nhớ tùy chọn của bạn","Cung cấp nội dung phù hợp","Bảo mật tài khoản"]},{title:"Liên hệ",content:"Nếu bạn có câu hỏi về chính sách bảo mật, vui lòng liên hệ:",items:["Email: contact@Campus Learning.vn","Địa chỉ: 123 Đường Nguyễn Văn Linh, Quận 7, TP. Hồ Chí Minh","Điện thoại: (84) 123-456-789"]}];return r.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Chính sách bảo mật"}),r.jsx("p",{className:"text-lg text-gray-600",children:"Cập nhật lần cuối: 01/01/2024"})]}),r.jsx("div",{className:"space-y-8",children:e.map((t,n)=>r.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:n*.1},className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:t.title}),r.jsx("p",{className:"text-gray-600 mb-4",children:t.content}),t.items&&r.jsx("ul",{className:"space-y-2",children:t.items.map((s,i)=>r.jsxs("li",{className:"flex items-center text-gray-600",children:[r.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-600 rounded-full mr-2"}),s]},i))})]},n))})]})})},Ste=()=>{const e=[{title:"Giới thiệu",content:"Bằng việc sử dụng nền tảng Campus Learning, bạn đồng ý với các điều khoản và điều kiện được nêu trong tài liệu này. Vui lòng đọc kỹ các điều khoản trước khi sử dụng dịch vụ."},{title:"Điều kiện sử dụng",content:"Để sử dụng nền tảng, bạn phải:",items:["Đủ 13 tuổi trở lên","Có tài khoản hợp lệ","Cung cấp thông tin chính xác","Tuân thủ các quy định của nền tảng","Không vi phạm bản quyền"]},{title:"Quyền sở hữu trí tuệ",content:"Tất cả nội dung trên nền tảng thuộc sở hữu của Campus Learning hoặc được cấp phép sử dụng. Bạn không được:",items:["Sao chép hoặc phân phối nội dung","Sử dụng nội dung cho mục đích thương mại","Chỉnh sửa hoặc tạo tác phẩm phái sinh","Xóa thông tin bản quyền","Chia sẻ tài khoản với người khác"]},{title:"Quy định về nội dung",content:"Người dùng không được đăng tải nội dung:",items:["Vi phạm pháp luật","Xúc phạm, đe dọa người khác","Chứa thông tin sai lệch","Quảng cáo trái phép","Chứa virus hoặc mã độc"]},{title:"Thanh toán và hoàn tiền",content:"Các quy định về thanh toán:",items:["Giá cả được niêm yết rõ ràng","Thanh toán trước khi sử dụng","Hoàn tiền trong vòng 7 ngày nếu chưa học","Không hoàn tiền sau khi đã học","Chính sách hoàn tiền chi tiết"]},{title:"Chấm dứt tài khoản",content:"Chúng tôi có quyền chấm dứt tài khoản nếu:",items:["Vi phạm điều khoản sử dụng","Gian lận hoặc lừa đảo","Không hoạt động trong thời gian dài","Cung cấp thông tin giả mạo","Vi phạm pháp luật"]},{title:"Giới hạn trách nhiệm",content:"Chúng tôi không chịu trách nhiệm về:",items:["Mất mát dữ liệu","Gián đoạn dịch vụ","Thiệt hại gián tiếp","Hành vi của người dùng khác","Vấn đề kỹ thuật ngoài tầm kiểm soát"]},{title:"Thay đổi điều khoản",content:"Chúng tôi có quyền:",items:["Cập nhật điều khoản khi cần","Thông báo trước 30 ngày","Áp dụng cho tất cả người dùng","Lưu trữ các phiên bản cũ","Giải thích rõ các thay đổi"]},{title:"Giải quyết tranh chấp",content:"Trong trường hợp có tranh chấp:",items:["Ưu tiên giải quyết hòa giải","Áp dụng luật Việt Nam","Tòa án có thẩm quyền tại TP. HCM","Thời hạn khiếu nại 30 ngày","Bồi thường theo quy định pháp luật"]},{title:"Liên hệ",content:"Nếu bạn có câu hỏi về điều khoản sử dụng, vui lòng liên hệ:",items:["Email: contact@Campus Learning.vn","Địa chỉ: 123 Đường Nguyễn Văn Linh, Quận 7, TP. Hồ Chí Minh","Điện thoại: (84) 123-456-789"]}];return r.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Điều khoản sử dụng"}),r.jsx("p",{className:"text-lg text-gray-600",children:"Cập nhật lần cuối: 01/01/2024"})]}),r.jsx("div",{className:"space-y-8",children:e.map((t,n)=>r.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:n*.1},className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:t.title}),r.jsx("p",{className:"text-gray-600 mb-4",children:t.content}),t.items&&r.jsx("ul",{className:"space-y-2",children:t.items.map((s,i)=>r.jsxs("li",{className:"flex items-center text-gray-600",children:[r.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-600 rounded-full mr-2"}),s]},i))})]},n))})]})})},Ete=()=>{const e=St(),[t,n]=h.useState("frontend"),s={frontend:{title:"Front-end Development",description:"Lộ trình học để trở thành nhà phát triển Front-end chuyên nghiệp",icon:to,color:"bg-rose-500",timeToComplete:"6-8 tháng",level:"Cơ bản đến nâng cao",steps:[{id:1,title:"Nền tảng cơ bản",description:"Học các kiến thức cơ bản về HTML, CSS và JavaScript",courses:["HTML & CSS Fundamentals","JavaScript Basics","Responsive Web Design"],duration:"4-6 tuần",isActive:!0,isCompleted:!1},{id:2,title:"JavaScript nâng cao",description:"Tìm hiểu sâu về JavaScript và DOM manipulation",courses:["Advanced JavaScript","ES6+ Features","JavaScript Data Structures"],duration:"4-6 tuần",isActive:!1,isCompleted:!1},{id:3,title:"Framework cơ bản",description:"Làm quen với React.js, Vue.js hoặc Angular",courses:["React Fundamentals","State Management","Component Architecture"],duration:"6-8 tuần",isActive:!1,isCompleted:!1},{id:4,title:"Tools & Workflow",description:"Học cách sử dụng các công cụ phát triển và quy trình làm việc",courses:["Git & GitHub","Webpack","Package Managers (npm/yarn)"],duration:"2-3 tuần",isActive:!1,isCompleted:!1},{id:5,title:"Front-end nâng cao",description:"Học các kỹ thuật nâng cao và tối ưu hóa hiệu suất",courses:["Performance Optimization","Advanced React Patterns","Testing (Jest, RTL)"],duration:"6-8 tuần",isActive:!1,isCompleted:!1},{id:6,title:"Dự án thực tế",description:"Xây dựng portfolio với các dự án thực tế",courses:["E-commerce Project","Social Media Application","Real-time Dashboard"],duration:"8-10 tuần",isActive:!1,isCompleted:!1}]},backend:{title:"Back-end Development",description:"Lộ trình học để trở thành nhà phát triển Back-end chuyên nghiệp",icon:Nj,color:"bg-violet-500",timeToComplete:"8-10 tháng",level:"Cơ bản đến nâng cao",steps:[{id:1,title:"Nền tảng lập trình",description:"Học cơ bản về ngôn ngữ lập trình back-end (JavaScript/Node.js, Python, Java, PHP)",courses:["Programming Fundamentals","Algorithm Basics","Data Structures"],duration:"6-8 tuần",isActive:!0,isCompleted:!1},{id:2,title:"Cơ sở dữ liệu",description:"Tìm hiểu về SQL và NoSQL databases",courses:["SQL Fundamentals","Database Design","MongoDB Basics"],duration:"4-6 tuần",isActive:!1,isCompleted:!1},{id:3,title:"Web server & API",description:"Học cách xây dựng web server và RESTful APIs",courses:["Node.js & Express","REST API Design","Authentication & Authorization"],duration:"6-8 tuần",isActive:!1,isCompleted:!1},{id:4,title:"DevOps cơ bản",description:"Làm quen với các công cụ DevOps và deployment",courses:["Docker Basics","CI/CD Pipelines","Cloud Services (AWS/GCP/Azure)"],duration:"4-6 tuần",isActive:!1,isCompleted:!1},{id:5,title:"Back-end nâng cao",description:"Học các kỹ thuật nâng cao và tối ưu hóa hiệu suất",courses:["Microservices Architecture","Caching Strategies","Performance Optimization"],duration:"6-8 tuần",isActive:!1,isCompleted:!1},{id:6,title:"Bảo mật & Testing",description:"Hiểu về bảo mật web và kỹ thuật testing",courses:["Web Security","Unit & Integration Testing","Load Testing"],duration:"4-6 tuần",isActive:!1,isCompleted:!1}]},mobile:{title:"Mobile Development",description:"Lộ trình học để trở thành nhà phát triển ứng dụng di động",icon:Pg,color:"bg-sky-500",timeToComplete:"8-10 tháng",level:"Trung cấp đến nâng cao",steps:[{id:1,title:"Cơ bản lập trình",description:"Học cơ bản về lập trình và ngôn ngữ cần thiết (JavaScript, Java, Swift, Dart)",courses:["Programming Fundamentals","Object-Oriented Programming","UI/UX Basics"],duration:"6-8 tuần",isActive:!0,isCompleted:!1},{id:2,title:"Cross-platform Development",description:"Học React Native hoặc Flutter để phát triển đa nền tảng",courses:["React Native Basics","Flutter Fundamentals","Navigation & State Management"],duration:"6-8 tuần",isActive:!1,isCompleted:!1},{id:3,title:"Native Development",description:"Tìm hiểu về phát triển native cho iOS (Swift) hoặc Android (Kotlin)",courses:["iOS Development with Swift","Android Development with Kotlin"],duration:"8-10 tuần",isActive:!1,isCompleted:!1},{id:4,title:"Mobile UI/UX",description:"Thiết kế giao diện người dùng di động hiệu quả",courses:["Mobile UI Design","UX Best Practices","Animation & Interaction"],duration:"4-6 tuần",isActive:!1,isCompleted:!1},{id:5,title:"Backend Integration",description:"Kết nối ứng dụng di động với backend và APIs",courses:["RESTful API Integration","Mobile Authentication","Offline Storage"],duration:"4-6 tuần",isActive:!1,isCompleted:!1},{id:6,title:"Publishing & Monetization",description:"Xuất bản ứng dụng lên App Store, Google Play và kiếm tiền",courses:["App Store Submission","Google Play Deployment","Monetization Strategies"],duration:"2-4 tuần",isActive:!1,isCompleted:!1}]},devops:{title:"DevOps & Cloud",description:"Lộ trình học để trở thành chuyên gia DevOps và Cloud",icon:Oa,color:"bg-amber-500",timeToComplete:"10-12 tháng",level:"Trung cấp đến nâng cao",steps:[{id:1,title:"Nền tảng Linux & Networking",description:"Học cơ bản về hệ điều hành Linux và mạng máy tính",courses:["Linux Administration","Networking Fundamentals","Shell Scripting"],duration:"6-8 tuần",isActive:!0,isCompleted:!1},{id:2,title:"Containerization",description:"Tìm hiểu về Docker và container orchestration",courses:["Docker Fundamentals","Kubernetes Basics","Container Security"],duration:"6-8 tuần",isActive:!1,isCompleted:!1},{id:3,title:"CI/CD & Automation",description:"Học cách thiết lập CI/CD pipelines và tự động hóa",courses:["Jenkins","GitHub Actions","Infrastructure as Code (Terraform)"],duration:"6-8 tuần",isActive:!1,isCompleted:!1},{id:4,title:"Cloud Platforms",description:"Làm quen với các nền tảng cloud chính",courses:["AWS Essentials","Azure Fundamentals","Google Cloud Platform"],duration:"8-10 tuần",isActive:!1,isCompleted:!1},{id:5,title:"Monitoring & Logging",description:"Triển khai các giải pháp giám sát và logging",courses:["Prometheus & Grafana","ELK Stack","Distributed Tracing"],duration:"4-6 tuần",isActive:!1,isCompleted:!1},{id:6,title:"Security & Compliance",description:"Bảo mật và tuân thủ trong môi trường cloud",courses:["Cloud Security","Compliance in DevOps","Security Automation"],duration:"4-6 tuần",isActive:!1,isCompleted:!1}]}};return r.jsxs("div",{className:"min-h-screen bg-white",children:[r.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-indigo-600 to-violet-600 pt-16 pb-24",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-600 to-violet-600 opacity-90"}),r.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-20 bg-white",style:{clipPath:"polygon(0 100%, 100% 100%, 100% 0, 0 100%)"}}),r.jsx("div",{className:"container relative mx-auto px-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx(qe.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-4xl md:text-5xl font-bold mb-6 text-white leading-tight",children:"Lộ trình học tập"}),r.jsx(qe.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.1},className:"text-lg md:text-xl mb-10 text-indigo-100 leading-relaxed max-w-3xl mx-auto",children:"Khám phá lộ trình học tập toàn diện, được thiết kế bởi chuyên gia để giúp bạn đạt được mục tiêu nghề nghiệp trong lĩnh vực công nghệ."})]})})]}),r.jsx("section",{className:"py-12 bg-white",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsx("div",{className:"flex flex-wrap justify-center gap-4 mb-12",children:Object.keys(s).map(i=>r.jsx(qe.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>n(i),className:`px-6 py-3 rounded-lg font-medium transition-all duration-200 ${t===i?"bg-indigo-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:r.jsxs("div",{className:"flex items-center",children:[Fe.createElement(s[i].icon,{className:"w-5 h-5 mr-2"}),s[i].title]})},i))}),r.jsxs("div",{className:"mb-16",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("div",{className:`w-16 h-16 mx-auto mb-4 rounded-xl ${s[t].color} flex items-center justify-center`,children:Fe.createElement(s[t].icon,{className:"w-8 h-8 text-white"})}),r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:s[t].title}),r.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto mb-6",children:s[t].description}),r.jsxs("div",{className:"flex flex-wrap justify-center gap-6 text-sm",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(ir,{className:"w-5 h-5 mr-2 text-indigo-600"}),r.jsx("span",{children:s[t].timeToComplete})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ks,{className:"w-5 h-5 mr-2 text-indigo-600"}),r.jsx("span",{children:s[t].level})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(ho,{className:"w-5 h-5 mr-2 text-indigo-600"}),r.jsxs("span",{children:[s[t].steps.length," giai đoạn"]})]})]})]}),r.jsx("div",{className:"max-w-5xl mx-auto",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 h-full w-1 bg-gray-200"}),s[t].steps.map((i,a)=>r.jsxs(qe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:a*.1},viewport:{once:!0},className:"relative mb-16 last:mb-0",children:[r.jsx("div",{className:`absolute left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 w-12 h-12 rounded-full flex items-center justify-center border-4 border-white ${i.isCompleted?"bg-green-500":i.isActive?s[t].color:"bg-gray-300"}`,children:i.isCompleted?r.jsx(Zn,{className:"w-6 h-6 text-white"}):r.jsx("span",{className:"text-white font-bold",children:i.id})}),r.jsxs("div",{className:`bg-white rounded-xl shadow-lg border ${i.isActive?"border-indigo-200":"border-gray-100"} p-6 ml-12 lg:ml-0 ${a%2===0?"lg:mr-auto lg:ml-0 lg:text-right lg:pr-12":"lg:ml-auto lg:mr-0 lg:pl-12"} lg:w-5/12`,children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:i.title}),r.jsx("p",{className:"text-gray-600 mb-4",children:i.description}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Khóa học đề xuất:"}),r.jsx("ul",{className:"space-y-1",children:i.courses.map((o,l)=>r.jsxs("li",{className:"flex items-start",children:[r.jsx(Zn,{className:"w-5 h-5 mr-2 text-indigo-600 flex-shrink-0 mt-0.5"}),r.jsx("span",{children:o})]},l))})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[r.jsx(ir,{className:"w-4 h-4 mr-1"}),i.duration]}),r.jsx("button",{onClick:()=>e("/courses"),className:`px-4 py-2 text-sm rounded-lg font-medium transition-colors ${i.isActive?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:i.isCompleted?"Xem lại":"Khám phá"})]})]})]},i.id))]})})]})]})}),r.jsx("section",{className:"py-16 bg-gray-50",children:r.jsx("div",{className:"container mx-auto px-4",children:r.jsx("div",{className:"max-w-4xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[r.jsxs("div",{className:"p-10 bg-gradient-to-br from-indigo-600 to-violet-600 text-white",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Bắt đầu hành trình học tập của bạn"}),r.jsx("p",{className:"mb-6",children:"Đăng ký tài khoản để lưu lại lộ trình học tập và theo dõi tiến độ của bạn."}),r.jsxs("ul",{className:"space-y-3 mb-8",children:[r.jsxs("li",{className:"flex items-center",children:[r.jsx(Zn,{className:"w-5 h-5 mr-2"}),r.jsx("span",{children:"Lộ trình học được cá nhân hóa"})]}),r.jsxs("li",{className:"flex items-center",children:[r.jsx(Zn,{className:"w-5 h-5 mr-2"}),r.jsx("span",{children:"Theo dõi tiến độ học tập"})]}),r.jsxs("li",{className:"flex items-center",children:[r.jsx(Zn,{className:"w-5 h-5 mr-2"}),r.jsx("span",{children:"Nhận chứng chỉ hoàn thành"})]})]}),r.jsx("button",{onClick:()=>e("/register"),className:"px-6 py-2 bg-white text-indigo-600 rounded-lg font-medium hover:bg-opacity-90 transition-colors",children:"Đăng ký ngay"})]}),r.jsxs("div",{className:"p-10",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Bạn cần tư vấn?"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Không chắc chắn về lộ trình học nào phù hợp với bạn? Hãy để chúng tôi giúp bạn lựa chọn con đường sự nghiệp phù hợp nhất."}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center p-4 bg-gray-50 rounded-lg",children:[r.jsx(vs,{className:"w-10 h-10 text-indigo-600 mr-4"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Tư vấn miễn phí"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Đặt lịch tư vấn 1:1 với chuyên gia"})]})]}),r.jsxs("div",{className:"flex items-center p-4 bg-gray-50 rounded-lg",children:[r.jsx(Ag,{className:"w-10 h-10 text-indigo-600 mr-4"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Đánh giá năng lực"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Làm bài test đánh giá năng lực miễn phí"})]})]})]}),r.jsx("div",{className:"mt-6",children:r.jsxs("button",{onClick:()=>e("/contact"),className:"w-full px-6 py-3 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 transition-colors flex items-center justify-center",children:["Liên hệ tư vấn ",r.jsx(gj,{className:"w-5 h-5 ml-2"})]})})]})]})})})}),r.jsx("section",{className:"py-20 bg-white",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Câu hỏi thường gặp"}),r.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Giải đáp những thắc mắc phổ biến về lộ trình học tập"})]}),r.jsx("div",{className:"max-w-3xl mx-auto",children:r.jsx("div",{className:"space-y-6",children:[{question:"Làm thế nào để chọn lộ trình học phù hợp?",answer:"Việc chọn lộ trình phụ thuộc vào mục tiêu nghề nghiệp, sở thích và kỹ năng hiện tại của bạn. Bạn có thể đánh giá năng lực hoặc liên hệ với đội ngũ tư vấn của chúng tôi để được hướng dẫn cụ thể."},{question:"Mất bao lâu để hoàn thành một lộ trình?",answer:"Thời gian hoàn thành mỗi lộ trình khác nhau, thường từ 6-12 tháng tùy thuộc vào lộ trình và thời gian bạn dành cho việc học. Bạn có thể học theo tốc độ riêng và không có thời hạn cố định để hoàn thành."},{question:"Tôi cần kiến thức nền tảng gì trước khi bắt đầu?",answer:"Hầu hết các lộ trình đều bắt đầu từ cơ bản và không yêu cầu kiến thức chuyên sâu. Tuy nhiên, việc có nền tảng về máy tính cơ bản và tư duy logic sẽ rất hữu ích."},{question:"Tôi có thể chuyển đổi giữa các lộ trình không?",answer:"Có, bạn có thể chuyển đổi giữa các lộ trình bất cứ lúc nào. Nhiều khóa học cơ bản còn được dùng chung cho nhiều lộ trình khác nhau nên việc chuyển đổi sẽ không làm mất tiến độ của bạn."},{question:"Tôi có nhận được hỗ trợ trong quá trình học không?",answer:"Tất nhiên! Chúng tôi cung cấp hỗ trợ thông qua diễn đàn cộng đồng, phiên hỏi đáp trực tiếp với giảng viên, và nhóm học tập. Bạn sẽ không đơn độc trong hành trình học tập của mình."}].map((i,a)=>r.jsxs(qe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!0},className:"bg-gray-50 rounded-xl p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:i.question}),r.jsx("p",{className:"text-gray-600",children:i.answer})]},a))})})]})})]})},Tte=`You are an AI assistant that helps users by creating test cases for programming problems. 
Please follow these guidelines:

1. Given a problem description, create comprehensive test cases that cover various edge cases, normal inputs, and special situations.
2. For each test case, provide an input and the expected output.
3. Format your test cases as a JSON array with "input" and "expected" fields.
4. Keep your explanations clear and in Vietnamese when possible.
5. Format the test cases in this exact format:

\`\`\`json
[
  {
    "input": <input value (can be number, string, array, or object)>,
    "expected": <expected output (can be number, string, array, or object)>
  },
  // more test cases...
]
\`\`\`

For example, if the problem is to sum two numbers:

\`\`\`json
[
  {
    "input": [1, 2],
    "expected": 3
  },
  {
    "input": [-1, 5],
    "expected": 4
  }
]
\`\`\`

If you're asked to generate test cases for an algorithm problem, provide 5-10 diverse test cases that adequately test the solution.`,Ite="AIzaSyD5MLI0_km4T5XdoFzdF6izDoFfgPiBp_g",Pte="gemini-1.5-flash-latest",Ate=`https://generativelanguage.googleapis.com/v1beta/models/${Pte}:generateContent?key=${Ite}`,pw=async(e,t=[])=>{try{const n=t.map(a=>({role:a.role==="user"?"user":"model",parts:[{text:a.content}]})),s={contents:[{role:"user",parts:[{text:`${Tte}

Conversation History:
${t.map(a=>`${a.role}: ${a.content}`).join(`
`)}

User: ${e}`}]}],generationConfig:{temperature:.2,topP:.95,topK:64,maxOutputTokens:8192}};console.log("Sending request to Gemini API:",JSON.stringify(s));const i=await De.post(Ate,s);if(i.data.candidates&&i.data.candidates.length>0){const a=i.data.candidates[0];if(a.content&&a.content.parts&&a.content.parts.length>0)return a.content.parts[0].text}throw new Error("No valid response from Gemini API")}catch(n){return console.error("Error sending message to Gemini:",n),n.response&&console.error("Response data:",n.response.data),`Xin lỗi, có lỗi khi kết nối với AI. Error: ${n.message||"Unknown error"}`}},Rte=[{id:"javascript",name:"JavaScript"},{id:"python",name:"Python"},{id:"cpp",name:"C++"},{id:"java",name:"Java"}],Xc={javascript:`// Write your JavaScript code here

function solution(input) {
  // Your code here
  return input;
}

// Example usage
console.log(solution(42));`,python:`# Write your Python code here

def solution(input):
    # Your code here
    return input

# Example usage
print(solution(42))`,cpp:`#include <iostream>
using namespace std;

// Write your C++ code here
int solution(int input) {
    // Your code here
    return input;
}

int main() {
    cout << solution(42) << endl;
    return 0;
}`,java:`public class Main {
    // Write your Java code here
    public static int solution(int input) {
        // Your code here
        return input;
    }

    public static void main(String[] args) {
        System.out.println(solution(42));
    }
}`},Lte=()=>{const[e,t]=h.useState([]),[n,s]=h.useState(""),[i,a]=h.useState(!1),[o,l]=h.useState([]),[c,d]=h.useState("javascript"),[u,m]=h.useState(Xc.javascript),[f,p]=h.useState(""),[x,g]=h.useState(!1),[b,w]=h.useState([]),[k,v]=h.useState("chat"),[N,C]=h.useState([]),[T,E]=h.useState({total:0,passed:0,failed:0}),[P,R]=h.useState([]),[y,O]=h.useState(""),[_,L]=h.useState(!1),[A,M]=h.useState("trung bình"),[z,ie]=h.useState("xử lý chuỗi"),X=h.useRef(null),te=["xử lý chuỗi","mảng và ma trận","đệ quy","tìm kiếm","sắp xếp","cấu trúc dữ liệu","thuật toán tham lam","quy hoạch động","toán học","xử lý bit"],B=["dễ","trung bình","khó"];h.useEffect(()=>{const se=localStorage.getItem("aiTestLocalMessages"),G=localStorage.getItem("aiTestLocalTestCases"),W=localStorage.getItem("aiTestLocalLanguage"),Z=localStorage.getItem(`aiTestLocalCode_${c}`),Y=localStorage.getItem("aiTestLocalChatHistory"),ee=localStorage.getItem("aiTestLocalProblemDescription");if(se)try{t(JSON.parse(se))}catch(ae){console.error("Failed to parse saved messages",ae)}else{const ae={role:"assistant",content:'Xin chào! Tôi là trợ lý AI của CampusT. Tôi có thể giúp bạn tạo bài toán lập trình kèm test cases. Nhấn nút "Tạo bài toán mới" để bắt đầu.'};t([ae]),localStorage.setItem("aiTestLocalMessages",JSON.stringify([ae]))}if(G)try{l(JSON.parse(G))}catch(ae){console.error("Failed to parse saved test cases",ae)}if(W&&d(W),Z&&m(Z),Y)try{C(JSON.parse(Y))}catch(ae){console.error("Failed to parse saved chat history",ae),C([])}ee&&O(ee)},[]),h.useEffect(()=>{y&&localStorage.setItem("aiTestLocalProblemDescription",y)},[y]),h.useEffect(()=>{e.length>0&&localStorage.setItem("aiTestLocalMessages",JSON.stringify(e))},[e]),h.useEffect(()=>{o.length>0&&localStorage.setItem("aiTestLocalTestCases",JSON.stringify(o))},[o]),h.useEffect(()=>{localStorage.setItem("aiTestLocalLanguage",c);const se=localStorage.getItem(`aiTestLocalCode_${c}`);m(se||Xc[c])},[c]),h.useEffect(()=>{localStorage.setItem(`aiTestLocalCode_${c}`,u)},[u,c]);const H=async se=>{if(se.preventDefault(),!n.trim())return;const G=n.trim();s(""),O(G),t(W=>[...W,{role:"user",content:G}]),a(!0);try{const W=await pw(G,e);t(ae=>[...ae,{role:"assistant",content:W}]);const Z=$(W);Z.length>0&&l(Z);const ee=[{id:Date.now(),title:G.substring(0,30)+(G.length>30?"...":""),timestamp:new Date().toISOString(),messages:[...e,{role:"user",content:G},{role:"assistant",content:W}],testCases:Z.length>0?Z:o,problemDescription:G},...N].slice(0,10);C(ee),localStorage.setItem("aiTestLocalChatHistory",JSON.stringify(ee))}catch(W){console.error("Error sending message:",W),t(Z=>[...Z,{role:"assistant",content:"Có lỗi xảy ra khi gửi tin nhắn. Vui lòng thử lại sau."}])}finally{a(!1)}},K=async()=>{var se;L(!0),t([]),O(""),l([]),m(Xc[c]),p(""),w([]);try{const G=A,W=z,Z=`Hãy tạo một bài toán lập trình ${G} về ${W}. 
      
      Yêu cầu:
      1. Mô tả bài toán chi tiết với ví dụ input/output
      2. Bài toán phải phù hợp với ngôn ngữ ${(se=Rte.find(Be=>Be.id===c))==null?void 0:se.name}
      3. Tạo 5-8 test cases với input và expected output
      4. Format kết quả như sau:
      
      ## <Tên bài toán>
      
      <Mô tả chi tiết về bài toán>
      
      ### Ví dụ:
      Input: <ví dụ input>
      Output: <ví dụ output>
      
      ### Test cases:
      \`\`\`json
      [
        {
          "input": <input>,
          "expected": <expected output>
        },
        ...
      ]
      \`\`\`
      `;t(Be=>[...Be,{role:"assistant",content:`Đang tạo bài toán ${G} về ${W}... Vui lòng đợi trong giây lát.`}]);const Y=await pw(Z,[]),ee=Y.split("```")[0];ee&&O(ee.trim());const ae=$(Y);ae.length>0&&l(ae),t([{role:"assistant",content:Y}]);const Re=[{id:Date.now(),title:`Bài toán ${G} về ${W}`,timestamp:new Date().toISOString(),messages:[{role:"assistant",content:Y}],testCases:ae,problemDescription:ee?ee.trim():""},...N].slice(0,10);C(Re),localStorage.setItem("aiTestLocalChatHistory",JSON.stringify(Re))}catch(G){console.error("Error generating problem:",G),t([{role:"assistant",content:"Có lỗi xảy ra khi tạo bài toán mới. Vui lòng thử lại sau."}])}finally{L(!1)}},$=se=>{const G=/```(?:json|javascript)?\s*(\[(?:\s|\S)*?\])\s*```/g,W=[...se.matchAll(G)];if(W&&W.length>0)for(const Z of W)try{const Y=Z[1].trim(),ee=JSON.parse(Y);if(Array.isArray(ee)&&ee.length>0&&ee[0].hasOwnProperty("input")&&ee[0].hasOwnProperty("expected"))return ee}catch(Y){console.error("Failed to parse test cases from response match",Y)}try{const Z=/\[\s*\{\s*"input"[\s\S]*?\}\s*\]/g,Y=se.match(Z);if(Y){const ee=JSON.parse(Y[0]);if(Array.isArray(ee)&&ee.length>0&&ee[0].hasOwnProperty("input")&&ee[0].hasOwnProperty("expected"))return ee}}catch(Z){console.error("Failed to extract JSON from plain text",Z)}return[]},me=()=>{t([{role:"assistant",content:'Xin chào! Tôi là trợ lý AI của CampusT. Tôi có thể giúp bạn tạo bài toán lập trình kèm test cases. Nhấn nút "Tạo bài toán mới" để bắt đầu.'}]),s(""),l([]),m(Xc[c]),p(""),w([]),O(""),localStorage.removeItem("aiTestLocalMessages"),localStorage.removeItem("aiTestLocalTestCases"),localStorage.removeItem("aiTestLocalProblemDescription"),localStorage.setItem("aiTestLocalMessages",JSON.stringify([{role:"assistant",content:'Xin chào! Tôi là trợ lý AI của CampusT. Tôi có thể giúp bạn tạo bài toán lập trình kèm test cases. Nhấn nút "Tạo bài toán mới" để bắt đầu.'}]))},ke=se=>{m(se)},ye=se=>{t(se.messages),se.testCases&&se.testCases.length>0&&l(se.testCases),se.problemDescription&&O(se.problemDescription),v("chat")};return r.jsxs("div",{className:"h-[93vh] flex flex-col p-2 max-w-[100vw] mx-auto bg-gradient-to-br from-gray-50 to-blue-50 rounded-lg",children:[r.jsxs("div",{className:"flex justify-between items-center mb-3 pb-2 border-b border-gray-200",children:[r.jsx("h1",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600",children:"AI Test Case Generator"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("select",{value:A,onChange:se=>M(se.target.value),className:"px-2 py-1.5 bg-white border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",children:B.map(se=>r.jsxs("option",{value:se,children:["Độ khó: ",se]},se))}),r.jsx("select",{value:z,onChange:se=>ie(se.target.value),className:"px-2 py-1.5 bg-white border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",children:te.map(se=>r.jsxs("option",{value:se,children:["Loại: ",se]},se))})]}),r.jsxs("button",{onClick:K,disabled:_,className:"flex items-center px-3 py-1.5 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(Vi,{className:"h-4 w-4 mr-1"}),r.jsx("span",{children:_?"Đang tạo...":"Tạo bài toán mới"})]}),r.jsxs("button",{onClick:me,className:"flex items-center px-3 py-1.5 bg-white hover:bg-gray-50 rounded-lg transition-all shadow-sm border border-gray-200 hover:shadow",children:[r.jsx(kn,{className:"h-4 w-4 mr-1 text-blue-600"}),r.jsx("span",{className:"text-gray-700",children:"Bắt đầu lại"})]})]})]}),r.jsxs("div",{className:"flex-1 flex gap-3 overflow-hidden",children:[r.jsxs("div",{className:"w-1/5 flex flex-col overflow-hidden rounded-lg shadow-lg bg-white backdrop-blur-sm bg-opacity-90",children:[r.jsxs("div",{className:"flex border-b border-gray-200",children:[r.jsxs("button",{onClick:()=>v("chat"),className:`flex items-center justify-center py-2.5 px-4 text-sm font-medium focus:outline-none w-1/2 ${k==="chat"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx(wl,{className:"w-4 h-4 mr-2"}),"Trò chuyện"]}),r.jsxs("button",{onClick:()=>v("history"),className:`flex items-center justify-center py-2.5 px-4 text-sm font-medium focus:outline-none w-1/2 ${k==="history"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx(ir,{className:"w-4 h-4 mr-2"}),"Lịch sử"]})]}),k==="chat"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-blue-100 scrollbar-track-transparent",children:r.jsxs("div",{className:"p-3 space-y-3",children:[e.map((se,G)=>r.jsx("div",{className:`flex ${se.role==="user"?"justify-end":"justify-start"} animate-fadeIn`,children:r.jsx("div",{className:`max-w-[95%] p-2 rounded-lg shadow-sm text-xs ${se.role==="user"?"bg-gradient-to-r from-blue-600 to-blue-500 text-white":"bg-white border border-gray-200 text-gray-800"}`,children:se.role==="assistant"?r.jsx(ps,{components:{p:({node:W,...Z})=>r.jsx("p",{className:"mb-1 text-xs text-gray-800",...Z}),h1:({node:W,...Z})=>r.jsx("h1",{className:"text-sm font-bold my-1 text-gray-800",...Z}),h2:({node:W,...Z})=>r.jsx("h2",{className:"text-xs font-bold my-1 text-gray-800",...Z}),h3:({node:W,...Z})=>r.jsx("h3",{className:"text-xs font-bold my-1 text-gray-800",...Z}),ul:({node:W,...Z})=>r.jsx("ul",{className:"list-disc pl-4 mb-1 text-xs text-gray-800",...Z}),ol:({node:W,...Z})=>r.jsx("ol",{className:"list-decimal pl-4 mb-1 text-xs text-gray-800",...Z}),li:({node:W,...Z})=>r.jsx("li",{className:"mb-0.5 text-xs text-gray-800",...Z}),code:({node:W,inline:Z,...Y})=>Z?r.jsx("code",{className:"bg-gray-100 px-1 rounded text-xs",...Y}):r.jsx("code",{className:"block bg-gray-100 p-1 rounded text-xs my-1 overflow-x-auto",...Y}),pre:({node:W,...Z})=>r.jsx("pre",{className:"bg-gray-100 p-1 rounded my-1 overflow-x-auto text-xs",...Z})},children:se.content}):r.jsx("p",{className:"text-xs",children:se.content})})},G)),i||_?r.jsx("div",{className:"flex justify-start animate-pulse",children:r.jsx("div",{className:"bg-white border border-gray-200 p-2 rounded-lg shadow-sm",children:r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("div",{className:"h-1.5 w-1.5 bg-blue-400 rounded-full animate-bounce"}),r.jsx("div",{className:"h-1.5 w-1.5 bg-blue-500 rounded-full animate-bounce delay-75"}),r.jsx("div",{className:"h-1.5 w-1.5 bg-blue-600 rounded-full animate-bounce delay-150"})]})})}):null,r.jsx("div",{ref:X})]})}),r.jsxs("form",{onSubmit:H,className:"flex items-center px-2 py-2 border-t border-gray-100",children:[r.jsx("input",{type:"text",value:n,onChange:se=>s(se.target.value),placeholder:"Hỏi thêm về bài toán...",className:"flex-1 px-3 py-1.5 border border-gray-200 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-xs shadow-sm",disabled:i||_}),r.jsx("button",{type:"submit",disabled:i||_||!n.trim(),className:"ml-1 flex items-center justify-center h-7 w-7 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-full hover:opacity-90 transition-all shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx(Ud,{className:"h-3.5 w-3.5"})})]})]}),k==="history"&&r.jsx("div",{className:"flex-1 overflow-y-auto",children:r.jsx("div",{className:"p-3",children:N.length>0?r.jsx("div",{className:"space-y-2",children:N.map(se=>{var G;return r.jsxs("div",{onClick:()=>ye(se),className:"p-2 bg-gray-50 rounded-lg border border-gray-200 hover:bg-blue-50 cursor-pointer transition-colors",children:[r.jsx("div",{className:"text-xs font-medium truncate",children:se.title}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(se.timestamp).toLocaleString()}),r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[((G=se.testCases)==null?void 0:G.length)||0," test cases"]})]},se.id)})}):r.jsxs("div",{className:"text-center p-4 text-gray-500",children:[r.jsx(ir,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),r.jsx("p",{className:"text-sm",children:"Chưa có cuộc trò chuyện nào"})]})})})]}),r.jsx("div",{className:"w-4/5 flex flex-col overflow-hidden",children:r.jsx("div",{className:"flex-1 overflow-hidden rounded-lg shadow-lg bg-white backdrop-blur-sm bg-opacity-90",children:r.jsx(wN,{code:u,language:c,onChange:ke})})})]})]})},Mte=`${Qn}/api`,Cs=De.create({baseURL:Mte});Cs.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));const Dte=async()=>(await Cs.get("/competitions")).data,Ad=async e=>{var t,n,s,i,a;try{console.log(`Fetching competition ${e} details`);const o=await Cs.get(`/competitions/${e}`);return console.log("Competition API response:",o.data),console.log("Current participants count:",(n=(t=o.data)==null?void 0:t.data)==null?void 0:n.CurrentParticipants),(s=o.data)!=null&&s.data?o.data:(console.error("Invalid competition response format:",o.data),{success:!1,message:"Invalid competition data format returned from server"})}catch(o){return console.error(`Error fetching competition ${e}:`,o.response?{status:o.response.status,data:o.response.data}:o.message),{success:!1,message:((a=(i=o.response)==null?void 0:i.data)==null?void 0:a.message)||"Error fetching competition details",error:o.message}}},gw=async(e,t)=>{var n,s,i;try{return console.log(`Fetching problem details for competition ${e}, problem ${t}`),(await Cs.get(`/competitions/${e}/problems/${t}`)).data}catch(a){return console.error(`Error fetching problem details for competition ${e}, problem ${t}:`,a.response?{status:a.response.status,data:a.response.data}:a.message),((n=a.response)==null?void 0:n.status)===401?{success:!1,message:"You must be logged in to view problem details.",isAuthError:!0}:((s=a.response)==null?void 0:s.status)===403?{success:!1,message:a.response.data.message||"You do not have permission to view this problem.",isPermissionError:!0}:((i=a.response)==null?void 0:i.status)===500?{success:!1,message:"Server error occurred while loading problem details. Please try again later.",isServerError:!0}:a.response?{success:!1,message:a.response.data.message||"An error occurred while fetching problem details.",status:a.response.status}:{success:!1,message:"Unable to connect to the server. Please check your internet connection.",isNetworkError:!0}}},$te=async e=>{var t,n,s;try{console.log(`Registering for competition ${e}`);const i=await Cs.post(`/competitions/${e}/register`);return console.log("Registration response:",i.data),i.data}catch(i){if(console.error(`Registration error for competition ${e}:`,i.response?{status:i.response.status,data:i.response.data}:i.message),((t=i.response)==null?void 0:t.status)===400){if(console.log("Checking for already registered error:",i.response.data),i.response.data.code==="ALREADY_REGISTERED")return console.log("Detected ALREADY_REGISTERED error code, returning success with flag"),{success:!0,message:i.response.data.message||"You are already registered for this competition",alreadyRegistered:!0};if((n=i.response.data.message)!=null&&n.includes("not open for registration"))return{success:!1,message:"This competition is not open for registration at this time.",notOpen:!0};if((s=i.response.data.message)!=null&&s.includes("full"))return{success:!1,message:"This competition is full. No more registrations are being accepted.",isFull:!0};const a=i.response.data.message||"";if(a.includes("already registered")||a.includes("already enrolled")||a.includes("already signed up")||a.includes("already a participant"))return console.log("Detected already registered error through message, returning success with flag"),{success:!0,message:"You are already registered for this competition",alreadyRegistered:!0}}throw i}},tC=async e=>{var t,n;try{console.log(`Starting competition ${e}`);const s=await Cs.post(`/competitions/${e}/start`);return console.log("Start competition response:",s.data),s.data}catch(s){if(console.error(`Error starting competition ${e}:`,s.response?{status:s.response.status,data:s.response.data}:s.message),((t=s.response)==null?void 0:t.status)===400){console.log("Checking start competition error:",s.response.data);const i=s.response.data.message||"";if(i.includes("not currently ongoing"))return console.log("Competition is not ongoing, returning with friendly message"),{success:!1,message:"This competition cannot be started right now. It may not have begun yet or has already ended.",notOngoing:!0};if(i.includes("already started"))return console.log("User already started this competition, redirecting"),{success:!0,message:"You have already started this competition",alreadyStarted:!0}}if(((n=s.response)==null?void 0:n.status)===500)return console.log("Server error when starting competition, returning friendly message"),{success:!1,message:"Unable to start competition due to a server error. Please try again later.",isServerError:!0};throw s}},xw=async(e,t,n,s)=>{var i,a,o,l;try{console.log(`Submitting solution for competition ${e}, problem ${t}`);const c=await Cs.post(`/competitions/${e}/problems/${t}/submit`,{sourceCode:n,language:s});if(console.log("Submission response:",c.data),(a=(i=c.data)==null?void 0:i.data)!=null&&a.results){const d=c.data.data.results;return{...c.data,data:{...c.data.data,diffInfo:d.diffInfo||null}}}return c.data}catch(c){return console.error(`Submission error for competition ${e}, problem ${t}:`,c.response?{status:c.response.status,data:c.response.data}:c.message),{success:!1,message:((l=(o=c.response)==null?void 0:o.data)==null?void 0:l.message)||"Error submitting solution",error:c.message}}},Ote=async e=>(await Cs.get(`/competitions/${e}/scoreboard`)).data,Bte=async e=>(await Cs.get(`/competitions/submissions/${e}`)).data,_te=()=>{const[e,t]=h.useState([]),[n,s]=h.useState(!0),[i,a]=h.useState(null),[o,l]=h.useState("all");h.useEffect(()=>{(async()=>{try{s(!0);const x=await Dte();x.success?t(x.data||[]):a("Failed to load competitions")}catch(x){console.error("Error fetching competitions:",x),a("An error occurred while fetching competitions")}finally{s(!1)}})()},[]);const c=e.filter(p=>o==="all"?!0:p.Status===o),d=(p,x,g)=>{const b=new Date,w=new Date(x),k=new Date(g);return b<w?"upcoming":b>=w&&b<=k?"ongoing":"completed"},u=p=>{switch(p){case"upcoming":return"Sắp diễn ra";case"ongoing":return"Đang diễn ra";case"completed":return"Đã kết thúc";case"cancelled":return"Đã hủy";default:return"Chưa xác định"}},m=p=>{switch(p){case"upcoming":return"bg-blue-100 text-blue-800";case"ongoing":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},f=p=>{try{return Fj(new Date(p),{addSuffix:!0,locale:Qr})}catch{return"Invalid date"}};return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Cuộc Thi Lập Trình"}),r.jsx("p",{className:"text-gray-600",children:"Tham gia các cuộc thi lập trình để nâng cao kỹ năng và cạnh tranh với những người khác"})]}),r.jsxs("div",{className:"flex mb-6 border-b",children:[r.jsx("button",{onClick:()=>l("all"),className:`px-4 py-2 font-medium ${o==="all"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Tất cả"}),r.jsx("button",{onClick:()=>l("upcoming"),className:`px-4 py-2 font-medium ${o==="upcoming"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Sắp diễn ra"}),r.jsx("button",{onClick:()=>l("ongoing"),className:`px-4 py-2 font-medium ${o==="ongoing"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Đang diễn ra"}),r.jsx("button",{onClick:()=>l("completed"),className:`px-4 py-2 font-medium ${o==="completed"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Đã kết thúc"})]}),n?r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):i?r.jsx("div",{className:"bg-red-100 text-red-700 p-4 rounded-md",children:i}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.length>0?c.map(p=>{const x=d(p.Status,p.StartTime,p.EndTime);return r.jsxs(Ve,{to:`/competitions/${p.CompetitionID}`,className:"bg-white rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow",children:[r.jsx("div",{className:"aspect-w-16 aspect-h-9 overflow-hidden",children:r.jsx("img",{src:p.ThumbnailUrl||"https://via.placeholder.com/600x400?text=Competition",alt:p.Title,className:"w-full h-48 object-cover"})}),r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2 line-clamp-2",children:p.Title}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${m(x)}`,children:u(x)})]}),r.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:p.Description}),r.jsxs("div",{className:"text-sm text-gray-500",children:[r.jsxs("div",{className:"flex items-center mb-1",children:[r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("span",{children:[x==="upcoming"&&`Bắt đầu ${f(p.StartTime)}`,x==="ongoing"&&`Kết thúc ${f(p.EndTime)}`,x==="completed"&&`Kết thúc ${f(p.EndTime)}`]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),r.jsx("span",{children:p.Difficulty||"Trung Bình"})]})]})]})]},p.CompetitionID)}):r.jsx("div",{className:"col-span-full py-16 text-center",children:r.jsx("p",{className:"text-gray-500",children:"Không tìm thấy cuộc thi nào phù hợp với bộ lọc."})})})]})},Fte=()=>{var te,B;const{id:e}=or(),t=St(),{isAuthenticated:n}=Kn(),[s,i]=h.useState(null),[a,o]=h.useState(!0),[l,c]=h.useState(null),[d,u]=h.useState(!1),[m,f]=h.useState(!1),[p,x]=h.useState("overview"),[g,b]=h.useState(null),[w,k]=h.useState(!1),[v,N]=h.useState(!1),[C,T]=h.useState(0),E=async()=>{try{console.log("Manually refreshing competition data"),o(!0);const H=await Ad(e);H.success?(console.log("Refreshed competition data:",H.data),console.log("Refreshed participant count:",H.data.CurrentParticipants),i(H.data),H.data.isRegistered&&console.log("User is already registered for this competition")):(console.error("Failed to refresh competition data:",H),c("Failed to load competition details"))}catch(H){console.error("Error refreshing competition data:",H),c("An error occurred while fetching competition details")}finally{o(!1)}};h.useEffect(()=>{E()},[e,C]);const P=async()=>{if(s)try{k(!0);const H=await Ote(e);H.success?b(H.data):re.error("Failed to load scoreboard")}catch(H){console.error("Error fetching scoreboard:",H),re.error("An error occurred while fetching scoreboard")}finally{k(!1)}};h.useEffect(()=>{p==="scoreboard"&&!g&&P()},[p,g]);const R=async()=>{if(!n){re.info("Please log in to register for this competition"),t("/login",{state:{from:`/competitions/${e}`}});return}try{u(!0),console.log("Attempting to register for competition:",e);const H=await $te(e);console.log("Registration response received:",H),H.success?(H.alreadyRegistered?(console.log("User is already registered, showing info toast"),re.info(H.message||"You are already registered for this competition"),N(!0)):(console.log("Registration successful, showing success toast"),re.success("Successfully registered for the competition"),N(!0)),setTimeout(()=>{console.log("Triggering competition data refresh after registration"),T(K=>K+1)},1e3)):H.notOpen?re.error("This competition is not open for registration at this time"):H.isFull?re.error("This competition is full. No more registrations are being accepted"):(console.log("Registration response indicates failure:",H),re.error(H.message||"Failed to register for the competition"))}catch(H){if(console.error("Error registering for competition:",H),H.response&&console.error("Error response details:",{status:H.response.status,statusText:H.response.statusText,data:H.response.data,headers:H.response.headers}),H.response){const{status:K,data:$}=H.response;switch(K){case 400:if($.message&&$.message.toLowerCase().includes("already registered")){console.log("Handling already registered error in component"),re.info("You are already registered for this competition");const me=await Ad(e);me.success&&i({...me.data,isRegistered:!0});break}else if($.message&&$.message.toLowerCase().includes("not open for registration")){re.error("This competition is not open for registration at this time");break}else if($.message&&$.message.toLowerCase().includes("full")){re.error("This competition is full. No more registrations are being accepted");break}re.error($.message||"Invalid registration request");break;case 401:re.error("Please log in to register for this competition"),t("/login",{state:{from:`/competitions/${e}`}});break;case 404:re.error("Competition not found");break;case 500:re.error("Server error. Please try again later.");break;default:re.error($.message||"An error occurred while registering")}}else re.error("Connection error. Please check your internet connection and try again.")}finally{u(!1)}},y=async()=>{var H,K;try{f(!0);const $=await tC(e);if($.success)if(re.success("Competition started successfully"),s.problems&&s.problems.length>0)t(`/competitions/${e}/problems/${s.problems[0].ProblemID}`);else{const me=await Ad(e);me.success&&i(me.data)}else re.error($.message||"Failed to start the competition")}catch($){console.error("Error starting competition:",$),re.error(((K=(H=$.response)==null?void 0:H.data)==null?void 0:K.message)||"An error occurred while starting the competition")}finally{f(!1)}},O=()=>{if(!s)return"";const H=new Date,K=new Date(s.StartTime),$=new Date(s.EndTime);return H<K?"upcoming":H>=K&&H<=$?"ongoing":"completed"},_=H=>{try{return Yr(new Date(H),"HH:mm dd/MM/yyyy",{locale:Qr})}catch{return"Invalid date"}},L=H=>{switch(H){case"upcoming":return"Sắp diễn ra";case"ongoing":return"Đang diễn ra";case"completed":return"Đã kết thúc";case"cancelled":return"Đã hủy";default:return"Chưa xác định"}},A=H=>{switch(H){case"upcoming":return"bg-blue-100 text-blue-800";case"ongoing":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},M=H=>{switch(H){case"Dễ":return"text-green-600";case"Trung bình":return"text-yellow-600";case"Khó":return"text-red-600";default:return"text-gray-600"}},z=()=>{var me;if(!s)return null;if(!n)return r.jsx("button",{onClick:()=>t("/login",{state:{from:`/competitions/${e}`}}),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md",children:"Đăng nhập để tham gia"});const H=O(),K=s.isRegistered||v,$=s.participantStatus;return K&&$&&$.Status==="active"?r.jsxs("div",{children:[r.jsx(Ve,{to:`/competitions/${e}/problems/${(me=s.problems[0])==null?void 0:me.ProblemID}`,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md block text-center",children:"Tiếp tục thi đấu"}),r.jsxs("div",{className:"mt-2 text-sm text-gray-500 text-center",children:["Cuộc thi kết thúc vào: ",_($.EndTime)]})]}):K&&(!$||$.Status==="registered"||v)?H==="ongoing"||v?r.jsxs("div",{children:[v&&r.jsxs("div",{className:"bg-green-50 border border-green-100 rounded-md p-3 mb-4",children:[r.jsxs("div",{className:"flex items-center text-green-700",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),r.jsx("span",{className:"font-medium",children:"Đăng ký thành công!"})]}),r.jsx("p",{className:"mt-1 text-sm text-green-600",children:"Bạn đã đăng ký tham gia cuộc thi thành công và có thể bắt đầu ngay bây giờ."})]}),r.jsx("button",{onClick:y,disabled:m,className:"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md",children:m?"Đang khởi tạo...":"Vào thi đấu ngay"})]}):H==="upcoming"?r.jsxs("div",{children:[v&&r.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-md p-3 mb-4",children:[r.jsxs("div",{className:"flex items-center text-blue-700",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),r.jsx("span",{className:"font-medium",children:"Đăng ký thành công!"})]}),r.jsx("p",{className:"mt-1 text-sm text-blue-600",children:"Bạn đã đăng ký tham gia cuộc thi thành công. Hãy quay lại khi cuộc thi bắt đầu."})]}),r.jsx("button",{disabled:!0,className:"w-full bg-gray-300 text-gray-600 font-medium py-2 px-4 rounded-md cursor-not-allowed",children:"Đã đăng ký - Chờ cuộc thi bắt đầu"})]}):r.jsxs("div",{children:[v&&r.jsxs("div",{className:"bg-gray-50 border border-gray-100 rounded-md p-3 mb-4",children:[r.jsxs("div",{className:"flex items-center text-gray-700",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),r.jsx("span",{className:"font-medium",children:"Đăng ký thành công!"})]}),r.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Bạn đã đăng ký thành công, nhưng rất tiếc cuộc thi đã kết thúc."})]}),r.jsx("button",{disabled:!0,className:"w-full bg-gray-300 text-gray-600 font-medium py-2 px-4 rounded-md cursor-not-allowed",children:"Đã kết thúc - Bạn chưa tham gia"})]}):H==="upcoming"||H==="ongoing"?r.jsx("button",{onClick:R,disabled:d,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md",children:d?"Đang đăng ký...":"Đăng ký tham gia"}):r.jsx("button",{disabled:!0,className:"w-full bg-gray-300 text-gray-600 font-medium py-2 px-4 rounded-md cursor-not-allowed",children:"Cuộc thi đã kết thúc"})},ie=()=>{var H;if(!s)return null;switch(p){case"overview":return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Mô tả cuộc thi"}),r.jsx("div",{className:"prose max-w-none",children:r.jsx("p",{children:s.Description})}),r.jsx("h3",{className:"text-xl font-semibold mt-8 mb-4",children:"Thông tin chung"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Thời gian bắt đầu"}),r.jsx("p",{children:_(s.StartTime)})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Thời gian kết thúc"}),r.jsx("p",{children:_(s.EndTime)})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Thời lượng"}),r.jsxs("p",{children:[s.Duration," phút"]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Độ khó"}),r.jsx("p",{className:M(s.Difficulty),children:s.Difficulty||"Trung bình"})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Số lượng người tham gia"}),r.jsxs("p",{children:[s.CurrentParticipants," / ",s.MaxParticipants]})]}),s.OrganizerName&&r.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Tổ chức bởi"}),r.jsx("p",{children:s.OrganizerName})]})]})]});case"problems":return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Danh sách bài tập"}),s.isRegistered?((H=s.participantStatus)==null?void 0:H.Status)!=="active"?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-gray-500 mb-4",children:"Bạn cần vào thi đấu để xem chi tiết"}),r.jsx("button",{onClick:y,disabled:m||O()!=="ongoing",className:`bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md ${O()!=="ongoing"?"opacity-50 cursor-not-allowed":""}`,children:m?"Đang khởi tạo...":"Vào thi đấu ngay"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tên bài"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Độ khó"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Điểm"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trạng thái"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.problems.map(K=>r.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>t(`/competitions/${e}/problems/${K.ProblemID}`),children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-blue-600 hover:text-blue-800",children:K.Title})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`text-sm ${M(K.Difficulty)}`,children:K.Difficulty})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:K.Points}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"text-sm text-gray-500",children:"Chưa nộp bài"})})]},K.ProblemID))})]})}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-gray-500 mb-4",children:"Bạn cần đăng ký tham gia cuộc thi để xem chi tiết bài tập"}),r.jsx("button",{onClick:R,disabled:d,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md",children:d?"Đang đăng ký...":"Đăng ký ngay"})]})]});case"scoreboard":return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Bảng xếp hạng"}),w?r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):g?g.participants.length===0?r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-gray-500",children:"Chưa có người tham gia"})}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Xếp hạng"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Người tham gia"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Điểm"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Số bài đã giải"}),g.problems.map(K=>r.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:K.Title.split(" ")[0]},K.ProblemID))]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.participants.map(K=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:K.rank}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Tt,{src:K.Image,alt:K.FullName||"Người dùng",name:K.FullName,size:"small"}),r.jsx("div",{className:"ml-3",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:K.FullName})})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:K.Score}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:K.TotalProblemsSolved}),g.problems.map($=>{const me=K.problems[$.ProblemID];return r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center",children:me?me.accepted?r.jsx("span",{className:"text-green-600 font-medium",children:me.score}):r.jsxs("span",{className:"text-red-600",children:["-",me.attempts]}):r.jsx("span",{className:"text-gray-400",children:"-"})},$.ProblemID)})]},K.ParticipantID))})]})}):r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-gray-500",children:"Không thể tải bảng xếp hạng"})})]});default:return null}};if(h.useEffect(()=>{if(v){const H=setTimeout(()=>{N(!1)},6e4);return()=>clearTimeout(H)}},[v]),a)return r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"flex justify-center items-center py-32",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})});if(l||!s)return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("div",{className:"bg-red-100 text-red-700 p-4 rounded-md",children:l||"Competition not found"}),r.jsx("div",{className:"mt-4",children:r.jsx(Ve,{to:"/competitions",className:"text-blue-600 hover:text-blue-800",children:"← Quay lại danh sách cuộc thi"})})]});const X=O();return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("div",{className:"mb-4",children:r.jsx(Ve,{to:"/competitions",className:"text-blue-600 hover:text-blue-800",children:"← Quay lại danh sách cuộc thi"})}),r.jsxs("div",{className:"relative w-full h-64 md:h-80 rounded-xl overflow-hidden mb-6",children:[r.jsx("img",{src:s.CoverImageURL||"https://placehold.co/1200x400?text=Competition+Cover",alt:s.Title,className:"w-full h-full object-cover",onError:H=>{H.target.onerror=null,H.target.src="https://placehold.co/1200x400?text=No+Image"}}),r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-end",children:r.jsxs("div",{className:"p-6 text-white w-full",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h1",{className:"text-3xl font-bold",children:s.Title}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${A(X)}`,children:L(X)})]}),r.jsxs("div",{className:"mt-2 flex flex-wrap gap-3",children:[r.jsxs("span",{className:"text-sm bg-black bg-opacity-30 px-2 py-1 rounded",children:["Bắt đầu: ",_(s.StartTime)]}),r.jsxs("span",{className:"text-sm bg-black bg-opacity-30 px-2 py-1 rounded",children:["Kết thúc: ",_(s.EndTime)]}),r.jsxs("span",{className:"text-sm bg-black bg-opacity-30 px-2 py-1 rounded",children:["Thời lượng: ",s.Duration," phút"]}),r.jsxs("span",{className:"text-sm bg-black bg-opacity-30 px-2 py-1 rounded",children:["Độ khó: ",s.Difficulty]})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("div",{className:"mb-6 bg-white rounded-lg shadow-md overflow-hidden",children:r.jsxs("div",{className:"flex border-b",children:[r.jsx("button",{className:`flex-1 py-3 px-4 text-center ${p==="overview"?"border-b-2 border-blue-500 font-medium text-blue-600":"text-gray-600 hover:text-gray-800"}`,onClick:()=>x("overview"),children:"Tổng quan"}),r.jsx("button",{className:`flex-1 py-3 px-4 text-center ${p==="problems"?"border-b-2 border-blue-500 font-medium text-blue-600":"text-gray-600 hover:text-gray-800"}`,onClick:()=>x("problems"),children:"Bài tập"}),r.jsx("button",{className:`flex-1 py-3 px-4 text-center ${p==="scoreboard"?"border-b-2 border-blue-500 font-medium text-blue-600":"text-gray-600 hover:text-gray-800"}`,onClick:()=>{x("scoreboard"),P()},children:"Bảng xếp hạng"})]})}),ie()]}),r.jsx("div",{className:"md:col-span-1",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Tham gia cuộc thi"}),s.isRegistered&&r.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-md p-3 mb-4",children:[r.jsxs("div",{className:"flex items-center text-blue-800",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),r.jsx("span",{className:"font-medium",children:"Bạn đã đăng ký tham gia"})]}),((te=s.participantStatus)==null?void 0:te.StartTime)&&r.jsxs("p",{className:"mt-1 text-sm text-blue-700",children:["Bắt đầu lúc: ",_(s.participantStatus.StartTime)]})]}),r.jsx("div",{className:"mt-4",children:z()}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase mb-2",children:"Thông tin thêm"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Số lượng bài tập:"}),r.jsx("span",{className:"text-sm font-medium",children:((B=s.problems)==null?void 0:B.length)||0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Người tham gia:"}),r.jsxs("span",{className:"text-sm font-medium",children:[s.CurrentParticipants," / ",s.MaxParticipants]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Độ khó:"}),r.jsx("span",{className:`text-sm font-medium ${M(s.Difficulty)}`,children:s.Difficulty})]})]})]})]})})]})]})};function zte(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function bw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yw(Object(n),!0).forEach(function(s){zte(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yw(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Ute(e,t){if(e==null)return{};var n={},s=Object.keys(e),i,a;for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Vte(e,t){if(e==null)return{};var n=Ute(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Hte(e,t){return Wte(e)||qte(e,t)||Kte(e,t)||Gte()}function Wte(e){if(Array.isArray(e))return e}function qte(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],s=!0,i=!1,a=void 0;try{for(var o=e[Symbol.iterator](),l;!(s=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));s=!0);}catch(c){i=!0,a=c}finally{try{!s&&o.return!=null&&o.return()}finally{if(i)throw a}}return n}}function Kte(e,t){if(e){if(typeof e=="string")return vw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vw(e,t)}}function vw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Gte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xte(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ww(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function jw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ww(Object(n),!0).forEach(function(s){Xte(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ww(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Yte(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(s){return t.reduceRight(function(i,a){return a(i)},s)}}function Ho(e){return function t(){for(var n=this,s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return i.length>=e.length?e.apply(this,i):function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return t.apply(n,[].concat(i,l))}}}function vu(e){return{}.toString.call(e).includes("Object")}function Qte(e){return!Object.keys(e).length}function ql(e){return typeof e=="function"}function Jte(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Zte(e,t){return vu(t)||Qs("changeType"),Object.keys(t).some(function(n){return!Jte(e,n)})&&Qs("changeField"),t}function ene(e){ql(e)||Qs("selectorType")}function tne(e){ql(e)||vu(e)||Qs("handlerType"),vu(e)&&Object.values(e).some(function(t){return!ql(t)})&&Qs("handlersType")}function nne(e){e||Qs("initialIsRequired"),vu(e)||Qs("initialType"),Qte(e)&&Qs("initialContent")}function rne(e,t){throw new Error(e[t]||e.default)}var sne={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Qs=Ho(rne)(sne),Yc={changes:Zte,selector:ene,handler:tne,initial:nne};function ine(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Yc.initial(e),Yc.handler(t);var n={current:e},s=Ho(lne)(n,t),i=Ho(one)(n),a=Ho(Yc.changes)(e),o=Ho(ane)(n);function l(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(u){return u};return Yc.selector(d),d(n.current)}function c(d){Yte(s,i,a,o)(d)}return[l,c]}function ane(e,t){return ql(t)?t(e.current):t}function one(e,t){return e.current=jw(jw({},e.current),t),t}function lne(e,t,n){return ql(t)?t(e.current):Object.keys(n).forEach(function(s){var i;return(i=t[s])===null||i===void 0?void 0:i.call(t,e.current[s])}),n}var cne={create:ine},dne={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function une(e){return function t(){for(var n=this,s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return i.length>=e.length?e.apply(this,i):function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return t.apply(n,[].concat(i,l))}}}function hne(e){return{}.toString.call(e).includes("Object")}function mne(e){return e||kw("configIsRequired"),hne(e)||kw("configType"),e.urls?(fne(),{paths:{vs:e.urls.monacoBase}}):e}function fne(){console.warn(nC.deprecation)}function pne(e,t){throw new Error(e[t]||e.default)}var nC={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},kw=une(pne)(nC),gne={config:mne},xne=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return function(i){return n.reduceRight(function(a,o){return o(a)},i)}};function rC(e,t){return Object.keys(t).forEach(function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],rC(e[n],t[n]))}),bw(bw({},e),t)}var yne={type:"cancelation",msg:"operation is manually canceled"};function vf(e){var t=!1,n=new Promise(function(s,i){e.then(function(a){return t?i(yne):s(a)}),e.catch(i)});return n.cancel=function(){return t=!0},n}var bne=cne.create({config:dne,isInitialized:!1,resolve:null,reject:null,monaco:null}),sC=Hte(bne,2),vc=sC[0],Qh=sC[1];function vne(e){var t=gne.config(e),n=t.monaco,s=Vte(t,["monaco"]);Qh(function(i){return{config:rC(i.config,s),monaco:n}})}function wne(){var e=vc(function(t){var n=t.monaco,s=t.isInitialized,i=t.resolve;return{monaco:n,isInitialized:s,resolve:i}});if(!e.isInitialized){if(Qh({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),vf(wf);if(window.monaco&&window.monaco.editor)return iC(window.monaco),e.resolve(window.monaco),vf(wf);xne(jne,Nne)(Cne)}return vf(wf)}function jne(e){return document.body.appendChild(e)}function kne(e){var t=document.createElement("script");return e&&(t.src=e),t}function Nne(e){var t=vc(function(s){var i=s.config,a=s.reject;return{config:i,reject:a}}),n=kne("".concat(t.config.paths.vs,"/loader.js"));return n.onload=function(){return e()},n.onerror=t.reject,n}function Cne(){var e=vc(function(n){var s=n.config,i=n.resolve,a=n.reject;return{config:s,resolve:i,reject:a}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(n){iC(n),e.resolve(n)},function(n){e.reject(n)})}function iC(e){vc().monaco||Qh({monaco:e})}function Sne(){return vc(function(e){var t=e.monaco;return t})}var wf=new Promise(function(e,t){return Qh({resolve:e,reject:t})}),aC={config:vne,init:wne,__getMonacoInstance:Sne},Ene={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},jf=Ene,Tne={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Ine=Tne;function Pne({children:e}){return Fe.createElement("div",{style:Ine.container},e)}var Ane=Pne,Rne=Ane;function Lne({width:e,height:t,isEditorReady:n,loading:s,_ref:i,className:a,wrapperProps:o}){return Fe.createElement("section",{style:{...jf.wrapper,width:e,height:t},...o},!n&&Fe.createElement(Rne,null,s),Fe.createElement("div",{ref:i,style:{...jf.fullWidth,...!n&&jf.hide},className:a}))}var Mne=Lne,oC=h.memo(Mne);function Dne(e){h.useEffect(e,[])}var lC=Dne;function $ne(e,t,n=!0){let s=h.useRef(!0);h.useEffect(s.current||!n?()=>{s.current=!1}:e,t)}var Yn=$ne;function pl(){}function Ma(e,t,n,s){return One(e,s)||Bne(e,t,n,s)}function One(e,t){return e.editor.getModel(cC(e,t))}function Bne(e,t,n,s){return e.editor.createModel(t,n,s?cC(e,s):void 0)}function cC(e,t){return e.Uri.parse(t)}function _ne({original:e,modified:t,language:n,originalLanguage:s,modifiedLanguage:i,originalModelPath:a,modifiedModelPath:o,keepCurrentOriginalModel:l=!1,keepCurrentModifiedModel:c=!1,theme:d="light",loading:u="Loading...",options:m={},height:f="100%",width:p="100%",className:x,wrapperProps:g={},beforeMount:b=pl,onMount:w=pl}){let[k,v]=h.useState(!1),[N,C]=h.useState(!0),T=h.useRef(null),E=h.useRef(null),P=h.useRef(null),R=h.useRef(w),y=h.useRef(b),O=h.useRef(!1);lC(()=>{let M=aC.init();return M.then(z=>(E.current=z)&&C(!1)).catch(z=>(z==null?void 0:z.type)!=="cancelation"&&console.error("Monaco initialization: error:",z)),()=>T.current?A():M.cancel()}),Yn(()=>{if(T.current&&E.current){let M=T.current.getOriginalEditor(),z=Ma(E.current,e||"",s||n||"text",a||"");z!==M.getModel()&&M.setModel(z)}},[a],k),Yn(()=>{if(T.current&&E.current){let M=T.current.getModifiedEditor(),z=Ma(E.current,t||"",i||n||"text",o||"");z!==M.getModel()&&M.setModel(z)}},[o],k),Yn(()=>{let M=T.current.getModifiedEditor();M.getOption(E.current.editor.EditorOption.readOnly)?M.setValue(t||""):t!==M.getValue()&&(M.executeEdits("",[{range:M.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),M.pushUndoStop())},[t],k),Yn(()=>{var M,z;(z=(M=T.current)==null?void 0:M.getModel())==null||z.original.setValue(e||"")},[e],k),Yn(()=>{let{original:M,modified:z}=T.current.getModel();E.current.editor.setModelLanguage(M,s||n||"text"),E.current.editor.setModelLanguage(z,i||n||"text")},[n,s,i],k),Yn(()=>{var M;(M=E.current)==null||M.editor.setTheme(d)},[d],k),Yn(()=>{var M;(M=T.current)==null||M.updateOptions(m)},[m],k);let _=h.useCallback(()=>{var ie;if(!E.current)return;y.current(E.current);let M=Ma(E.current,e||"",s||n||"text",a||""),z=Ma(E.current,t||"",i||n||"text",o||"");(ie=T.current)==null||ie.setModel({original:M,modified:z})},[n,t,i,e,s,a,o]),L=h.useCallback(()=>{var M;!O.current&&P.current&&(T.current=E.current.editor.createDiffEditor(P.current,{automaticLayout:!0,...m}),_(),(M=E.current)==null||M.editor.setTheme(d),v(!0),O.current=!0)},[m,d,_]);h.useEffect(()=>{k&&R.current(T.current,E.current)},[k]),h.useEffect(()=>{!N&&!k&&L()},[N,k,L]);function A(){var z,ie,X,te;let M=(z=T.current)==null?void 0:z.getModel();l||((ie=M==null?void 0:M.original)==null||ie.dispose()),c||((X=M==null?void 0:M.modified)==null||X.dispose()),(te=T.current)==null||te.dispose()}return Fe.createElement(oC,{width:p,height:f,isEditorReady:k,loading:u,_ref:P,className:x,wrapperProps:g})}var Fne=_ne;h.memo(Fne);function zne(e){let t=h.useRef();return h.useEffect(()=>{t.current=e},[e]),t.current}var Une=zne,Qc=new Map;function Vne({defaultValue:e,defaultLanguage:t,defaultPath:n,value:s,language:i,path:a,theme:o="light",line:l,loading:c="Loading...",options:d={},overrideServices:u={},saveViewState:m=!0,keepCurrentModel:f=!1,width:p="100%",height:x="100%",className:g,wrapperProps:b={},beforeMount:w=pl,onMount:k=pl,onChange:v,onValidate:N=pl}){let[C,T]=h.useState(!1),[E,P]=h.useState(!0),R=h.useRef(null),y=h.useRef(null),O=h.useRef(null),_=h.useRef(k),L=h.useRef(w),A=h.useRef(),M=h.useRef(s),z=Une(a),ie=h.useRef(!1),X=h.useRef(!1);lC(()=>{let H=aC.init();return H.then(K=>(R.current=K)&&P(!1)).catch(K=>(K==null?void 0:K.type)!=="cancelation"&&console.error("Monaco initialization: error:",K)),()=>y.current?B():H.cancel()}),Yn(()=>{var K,$,me,ke;let H=Ma(R.current,e||s||"",t||i||"",a||n||"");H!==((K=y.current)==null?void 0:K.getModel())&&(m&&Qc.set(z,($=y.current)==null?void 0:$.saveViewState()),(me=y.current)==null||me.setModel(H),m&&((ke=y.current)==null||ke.restoreViewState(Qc.get(a))))},[a],C),Yn(()=>{var H;(H=y.current)==null||H.updateOptions(d)},[d],C),Yn(()=>{!y.current||s===void 0||(y.current.getOption(R.current.editor.EditorOption.readOnly)?y.current.setValue(s):s!==y.current.getValue()&&(X.current=!0,y.current.executeEdits("",[{range:y.current.getModel().getFullModelRange(),text:s,forceMoveMarkers:!0}]),y.current.pushUndoStop(),X.current=!1))},[s],C),Yn(()=>{var K,$;let H=(K=y.current)==null?void 0:K.getModel();H&&i&&(($=R.current)==null||$.editor.setModelLanguage(H,i))},[i],C),Yn(()=>{var H;l!==void 0&&((H=y.current)==null||H.revealLine(l))},[l],C),Yn(()=>{var H;(H=R.current)==null||H.editor.setTheme(o)},[o],C);let te=h.useCallback(()=>{var H;if(!(!O.current||!R.current)&&!ie.current){L.current(R.current);let K=a||n,$=Ma(R.current,s||e||"",t||i||"",K||"");y.current=(H=R.current)==null?void 0:H.editor.create(O.current,{model:$,automaticLayout:!0,...d},u),m&&y.current.restoreViewState(Qc.get(K)),R.current.editor.setTheme(o),l!==void 0&&y.current.revealLine(l),T(!0),ie.current=!0}},[e,t,n,s,i,a,d,u,m,o,l]);h.useEffect(()=>{C&&_.current(y.current,R.current)},[C]),h.useEffect(()=>{!E&&!C&&te()},[E,C,te]),M.current=s,h.useEffect(()=>{var H,K;C&&v&&((H=A.current)==null||H.dispose(),A.current=(K=y.current)==null?void 0:K.onDidChangeModelContent($=>{X.current||v(y.current.getValue(),$)}))},[C,v]),h.useEffect(()=>{if(C){let H=R.current.editor.onDidChangeMarkers(K=>{var me;let $=(me=y.current.getModel())==null?void 0:me.uri;if($&&K.find(ke=>ke.path===$.path)){let ke=R.current.editor.getModelMarkers({resource:$});N==null||N(ke)}});return()=>{H==null||H.dispose()}}return()=>{}},[C,N]);function B(){var H,K;(H=A.current)==null||H.dispose(),f?m&&Qc.set(a,y.current.saveViewState()):(K=y.current.getModel())==null||K.dispose(),y.current.dispose()}return Fe.createElement(oC,{width:p,height:x,isEditorReady:C,loading:c,_ref:O,className:g,wrapperProps:b})}var Hne=Vne,Wne=h.memo(Hne),qne=Wne;const Kne=()=>{const{competitionId:e,problemId:t}=or(),n=St(),[s,i]=h.useState(null),[a,o]=h.useState([]),[l,c]=h.useState([]),[d,u]=h.useState(!0),[m,f]=h.useState(!1),[p,x]=h.useState(""),[g,b]=h.useState("cpp"),[w,k]=h.useState("problem"),[v,N]=h.useState(null),[C,T]=h.useState(null),E=h.useRef(null),P=C!==null,R=v?"500px":"700px",y=[{id:"cpp",name:"C++",extension:"cpp"},{id:"c",name:"C",extension:"c"},{id:"java",name:"Java",extension:"java"},{id:"python",name:"Python",extension:"py"},{id:"javascript",name:"JavaScript",extension:"js"}],O={cpp:`#include <iostream>
using namespace std;

int main() {
    // Viết code của bạn tại đây
    
    return 0;
}`,c:`#include <stdio.h>

int main() {
    // Viết code của bạn tại đây
    
    return 0;
}`,java:`import java.util.*;

public class Main {
    public static void main(String[] args) {
        // Viết code của bạn tại đây
    }
}`,python:`# Viết code của bạn tại đây
`,javascript:`// Viết code của bạn tại đây
`};h.useEffect(()=>{(async()=>{try{const te=await Ad(e);te.success&&te.data.problems?o(te.data.problems):console.error("Không thể tải danh sách bài tập")}catch(te){console.error("Lỗi khi tải chi tiết cuộc thi:",te)}})()},[e]),h.useEffect(()=>{(async()=>{try{u(!0);const te=await gw(e,t);if(!te.success){if(te.isAuthError){re.error("Vui lòng đăng nhập để xem chi tiết bài tập"),n("/login",{state:{from:`/competitions/${e}/problems/${t}`}}),u(!1);return}if(te.isPermissionError){re.error(te.message||"Bạn không có quyền xem bài tập này"),u(!1);return}if(te.isServerError){re.error(te.message||"Lỗi máy chủ xảy ra"),u(!1);return}re.error(te.message||"Không thể tải chi tiết bài tập"),u(!1);return}i(te.data),te.userSubmissions&&c(te.userSubmissions),te.data.StarterCode?x(te.data.StarterCode):x(O[g]);try{if(te.data.TestCasesVisible)try{const B=JSON.parse(te.data.TestCasesVisible);te.data.TestCasesVisible=Array.isArray(B)?B:[]}catch(B){console.error("Lỗi phân tích test case hiển thị:",B),te.data.TestCasesVisible=[]}}catch(B){console.error("Lỗi xử lý test case:",B),te.data.TestCasesVisible=[]}}catch(te){console.error("Lỗi khi tải chi tiết bài tập:",te),re.error("Đã xảy ra lỗi khi tải chi tiết bài tập")}finally{u(!1)}})()},[e,t,g,n]);const _=X=>{const te=X.target.value;b(te),(!p||p===O[g])&&x(O[te])},L=(X,te)=>{E.current=X},A=async()=>{var X,te;if(!p.trim()){re.warning("Vui lòng viết code trước khi nộp bài");return}try{f(!0),N(null);let B=await xw(e,t,p,g);if(!B.success&&B.message&&B.message.toLowerCase().includes("not started")){console.warn('Detected "not started" error, attempting to start competition automatically...');const H=await tC(e);H.success?(console.log("Competition started programmatically. Retrying submission..."),B=await xw(e,t,p,g)):re.error(H.message||"Không thể bắt đầu cuộc thi.")}if(B.success){re.success("Nộp bài thành công");let H="pending",K=0;const $=10,me=2e3,ke=async()=>{var ye;try{K++,console.log(`Kiểm tra trạng thái bài nộp (lần ${K}/${$})...`);const se=await gw(e,t);if(se.isServerError){re.error(se.message||"Lỗi máy chủ xảy ra"),f(!1);return}if(!se.success){re.error(se.message||"Không thể kiểm tra trạng thái bài nộp"),f(!1);return}const G=(ye=se.userSubmissions)==null?void 0:ye[0];if(!G){console.error("Không tìm thấy bài nộp nào sau khi gửi code"),f(!1);return}console.log("Trạng thái bài nộp mới nhất:",G.Status),H=G.Status.toLowerCase(),c(se.userSubmissions||[]),["pending","running","compiling"].includes(H)&&K<$?setTimeout(ke,me):(f(!1),H==="accepted"?re.success("Bài làm được chấp nhận! 🎉"):H==="wrong_answer"?re.error("Sai đáp án. Hãy thử lại!"):H==="compilation_error"?re.error("Lỗi biên dịch. Kiểm tra cú pháp code của bạn."):H==="runtime_error"?re.error("Lỗi thực thi. Kiểm tra logic code của bạn."):H==="time_limit_exceeded"?re.error("Quá thời gian giới hạn. Hãy tối ưu giải pháp của bạn."):H==="memory_limit_exceeded"?re.error("Quá bộ nhớ giới hạn. Hãy tối ưu giải pháp của bạn."):re.error("Đã xảy ra lỗi khi chấm bài của bạn."),N({status:H,message:G.ErrorMessage||null,score:G.Score,executionTime:G.ExecutionTime,memoryUsed:G.MemoryUsed}))}catch(se){console.error("Lỗi khi kiểm tra trạng thái bài nộp:",se),f(!1),re.error("Không thể kiểm tra trạng thái bài nộp")}};setTimeout(ke,1e3)}else re.error(B.message||"Nộp bài không thành công"),f(!1)}catch(B){console.error("Lỗi khi nộp code:",B),re.error(((te=(X=B.response)==null?void 0:X.data)==null?void 0:te.message)||"Lỗi khi nộp code"),f(!1)}},M=async X=>{try{const te=await Bte(X);te.success?(T(te.data),k("submissions")):re.error("Không thể tải chi tiết bài nộp")}catch(te){console.error("Lỗi khi tải chi tiết bài nộp:",te),re.error("Lỗi khi tải chi tiết bài nộp")}},z=X=>{switch(X){case"accepted":return r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:"Đạt"});case"wrong_answer":return r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800",children:"Sai đáp án"});case"compilation_error":return r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800",children:"Lỗi biên dịch"});case"runtime_error":return r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-orange-100 text-orange-800",children:"Lỗi thực thi"});case"time_limit_exceeded":return r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800",children:"Quá thời gian"});case"memory_limit_exceeded":return r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-indigo-100 text-indigo-800",children:"Quá bộ nhớ"});case"pending":case"running":case"compiling":return r.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 flex items-center",children:[r.jsxs("svg",{className:"w-3 h-3 mr-1 animate-spin",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),X==="pending"?"Đang chờ":X==="running"?"Đang chạy":"Đang biên dịch"]});default:return r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800",children:X})}},ie=X=>{try{return X?Yr(new Date(X),"HH:mm:ss dd/MM/yyyy"):"-"}catch{return"Ngày không hợp lệ"}};return d?r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"flex justify-center items-center py-32",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})}):s?r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("div",{className:"mb-4",children:r.jsx(Ve,{to:`/competitions/${e}`,className:"text-blue-600 hover:text-blue-800",children:"← Quay lại cuộc thi"})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[r.jsxs("div",{className:"lg:col-span-4 bg-white rounded-lg shadow-md overflow-hidden",children:[r.jsxs("div",{className:"flex border-b",children:[r.jsx("button",{className:`flex-1 py-3 px-4 text-center ${w==="problem"?"border-b-2 border-blue-500 font-medium text-blue-600":"text-gray-600 hover:text-gray-800"}`,onClick:()=>k("problem"),children:"Đề bài"}),r.jsx("button",{className:`flex-1 py-3 px-4 text-center ${w==="submissions"?"border-b-2 border-blue-500 font-medium text-blue-600":"text-gray-600 hover:text-gray-800"}`,onClick:()=>k("submissions"),children:"Bài nộp"})]}),r.jsx("div",{className:"p-4 overflow-auto",style:{maxHeight:"calc(100vh - 250px)"},children:w==="problem"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsx("h1",{className:"text-2xl font-bold",children:s.Title}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:`px-2 py-1 rounded-md text-xs font-medium ${s.Difficulty==="Dễ"?"bg-green-100 text-green-800":s.Difficulty==="Trung bình"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.Difficulty}),r.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:[s.Points," điểm"]})]})]}),r.jsxs("div",{className:"mb-6 border-b pb-4",children:[r.jsx("h3",{className:"text-md font-semibold mb-2",children:"Danh sách bài tập"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:a&&a.map(X=>r.jsx("button",{onClick:()=>X.ProblemID!==parseInt(t)&&n(`/competitions/${e}/problems/${X.ProblemID}`),className:`px-3 py-1 text-sm rounded-full ${X.ProblemID===parseInt(t)?"bg-blue-600 text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:X.Title},X.ProblemID))})]}),r.jsxs("div",{className:"prose max-w-none",children:[r.jsx("div",{className:"mb-6",children:r.jsx("p",{children:s.Description})}),s.InputFormat&&r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Định dạng đầu vào"}),r.jsx("p",{children:s.InputFormat})]}),s.OutputFormat&&r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Định dạng đầu ra"}),r.jsx("p",{children:s.OutputFormat})]}),s.Constraints&&r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Ràng buộc"}),r.jsx("p",{children:s.Constraints})]}),(s.SampleInput||s.SampleOutput)&&r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Ví dụ"}),r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[s.SampleInput&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Đầu vào mẫu"}),r.jsx("pre",{className:"bg-gray-50 p-3 rounded-md text-sm overflow-x-auto",children:s.SampleInput})]}),s.SampleOutput&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Đầu ra mẫu"}),r.jsx("pre",{className:"bg-gray-50 p-3 rounded-md text-sm overflow-x-auto",children:s.SampleOutput})]})]})]}),s.Explanation&&r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Giải thích"}),r.jsx("p",{children:s.Explanation})]}),s.TestCasesVisible&&s.TestCasesVisible.length>0&&r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Test Case"}),r.jsx("div",{className:"space-y-4",children:s.TestCasesVisible.map((X,te)=>r.jsx("div",{className:"border rounded-md p-4",children:r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Đầu vào"}),r.jsx("pre",{className:"bg-gray-50 p-3 rounded-md text-sm overflow-x-auto",children:X.input})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium mb-2",children:"Đầu ra mong đợi"}),r.jsx("pre",{className:"bg-gray-50 p-3 rounded-md text-sm overflow-x-auto",children:X.output})]})]})},te))})]})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Bài nộp của bạn"}),C?r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Tt,{src:C.UserImage,alt:C.UserName||"Người dùng",name:C.UserName||"Người dùng",size:"small",className:"mr-3"}),r.jsxs("h3",{className:"text-lg font-semibold",children:["Bài nộp #",C.SubmissionID]})]}),r.jsx("button",{onClick:()=>T(null),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Quay lại danh sách"})]}),r.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Trạng thái:"}),r.jsx("div",{className:"mt-1",children:z(C.Status)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Điểm:"}),r.jsxs("div",{className:"mt-1 font-medium",children:[C.Score," điểm"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Thời gian:"}),r.jsx("div",{className:"mt-1",children:C.ExecutionTime?`${C.ExecutionTime} giây`:"-"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Bộ nhớ:"}),r.jsx("div",{className:"mt-1",children:C.MemoryUsed?`${C.MemoryUsed} KB`:"-"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Ngôn ngữ:"}),r.jsx("div",{className:"mt-1",children:C.Language})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Thời gian nộp:"}),r.jsx("div",{className:"mt-1",children:ie(C.SubmittedAt)})]})]}),C.ErrorMessage&&r.jsxs("div",{className:"mb-4",children:[r.jsx("h4",{className:"text-sm font-medium text-red-600 mb-2",children:"Lỗi:"}),r.jsx("pre",{className:"bg-red-50 p-3 rounded-md text-sm overflow-x-auto whitespace-pre-wrap text-red-700",children:C.ErrorMessage})]})]}):l.length===0?r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-gray-500",children:"Chưa có bài nộp"})}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trạng thái"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Điểm"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ngôn ngữ"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Thời gian"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bộ nhớ"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Đã nộp"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(X=>r.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>M(X.SubmissionID),children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Tt,{src:X.UserImage,alt:X.UserName||"Người dùng",name:X.UserName||"Người dùng",size:"small",className:"mr-2"}),X.SubmissionID]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:z(X.Status)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:X.Score}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:X.Language}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:X.ExecutionTime?`${X.ExecutionTime} s`:"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:X.MemoryUsed?`${X.MemoryUsed} KB`:"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ie(X.SubmittedAt)})]},X.SubmissionID))})]})})]})})]}),r.jsxs("div",{className:"lg:col-span-8 bg-white rounded-lg shadow-md overflow-hidden",children:[r.jsxs("div",{className:"border-b px-4 py-3 flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("label",{htmlFor:"language",className:"text-sm font-medium text-gray-700",children:"Ngôn ngữ:"}),r.jsx("select",{id:"language",value:P?C.Language:g,onChange:_,disabled:P,className:"block w-32 pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed",children:y.map(X=>r.jsx("option",{value:X.id,children:X.name},X.id))})]}),r.jsx("button",{onClick:A,disabled:m||P,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white ${m?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:m?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Đang nộp..."]}):"Nộp bài"})]}),r.jsx("div",{className:"border-b",children:r.jsx(qne,{height:R,language:P?C.Language:g,value:P?C.SourceCode:p,onChange:P?void 0:x,onMount:L,options:{readOnly:P,minimap:{enabled:!1},scrollBeyondLastLine:!1,fontSize:14}})}),v&&r.jsxs("div",{className:"p-4",style:{marginTop:"-10px"},children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Kết quả"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-sm font-medium mr-2",children:"Trạng thái:"}),z(v.status)]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-sm font-medium mr-2",children:"Điểm:"}),r.jsxs("span",{className:"text-sm font-medium",children:[v.score," / ",s.Points]})]}),v.executionTime&&r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium mr-2",children:"Thời gian thực thi:"}),r.jsxs("span",{className:"text-sm",children:[v.executionTime," giây"]})]}),v.memoryUsed&&r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium mr-2",children:"Bộ nhớ sử dụng:"}),r.jsxs("span",{className:"text-sm",children:[v.memoryUsed," KB"]})]}),v.message&&r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium text-red-600 mb-1 block",children:"Lỗi:"}),r.jsx("pre",{className:"bg-red-50 p-3 rounded-md text-sm overflow-x-auto whitespace-pre-wrap text-red-700",children:v.message}),v.message.includes("Outputs differ")&&v.diffInfo&&r.jsxs("div",{className:"mt-2 border-t border-red-200 pt-2",children:[r.jsx("h4",{className:"text-sm font-medium text-red-600 mb-1",children:"Chi tiết lỗi so sánh:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-medium text-red-700 mb-1",children:"Kết quả mong đợi:"}),r.jsx("pre",{className:"bg-green-50 p-2 rounded-md text-xs overflow-x-auto whitespace-pre-wrap text-green-800",children:v.diffInfo.expectedContext})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-medium text-red-700 mb-1",children:"Kết quả của bạn:"}),r.jsx("pre",{className:"bg-red-50 p-2 rounded-md text-xs overflow-x-auto whitespace-pre-wrap text-red-800",children:v.diffInfo.actualContext})]})]})]})]})]})]})]})]})]}):r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("div",{className:"bg-red-100 text-red-700 p-4 rounded-md",children:"Không tìm thấy bài tập"}),r.jsx("div",{className:"mt-4",children:r.jsx(Ve,{to:`/competitions/${e}`,className:"text-blue-600 hover:text-blue-800",children:"← Quay lại cuộc thi"})})]})},Gne=()=>{var N;const{transactionCode:e}=or(),t=St(),s=lr().state||{},{vietQRData:i,courseId:a}=s,[o,l]=h.useState(i),[c,d]=h.useState(!1),[u,m]=h.useState(null),[f,p]=h.useState(!0);if(h.useEffect(()=>{o||(re.error("Không tìm thấy dữ liệu giao dịch. Vui lòng tạo QR lại."),t(-1))},[o,t]),h.useEffect(()=>{(async()=>{if(!a){p(!1);return}try{const T=await bt.getCourseDetails(a);T.success&&T.data&&m(T.data)}catch(T){console.error("Error fetching course details:",T)}finally{p(!1)}})()},[a]),!o)return null;const x="9999991909",g="MBBANK",b="MB",w="NGUYEN DUC QUYEN",k=`https://img.vietqr.io/image/${b}-${x}-compact.png?amount=${o.amount}&addInfo=${o.description}`,v=C=>{if(C==null)return"0";const T=parseFloat(C);return isNaN(T)?"0":T.toLocaleString()};return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-6 flex items-center text-sm text-gray-500",children:[r.jsx(Ve,{to:"/",className:"hover:text-blue-600",children:"Trang chủ"}),r.jsx("span",{className:"mx-2",children:"/"}),r.jsx(Ve,{to:"/courses",className:"hover:text-blue-600",children:"Khóa học"}),u&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"mx-2",children:"/"}),r.jsx(Ve,{to:`/courses/${a}`,className:"hover:text-blue-600",children:u.Title})]}),r.jsx("span",{className:"mx-2",children:"/"}),r.jsx("span",{className:"text-gray-700",children:"Thanh toán VietQR"})]}),f?r.jsx(Ij,{}):r.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[r.jsx("div",{className:"md:w-1/2 lg:w-3/5",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h1",{className:"text-xl font-bold mb-4",children:"Thanh toán VietQR"}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"mb-4 w-full max-w-xs mx-auto",children:r.jsx("img",{src:k,alt:"VietQR",className:"w-64 h-64 object-contain rounded-lg shadow-sm mx-auto",onError:C=>{C.target.onerror=null,C.target.src=o.qrImageUrl}})}),r.jsxs("div",{className:"w-full bg-gray-50 p-5 rounded-lg border border-gray-200 mb-6",children:[r.jsx("h3",{className:"font-semibold mb-3 text-gray-800",children:"Thông tin chuyển khoản"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Ngân hàng:"}),r.jsx("span",{className:"font-medium",children:g})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Số tài khoản:"}),r.jsx("span",{className:"font-medium",children:x})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Tên tài khoản:"}),r.jsx("span",{className:"font-medium",children:w})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Số tiền:"}),r.jsxs("span",{className:"font-medium",children:[v(o.amount)," VND"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Nội dung:"}),r.jsx("span",{className:"font-medium",children:o.description})]})]})]})]})]})}),r.jsx("div",{className:"md:w-1/2 lg:w-2/5 mt-6 md:mt-0",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 sticky top-6",children:[r.jsx("h2",{className:"text-lg font-bold mb-4",children:"Thông tin khóa học"}),u?r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-start border-b pb-4 mb-4",children:[u.ImageUrl?r.jsx("img",{src:u.ImageUrl,alt:u.Title,className:"w-24 h-24 object-cover rounded-md mr-4",onError:C=>{C.target.onerror=null,C.target.src="https://placehold.co/600x400?text=Course+Image"}}):r.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-md mr-4 flex items-center justify-center",children:r.jsx("span",{className:"text-gray-500 text-xs",children:"Không có hình ảnh"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-lg mb-1",children:u.Title}),r.jsx("p",{className:"text-gray-600 text-sm mb-2",children:u.ShortDescription||((N=u.Description)==null?void 0:N.substring(0,100))||"Không có mô tả"}),r.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[r.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full text-xs mr-2",children:u.Level||"All Levels"}),r.jsxs("span",{children:[u.Duration||0," phút"]})]})]})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Giá gốc:"}),r.jsxs("span",{children:[v(u.Price)," VND"]})]}),u.DiscountPrice&&u.DiscountPrice<u.Price&&r.jsxs("div",{className:"flex justify-between text-green-600",children:[r.jsx("span",{children:"Giảm giá:"}),r.jsxs("span",{children:["- ",v(u.Price-u.DiscountPrice)," VND"]})]}),r.jsxs("div",{className:"flex justify-between font-bold text-lg pt-2 border-t",children:[r.jsx("span",{children:"Tổng thanh toán:"}),r.jsxs("span",{children:[v(u.DiscountPrice||u.Price)," VND"]})]})]})]}):r.jsx("div",{className:"py-4 text-center text-gray-500",children:"Không tìm thấy thông tin khóa học"}),r.jsxs("div",{className:"border-t pt-4 mt-4",children:[r.jsx("h3",{className:"font-medium text-gray-700 mb-2",children:"Bạn sẽ nhận được:"}),r.jsxs("ul",{className:"space-y-2",children:[r.jsxs("li",{className:"flex items-start",children:[r.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),r.jsx("span",{children:"Truy cập trọn đời vào khóa học"})]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),r.jsx("span",{children:"Học theo tốc độ của riêng bạn"})]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),r.jsx("span",{children:"Giấy chứng nhận hoàn thành"})]})]})]})]})})]})]})};function Xne(){return r.jsx(P2,{children:r.jsx(Bee,{children:r.jsxs(V_,{children:[r.jsx(Z2,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,className:"toast-container-custom",toastClassName:"toast-custom",style:{top:"70px"}}),r.jsx(RI,{position:"top-right",toastOptions:{style:{marginTop:"70px"}}}),r.jsx(Y4,{}),r.jsxs(Lw,{children:[r.jsx(Ut,{path:"/login",element:r.jsx(xte,{})}),r.jsx(Ut,{path:"/register",element:r.jsx(yte,{})}),r.jsx(Ut,{path:"/forgot-password",element:r.jsx(bte,{})}),r.jsx(Ut,{path:"/reset-password",element:r.jsx(vte,{})}),r.jsx(Ut,{path:"/courses/*",element:r.jsx(VH,{})}),r.jsx(Ut,{path:"/courses/:courseId",element:r.jsx(HH,{})}),r.jsx(Ut,{path:"/events/:eventId",element:r.jsx(LJ,{})}),r.jsx(Ut,{path:"/roadmaps",element:r.jsx(Ete,{})}),r.jsx(Ut,{path:"/payment/callback",element:r.jsx(xf,{})}),r.jsx(Ut,{path:"/payment/paypal/success",element:r.jsx(xf,{})}),r.jsx(Ut,{path:"/payment/paypal/cancel",element:r.jsx(xf,{})}),[{path:"/home",element:r.jsx($H,{})},{path:"/profile",element:r.jsx(cw,{})},{path:"/profile/:userId",element:r.jsx(cw,{})},{path:"/friends",element:r.jsx(Uee,{})},{path:"/events",element:r.jsx(PJ,{})},{path:"/posts",element:r.jsx(KZ,{})},{path:"/notifications",element:r.jsx(GZ,{})},{path:"/ranking",element:r.jsx(YZ,{})},{path:"/ai-chat",element:r.jsx(Pee,{})},{path:"/ai-test-local",element:r.jsx(Lte,{})},{path:"/other-courses",element:r.jsx(Ree,{})},{path:"/chat",element:r.jsx(_ee,{})},{path:"/reports",element:r.jsx(Fee,{})},{path:"/settings",element:r.jsx(pte,{})},{path:"/exams/*",element:r.jsx(Aee,{})},{path:"/competitions",element:r.jsx(_te,{})},{path:"/competitions/:id",element:r.jsx(Fte,{})},{path:"/competitions/:competitionId/problems/:problemId",element:r.jsx(Kne,{})},{path:"/courses/:courseId/learn",element:r.jsx(VQ,{})},{path:"/courses/:courseId/edit-code/:lessonId",element:r.jsx(_H,{})},{path:"/payment/:courseId",element:r.jsx(WQ,{})},{path:"/payment/vietqr/:transactionCode",element:r.jsx(Gne,{})},{path:"/payment-history",element:r.jsx(EJ,{})}].map(({path:e,element:t})=>r.jsx(Ut,{path:e,element:r.jsx(wte,{children:t})},e)),r.jsx(Ut,{path:"/stories/create",element:r.jsx(jte,{})}),r.jsx(Ut,{path:"/",element:localStorage.getItem("token")?r.jsx($o,{to:"/home",replace:!0}):r.jsx($o,{to:"/login",replace:!0})}),r.jsx(Ut,{path:"*",element:localStorage.getItem("token")?r.jsx($o,{to:"/home",replace:!0}):r.jsx($o,{to:"/login",replace:!0})}),r.jsx(Ut,{path:"/support/faq",element:r.jsx(kte,{})}),r.jsx(Ut,{path:"/support/help-center",element:r.jsx(Nte,{})}),r.jsx(Ut,{path:"/support/privacy-policy",element:r.jsx(Cte,{})}),r.jsx(Ut,{path:"/support/terms-of-use",element:r.jsx(Ste,{})})]})]})})})}window.global=window;window.process={env:{}};typeof window<"u"&&typeof window.browser>"u"&&(window.browser=window.browser||window.chrome||{},window.browser.runtime||(window.browser.runtime={sendMessage:()=>Promise.resolve({}),onMessage:{addListener:()=>{},removeListener:()=>{}}}));window.Buffer=$w.Buffer;OE();window.timer=null;window.remainingSeconds=900;window.updateTime=function(){try{if(window.remainingSeconds<=0){clearInterval(window.timer),window.timer=null;return}window.remainingSeconds--;const e=document.getElementById("minutes"),t=document.getElementById("seconds");if(e&&t){const n=Math.floor(window.remainingSeconds/60),s=window.remainingSeconds%60;e.textContent=n<10?"0"+n:n,t.textContent=s<10?"0"+s:s}}catch(e){console.warn("VNPay timer error handled:",e.message)}};window.startTimer=function(e){return window.remainingSeconds=e||900,window.timer&&clearInterval(window.timer),window.timer=setInterval(function(){typeof window.updateTime=="function"&&window.updateTime()},1e3),window.timer};window.addEventListener("error",e=>e.message&&(e.message.includes("browser is not defined")||e.message.includes("vsda")||e.message.includes("Workspace does not exist")||e.message.includes("404 (Not Found)"))?(console.warn("Suppressing VS Code/code-server error:",e.message),e.preventDefault(),!0):!1,!0);const Yne=new fJ;Nf.createRoot(document.getElementById("root")).render(r.jsx(Fe.StrictMode,{children:r.jsx(l3,{store:dj,children:r.jsx(TC,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:r.jsx(gJ,{client:Yne,children:r.jsx(VS,{children:r.jsx(FE,{children:r.jsx(P2,{children:r.jsx(Xne,{})})})})})})})}));
//# sourceMappingURL=index-CNH7jAlW.js.map
